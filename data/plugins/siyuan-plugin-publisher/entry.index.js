const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./chunks/chunk.vendor_chatgpt.js","./chunks/chunk.vendor_keyv.js","./chunks/chunk.vendor_asn1-js.js","./chunks/chunk.vendor_bn-js.js","./chunks/chunk.vendor_vite-plugin-node-polyfills.js","./chunks/chunk.vendor_inherits.js","./chunks/chunk.vendor_minimalistic-assert.js","./chunks/chunk.vendor_vm-browserify.js","./chunks/chunk.vendor_crypto-js.js","./chunks/chunk.vendor_crypto-browserify.js","./chunks/chunk.vendor_randombytes.js","./chunks/chunk.vendor_safe-buffer.js","./chunks/chunk.vendor_create-hash.js","./chunks/chunk.vendor_md5-js.js","./chunks/chunk.vendor_hash-base.js","./chunks/chunk.vendor_to-buffer.js","./chunks/chunk.vendor_isarray.js","./chunks/chunk.vendor_typed-array-buffer.js","./chunks/chunk.vendor_es-errors.js","./chunks/chunk.vendor_call-bound.js","./chunks/chunk.vendor_get-intrinsic.js","./chunks/chunk.vendor_es-object-atoms.js","./chunks/chunk.vendor_math-intrinsics.js","./chunks/chunk.vendor_gopd.js","./chunks/chunk.vendor_es-define-property.js","./chunks/chunk.vendor_has-symbols.js","./chunks/chunk.vendor_get-proto.js","./chunks/chunk.vendor_dunder-proto.js","./chunks/chunk.vendor_call-bind-apply-helpers.js","./chunks/chunk.vendor_function-bind.js","./chunks/chunk.vendor_hasown.js","./chunks/chunk.vendor_is-typed-array.js","./chunks/chunk.vendor_which-typed-array.js","./chunks/chunk.vendor_for-each.js","./chunks/chunk.vendor_is-callable.js","./chunks/chunk.vendor_available-typed-arrays.js","./chunks/chunk.vendor_possible-typed-array-names.js","./chunks/chunk.vendor_call-bind.js","./chunks/chunk.vendor_set-function-length.js","./chunks/chunk.vendor_define-data-property.js","./chunks/chunk.vendor_has-property-descriptors.js","./chunks/chunk.vendor_has-tostringtag.js","./chunks/chunk.vendor_readable-stream.js","./chunks/chunk.vendor_process-nextick-args.js","./chunks/chunk.vendor_events.js","./chunks/chunk.vendor_core-util-is.js","./chunks/chunk.vendor_util.js","./chunks/chunk.vendor_is-arguments.js","./chunks/chunk.vendor_is-generator-function.js","./chunks/chunk.vendor_safe-regex-test.js","./chunks/chunk.vendor_is-regex.js","./chunks/chunk.vendor_generator-function.js","./chunks/chunk.vendor_util-deprecate.js","./chunks/chunk.vendor_string_decoder.js","./chunks/chunk.vendor_ripemd160.js","./chunks/chunk.vendor_sha-js.js","./chunks/chunk.vendor_cipher-base.js","./chunks/chunk.vendor_stream-browserify.js","./chunks/chunk.vendor_create-hmac.js","./chunks/chunk.vendor_browserify-sign.js","./chunks/chunk.vendor_browserify-rsa.js","./chunks/chunk.vendor_elliptic.js","./chunks/chunk.vendor_minimalistic-crypto-utils.js","./chunks/chunk.vendor_brorand.js","./chunks/chunk.vendor_hash-js.js","./chunks/chunk.vendor_hmac-drbg.js","./chunks/chunk.vendor_parse-asn1.js","./chunks/chunk.vendor_evp_bytestokey.js","./chunks/chunk.vendor_browserify-aes.js","./chunks/chunk.vendor_buffer-xor.js","./chunks/chunk.vendor_pbkdf2.js","./chunks/chunk.vendor_browserify-cipher.js","./chunks/chunk.vendor_browserify-des.js","./chunks/chunk.vendor_des-js.js","./chunks/chunk.vendor_diffie-hellman.js","./chunks/chunk.vendor_miller-rabin.js","./chunks/chunk.vendor_create-ecdh.js","./chunks/chunk.vendor_public-encrypt.js","./chunks/chunk.vendor_randomfill.js","./chunks/chunk.vendor_json-buffer.js","./chunks/chunk.vendor_p-timeout.js","./chunks/chunk.vendor_quick-lru.js","./chunks/chunk.vendor_js-tiktoken.js","./chunks/chunk.vendor_base64-js.js","./chunks/chunk.vendor_eventsource-parser.js","./chunks/chunk.vendor_uuid.js"])))=>i.map(i=>d[i]);
import{l as J,m as $,o as _,bW as Il,r as Y,I as C,K as F,O as R,u,bX as Ul,Q as f,n as Pt,X as xl,F as S,bY as Ml,G as y,L as Dl,aR as Ol,M as V,bZ as $l,b_ as Vl,ah as Vi,b$ as jo,ar as ne,c as Ko,a5 as re,af as Ws,V as Ke,aC as Nl,a2 as Ks,c0 as Hl,U as st,P as ke,ak as Ie,J as as,b7 as ze,c1 as Ni,aA as bn,Z as Hi,c2 as ve,f as hs,c3 as zs,H as Li,R as wn,aS as Ll,c4 as ta,c5 as Rl,x as Zi,c6 as Gl,c7 as Bl,b4 as jl}from"./chunks/chunk.vendor.js";import{u as Kl,c as zl}from"./chunks/chunk.vendor_vue-i18n.js";import{I as Jl,L as Wl,A as Fl,v as ql,R as Yl,T as ce,P as Q,f as xe,Z as _n,H as Je,J as Qe,Q as zo,a as Ri,F as Jt,B as Fe,b as Ze,S as rs,O as Xl,z as Be,M as xt,_ as et,D as Ql,X as Zl,c as qt}from"./chunks/chunk.vendor_zhi-blog-api.js";import{P as T,Q as Ae,T as te,d as se,B as Dt,H as ie,Z as Js}from"./chunks/chunk.vendor_zhi-common.js";import{T as ss,d as It,w as je,u as Ot}from"./chunks/chunk.vendor_zhi-device.js";import{u as kt,a as tt,c as er,b as tr}from"./chunks/chunk.vendor_vue-router.js";import{w as sr}from"./chunks/chunk.vendor_zhi-lib-base.js";import{d as or,c as ar}from"./chunks/chunk.vendor_pinia.js";import{O as mt,z as _t,j as vn,V as rt}from"./chunks/chunk.vendor_zhi-siyuan-api.js";import{s as ir}from"./chunks/chunk.vendor_shorthash2.js";import{a as Pn}from"./chunks/chunk.vendor_uuid.js";import{a as Jo,B as sa}from"./chunks/chunk.vendor_vite-plugin-node-polyfills.js";import{T as Tn,B as kn,E as Sn,I as Cn}from"./chunks/chunk.vendor_simple-xmlrpc.js";import{f as nr}from"./chunks/chunk.vendor_cross-fetch.js";import{x as lr}from"./chunks/chunk.vendor_xmlbuilder2.js";import{S as rr}from"./chunks/chunk.vendor_zhi-fetch-middleware.js";import{g as $t}from"./chunks/chunk.vendor_js-base64.js";import{I as cr,S as en}from"./chunks/chunk.vendor_zhi-siyuan-picgo.js";import{E as X,a as pr,b as Gi,c as Se,d as vt,e as Ht,f as Ne,g as Bi,h as ji,i as Fs,j as Ki,k as qs,l as Ys,m as Xs,n as Ce,o as Ue,p as Wo,q as zi,r as at,s as it,t as gr,u as dr,v as En,w as An,x as nt,y as Fo,z as qo,A as In,B as Un,C as cs,D as Ji,F as ur,G as mr,H as xn,I as Mn,J as hr,K as fr,L as yr,M as br}from"./chunks/chunk.vendor_element-plus.js";import{p as oa}from"./chunks/chunk.vendor_path-browserify.js";import{q as Pe,u as wr,r as _r}from"./chunks/chunk.vendor_lodash-es.js";import{C as fi,U as tn,B as sn}from"./chunks/chunk.vendor_crypto-js.js";import{l as is}from"./chunks/chunk.vendor_cheerio.js";import{D as Dn}from"./chunks/chunk.vendor_zhi-notion-markdown.js";import{Z as vr,Y as Pr}from"./chunks/chunk.vendor_zhi-github-middleware.js";import{D as Tr}from"./chunks/chunk.vendor_zhi-gitlab-middleware.js";import{k as kr}from"./chunks/chunk.vendor_katex.js";import{c as Sr}from"./chunks/chunk.vendor_cookie-parse.js";import{m as on}from"./chunks/chunk.vendor_telegraph-md.js";import{i as Cr}from"./chunks/chunk.vendor_iframe-resizer.js";import"./chunks/chunk.vendor_asn1-js.js";import"./chunks/chunk.vendor_bn-js.js";import"./chunks/chunk.vendor_inherits.js";import"./chunks/chunk.vendor_minimalistic-assert.js";import"./chunks/chunk.vendor_vm-browserify.js";import"./chunks/chunk.vendor_dayjs.js";import"./chunks/chunk.vendor_async-validator.js";import"./chunks/chunk.vendor_normalize-wheel-es.js";import"./chunks/chunk.vendor_crypto-browserify.js";import"./chunks/chunk.vendor_randombytes.js";import"./chunks/chunk.vendor_safe-buffer.js";import"./chunks/chunk.vendor_create-hash.js";import"./chunks/chunk.vendor_md5-js.js";import"./chunks/chunk.vendor_hash-base.js";import"./chunks/chunk.vendor_to-buffer.js";import"./chunks/chunk.vendor_isarray.js";import"./chunks/chunk.vendor_typed-array-buffer.js";import"./chunks/chunk.vendor_es-errors.js";import"./chunks/chunk.vendor_call-bound.js";import"./chunks/chunk.vendor_get-intrinsic.js";import"./chunks/chunk.vendor_es-object-atoms.js";import"./chunks/chunk.vendor_math-intrinsics.js";import"./chunks/chunk.vendor_gopd.js";import"./chunks/chunk.vendor_es-define-property.js";import"./chunks/chunk.vendor_has-symbols.js";import"./chunks/chunk.vendor_get-proto.js";import"./chunks/chunk.vendor_dunder-proto.js";import"./chunks/chunk.vendor_call-bind-apply-helpers.js";import"./chunks/chunk.vendor_function-bind.js";import"./chunks/chunk.vendor_hasown.js";import"./chunks/chunk.vendor_is-typed-array.js";import"./chunks/chunk.vendor_which-typed-array.js";import"./chunks/chunk.vendor_for-each.js";import"./chunks/chunk.vendor_is-callable.js";import"./chunks/chunk.vendor_available-typed-arrays.js";import"./chunks/chunk.vendor_possible-typed-array-names.js";import"./chunks/chunk.vendor_call-bind.js";import"./chunks/chunk.vendor_set-function-length.js";import"./chunks/chunk.vendor_define-data-property.js";import"./chunks/chunk.vendor_has-property-descriptors.js";import"./chunks/chunk.vendor_has-tostringtag.js";import"./chunks/chunk.vendor_readable-stream.js";import"./chunks/chunk.vendor_process-nextick-args.js";import"./chunks/chunk.vendor_events.js";import"./chunks/chunk.vendor_core-util-is.js";import"./chunks/chunk.vendor_util.js";import"./chunks/chunk.vendor_is-arguments.js";import"./chunks/chunk.vendor_is-generator-function.js";import"./chunks/chunk.vendor_safe-regex-test.js";import"./chunks/chunk.vendor_is-regex.js";import"./chunks/chunk.vendor_generator-function.js";import"./chunks/chunk.vendor_util-deprecate.js";import"./chunks/chunk.vendor_string_decoder.js";import"./chunks/chunk.vendor_ripemd160.js";import"./chunks/chunk.vendor_sha-js.js";import"./chunks/chunk.vendor_cipher-base.js";import"./chunks/chunk.vendor_stream-browserify.js";import"./chunks/chunk.vendor_create-hmac.js";import"./chunks/chunk.vendor_browserify-sign.js";import"./chunks/chunk.vendor_browserify-rsa.js";import"./chunks/chunk.vendor_elliptic.js";import"./chunks/chunk.vendor_minimalistic-crypto-utils.js";import"./chunks/chunk.vendor_brorand.js";import"./chunks/chunk.vendor_hash-js.js";import"./chunks/chunk.vendor_hmac-drbg.js";import"./chunks/chunk.vendor_parse-asn1.js";import"./chunks/chunk.vendor_evp_bytestokey.js";import"./chunks/chunk.vendor_browserify-aes.js";import"./chunks/chunk.vendor_buffer-xor.js";import"./chunks/chunk.vendor_pbkdf2.js";import"./chunks/chunk.vendor_browserify-cipher.js";import"./chunks/chunk.vendor_browserify-des.js";import"./chunks/chunk.vendor_des-js.js";import"./chunks/chunk.vendor_diffie-hellman.js";import"./chunks/chunk.vendor_miller-rabin.js";import"./chunks/chunk.vendor_create-ecdh.js";import"./chunks/chunk.vendor_public-encrypt.js";import"./chunks/chunk.vendor_randomfill.js";import"./chunks/chunk.vendor_domelementtype.js";import"./chunks/chunk.vendor_parse5.js";import"./chunks/chunk.vendor_entities.js";import"./chunks/chunk.vendor_parse5-htmlparser2-tree-adapter.js";import"./chunks/chunk.vendor_domhandler.js";import"./chunks/chunk.vendor_dom-serializer.js";import"./chunks/chunk.vendor_htmlparser2.js";import"./chunks/chunk.vendor_domutils.js";import"./chunks/chunk.vendor_cheerio-select.js";import"./chunks/chunk.vendor_css-select.js";import"./chunks/chunk.vendor_boolbase.js";import"./chunks/chunk.vendor_css-what.js";import"./chunks/chunk.vendor_nth-check.js";import"./chunks/chunk.vendor_commonmark.js";import"./chunks/chunk.vendor_mdurl.js";import"./chunks/chunk.vendor_string-prototype-repeat.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();var On={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/"};const Vt=On.DEV_MODE==="true",Wi=On.APP_BASE,Er="https://terwer.space/about",Me="dynamic-config",Mt="[auto]",Ar=10,Ir="https://api.terwer.space/api",fe="https://api.terwer.space/api/middleware",L=p=>sr(p,"picgo-plugin-app"),Z=()=>{const{messages:p,locale:e}=Kl();return{t:o=>(p.value?.[e.value])[o]||o,locale:e}},Ur={class:"header-default"},xr=J({__name:"DefaultHeader",setup(p){return Z(),(e,t)=>(_(),$("div",Ur))}}),$n="1.40.0",Mr={"@element-plus/icons-vue":"^2.3.2","@iconify/json":"^2.2.408","@vueuse/components":"^14.0.0","@vueuse/core":"^14.0.0",chatgpt:"^5.2.5",cheerio:"^1.1.2","cookie-parse":"^0.4.0","cross-fetch":"3.1.8","crypto-js":"^4.2.0","element-plus":"^2.11.8","iframe-resizer":"^5.5.7","js-base64":"^3.7.8",katex:"^0.16.25","lodash-es":"^4.17.21",pinia:"^3.0.4",shorthash2:"^1.0.5","simple-xmlrpc":"^1.4.2",siyuan:"^1.1.5","telegraph.md":"^0.0.1","unplugin-icons":"^22.5.0",uuid:"^13.0.0",vue:"^3.5.24","vue-i18n":"^11.1.12","vue-router":"^4.6.3",xmlbuilder2:"3.1.1","zhi-blog-api":"^1.74.2","zhi-common":"^1.35.0","zhi-device":"^2.12.0","zhi-fetch-middleware":"^0.13.5","zhi-github-middleware":"^0.5.4","zhi-gitlab-middleware":"^0.12.4","zhi-lib-base":"^0.8.0","zhi-notion-markdown":"^0.1.4","zhi-siyuan-api":"^2.29.3","zhi-siyuan-picgo":"^1.12.1","zhi-xmlrpc-middleware":"^0.6.26"},Dr={version:$n};class A{static logger=L("publisher-widget-utils");static blogApi(e,t){if(!t)throw new Error("apiAdaptor cannot be null");if(!t.getUsersBlogs)throw this.logger.error("apiAdaptor must implements BlogApi",t),new Error(`apiAdaptor must implements BlogApi => ${this.getObjectName(t)}`);return new Jl(t)}static webApi(e,t){if(!t)throw new Error("webAdaptor cannot be null");if(!t.getMetaData)throw this.logger.error("webAdaptor must implements WebApi",t),new Error(`webAdaptor must implements WebApi => ${this.getObjectName(t)}`);return new Wl(t)}static getObjectName(e){try{return typeof e=="function"&&/^class\s/.test(e.toString())?e.name:typeof e=="function"?e.name||"anonymous function":typeof e=="object"&&Object.values(e.constructor).includes(e)?Object.keys(e.constructor)[Object.values(e.constructor).indexOf(e)]:typeof e!="object"?e:"{}"}catch(t){return console.error(t),"{}"}}static emptyOrDefault(e,t){return typeof e=="string"&&(e=e.trim()),T.isEmptyString(e)?t:e}static emptyBooleanOrDefault(e,t){return typeof e>"u"?t:e}}const pt=()=>({isInSiyuanMainWin:()=>ss.getDevice()===It.DeviceType_Siyuan_MainWin,isInSiyuanWidget:()=>ss.getDevice()===It.DeviceType_Siyuan_Widget,isInSiyuanBrowser:()=>ss.getDevice()===It.DeviceType_Siyuan_Browser,isInChromeExtension:()=>ss.getDevice()===It.DeviceType_Chrome_Extension,isInSiyuanOrSiyuanNewWin:()=>{const i=ss.getDevice();return i===It.DeviceType_Siyuan_MainWin||i===It.DeviceType_Siyuan_RendererWin||i===It.DeviceType_Siyuan_Widget},isInSiyuanWin:()=>{const i=ss.getDevice();return i===It.DeviceType_Siyuan_MainWin||i===It.DeviceType_Siyuan_RendererWin}}),Or={class:"footer"},$r={class:"text"},Vr={key:0,class:"text"},Nr={key:2,class:"text"},Hr=J({__name:"DefaultFooter",setup(p){const{t:e}=Z(),t=Il(),o=Ul(t),{isInChromeExtension:s}=pt(),a=s(),i=Y(Dr.version),n=Ae.nowYear(),l=kt(),c=()=>{window.open("https://github.com/terwer/siyuan-plugin-publisher")},r=async()=>{await l.push({path:"/"})},m=async()=>{await l.push({path:"/about",query:{showBack:"true"}})},w=()=>{l.push({path:"/test"})},d=()=>{const P=chrome.runtime.getURL("/index.html#/");window.open(P)},g=async()=>{await l.push({path:"/setting/publish",query:{showBack:"true"}})},v=async()=>{await l.push({path:"/setting/general",query:{showBack:"true"}})},h=async()=>{await l.push({path:"/test",query:{showBack:"true"}})};return(b,P)=>(_(),$("div",null,[C("div",Or,[C("div",null,[C("span",$r," Â©2011-"+R(u(n)),1),C("span",{class:"text s-dark",onClick:P[0]||(P[0]=k=>c())},"Â siyuan-plugin-publisherÂ "),C("span",{class:"text",onClick:w},"v"+R(i.value)+"Â ",1),C("span",{class:"text s-dark",onClick:P[1]||(P[1]=k=>m())},R(u(e)("syp.about")),1),P[4]||(P[4]=C("span",{class:"text"},".",-1)),C("span",{class:"text s-dark",onClick:r},R(u(e)("service.tab.manage")),1),P[5]||(P[5]=C("span",{class:"text"},".",-1)),C("span",{class:"text s-dark",onClick:P[2]||(P[2]=k=>u(o)())},R(u(t)?u(e)("theme.mode.light"):u(e)("theme.mode.dark")),1),P[6]||(P[6]=C("span",{class:"text"},".",-1)),C("span",{class:"text s-dark",onClick:g},R(u(e)("service.tab.publish.setting")),1),P[7]||(P[7]=C("span",{class:"text"},".",-1)),C("span",{class:"text s-dark",onClick:v},R(u(e)("service.tab.change.local")),1),u(Vt)?(_(),$("span",Vr,".")):F("",!0),u(Vt)?(_(),$("span",{key:1,class:"text s-dark",onClick:h}," ç»„ä»¶æµ‹è¯• ")):F("",!0),u(a)?(_(),$("span",Nr,".")):F("",!0),u(a)?(_(),$("span",{key:3,class:"text s-dark",onClick:P[3]||(P[3]=k=>d())},R(u(e)("blog.newwin.open")),1)):F("",!0)])])]))}}),ge=(p,e)=>{const t=p.__vccOpts||p;for(const[o,s]of e)t[o]=s;return t},Lr=ge(Hr,[["__scopeId","data-v-0c654747"]]),Rr={id:"app-layout-default"},Gr={class:"default-main"},Br=J({__name:"AppLayoutDefault",setup(p){return(e,t)=>(_(),$("div",Rr,[f(xr),C("div",Gr,[Pt(e.$slots,"default",{},void 0,!0)]),f(Lr)]))}}),jr=ge(Br,[["__scopeId","data-v-732f9001"]]),Kr=J({__name:"AppLayout",setup(p){const e=xl(jr);return(t,o)=>(_(),S(Ml,null,{default:y(()=>[(_(),S(Dl(e.value),null,{default:y(()=>[Pt(t.$slots,"default")]),_:3}))]),_:3}))}}),zr=J({__name:"App",setup(p){return(e,t)=>{const o=Ol("router-view");return _(),S(Kr,null,{default:y(()=>[f(o)]),_:1})}}}),Jr={class:"loading-tips"},Wr={key:0},Fr={key:1},qr={key:2},Yr={key:3},Xr={key:4},Qr={key:5},Qs=J({__name:"LoadingTimer",props:{loadingTime:Number},setup(p){const{t:e}=Z();return(t,o)=>(_(),$("div",Jr,[C("div",null,[V(R(u(e)("loading.cost"))+": "+R(p.loadingTime)+" ms ",1),p.loadingTime<200?(_(),$("span",Wr,"ðŸ˜")):p.loadingTime<400?(_(),$("span",Fr,"ðŸ˜„")):p.loadingTime<600?(_(),$("span",qr,"ðŸ˜Š")):p.loadingTime<800?(_(),$("span",Yr,"ðŸ¤”")):p.loadingTime<1e3?(_(),$("span",Xr,"ðŸ˜’")):(_(),$("span",Qr,"ðŸ˜­"))])]))}}),Zr={lang:"zh_CN",[Me]:"{}"};class ec{logger;fs;path;filePath;constructor(e){this.logger=L("json-storage");const t=je.siyuanWindow();this.fs=t.require("fs"),this.path=t.require("path");const o=t?.siyuan.config.system.dataDir;this.filePath=this.path.join(o,e);const s=this.path.dirname(this.filePath);this.logger.info("store dir =>",s),this.fs.existsSync(s)||this.fs.mkdirSync(s),this.fs.existsSync(this.filePath)||this.writeFile({}),this.logger.info("ininted json local storage in =>",this.filePath)}getItem(e){return this.getStoredItems()[e]||null}setItem(e,t){const o=this.getStoredItems();o[e]=t,this.writeFile(o)}removeItem(e){const t=this.getStoredItems();delete t[e],this.writeFile(t)}getStoredItems(){return te.safeParse(this.readFile(),{})}readFile(){return this.fs.readFileSync(this.filePath,this.getFileOptions())}writeFile(e){return this.fs.writeFileSync(this.filePath,JSON.stringify(e),this.getFileOptions())}getFileOptions(){return{encoding:"utf8"}}}const an=L("use-common-local-storage"),Fi=(p,e,t,o={})=>{const s=tc(p,o);return $l(e,t,s,o)},tc=(p,e={})=>{let t;const{isInSiyuanOrSiyuanNewWin:o}=pt();if(o())t=new ec(p),an.info("using JsonStorage for localStorage");else{const{window:s=Vl}=e;t=s?.localStorage,an.info("using window.localStorage for localStorage")}return t};var sc={};const qi=()=>{const p="storage/syp/siyuan-cfg.json",e="siyuan-cfg",t=()=>{const s="http://127.0.0.1:6806",i=fe;let n;n=je.siyuanWindow()?.location.origin;const c=A.emptyOrDefault(sc.VITE_SIYUAN_API_URL,n),r=A.emptyOrDefault(c,s),m=new mt(r,"");m.middlewareUrl=i;const w=Fi(p,e,m,{serializer:jo.object});return T.isEmptyString(r)||(w.value.apiUrl=r),w};return{getSiyuanSetting:t,getReadOnlySiyuanSetting:()=>{const s=t();return Vi(s)}}};class oc extends Fl{experimentalUseSiyuanNoteAIConfig;experimentalAIEnabled;experimentalAICode;experimentalAIBaseUrl;experimentalAIProxyUrl;experimentalAIApiModel;experimentalAIApiMaxTokens;experimentalAIApiTemperature;showDocQuickMenu;showQuickMenu;showSingleMenu;showBatchMenu;showAIMenu;showExtendMenu;showArticleManageMenu;ignoreBlockRef;allowChangeSlug;constructor(){super(),this.experimentalUseSiyuanNoteAIConfig=!0,this.experimentalAIEnabled=!1,this.showDocQuickMenu=!0,this.showQuickMenu=!0,this.showSingleMenu=!0,this.showBatchMenu=!0,this.showAIMenu=!0,this.showExtendMenu=!0,this.showArticleManageMenu=!0,this.ignoreBlockRef=!1,this.allowChangeSlug=!1}}const Tt=()=>{const p="storage/syp/publish-preference-cfg.json",e="publish-preference-cfg",t=L("use-publish-pref"),o=()=>{const a=new oc,i=Fi(p,e,a,{serializer:jo.object}),l=je.siyuanWindow()?.siyuan?.config?.ai?.openAI;return t.info("try load win.siyuan.config =>",l),l?(i.value.experimentalUseSiyuanNoteAIConfig=!0,i.value.experimentalAIProxyUrl=l.apiProxy,i.value.experimentalAICode=l.apiKey,i.value.experimentalAIBaseUrl=l.apiBaseURL,i.value.experimentalAIApiModel=l.apiModel,i.value.experimentalAIApiMaxTokens=l.apiMaxTokens,i.value.experimentalAIApiTemperature=l.apiTemperature,t.info("use siyuan-note ai config")):(i.value.experimentalUseSiyuanNoteAIConfig=!1,t.info("use custom ai config")),i.value.showDocQuickMenu=A.emptyBooleanOrDefault(i.value.showDocQuickMenu,!0),i.value.showQuickMenu=A.emptyBooleanOrDefault(i.value.showQuickMenu,!0),i.value.showSingleMenu=A.emptyBooleanOrDefault(i.value.showSingleMenu,!0),i.value.showBatchMenu=A.emptyBooleanOrDefault(i.value.showBatchMenu,!0),i.value.showAIMenu=A.emptyBooleanOrDefault(i.value.showAIMenu,!0),i.value.showExtendMenu=A.emptyBooleanOrDefault(i.value.showExtendMenu,!0),i};return{getPublishPreferenceSetting:o,getReadOnlyPublishPreferenceSetting:()=>{const a=o();return Vi(a)}}};var fo={VITE_DEFAULT_TYPE:"siyuan"};const Ge=()=>{const p=L("use-siyuan-api"),{getReadOnlySiyuanSetting:e}=qi(),{getReadOnlyPublishPreferenceSetting:t}=Tt(),o=A.emptyOrDefault(fo.VITE_SIYUAN_API_URL,""),s=A.emptyOrDefault(fo.VITE_SIYUAN_AUTH_TOKEN,""),a=A.emptyOrDefault(fo.VITE_SIYUAN_COOKIE,""),i=t(),n=e(),l=A.emptyOrDefault(n.value.apiUrl,o),c=A.emptyOrDefault(n.value.password,s),r=new mt(l,c);r.cookie=A.emptyOrDefault(n.value.cookie,a),r.preferenceConfig.fixTitle=i.value.fixTitle,r.preferenceConfig.keepTitle=i.value.keepTitle,r.preferenceConfig.removeFirstH1=i.value.removeFirstH1,r.preferenceConfig.removeMdWidgetTag=i.value.removeMdWidgetTag;const m=new _t(r),w=new vn(r),{isInChromeExtension:d,isInSiyuanOrSiyuanNewWin:g}=pt(),v=()=>{const b=fo.VITE_DEFAULT_TYPE,P=b==="siyuan";return p.info("defaultType=>",b),p.info("storeViaSiyuanApi=>",String(P)),P},h=d()?!1:v()&&!g();return{blogApi:m,kernelApi:w,siyuanConfig:r,isStorageViaSiyuanApi:v,isUseSiyuanProxy:h}};class ac{logger;storageViaSiyuanApi;kernelApi;key;constructor(e){this.logger=L("common-storage");const{isStorageViaSiyuanApi:t,kernelApi:o}=Ge();if(this.storageViaSiyuanApi=t(),this.kernelApi=o,this.storageViaSiyuanApi)this.key=e;else{const s=e.split("/").pop()??"";this.key=s.slice(0,s.lastIndexOf("."))}}async getItem(e){this.logger.info(`Retrieving value for '${e}' from CommonStorage.`);let t;if(this.storageViaSiyuanApi)try{t=await this.kernelApi.getFile(e,"text")??""}catch(o){this.logger.error(`Failed to get value for key '${e}' from SiYuan Api LocalStorageAdaptor. Error:`,o)}else try{t=je.siyuanWindow().localStorage.getItem(e)??""}catch(o){this.logger.error(`Failed to get value for key '${e}' from Browser LocalStorageAdaptor. Error:`,o)}return T.isEmptyString(t)&&(t="{}"),t}async removeItem(e){this.logger.info(`Removing value for ${e} from CommonStorage.`)}async setItem(e,t){if(this.storageViaSiyuanApi)try{const o=await this.kernelApi.saveTextData(e,t);this.logger.debug(`Use SiYuan Api LocalStorageAdaptor to setItem - Key '${e}'`,o)}catch(o){this.logger.errot(`Failed to set value for key '${e}' from SiYuan Api LocalStorageAdaptor. Error:`,o)}else je.siyuanWindow().localStorage.setItem(e,t),this.logger.debug(`Use Browser LocalStorageAdaptor to setItem - Key '${e}'`)}}const ic=(p,e)=>{const t=L("common-storage-async"),o=new ac(p),s=ne(e),a=nc(s);t.debug(`It is detected that the serialization type is ${a}`);const i=jo[a];return{commonStore:{async get(){t.debug("Fetching data from common storage...");const l=await o.getItem(o.key)??"{}";let c=await i.read(l)??{};return se.isEmptyObject(c)&&(t.info("Initial data not found in common storage. Setting initial value..."),await o.setItem(o.key,i.write(e)),t.debug("Initial value set:",e),c=e),c},async set(l){await o.setItem(o.key,i.write(l))}}}};function nc(p){return p==null?"any":p instanceof Set?"set":p instanceof Map?"map":p instanceof Date?"date":typeof p=="boolean"?"boolean":typeof p=="string"?"string":typeof p=="object"?"object":Number.isNaN(p)?"any":"number"}const pe=or("setting",()=>{const p=L("use-setting-store"),e="/data/storage/syp/sy-p-plus-cfg.json",t=Zr,{commonStore:o}=ic(e,t),s=Y(null),a=Ko(async()=>{const r=await o.get();return p.debug("get data from setting=>",r),s.value=r,r});return{getSetting:async()=>{if(s.value===null){p.info("Setting not initialized. Initializing now...");const r=a.value;return p.info("Loaded setting from remote api"),r??{}}return p.info("Loaded setting from cache."),s.value??{}},updateSetting:async r=>{p.debug("update setting=>",r),await o.set(r),s.value={...s.value,...r}},checkKeyExists:r=>{const m=s.value;if(!m)return!1;for(const w in m)if(w===r)return!0;return!1},deleteKey:r=>{const m=s.value;if(m){for(const w in m)if(w===r){delete m[w];return}}}}}),lc=()=>{const p=new Date().toISOString();return ir(p).toLowerCase()},rc=()=>Pn(),cc=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),fs={newUuid:rc,newID:lc,randomUuid:cc};class Rs{platformType;subPlatformType;platformKey;platformName;platformIcon;isEnabled;isAuth;authMode;authUrl;logoutUrl;domain;cookieLimit;isSys;extraScript;constructor(e,t,o,s,a){this.platformType=e,this.platformKey=t,this.platformName=o,this.isAuth=!1,this.isEnabled=!1,this.authMode="api",t.toLowerCase().includes("Custom".toLowerCase())&&(this.authMode="web"),this.cookieLimit=!1,this.isSys=!1,this.subPlatformType=s,this.platformIcon=a}}var de=(p=>(p.API="api",p.WEBSITE="web",p))(de||{}),me=(p=>(p.Common="Common",p.Metaweblog="Metaweblog",p.Wordpress="Wordpress",p.Github="Github",p.Gitlab="Gitlab",p.Custom="Custom",p.Fs="Fs",p.System="System",p))(me||{}),U=(p=>(p.Common_Yuque="Yuque",p.Common_Notion="Notion",p.Common_Halo="Halo",p.Common_Telegraph="Telegraph",p.Common_Confluence="Confluence",p.Github_Hexo="Hexo",p.Github_Hugo="Hugo",p.Github_Jekyll="Jekyll",p.Github_Quartz="Quartz",p.Github_Vuepress="Vuepress",p.Github_Vuepress2="Vuepress2",p.Github_Vitepress="Vitepress",p.Gitlab_Hexo="Gitlabhexo",p.Gitlab_Hugo="Gitlabhugo",p.Gitlab_Jekyll="Gitlabjekyll",p.Gitlab_Vuepress="Gitlabvuepress",p.Gitlab_Vuepress2="Gitlabvuepress2",p.Gitlab_Vitepress="Gitlabvitepress",p.Metaweblog_Metaweblog="Metaweblog",p.Metaweblog_Cnblogs="Cnblogs",p.Metaweblog_Typecho="Typecho",p.Metaweblog_Jvue="Jvue",p.Wordpress_Wordpress="Wordpress",p.Wordpress_Wordpressdotcom="Wordpressdotcom",p.Custom_Zhihu="Zhihu",p.Custom_CSDN="Csdn",p.Custom_Wechat="Wechat",p.Custom_Jianshu="Jianshu",p.Custom_Juejin="Juejin",p.Custom_Haloweb="Haloweb",p.Custom_Bilibili="Bilibili",p.Custom_Xiaohongshu="Xiaohongshu",p.Fs_LocalSystem="LocalSystem",p.Fs_Ftp="Ftp",p.Fs_Sftp="Sftp",p.Fs_BaiduNetDisk="BaiduNetDisk",p.Fs_AliyunDrive="AliyunDrive",p.Fs_Weiyun="Weiyun",p.Fs_Doubao="Doubao",p.Fs_OneDrive="OneDrive",p.Fs_GoogleDrive="GoogleDrive",p.Fs_Quark="Quark",p.System_Siyuan="Siyuan",p.NONE="none",p))(U||{});function pc(p){const e=[];switch(p){case"Common":e.push("Yuque"),e.push("Notion"),e.push("Halo"),e.push("Telegraph"),e.push("Confluence");break;case"Github":e.push("Hexo"),e.push("Hugo"),e.push("Jekyll"),e.push("Quartz"),e.push("Vuepress"),e.push("Vuepress2"),e.push("Vitepress");break;case"Gitlab":e.push("Gitlabhexo"),e.push("Gitlabhugo"),e.push("Gitlabjekyll"),e.push("Gitlabvuepress"),e.push("Gitlabvuepress2"),e.push("Gitlabvitepress");break;case"Metaweblog":e.push("Metaweblog"),e.push("Cnblogs"),e.push("Typecho"),e.push("Jvue");break;case"Wordpress":e.push("Wordpress"),e.push("Wordpressdotcom");break;case"Custom":e.push("Zhihu"),e.push("Csdn"),e.push("Wechat"),e.push("Jianshu"),e.push("Juejin"),e.push("Haloweb"),e.push("Bilibili"),e.push("Xiaohongshu");break;case"Fs":e.push("LocalSystem"),e.push("Ftp"),e.push("Sftp"),e.push("BaiduNetDisk"),e.push("AliyunDrive"),e.push("Weiyun"),e.push("Doubao"),e.push("OneDrive"),e.push("GoogleDrive"),e.push("Quark");break;case"System":e.push("Siyuan");break}return e}function ft(p){const e=p,t=[],o=[],s=[],a=[],i=[],n=[],l=[],c=[];return e.forEach(m=>{switch(m.platformType){case"Common":t.push(m);break;case"Github":o.push(m);break;case"Gitlab":s.push(m);break;case"Metaweblog":a.push(m);break;case"Wordpress":i.push(m);break;case"Custom":n.push(m);break;case"Fs":l.push(m);break;case"System":c.push(m);break}}),{totalCfg:e,commonCfg:t,githubCfg:o,gitlabCfg:s,metaweblogCfg:a,wordpressCfg:i,customCfg:n,fsCfg:l,systemCfg:c}}function Po(p){const e=p.split("-");let t="";if(e.length>0){const a=e[0].split("_");t=a.length>1?a[1]:a[0]}else throw new Error("Invalid platform key");const s=Object.values(U).find(a=>typeof a=="string"&&a.toLowerCase()===t.toLowerCase());if(s)return s;throw new Error("Invalid platform key")}function Gs(p,e){let t;const o=fs.newID();return t=p.toLowerCase(),!T.isEmptyString(e)&&e!=="none"&&(t=[t,"_",T.upperFirst(e)].join("")),[t,"-",o].join("")}function Vn(p,e){let t=!1;for(let o=0;o<p.length;o++)if(p[o].platformKey===e){t=!0;break}return t}function Zs(p,e){for(let t=0;t<p.length;t++)if(p[t].platformKey===e)return p[t];return null}function os(p,e,t){const o=[...p];for(let s=0;s<o.length;s++)if(o[s].platformKey===e){o[s]=t;break}return o}function gc(p,e){return p.filter(t=>t.platformKey!==e)}function _e(p){return"custom-"+p+"-post-id"}function Bs(p){return"custom-"+p.replace(/_/g,"-")+"-yaml"}function nn(p){const e=/^custom-(.+?)-post-id$/,t=p.match(e);if(t&&t[1])return t[1];throw new Error("Invalid postidKey format")}const we={iconEPPlus:'<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" data-v-ea893728=""><path d="M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"></path></svg>',iconIFEdit:'<svg t="1689998125340" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5430" width="16" height="16"><path d="M652.4 156.6125a112.5 112.5 0 1 1 155.925 161.15625L731.375 394.71875 572.3 235.5875l79.5375-79.5375 0.5625 0.5625zM333.63125 792.40625v0.1125H174.5v-159.1875l358.03125-357.975 159.075 159.13125-357.975 357.91875zM62 849.5h900v112.5H62v-112.5z" p-id="5431"></path></svg>',iconIFHexo:'<svg t="1684170255787" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7119" width="16" height="16"><path d="M512 0.298667L66.986667 258.389333V770.133333L512 1023.786667l445.013333-258.090667V253.952L512 0.298667z m204.714667 729.813333l-40.064 22.229333-40.064-22.229333V552.106667H387.413333v178.005333l-40.106666 22.229333-40.021334-22.229333V293.973333l40.064-22.229333 40.064 22.229333v178.005334h249.173334V293.973333l40.106666-22.229333 40.021334 22.229333v436.138667z" p-id="7120"></path></svg>',iconIFHexoGitlab:'<svg t="1693214758547" class="icon" viewBox="0 0 1137 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12137" width="16" height="16"><path d="M896.227556 577.991111c-21.048889 0-38.115556 16.952889-38.115556 38.058667v280.007111c0 28.103111-22.755556 50.801778-50.858667 50.801778H728.177778v-131.242667a127.317333 127.317333 0 0 0-127.146667-127.032889H538.168889a127.317333 127.317333 0 0 0-127.089778 127.032889v131.128889H331.776a50.801778 50.801778 0 0 1-50.801778-50.801778v-279.893333a38.115556 38.115556 0 1 0-76.288 0v280.007111a127.317333 127.317333 0 0 0 127.089778 127.032889h155.363556v-207.473778c0-28.046222 22.755556-50.801778 50.858666-50.801778h62.919111c28.103111 0 50.858667 22.755556 50.858667 50.801778v207.36h155.477333a127.317333 127.317333 0 0 0 127.146667-127.032889v-279.893333c0-21.048889-17.066667-38.115556-38.115556-38.115556z" p-id="12138"></path><path d="M1073.208889 413.411556a38.115556 38.115556 0 0 0-22.755556 72.817777 15.36 15.36 0 0 1 2.503111 28.16 15.530667 15.530667 0 0 1-21.845333-9.272889 41.528889 41.528889 0 0 0-4.039111-8.988444l-172.259556-398.677333-0.170666-0.398223a15.473778 15.473778 0 0 1 0.682666-11.662222 15.530667 15.530667 0 0 1 8.760889-7.907555 15.530667 15.530667 0 0 1 11.662223 0.625777 15.36 15.36 0 0 1 5.688888 22.983112 38.115556 38.115556 0 0 0 61.212445 45.511111 91.022222 91.022222 0 0 0 12.856889-84.878223 90.624 90.624 0 0 0-46.819556-52.224A91.192889 91.192889 0 0 0 838.656 5.688889a90.680889 90.680889 0 0 0-52.280889 46.762667 92.728889 92.728889 0 0 0-8.590222 30.890666H359.765333A91.932444 91.932444 0 0 0 298.894222 5.688889a91.192889 91.192889 0 0 0-70.087111 3.811555 91.704889 91.704889 0 0 0-33.962667 137.102223 38.115556 38.115556 0 1 0 61.212445-45.511111 15.36 15.36 0 1 1 26.794667-3.982223l-0.113778 0.341334L110.592 496.071111a44.487111 44.487111 0 0 0-4.039111 8.988445 15.303111 15.303111 0 0 1-10.24 10.296888 15.815111 15.815111 0 0 1-11.662222-1.024 15.36 15.36 0 0 1 2.56-28.216888 38.229333 38.229333 0 0 0 25.031111-47.786667 38.286222 38.286222 0 0 0-47.786667-24.974222 91.591111 91.591111 0 0 0-15.018667 168.448 90.680889 90.680889 0 0 0 69.802667 6.257777c23.893333-7.509333 43.349333-24.177778 54.442667-46.136888h790.414222a91.704889 91.704889 0 0 0 169.244444-13.824 91.818667 91.818667 0 0 0-60.131555-114.744889z m-866.474667 52.451555L339.057778 159.573333h459.434666l132.323556 306.289778H206.734222z" p-id="12139"></path></svg>',iconIFHugo:'<svg t="1684170339672" class="icon" viewBox="0 0 1280 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9235" width="16" height="16"><path d="M800.20014 389.6c-21.8 5.6-39.8 8.6-58.2 15.2-14.6 3.8-29.4 7.8-46.4 12.2l-1.2 0.2c-8.4 2.4-9.2 2.6-17-6.4-9.4-10.6-16.2-17.4-29.2-23.8-39.4-19.2-77.4-13.6-112.8 9.4-42.4 27.4-64.2 68-63.6 118.4 0.6 50 34.8 91 82.4 97.8 44 5.6 79.6-9.2 107.6-41 4.2-5.2 8-10.6 12.2-16.6 1.6-2 3-4.2 4.6-6.6h-120.2c-13 0-16.2-8-11.8-18.6 8-19.4 23-51.8 31.8-68 1.8-3.6 6.2-11.6 13.8-11.6h202.2c9-26.8 23.6-53.8 43.2-79.4 45.4-59.8 98.6-91 174.4-104 63.6-11.2 123.4-5 177.8 31.8 49.2 33.6 79.6 79.2 87.8 139 10.6 84.2-13.8 152.6-73.4 211.2-39.4 41.8-89.8 68-147.8 79.8-11.2 2-22.2 3-33 4-5.8 0.4-11.4 1-17 1.6-56.6-1.2-108.4-17.4-152-54.8-30.6-26.6-51.8-59.2-62.2-97-7.4 14.6-16 28.8-28 42.2-43.2 59.2-101.8 96-175.8 105.8-61.2 8.2-117.8-3.6-167.8-41-46-35-72.2-81-79-138.4-8.2-68 11.8-130.8 52.8-182.6 44.4-58 103-94.8 174.6-107.8 58.6-12.4 114.6-3.8 165.2 30.6 33 21.8 56.6 51.6 72.2 87.8 3.8 5.6 1.2 8.8-6.2 10.6z m-703.6 11.2c-2.5 0-3.12-1.2-1.88-3.2l13.1-16.8c1.24-1.8 4.36-3 6.86-3H337.20014c2.4 0 3 1.8 1.8 3.6l-10.6 16.2c-1.2 2-4.4 3.8-6.2 3.8l-225.6-0.6zM2.49214 458.2c-2.492 0-3.116-1.4-1.868-3.2l13.086-16.8c1.248-1.8 4.364-3.2 6.85-3.2H304.80014c2.4 0 3.6 2 3 3.8l-5 15c-0.6 2.4-3 3.8-5.6 3.8l-294.708 0.6z m148.948 53.6c-1.24 1.8-0.62 3.6 1.86 3.6l135.9 0.6c1.8 0 4.4-1.8 4.4-4.2l1.2-15c0-2.6-1.2-4.4-3.8-4.4H166.40014c-2.5 0-4.98 1.8-6.24 3.8l-8.72 15.6z m1002.96-36c-0.4-5.2-0.6-9.6-1.4-14-11.2-61.6-68-96.6-127.2-82.8-58 13-95.4 49.8-109 108.4-11.2 48.6 12.4 97.8 57.2 117.8 34.4 15 68.6 13.2 101.6-3.8 49.2-27.2 76-65.4 79.2-119-0.2-2.4-0.2-4.6-0.4-6.6z" p-id="9236"></path></svg>',iconIFJekyll:'<svg t="1694167709305" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4932" width="16" height="16"><path d="M667.4 180c-35.2 0-69.6 8.8-99.7 27.1-57.2 32.2-91.6 89.4-91.6 151.7v306.4c0 35.9-20.5 68.9-55 88.7-19.8 11-41.8 16.9-64.5 16.9-66 0-119.5-47.6-119.5-105.5 0-17.6 4.4-34.4 13.9-49.8 13.9-23.5 38.8-41.8 70.4-51.3 3.7-1.5 6.6-1.5 8.1-1.5 20.5 0 36.6-16.1 36.6-36.6s-16.1-36.6-36.6-36.6c-8.8 0-17.6 1.5-30.8 5.1-46.9 13.9-85.8 43.2-109.9 82.8-16.1 27.1-24.9 57.2-24.9 87.9 0 98.9 86.5 178.8 192.8 178.8 35.2 0 69.6-8.8 100.4-26.4 57.2-32.2 91.6-89.4 91.6-151.7V358.8c0-35.9 20.5-68.9 55-88.7 19.8-11 41.8-16.9 64.5-16.9 65.2 0 118.7 47.6 118.7 105.5 0 17.6-4.4 34.4-13.9 49.8-13.9 24.2-38.8 42.5-70.4 51.3-3.7 1.5-6.6 1.5-8.1 1.5-20.5 0-36.6 16.1-36.6 36.6s16.1 36.6 36.6 36.6c8.8 0 18.3-1.5 30.8-5.1 46.9-13.9 85.8-43.2 109.9-82.8 16.1-27.1 24.9-57.2 24.9-87.9 0-98.8-86.5-178.7-192.7-178.7z" p-id="4933"></path></svg>',iconIFVuepress:'<svg t="1694167910261" class="icon" viewBox="0 0 1120 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8613" width="16" height="16"><path d="M1055.594124 381.672727L897.339578 139.636364c-18.618182-37.236364-74.472727-55.854545-111.709091-55.854546H282.939578c-37.236364 0-93.090909 27.927273-111.709091 55.854546L12.975942 381.672727c-18.618182 37.236364-18.618182 83.781818 9.309091 111.709091l465.454545 493.381818c27.927273 27.927273 65.163636 18.618182 93.090909 0l465.454546-493.381818c27.927273-27.927273 37.236364-83.781818 9.309091-111.709091z m-242.036364-74.472727s0 9.309091 0 0L552.903215 726.109091H422.575942L376.030487 344.436364c0-18.618182-9.309091-27.927273-9.309091-37.236364-9.309091-9.309091-18.618182-9.309091-27.927272-9.309091l9.309091-18.618182H469.121396c9.309091 0 18.618182 0 27.927273 9.309091 9.309091 9.309091 9.309091 18.618182 9.309091 27.927273l27.927273 269.963636 139.636363-251.345454v-9.309091-9.309091c0-9.309091 0-9.309091-9.309091-18.618182-9.309091 0-9.309091-9.309091-18.618181-9.309091l9.309091-18.618182h139.636363c9.309091 0 18.618182 0 18.618182 9.309091s9.309091 18.618182 0 27.927273c9.309091 0 0 0 0 0z" p-id="8614"></path></svg>',iconIFVuepress2:'<svg t="1694167983538" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8866" width="16" height="16"><path d="M554.666667 384h234.666666L554.666667 149.333333V384M256 85.333333h341.333333l256 256v512a85.333333 85.333333 0 0 1-85.333333 85.333334H256a85.333333 85.333333 0 0 1-85.333333-85.333334V170.666667c0-47.36 37.973333-85.333333 85.333333-85.333334m384 682.666667v-85.333333H256v85.333333h384m128-170.666667v-85.333333H256v85.333333h512z" p-id="8867"></path><path d="M516.010667 555.946667l249.941333 431.36 249.941333-429.269334v-2.133333h-97.152l-151.338666 259.925333-150.613334-259.925333z" fill="#41B883" p-id="8868"></path><path d="M616.789333 555.946667l150.613334 259.925333 151.338666-259.968h-91.136L768 658.218667l-59.306667-102.314667z" p-id="8869"></path></svg>',iconIFVue:'<svg t="1684170497745" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10726" width="16" height="16"><path d="M512 504L764.8 68.8h-134.4L512 275.2 393.6 70.4h-134.4L512 504zM819.2 70.4L512 600 204.8 68.8H0l512 886.4L1024 70.4H819.2z" p-id="10727"></path></svg>',iconIFNuxt:'<svg t="1689995630285" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2710" width="16" height="16"><path d="M841.557333 864.938667l0.981334-1.92a31.573333 31.573333 0 0 0 2.261333-4.992l0.085333-0.213334a49.493333 49.493333 0 0 0 2.304-25.898666l0.042667 0.298666a76.586667 76.586667 0 0 0-10.026667-26.581333l0.213334 0.341333-226.858667-399.061333-34.645333-60.586667-34.432 60.586667-226.730667 399.061333a78.933333 78.933333 0 0 0-8.704 25.770667l-0.042667 0.469333a53.632 53.632 0 0 0 3.413334 30.421334l-0.128-0.341334a34.517333 34.517333 0 0 0 2.133333 4.352l-0.085333-0.170666c6.826667 11.733333 21.333333 25.685333 53.333333 25.685333h422.314667c6.698667 0 39.466667-1.365333 54.613333-27.178667z m-265.685333-397.482667l207.317333 364.714667H368.64z m437.290667 338.517333L713.813333 278.613333c-3.072-5.546667-20.352-33.578667-50.432-33.578666-13.525333 0-32.938667 5.76-48.725333 33.493333l-38.698667 67.84 34.432 60.586667 53.333334-94.378667 296.149333 519.68h-112.64a50.645333 50.645333 0 0 1-2.474667 25.941333l0.128-0.341333a32.938667 32.938667 0 0 1-2.432 5.376l0.085334-0.170667-0.981334 1.92c-15.146667 25.813333-47.872 27.178667-54.272 27.178667h176.170667c6.485333 0 39.125333-1.365333 54.272-27.178667 6.698667-11.733333 11.52-31.445333-4.565333-58.965333zM311.637333 866.432a42.197333 42.197333 0 0 1-1.92-3.925333l-0.085333-0.256a52.394667 52.394667 0 0 1-3.584-30.378667l-0.042667 0.298667H64.042667L423.68 199.338667l118.058667 207.530666 34.218666-60.586666-102.912-181.290667c-2.858667-5.205333-20.266667-33.152-50.218666-33.152-13.525333 0-32.938667 5.845333-48.725334 33.578667L9.813333 805.930667c-3.072 5.546667-18.133333 34.645333-3.2 60.458666 6.826667 11.733333 21.333333 25.685333 53.333334 25.685334h305.109333c-31.786667 0-46.506667-13.738667-53.333333-25.685334z" p-id="2711"></path></svg>',iconIFYuque:'<svg t="1684169305378" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5780" width="16" height="16"><path d="M903.542857 350.4c-11.314286-45.028571 11.314286-116.8 83.885714-142.171429l-77.6-4.114285s-29.371429-102.857143-164.114285-112c-134.628571-9.257143-222.742857-3.428571-222.857143-3.428572 0.114286 0 99.885714 63.542857 59.885714 176.8-29.257143 60-75.2 109.257143-124.342857 165.371429-1.485714 1.485714-2.857143 2.971429-4 4.228571C291.885714 618.285714 36.571429 909.714286 36.571429 909.714286c281.028571 73.6 469.371429-7.2 580.8-104.114286 23.428571-0.228571 41.028571-0.342857 52.914285-0.342857 155.2 0 286.4-134.4 281.028572-283.885714-3.657143-102.742857-36.457143-125.942857-47.771429-170.971429z m-233.257143 381.714286c-12.114286 0-29.942857 0.114286-53.485714 0.342857l-26.971429 0.228571-20.342857 17.714286c-53.828571 46.857143-119.314286 81.714286-195.885714 100.114286-60 14.4-125.714286 18.514286-197.371429 10.971428 20.571429-23.428571 41.714286-47.542857 63.314286-72.114285 105.142857-119.542857 198.628571-225.714286 270.742857-306.857143l1.6-1.6 1.485715-1.714286c4.685714-5.257143 23.542857-26.628571 28.228571-32.114286 11.085714-12.685714 19.771429-22.742857 28-32.685714 35.085714-41.942857 59.657143-77.485714 78.857143-116.8l1.828571-3.771429 1.371429-3.885714c15.657143-44.342857 17.6-87.885714 7.085714-128.914286 25.714286 0.8 53.142857 2.171429 81.942857 4.114286 38.057143 2.628571 63.428571 14.742857 81.257143 33.371429 6.628571 6.857143 11.657143 14.285714 15.314286 21.371428 1.142857 2.285714 1.942857 4.114286 2.628571 5.714286l5.714286 20.228571c-17.942857 39.428571-22.742857 83.771429-13.028571 122.514286 3.428571 13.485714 7.885714 25.6 14.057142 39.314286 2.4 5.371429 10.857143 22.971429 12.571429 26.628571 11.771429 25.942857 17.6 49.142857 19.085714 89.942857 3.771429 108.114286-94.514286 207.885714-208 207.885715z" p-id="5781"></path></svg>',iconIFNotion:'<svg t="1691069780339" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3978" width="16" height="16"><path d="M190.3619 179.479263c31.818329 25.847061 43.760866 23.885073 103.558852 19.875793l563.645073-33.822969c11.942537 0 2.00464-11.942537-1.961988-13.904525L761.940229 83.938971c-17.913805-13.904525-41.84153-29.856341-87.649688-25.889713L128.559273 97.886148c-19.875793 1.961988-23.885073 11.942537-15.951816 19.875793z m33.822969 131.367902v593.032243c0 31.860981 15.909165 43.803518 51.779427 41.798878l619.433779-35.827609c35.870262-1.961988 39.879542-23.885073 39.879541-49.774787V271.010276c0-25.847061-9.937896-39.794238-31.903633-37.83225l-647.328132 37.83225c-23.885073 2.00464-31.860981 13.947177-31.860982 39.794237z m611.500523 31.775678c3.966628 17.913805 0 35.82761-17.913805 37.874902l-29.856341 5.971268v437.779268c-25.932365 13.947177-49.817438 21.923085-69.735883 21.923085-31.903633 0-39.879542-9.980548-63.764615-39.794238l-195.21782-306.49667v296.516122L520.956902 810.386408s0 35.82761-49.817438 35.82761l-137.424474 7.933256c-3.966628-7.933256 0-27.851701 13.947177-31.818329l35.827609-9.937897V420.291982L333.800294 416.282702c-4.00928-17.913805 5.971268-43.760866 33.82297-45.765506l147.405022-9.937896 203.193729 310.463298v-274.678341l-51.822078-5.928616c-3.966628-21.923085 11.942537-37.83225 31.860981-39.794238zM82.751115 44.144733l567.697005-41.798878c69.693231-5.971268 87.649688-2.00464 131.453206 29.856342l181.227992 127.358622c29.856341 21.880433 39.83689 27.851701 39.83689 51.736774v698.553084c0 43.760866-15.909165 69.693231-71.65522 73.617207l-659.313321 39.83689c-41.798878 2.00464-61.759975-3.966628-83.683059-31.860982l-133.457846-173.166779c-23.885073-31.860981-33.82297-55.703403-33.82297-83.597756V113.752661c0-35.784958 15.951817-65.683951 61.717323-69.607928z" p-id="3979"></path></svg>',iconIFHalo:'<svg t="1695187534618" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5055" width="16" height="16"><path d="M540.672 470.09792c0-0.7424-0.03584-1.46944-0.11264-2.19136a20.9408 20.9408 0 0 1 11.58144-20.92032c1.54112-0.75776 2.98496-1.70496 4.3008-2.816l320.9216-314.17856a20.93056 20.93056 0 0 0-13.5936-36.89984H160.2304a21.00224 21.00224 0 0 0-15.2576 6.56384 20.9152 20.9152 0 0 0 0.84992 29.60384l288.82944 314.17344c2.2272 2.0992 4.88448 3.6864 7.7824 4.64896a20.94592 20.94592 0 0 1 14.336 20.92544c-0.0256 0.54272-0.0256 0.54272-0.03072 1.09056v426.89536l83.93216 20.9408V470.10304z m41.96864 481.73056c0 15.56992-16.41472 25.69728-30.36672 18.73408l-125.9008-41.89184a20.9408 20.9408 0 0 1-11.60192-18.73408V480.90624c-3.1744-2.05824-6.16448-4.4032-8.9344-7.0144L117.00736 159.71328c-25.27744-23.82848-26.41408-63.60064-2.54464-88.832A63.00672 63.00672 0 0 1 160.2304 51.2h703.5392C898.5344 51.2 926.72 79.3344 926.72 114.03264c0 18.432-8.11008 35.9424-22.17984 47.87712l-320.9216 314.17344c-0.32256 0.27648-0.65024 0.54784-0.97792 0.81408v474.9312z"  p-id="5056"></path></svg>',iconIFConfluence:'<svg t="1761372674727" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2596" width="16" height="16"><path d="M96.48 738.784c-9.248 15.104-19.648 32.64-28.512 46.592a28.544 28.544 0 0 0 9.6 38.784l185.344 114.048a28.48 28.48 0 0 0 39.232-9.28l0.256-0.416c7.392-12.384 16.96-28.512 27.36-45.76 73.408-121.184 147.2-106.336 280.416-42.752l183.776 87.392A28.544 28.544 0 0 0 832 913.888l0.352-0.768 88.16-199.52a28.512 28.512 0 0 0-14.24-37.344 22255.712 22255.712 0 0 1-185.344-88.128c-249.76-121.376-462.048-113.536-624.448 150.656z" fill="#2684FF" p-id="2597"></path><path d="M927.52 285.824c9.248-15.104 19.648-32.64 28.512-46.592a28.544 28.544 0 0 0-9.6-38.784L761.12 86.4a28.48 28.48 0 0 0-39.552 7.712 18.688 18.688 0 0 0-1.056 1.696c-7.424 12.384-16.96 28.512-27.392 45.76-73.408 121.184-147.2 106.336-280.416 42.752L229.504 97.376a28.48 28.48 0 0 0-37.984 13.472l-0.352 0.768-88.256 199.616a28.512 28.512 0 0 0 14.24 37.344c38.784 18.24 115.904 54.592 185.344 88.096 250.336 121.184 462.624 113.056 625.024-150.848z" fill="#2684FF" p-id="2598"></path></svg>',iconIFCnblogs:'<svg t="1684168925817" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4454" width="16" height="16"><path d="M851.404 172.596c-187.462-187.461-491.346-187.461-678.808 0-187.461 187.462-187.461 491.346 0 678.808 187.462 187.461 491.346 187.461 678.808 0 187.461-187.462 187.461-491.346 0-678.808zM387.33 728.087a47.084 47.084 0 1 1-66.633-66.502 47.084 47.084 0 0 1 66.633 66.502z m205.527 1.397a38.75 38.75 0 0 1-76.625-11.52h-0.044a6.545 6.545 0 0 0-0.044 0.305v-0.349c0.306-2.618 2.051-20.727-2.967-44.99a174.24 174.24 0 0 0-48.567-89.28 172.102 172.102 0 0 0-88.8-48.305 156.698 156.698 0 0 0-42.458-2.923 38.662 38.662 0 0 1-35.39-65.324 38.618 38.618 0 0 1 21.12-10.822v-0.218c4.452-0.742 111.142-16.45 200.335 72.742 89.018 89.018 74.182 196.145 73.44 200.727z m175.2 7.592a38.75 38.75 0 0 1-65.673 21.382 39.49 39.49 0 0 1-11.65-33.73c0.087-0.35 5.105-37.484-5.062-88.975-13.31-67.375-45.295-126.895-94.953-176.902-50.007-49.702-109.527-81.644-176.945-94.953-51.491-10.167-88.582-5.193-89.019-5.149h0.219-0.044a39.927 39.927 0 0 1-44.684-32.902 38.836 38.836 0 0 1 32.204-44.378c1.92-0.305 47.869-7.33 111.273 4.364a411.753 411.753 0 0 1 106.254 34.952 425.76 425.76 0 0 1 114.633 82.255l0.916 0.96 0.96 0.873a425.89 425.89 0 0 1 82.255 114.72c16.407 33.6 28.145 69.294 34.996 106.21 11.651 63.404 4.67 109.353 4.32 111.273z" p-id="4455"></path></svg>',iconIFTypecho:'<svg t="1684170671485" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12354" width="16" height="16"><path d="M942.933333 132.266667l-168.533333-10.666667v64l164.266667 10.666667c8.533333 0 12.8 4.266667 14.933333 6.4 2.133333 2.133333 6.4 8.533333 4.266667 14.933333l-46.933334 718.933333c0 10.666667-10.666667 19.2-21.333333 19.2h-2.133333l-115.2-8.533333c-4.266667 21.333333-23.466667 36.266667-46.933334 36.266667H362.666667l522.666666 34.133333h6.4c44.8 0 81.066667-34.133333 85.333334-78.933333L1024 219.733333c2.133333-44.8-34.133333-85.333333-81.066667-87.466666z" p-id="12355"></path><path d="M727.466667 74.666667c6.4 0 10.666667 4.266667 10.666666 10.666666v853.333334c0 6.4-4.266667 10.666667-10.666666 10.666666h-640c-6.4 0-10.666667-4.266667-10.666667-10.666666V85.333333c0-6.4 4.266667-10.666667 10.666667-10.666666h640m0-74.666667h-640c-46.933333 0-85.333333 38.4-85.333334 85.333333v853.333334c0 46.933333 38.4 85.333333 85.333334 85.333333h640c46.933333 0 85.333333-38.4 85.333333-85.333333V85.333333c0-46.933333-38.4-85.333333-85.333333-85.333333z" p-id="12356"></path><path d="M522.666667 518.4H177.066667c-21.333333 0-36.266667-17.066667-36.266667-36.266667 0-21.333333 17.066667-36.266667 36.266667-36.266666h345.6c21.333333 0 36.266667 17.066667 36.266666 36.266666 0 19.2-17.066667 36.266667-36.266666 36.266667z" p-id="12357"></path><path d="M424.533333 686.933333H177.066667c-21.333333 0-38.4 17.066667-38.4 38.4s17.066667 38.4 38.4 38.4h247.466666c21.333333 0 38.4-17.066667 38.4-38.4s-17.066667-38.4-38.4-38.4z" p-id="12358"></path></svg>',iconIFWordpress:'<svg t="1684168789622" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4159" width="16" height="16"><path d="M916.010667 291.2c35.84 65.578667 56.234667 140.8 56.234666 220.8 0 169.770667-91.989333 318.122667-228.821333 397.866667l140.586667-406.485334c26.24-65.706667 34.986667-118.229333 34.986666-164.864 0-17.28-1.109333-33.28-2.986666-47.36m-340.522667 4.48c27.605333-1.28 52.565333-4.48 52.565333-4.48 24.832-3.2 21.930667-39.68-2.858666-38.357333 0 0-74.88 5.76-122.88 5.76-45.397333 0-121.6-6.4-121.6-6.4-24.96-1.28-28.202667 36.48-3.2 37.76 0 0 23.04 2.602667 48 3.84l71.68 196.48-101.12 302.08L228.437333 294.4c27.690667-1.28 52.650667-4.266667 52.650667-4.266667 24.96-3.2 22.016-39.68-2.773333-38.229333 0 0-74.496 5.888-122.624 5.888-8.533333 0-18.688-0.341333-29.44-0.64C209.536 134.4 351.36 51.84 512 51.84c119.850667 0 228.906667 45.738667 310.869333 120.874667-1.962667-0.128-3.882667-0.384-6.016-0.384-45.226667 0-77.312 39.381333-77.312 81.664 0 37.973333 21.888 70.101333 45.226667 107.989333 17.536 30.72 37.973333 70.101333 37.973333 127.018667 0 39.04-15.104 85.077333-35.029333 148.437333l-45.866667 152.96-166.4-495.36 0.042667 0.597333zM512 972.117333c-45.184 0-88.789333-6.528-130.048-18.645333l138.112-401.322667 141.44 387.712c1.024 2.261333 2.133333 4.309333 3.328 6.357334-47.786667 16.768-99.2 25.984-152.832 25.984M51.669333 512c0-66.730667 14.336-130.133333 39.893334-187.306667L311.04 926.250667A460.544 460.544 0 0 1 51.669333 512M512 0C229.76 0 0 229.76 0 512s229.76 512 512 512 512-229.76 512-512S794.24 0 512 0" p-id="4160"></path></svg>',iconIFZhihu:'<svg t="1689993036802" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2449" width="16" height="16"><path d="M564.7 230.1V803h60l25.2 71.4L756.3 803h131.5V230.1H564.7z m247.7 497h-59.9l-75.1 50.4-17.8-50.4h-18V308.3h170.7v418.8zM526.1 486.9H393.3c2.1-44.9 4.3-104.3 6.6-172.9h130.9l-0.1-8.1c0-0.6-0.2-14.7-2.3-29.1-2.1-15-6.6-34.9-21-34.9H287.8c4.4-20.6 15.7-69.7 29.4-93.8l6.4-11.2-12.9-0.7c-0.8 0-19.6-0.9-41.4 10.6-35.7 19-51.7 56.4-58.7 84.4-18.4 73.1-44.6 123.9-55.7 145.6-3.3 6.4-5.3 10.2-6.2 12.8-1.8 4.9-0.8 9.8 2.8 13 10.5 9.5 38.2-2.9 38.5-3 0.6-0.3 1.3-0.6 2.2-1 13.9-6.3 55.1-25 69.8-84.5h56.7c0.7 32.2 3.1 138.4 2.9 172.9h-141l-2.1 1.5c-23.1 16.9-30.5 63.2-30.8 65.2l-1.4 9.2h167c-12.3 78.3-26.5 113.4-34 127.4-3.7 7-7.3 14-10.7 20.8-21.3 42.2-43.4 85.8-126.3 153.6-3.6 2.8-7 8-4.8 13.7 2.4 6.3 9.3 9.1 24.6 9.1 5.4 0 11.8-0.3 19.4-1 49.9-4.4 100.8-18 135.1-87.6 17-35.1 31.7-71.7 43.9-108.9L497 850l5-12c0.8-1.9 19-46.3 5.1-95.9l-0.5-1.8-108.1-123-22 16.6c6.4-26.1 10.6-49.9 12.5-71.1h158.7v-8c0-40.1-18.5-63.9-19.2-64.9l-2.4-3z" p-id="2450"></path></svg>',iconIFCSDN:'<svg t="1690721786570" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3120" width="16" height="16"><path d="M512 0c282.784 0 512 229.216 512 512s-229.216 512-512 512S0 794.784 0 512 229.216 0 512 0z m189.952 752l11.2-108.224c-31.904 9.536-100.928 16.128-147.712 16.128-134.464 0-205.728-47.296-195.328-146.304 11.584-110.688 113.152-145.696 232.64-145.696 54.784 0 122.432 8.8 151.296 18.336L768 272.704C724.544 262.24 678.272 256 599.584 256c-203.2 0-388.704 94.88-406.4 263.488C178.336 660.96 303.584 768 535.616 768c80.672 0 138.464-6.432 166.336-16z" p-id="3121"></path></svg>',iconIFJianshu:'<svg t="1690723639888" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5035" width="16" height="16"><path d="M654.791 38.495h-286.53c-95.005 0-142.412 0-193.612 16.118-55.94 20.48-99.935 64.474-120.225 120.226-16.308 51.2-16.308 98.607-16.308 193.611v286.53c0 95.005 0 142.602 16.118 193.613 20.29 55.75 64.285 99.745 120.036 120.035 51.2 16.119 98.607 16.119 193.611 16.119h286.53c95.005 0 142.413 0 193.613-16.119 55.75-20.29 99.745-64.284 120.225-120.035 16.118-51.2 16.118-98.608 16.118-193.612V368.45c0-95.005 0-142.412-16.118-193.612-20.29-55.752-64.285-99.746-120.225-120.226-50.821-16.118-98.228-16.118-193.233-16.118z m0 0" p-id="5036"></path><path d="M235.52 456.818h70.732v370.346H235.52V456.818z m40.012-112.45c17.825 32.995 29.203 65.8 34.512 98.796h77.18c-10.62-42.097-23.894-74.903-39.823-98.797h-71.87z m0 0" fill="#a0cfff" p-id="5037"></path><path d="M427.804 278.566h85.144v-46.649H358.59c1.706-3.603 4.361-10.05 7.964-19.153 1.707-7.395 3.603-12.705 5.31-16.497H292.03c-12.326 49.303-40.77 85.902-85.144 109.795v46.65c58.595-14.602 100.124-39.254 124.966-73.956H358.4c8.913 23.703 14.222 46.648 15.929 68.645h74.524c-5.12-25.79-12.326-48.734-21.049-68.835z m-34.702 148.1h320.664v301.701c1.707 27.497-10.62 40.202-37.167 38.306h-43.995v54.803h63.906c62.009 1.896 92.16-26.549 90.453-85.144V371.864h-393.86v54.803z m0 0" fill="#a0cfff" p-id="5038"></path><path d="M643.224 476.16H382.483v277.049H563.39c56.699 1.896 83.437-25.6 79.834-82.3V476.16z m-188.871 49.304h117.001v63.146H454.353v-63.146z m82.488 178.252h-82.488v-68.457h117.001v32.996c1.707 25.41-9.671 37.357-34.513 35.46zM645.88 229.262c0-1.896 0.948-4.55 2.654-8.154l7.965-24.652h-79.834c-12.516 51.2-39.823 89.695-82.49 115.295v43.805c54.993-14.602 96.712-40.202 124.967-76.8h37.167c8.913 23.703 14.222 46.648 15.929 68.645h71.87c-1.707-18.204-8.913-41.15-21.239-68.645h93.108v-49.304H645.88z m0 0" fill="#a0cfff" p-id="5039"></path></svg>',iconIFJuejin:'<svg t="1690725319716" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6174" width="16" height="16"><path d="M465.189 161.792c-22.967 18.14-44.325 35.109-47.397 37.742l-5.851 4.68 10.971 8.632c5.998 4.827 11.85 9.508 13.02 10.532 1.17 1.024 17.993 14.336 37.156 29.696l34.962 27.795 5.267-3.95c2.925-2.194 23.259-18.432 45.348-35.986 21.943-17.555 41.253-32.768 42.716-33.646 1.609-1.024 2.779-2.194 2.779-2.78 0-0.438-9.655-8.63-21.504-17.846-11.995-9.363-22.674-17.847-23.845-18.871-15.945-13.02-49.737-39.059-50.76-39.059-0.586 0.147-19.896 14.922-42.862 33.061z m233.325 180.37C507.465 493.275 508.928 492.105 505.417 489.911c-3.072-1.902-11.556-8.485-64.073-50.03-9.07-7.168-18.578-14.775-21.358-16.823-2.78-2.194-8.777-6.875-13.312-10.532-4.68-3.657-10.679-8.339-13.312-10.533-13.165-10.24-71.095-56.027-102.107-80.457-5.852-4.681-11.41-8.485-12.142-8.485-0.731 0-10.971 7.754-22.674 17.116-11.703 9.508-22.674 18.286-24.284 19.456-1.755 1.17-5.12 3.95-7.46 6.144-2.34 2.34-4.828 4.096-5.413 4.096-3.072 0-0.731 3.072 6.437 8.777 4.096 3.218 8.777 6.875 10.094 8.046 1.316 1.024 10.24 8.045 19.748 15.506s23.26 18.286 30.428 23.99c19.31 15.215 31.89 25.308 127.853 101.084 47.836 37.742 88.796 69.779 90.844 71.095 3.657 2.487 3.95 2.487 7.46-0.292a1041.42 1041.42 0 0 0 16.092-12.727c6.875-5.413 14.775-11.703 17.554-13.897 30.135-23.699 80.018-63.05 81.774-64.512 1.17-1.024 12.434-9.802 24.868-19.603s37.888-29.696 56.32-44.324c18.579-14.629 46.227-36.425 61.733-48.567 15.506-12.142 27.794-22.528 27.502-23.26-0.878-1.17-57.637-47.104-59.978-48.274-0.731-0.439-18.578 12.727-39.497 29.257z" p-id="6175"></path><path d="M57.93 489.326c-15.215 12.288-28.527 23.405-29.697 24.576-2.34 2.194-5.412-0.44 80.018 66.852 33.207 26.185 32.622 25.747 57.637 45.495 10.386 8.192 36.279 28.672 57.783 45.495 38.18 30.135 44.91 35.401 52.663 41.545 2.048 1.756 22.967 18.14 46.372 36.572 23.26 18.432 74.167 58.514 112.933 89.088 38.912 30.573 71.095 55.734 71.826 56.027 0.732 0.293 7.46-4.389 14.921-10.386 21.797-16.97 90.259-70.949 101.523-79.872 5.705-4.535 12.873-10.24 15.945-12.58 3.072-2.488 6.436-5.12 7.314-5.852 0.878-0.878 11.85-9.509 24.283-19.31 20.773-16.091 59.1-46.226 64.366-50.615 1.17-1.024 5.12-4.096 8.777-6.875 3.657-2.78 7.9-6.29 9.509-7.607 1.609-1.317 14.775-11.703 29.257-23.113 29.11-22.82 42.277-33.207 88.503-69.632 17.262-13.605 32.475-25.454 33.646-26.478 2.486-2.048 31.451-24.869 44.617-35.255 4.827-3.657 9.07-7.168 9.508-7.607 0.44-0.585 5.998-4.827 12.435-9.8 6.436-4.828 13.165-10.24 15.067-11.85l3.365-2.926-9.948-7.753c-5.412-4.388-10.24-8.192-10.679-8.63-1.17-1.317-22.381-18.433-30.135-24.284-3.95-3.072-7.314-5.998-7.606-6.73-1.317-3.071-6.73 0.147-29.258 17.994-13.458 10.532-25.746 20.187-27.355 21.504-1.61 1.463-10.533 8.338-19.749 15.652-9.216 7.168-17.115 13.459-17.554 13.898-0.439 0.438-6.583 5.412-13.897 10.971-7.168 5.559-15.214 11.703-17.7 13.75-4.974 4.097-5.413 4.39-20.334 16.239-5.56 4.388-11.264 8.777-12.435 9.8-1.17 1.025-20.333 16.092-42.422 33.354-22.09 17.408-41.546 32.768-43.155 34.084-1.609 1.463-14.482 11.557-28.525 22.528s-40.814 32.037-59.539 46.812c-18.578 14.775-42.276 33.353-52.516 41.399s-23.26 18.285-28.965 22.82l-10.386 8.339-4.389-3.072c-2.34-1.756-4.68-3.511-5.12-3.95-0.439-0.439-4.973-4.096-10.24-8.046-11.849-9.216-14.482-11.264-16.676-13.166-0.878-0.877-4.243-3.51-7.46-5.851-3.22-2.487-6.145-4.681-6.584-5.12-0.439-0.439-6.875-5.705-14.482-11.703-7.607-5.851-14.921-11.556-16.091-12.58-1.317-1.17-17.116-13.605-35.255-27.795-17.993-14.19-35.109-27.648-38.035-29.842-5.705-4.681-33.499-26.624-125.074-98.743-34.523-27.209-72.704-57.344-84.846-66.852-49.737-39.498-55.15-43.594-56.905-43.447-0.877 0-14.043 10.24-29.257 22.528z" p-id="6176"></path></svg>',iconIFFlowus:'<svg t="1695385585153" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9273" width="16" height="16"><path d="M357.717333 907.733333c-93.952 56.661333-174.805333 72.533333-223.829333 31.445334-45.269333-37.973333-47.616-105.984-19.584-192.512a42.666667 42.666667 0 0 1 81.194667 26.325333c-18.389333 56.746667-17.194667 92.074667-6.741334 100.821333 13.909333 11.690667 64.981333-0.768 136.576-46.762666 82.218667-52.864 177.365333-140.074667 265.386667-244.992 88.277333-105.173333 157.269333-212.821333 194.602667-301.44 32.554667-77.184 35.712-128.256 21.76-139.946667-3.413333-2.858667-10.368-4.48-22.698667-3.157333a42.666667 42.666667 0 1 1-9.002667-84.906667c33.664-3.541333 63.530667 3.413333 86.528 22.656 47.829333 40.149333 47.786667 118.357333 11.264 216.192C915.797333 353.493333 938.666667 430.549333 938.666667 512c0 235.648-191.018667 426.666667-426.666667 426.666667a426.026667 426.026667 0 0 1-142.08-24.234667 42.624 42.624 0 0 1-12.202667-6.698667z m86.997334-61.013333A341.333333 341.333333 0 0 0 853.333333 512c0-44.373333-8.448-86.741333-24.362666-124.288-41.898667 78.122667-100.992 163.541333-172.885334 249.173333-69.973333 83.413333-142.464 155.136-211.370666 209.834667z m222.933333-733.141333a42.666667 42.666667 0 0 1-29.696 80.042666A362.026667 362.026667 0 0 0 512 170.666667a341.333333 341.333333 0 0 0-321.706667 455.68 42.666667 42.666667 0 0 1-80.426666 28.586666A423.68 423.68 0 0 1 85.333333 512C85.333333 276.352 276.352 85.333333 512 85.333333c53.248 0 105.770667 9.813333 155.648 28.245334z" p-id="9274"></path></svg>',iconIFHaloweb:'<svg t="1695385585153" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9273" width="16" height="16"><path d="M256 0v409.6h512V0h256v1024H768V665.6H256V1024H0V0z" p-id="6601"></path><</svg>',iconIFWechat:'<svg t="1690726490823" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7276" width="16" height="16"><path d="M996.427776 623.853568c0-139.354112-138.063872-251.815936-291.87072-251.815936-162.281472 0-290.656256 112.461824-290.656256 251.815936 0 139.352064 128.374784 251.807744 290.656256 251.807744 35.119104 0 69.031936-11.001856 104.148992-18.331648l92.043264 52.559872-24.2176-88.014848c67.821568-50.122752 119.896064-119.791616 119.896064-198.02112z m-386.338816-45.24032c-16.95744 0-33.906688-15.890432-33.906688-31.77472 0-19.562496 16.95744-35.446784 33.906688-35.446784 25.438208 0 43.599872 15.890432 43.599872 35.446784 0.002048 15.884288-18.161664 31.77472-43.599872 31.77472z m190.144512 0c-18.167808 0-33.910784-15.890432-33.910784-31.77472 0-19.562496 15.745024-35.446784 33.910784-35.446784 24.219648 0 42.387456 15.890432 42.387456 35.446784 0 15.884288-18.169856 31.77472-42.387456 31.77472z"  p-id="7277"></path><path d="M683.97056 352.48128c9.68704 0 20.588544 1.216512 32.700416 3.672064-29.063168-141.809664-178.03264-242.044928-345.155584-242.044928-188.925952 0-343.943168 127.127552-343.943168 293.373952 0 94.130176 50.868224 171.145216 136.855552 232.25344l-35.131392 105.132032 122.318848-62.347264c42.385408 12.232704 75.087872 19.562496 119.90016 19.562496 9.68704 0 20.594688 0 30.27968-1.216512-6.053888-24.45312-9.684992-47.681536-9.684992-73.34912 0-150.355968 127.156224-275.03616 291.86048-275.03616z m-185.2928-91.686912c26.64448 0 43.599872 15.890432 43.599872 42.78272 0 25.675776-16.955392 42.784768-43.599872 42.784768-25.432064 0-49.657856-17.1008-49.657856-42.784768 0-26.894336 24.225792-42.78272 49.657856-42.78272z m-239.794176 85.573632c-25.432064 0-52.076544-17.115136-52.076544-42.79296 0-26.894336 26.64448-42.78272 52.076544-42.78272 24.223744 0 43.599872 15.890432 43.599872 42.78272 0 25.677824-19.376128 42.79296-43.599872 42.79296z"  p-id="7278"></path></svg>',iconIFSiyuan:'<svg t="1690817357506" class="icon" viewBox="0 0 1025 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1557" width="16" height="16"><path d="M1.706667 0h1024v1024H1.706667z" fill="#2E2C2F" p-id="1558"></path><path d="M307.862187 555.677013l38.34368 13.202774c-13.19936 47.77472-22.00064 70.40512-38.971734 106.23488-13.830827 28.91264-22.00064 42.115413-42.745173 69.771946l-35.82976-25.775786c22.00064-24.512853 30.17216-37.08416 43.373227-62.85824 17.600853-33.312427 25.14432-54.683307 35.82976-100.575574z m-13.201067-103.673173v-153.378133c0-27.02848-0.628053-44.00128-2.515627-60.972374 16.34304 2.51392 34.573653 3.141973 59.088214 3.141974H668.0064c24.512853 0 42.743467-0.628053 59.086507-3.141974-1.88416 16.34304-2.51392 32.058027-2.51392 60.972374v153.378133c0 26.400427 0.62976 42.115413 2.51392 58.4192-18.230613-2.471253-37.085867-3.10272-59.086507-3.10272H350.605653c-21.998933 0-40.855893 1.256107-58.458453 3.10272 1.885867-16.93184 2.51392-33.90464 2.51392-58.4192z m230.029653 20.744533h161.542827v-83.60448h-161.542827v83.60448z m0-117.548373h161.542827v-79.83104h-161.542827v79.83104z m-191.684266 117.548373h154.632533v-83.60448h-154.632533v83.60448z m0-117.548373h154.632533v-79.83104h-154.632533v79.83104z m144.576853 196.082347l29.540693-20.744534c36.462933 34.573653 58.422613 59.712853 90.478934 104.3456l-32.05632 25.14432c-27.0336-45.88544-48.402773-72.915627-87.963307-108.745386z m-43.999573 57.828693v89.260373c0 23.888213 10.68032 27.026773 91.106986 27.026774 72.91392 0 95.5392-3.13856 104.97024-15.085227 6.28736-8.797867 9.42592-28.286293 11.32032-72.287573 13.824 8.173227 23.253333 11.94496 38.966614 15.714986-6.28736 61.60384-11.93984 81.716907-27.656534 92.407467-16.34304 11.941547-52.169387 16.341333-135.14752 16.341333-104.9344 0-123.16672-8.173227-123.16672-55.942826v-97.4336c0-32.684373-0.626347-42.745173-3.76832-57.8304h47.14496c-3.145387 16.96768-3.770027 27.656533-3.770026 57.828693z m261.4528-57.828693c42.743467 52.800853 71.02976 96.802133 103.71584 162.174293l-35.82976 24.517973c-30.173867-72.28928-53.430613-111.261013-98.689707-167.835306l30.803627-18.85696z" fill="#FFFFFF" p-id="1559"></path></svg>',iconIFBilibili:'<svg t="1734331670054" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4398" width="16" height="16"><path d="M262.4 64h499.2C892.8 64 960 131.2 960 262.4v499.2c0 131.2-67.2 198.4-198.4 198.4H262.4C131.2 960 64 892.8 64 761.6V262.4C64 131.2 131.2 64 262.4 64z" fill="#FF5CA1" p-id="4399"></path><path d="M707.2 454.4c3.2 0 16-3.2 16-3.2l6.4 48-12.8 3.2c0-6.4-9.6-44.8-9.6-48m25.6-6.4l6.4 51.2h19.2c-3.2-19.2-9.6-51.2-9.6-51.2h-16m-12.8 70.4s28.8-6.4 38.4-3.2c6.4 19.2 16 128 16 131.2-6.4 0-28.8 3.2-28.8 3.2-3.2-6.4-25.6-124.8-25.6-131.2m105.6-64h16c0 3.2 3.2 48 0 48h-12.8c0-3.2-3.2-44.8-3.2-48m22.4 0v51.2h19.2v-51.2c-6.4 0-12.8-3.2-19.2 0m-19.2 67.2s28.8-3.2 38.4 0c3.2 22.4 3.2 128 3.2 131.2h-28.8c0-6.4-12.8-128-12.8-131.2m-67.2-131.2c16 86.4 28.8 236.8 32 246.4h28.8c-12.8-92.8-22.4-243.2-22.4-246.4-3.2-6.4-38.4 0-38.4 0m-38.4 208c-3.2-25.6-89.6-51.2-140.8-44.8 0 0-6.4-54.4-9.6-105.6-3.2-44.8 0-89.6 0-96-3.2-3.2-38.4 16-57.6 22.4 0 0 22.4 96 38.4 297.6 0 0 25.6 3.2 70.4-6.4 51.2-9.6 102.4-35.2 99.2-67.2M617.6 640l-9.6-54.4c3.2 0 48 16 54.4 19.2 0 3.2-44.8 35.2-44.8 35.2m-275.2-185.6c3.2 0 16-3.2 16-3.2l6.4 48c-3.2 0-12.8 3.2-12.8 3.2 0-6.4-9.6-44.8-9.6-48m25.6-6.4l6.4 51.2h19.2c-3.2-19.2-6.4-51.2-6.4-51.2h-19.2m-12.8 70.4s28.8-6.4 38.4-3.2c6.4 19.2 16 128 16 131.2-6.4 0-28.8 3.2-28.8 3.2-3.2-6.4-25.6-124.8-25.6-131.2m105.6-64h16c0 3.2 3.2 48 0 48h-12.8c0-3.2-3.2-44.8-3.2-48m25.6 0v51.2h19.2v-51.2c-6.4 0-12.8-3.2-19.2 0m-22.4 67.2s28.8-3.2 38.4 0c3.2 22.4 3.2 128 3.2 131.2h-28.8c0-6.4-12.8-128-12.8-131.2m-67.2-131.2c16 86.4 28.8 236.8 32 246.4h28.8c-9.6-92.8-19.2-243.2-19.2-249.6-6.4-3.2-41.6 3.2-41.6 3.2m-38.4 208c-3.2-25.6-89.6-51.2-140.8-44.8 0 0-6.4-54.4-9.6-105.6-3.2-44.8 0-89.6 0-96-3.2-3.2-38.4 16-57.6 22.4 0 0 22.4 96 38.4 297.6 0 0 25.6 3.2 70.4-6.4s105.6-35.2 99.2-67.2M252.8 640l-6.4-54.4c3.2 0 48 16 54.4 19.2-3.2 3.2-48 35.2-48 35.2" fill="#FFFFFF" p-id="4400"></path></svg>',iconIFXiaohongshu:'<svg t="1734493159181" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5159" width="16" height="16"><path d="M726.51776 457.45152c-6.70208-0.0768-13.39392 0-20.00384-0.0768-2.37056 0-3.0464 1.05984-3.0464 3.23072 0.0768 5.10976 0.0768 10.13248 0.0768 15.232v0.01024c0.07168 4.87936 0 9.7536 0.07168 14.56128 0 3.90656 0.68096 4.66944 4.45952 4.66944 7.1424 0.0768 14.27456 0 21.41696 0.0768 2.67776 0 3.72736-1.28 3.65056-3.75808-0.08704-9.1648-0.08704-18.31936-0.15872-27.48416a6.7584 6.7584 0 0 0-6.46656-6.46144z" fill="#FF2E4D" p-id="5160"></path><path d="M849.92 51.2h-675.84c-67.8656 0-122.88 55.0144-122.88 122.88v675.84c0 67.8656 55.0144 122.88 122.88 122.88h675.84c67.8656 0 122.88-55.0144 122.88-122.88V174.08c0-67.8656-55.0144-122.88-122.88-122.88zM250.78784 505.73312c-0.73728 10.59328-1.41312 21.25312-2.60608 31.8464-2.08896 18.39104-6.24128 36.26496-14.6432 52.864-2.16064 4.12672-5.13536 7.79776-8.18176 12.45696-1.85344-3.90656-3.41504-6.97856-4.82816-10.13248a3203.59424 3203.59424 0 0 1-14.79168-33.56672c-0.52736-1.2032-0.896-2.92352-0.36864-3.97824 3.19488-6.83008 3.41504-14.12096 3.85536-21.40672 0.60416-9.15968 1.35168-18.24256 2.01728-27.39712 0.51712-7.00416 0.80896-13.9776 1.39776-20.96128 0.67584-8.10496 1.49504-16.21504 2.16064-24.24832 0.14848-1.96608 1.04448-2.56 2.82624-2.56 11.0848 0 22.07744 0 33.16224-0.07168 2.37056 0 3.0464 0.98304 2.89792 3.23072-0.96768 14.63296-1.86368 29.28128-2.89792 43.92448z m71.29088 87.32672c-0.73728 9.46176-5.13536 17.49504-12.5696 23.5008-5.43232 4.352-11.74528 6.15936-18.6624 6.08256-5.87264 0-11.66848-0.0768-17.54112 0-2.00192 0-3.27168-0.60416-4.09088-2.55488-3.41504-7.6544-6.90688-15.32416-10.32192-22.97344-0.52736-1.13152-0.67584-2.33472-1.13152-3.456-1.63328-4.12672-1.5616-4.28544 2.97472-4.36224h13.90592c5.94944 0 8.47872-2.46784 8.5504-8.56576 0.07168-4.57216 0.07168-9.14944 0.07168-13.73696V494.2336c0.14848 0.15872 0.22016 0.15872 0.29696 0.15872V408.63744c0-4.28544 0.14848-4.43392 4.38784-4.43392h29.21472c5.13536 0 5.20704 0.14848 5.20704 5.40672 0 27.1872 0 54.36416 0.0768 81.47968 0.0768 23.87456 0.29696 47.75936 0.29696 71.6288 0 10.14272 0.14848 20.26496-0.6656 30.34112z m75.58656-28.90752c-4.98688 11.56096-10.19904 22.97344-15.31904 34.4576-0.45568 1.13664-1.19296 2.25792-2.3808 4.42368v0.01024c-2.97472-4.5056-6.0928-8.18176-8.11008-12.39552-2.82624-6.13888-4.5312-12.83584-7.35744-18.9952-3.0464-6.6816-4.15744-13.88032-5.57568-20.94592-1.1776-6.02112-1.40288-12.25216-1.8432-18.3296-1.2032-15.39584-2.23744-30.78656-3.44064-46.09536a2449.95584 2449.95584 0 0 0-2.0736-25.1648c-0.14848-1.50016 0.2304-2.176 1.94048-2.176 11.52512 0 22.97344-0.14848 34.49856-0.22016 2.1504 0 3.0464 0.96768 3.11808 2.9952 0.29696 4.65408 0.51712 9.31328 0.88576 13.97248 0.29696 3.83488 0.73728 7.6544 1.04448 11.41248 0.51712 5.40672 1.04448 10.81344 1.41312 16.14336 0.51712 6.90688 0.51712 13.81888 1.4848 20.63872 1.34144 10.4448 0.29696 21.10464 3.93216 31.32928 0.89088 2.40128-0.96768 6.08768-2.21696 8.93952z m84.28032 22.016c-2.89792 6.6816-6.02112 13.21472-8.99072 19.82464-1.64352 3.74784-3.19488 7.49568-4.76672 11.25376-1.85344 4.51072-3.11808 5.40672-7.87456 5.40672h-22.2976c-7.52128 0-15.0272 0.23552-22.53312-0.0768-3.56352-0.14336-7.0656-1.27488-10.62912-2.02752-1.792-0.36864-2.16064-1.42336-1.41312-3.14368a3709.71648 3709.71648 0 0 0 13.45024-29.21472c1.04448-2.24768 1.85344-4.65408 3.0464-6.90688 0.29696-0.6144 1.41312-1.28 2.00192-1.13152 12.42112 3.15392 25.13408 2.77504 37.76512 2.63168a874.6496 874.6496 0 0 1 20.07552 0c3.19488 0.00512 3.50208 0.45568 2.16576 3.38432z m3.84-21.86752a4.48512 4.48512 0 0 1-2.74944 1.4336c-13.89568 0.0768-27.8784 0.14848-41.77408-0.0768-4.23936-0.08704-8.5504-1.05472-11.74528-4.28544-3.3536-3.3792-4.98688-7.36256-3.28192-11.93984a897.52576 897.52576 0 0 1 9.58464-24.10496c3.88096-9.15456 7.81312-18.31936 12.05248-28.2368-2.30912-0.14848-3.712-0.29696-5.04832-0.29696-4.09088-0.07168-8.18176 0.29696-12.27264-0.2304-4.45952-0.51712-8.99072-1.04448-12.48256-4.79232-3.42528-3.6864-3.94752-8.04352-2.60608-12.32384 2.1504-6.83008 4.97664-13.44 7.80288-20.04992 2.67776-6.15424 5.72416-12.16 8.47872-18.24256 2.97472-6.53824 5.86752-13.07136 8.77056-19.6096a1361.99168 1361.99168 0 0 0 7.6544-17.33632c0.73728-1.80736 1.8688-2.47808 3.87072-2.47808 10.93632 0.07168 21.92896 0 32.86528 0 3.6352 0 3.712 0.36864 2.29888 3.6864-6.31296 14.63296-12.71808 29.20448-18.95936 43.84768a11.52 11.52 0 0 0-1.19296 4.87936c0.22016 3.90656 1.04448 4.5056 5.06368 4.5056 8.17152 0.0768 16.35328 0 24.448 0 1.64864 0 3.3536 0.22016 4.98688 0.29696 2.30912 0.0768 2.60608 1.05984 1.63328 3.072a2455.21408 2455.21408 0 0 0-13.3888 29.21472c-3.03616 6.91712-5.93408 13.89568-8.9088 20.8128a1530.1632 1530.1632 0 0 1-6.1696 13.80864c-1.94048 4.20352-0.60416 6.31296 4.15232 6.38976 6.02112 0 12.04224 0.0768 18.05824 0 2.08896 0 3.13344 0.60416 2.08896 2.85184-3.6352 8.25344-7.21408 16.58368-10.84928 24.85248-0.67072 1.50016-1.408 3.072-2.3808 4.352z m134.81472 58.73664h-125.3376c-1.72032-0.22016-3.48672-0.22016-5.94432-0.22016v-0.01536c0.88064-2.61632 1.41312-4.41856 2.1504-6.0672 4.69504-10.29632 9.4464-20.5056 14.0544-30.79168 1.04448-2.33472 2.52928-2.92352 4.75648-2.92352h28.6976c4.54656 0 4.75648-0.2304 4.75648-4.74112V461.66016c0-3.97824-0.0768-4.05504-4.08064-4.05504-6.10304 0-12.26752-0.0768-18.36544 0-2.30912 0-3.27168-0.51712-3.27168-3.1488 0.14848-10.97216 0.0768-21.92896 0.0768-32.88576 0-3.90656 0.0768-3.90656 3.86048-3.90656h73.00096c4.23936 0 8.5504 0.0768 12.78976 0 2.01728 0 2.82624 0.82432 2.74944 2.85184-0.0768 11.41248-0.0768 22.82496-0.0768 34.31424 0 2.02752-0.73728 2.77504-2.82624 2.77504-6.6048-0.0768-13.14304 0.07168-19.77856 0.07168-2.29376 0-3.33824 1.05984-3.33824 3.46624 0.0768 18.39104 0.14336 36.7104 0.14336 55.11168 0 20.87424 0 41.74848 0.0768 62.6944 0 3.75808 0.36864 4.21376 4.17792 4.21376h31.4368c3.41504 0 3.87072 0.36864 3.93728 3.81952 0.08704 10.97216 0 21.92896 0.08704 32.89088-0.01024 2.8672-1.57184 3.16416-3.73248 3.16416z m198.69696-34.92864c-0.14848 16.37376-11.008 29.21472-26.38848 32.89088-4.31616 1.05472-8.78592 1.35168-13.24544 1.5104-6.83008 0.22016-13.7472 0.07168-20.58752 0.07168-4.23936 0-5.42208-0.83456-6.9888-4.66432-3.33824-7.95136-6.83008-15.90784-10.26048-23.87456l-0.66048-1.57184c-1.19296-3.072-0.81408-3.61472 2.45248-3.61472 9.43616-0.07168 18.95424 0.15872 28.3904-0.29184 5.65248-0.29696 8.03328-2.85696 8.18688-8.64256 0.22016-11.04384-0.29696-22.07744-0.14848-33.11104 0.0768-5.48864-6.84032-11.42272-11.74528-11.71968a32.8448 32.8448 0 0 0-2.74944-0.14336c-18.73408 0-37.54496 0-56.2688 0.07168-5.27872 0-5.65248 0.53248-5.65248 5.8624l0.20992 77.55776c0 4.14208-0.0768 4.21376-4.23936 4.21376h-31.22176c-4.01408 0-4.3008-0.3072-4.3008-4.28544v-39.94112c0.06144 0.14336 0.13312 0.14336 0.20992 0.14336v-40.99584c0-2.78016-1.85344-2.93888-3.78368-2.93888-10.19392 0.08704-20.44416 0.31232-30.62272 0.31232-6.92224 0-6.17984 0.8192-6.25664-6.38976-0.0768-9.90208 0-19.90144 0-29.80352 0-3.59936 0.36864-4.05504 3.94752-4.13184 10.7008-0.07168 21.33504 0 32.04096-0.07168 4.09088 0 4.31104-0.15872 4.38272-4.21376 0.0768-9.90208-0.0768-19.8144 0-29.73184 0-2.4832-1.04448-3.23072-3.41504-3.23072-6.84544 0.0768-13.76256-0.07168-20.60288 0-2.1504 0-2.89792-0.74752-2.89792-2.92352 0.09216-11.26912 0.09216-22.46144-0.06144-33.72544 0-2.70336 1.03424-3.29216 3.41504-3.29216 6.31296 0.0768 12.6464 0 18.95936 0 4.23424 0 4.45952-0.3072 4.5312-4.74112 0-2.61632 0.14848-5.24288 0-7.87456-0.07168-2.4832 1.04448-3.15904 3.34336-3.15904 9.07776 0.0768 18.22208 0.0768 27.28448 0.0768h4.97664c3.94752 0 4.0192 0 4.1728 4.05504 0.06656 2.4064-0.1536 4.87936-0.08704 7.28576 0.0768 3.3792 0.9728 4.2752 4.31616 4.36224 5.65248 0.0768 11.30496 0.0768 17.024 0.0768 14.6432 0.07168 27.3664 5.09952 37.0176 16.29184 5.35552 6.22592 8.69888 13.81888 9.216 22.14912 0.52736 8.47872 0.15872 17.03936 0.3072 25.52832 0 3.15904 0.22016 6.38976 0.36864 9.53344 0.14336 3.15904 0.896 3.97824 4.09088 3.90656a48.56832 48.56832 0 0 1 19.03104 3.15904c13.00992 5.03808 21.03296 14.18752 23.63904 28.01152a44.4416 44.4416 0 0 1 0.73728 8.33024c0.08192 17.88928 0.06656 35.78368-0.06656 53.6832zM810.14272 453.632c-5.94432 3.90656-12.1856 3.75808-19.4048 3.6864-2.23744 0-5.20192 0.07168-8.09984-0.0768-0.7424-0.07168-2.00704-0.98304-2.08896-1.5872-0.6656-8.84736-1.77152-17.792 1.35168-26.35264 2.75456-7.5776 9.58464-12.01664 17.61792-12.16a19.99872 19.99872 0 0 1 19.32288 14.336c2.30912 8.2688-1.55648 17.42336-8.69888 22.15424z" fill="#FF2E4D" p-id="5161"></path></svg>',iconIFLocalSystem:'<svg t="1761370841774" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1604" width="16" height="16"><path d="M425.426374 647.396599l-309.045989-145.948719 84.7457 7.225005 297.272843 138.723714z" fill="#2054B2" p-id="1605"></path><path d="M201.328385 559.363522v182.384421l297.276455 138.727327v-216.074621l-78.13482 0.137275zM313.088379 336.981472c-0.01445-0.310675-0.050575-0.62135-0.050575-0.935638 0-0.205913 0.046963-0.411825 0.050575-0.617738v-2.116927l-168.736386 85.565738 49.549087 68.756763 119.187299-60.440782V336.981472zM528.4116 647.396599l297.26923-138.723714 84.745699-7.225005-309.045989 145.948719z" fill="#2054B2" p-id="1606"></path><path d="M606.336894 664.537924l-78.138432-0.137275v216.074621l297.276455-138.727327v-182.384421zM713.722148 427.192888l119.183687 60.440782 49.552699-68.756763-168.736386-85.565738v2.116927c0 0.205913 0.050575 0.411825 0.050575 0.617738 0 0.314288-0.036125 0.624963-0.050575 0.935638v90.211416z" fill="#2054B2" p-id="1607"></path><path d="M685.89504 434.533493c0.578 2.890002 0.578 6.376067-0.585226 11.010908-0.570775 4.046003-1.730389 8.680844-3.471615 12.734072-1.730389 4.05684-4.04239 8.102843-6.368842 11.585296-2.312002 3.46439-5.202004 5.790842-8.113681 7.528456-2.893615 1.737614-5.790842 2.312002-7.524843 2.312001-2.322839 0-4.642066-0.574388-7.53568-1.741226-2.315614-0.570775-5.787229-1.152388-9.262457-2.312002-3.471615-0.581613-7.528456-0.581613-11.585296-0.581613-4.049615 0.581613-7.535681 1.159613-11.578071 2.32284-4.05684 1.159613-6.950455 3.471615-9.851295 6.368842-5.787229 6.376067-9.262457 13.333747-10.425682 21.414916-1.159613 8.128131 0 15.652974 3.475227 22.610654 2.315614 5.194779 2.315614 9.82962-1.148776 15.049686-1.737614 1.730389-4.05684 4.049615-6.954067 6.368842-3.471615 2.322839-6.954068 4.049615-10.440133 5.787229-4.04239 1.741226-8.095618 2.911677-12.148846 4.049615-4.053228 1.156001-8.099231 1.748451-10.996458 1.748452-2.326452 0-4.053228-0.585225-6.383293-2.322839-1.741226-1.737614-3.471615-3.47884-4.049615-5.78723h-0.581613c-2.897227-7.539293-7.517618-14.486136-13.890073-19.706202-6.383292-5.780004-14.478911-8.113681-23.181429-8.113681-8.684456 0-16.198462 2.918902-23.15253 8.113681-6.946843 5.794454-11.581683 12.166909-14.486135 19.706202-1.156001 2.893615-2.893615 5.202004-5.787229 6.358005-2.322839 1.156001-5.216454 2.326452-8.113681 2.326452-3.475228 0-7.532068-0.574388-11.588909-1.730389-4.627616-1.156001-8.680844-2.904452-13.319297-4.649291-4.053228-1.730389-8.106456-4.05684-11.581684-6.36523-3.47884-2.319227-5.798067-5.205616-7.528455-7.53568-1.159613-1.730389-1.744839-4.04239-2.315614-6.368842 0-2.326452 0.570775-5.794454 2.890002-9.854908 2.90084-5.790842 4.053228-12.166909 2.90084-19.706202-0.581613-7.517618-4.060453-13.88646-9.269682-20.251689-3.471615-3.475228-7.532068-6.368842-12.737685-7.521231-5.212841-1.174063-9.84407-1.748451-13.904522-1.174063-5.205616 0-10.414845 1.174063-16.205687 2.908064-3.471615 1.156001-6.950455 0.578-10.429295-0.585225-2.312002-1.730389-5.205616-4.046003-7.528456-7.524843-2.319227-3.475228-4.634841-7.532068-6.365229-12.166909-1.744839-4.046003-3.471615-8.680844-4.060453-13.319297-1.159613-4.638453-1.159613-8.120906-0.574388-11.592521 0.574388-5.205616 3.471615-8.688069 7.524843-10.418458 7.528456-2.90084 13.897298-8.117293 20.266139-14.486135 5.794454-6.946843 8.691681-14.471686 8.691682-23.163367 0-8.688069-2.897227-16.216524-8.691682-22.581754a52.977351 52.977351 0 0 0-20.266139-13.900911c-2.319227-0.581613-4.053228-2.315614-5.790842-5.212841-1.730389-2.893615-2.315614-5.787229-2.315614-8.684456 0-3.471615 0.588838-6.950455 1.741226-10.996458 1.152388-4.060453 2.312002-8.110068 4.046003-11.585296 1.744839-3.468003 3.475228-6.939618 5.794454-10.425683 2.319227-2.890002 4.638453-5.202004 6.954068-6.94323a11.126508 11.126508 0 0 1 5.780004-1.744839c1.741226 0 4.05684 0.585225 6.376067 1.744839 7.528456 2.893615 15.053299 4.053228 23.163367 2.893615 8.106456-1.156001 15.056911-4.638453 21.429366-10.425683 2.893615-2.893615 5.209229-6.376067 6.372455-11.003683 1.156001-4.053228 2.315614-8.680844 2.315614-12.744909 0.578-4.053228 0.578-8.102843 0-11.578071-0.578-3.475228-0.578-5.787229-1.159614-7.535681-0.578-1.730389-1.156001-3.468003-1.156-5.209229-0.578-1.734001 0-3.468003 0.578-5.202004 1.163226-3.471615 4.053228-6.372455 7.532068-9.266069 4.05684-2.319227 8.110068-4.638453 12.741297-6.37968 4.634841-1.734001 8.680844-2.890002 13.32291-4.053228 4.05684-0.574388 6.946843-1.159613 9.851294-1.159613 3.468003 0 5.783617 1.159613 7.532068 2.893615 1.737614 2.312002 2.893615 4.053228 4.049616 6.372454 2.893615 6.94323 6.94323 12.737684 13.319297 17.954139 6.368842 5.205616 13.315685 7.532068 21.996529 7.532068 8.673619 0 16.216524-2.326452 23.159754-7.532068 6.950455-4.638453 11.588908-11.003683 13.91536-18.528526 1.141551-1.741226 2.315614-4.049615 4.631229-6.372455 2.319227-1.159613 4.046003-2.319227 6.361617-2.319227 3.486065 0 7.550131 0.585225 11.599746 1.737614 4.04239 1.159613 8.106456 2.315614 12.156071 4.046003 4.053228 1.741226 7.535681 4.060453 11.007296 6.950455s5.794454 5.787229 8.110068 8.688069c1.159613 1.734001 1.737614 4.049615 1.159614 6.365229s-1.159613 4.05684-1.748452 5.216454c-3.468003 6.939618-4.04239 15.060524-2.893614 22.581754 1.156001 8.110068 4.642066 15.056911 11.00007 20.847753 5.794454 5.794454 13.32291 9.269682 22.014591 9.851295 8.673619 0.581613 16.783687-0.574388 24.322981-4.053228 1.730389-1.163226 4.631228-1.737614 7.532068-1.737614 2.890002 0 5.198391 1.156001 7.510393 3.471615 3.486065 3.475228 6.961293 8.684456 9.858519 15.631299 2.88639 6.946843 4.624003 14.478911 5.790842 21.429366 0.574388 4.05684 0 7.539293-2.319227 9.851294-1.737614 2.312002-4.049615 4.046003-5.794454 4.627616-7.535681 2.90084-14.471686 7.528456-19.688139 14.471686-5.212841 6.950455-8.106456 14.482523-8.106456 23.174204 0 8.680844 2.315614 15.627686 6.950455 21.989304 4.634841 6.376067 10.42207 11.018133 17.961363 13.32291 1.730389 1.166838 3.468003 1.741226 4.624003 2.893614 1.748451 2.94419 3.47884 5.837804 4.645679 9.313032z m-173.158089 33.003824c10.996458 0 21.418528-2.312002 31.84421-6.376067 10.43652-4.046003 18.521301-9.84407 26.064207-17.37975a78.940408 78.940408 0 0 0 17.372525-26.056982c4.05684-9.84407 6.37968-20.255302 6.37968-31.26621s-2.315614-21.436591-6.37968-31.28066c-4.046003-9.851295-9.84407-18.528526-17.372525-25.486207a79.063233 79.063233 0 0 0-26.064207-17.372525c-9.854907-4.049615-20.273365-6.36523-31.84421-6.365229-11.018133 0-21.429366 2.315614-31.280661 6.365229-9.840457 4.053228-18.528526 9.84407-25.478981 17.372525-7.535681 7.532068-13.319297 15.638524-17.376138 25.486207-4.05684 9.84407-6.372455 20.26614-6.372454 31.28066 0 11.010908 2.319227 21.422141 6.372454 31.26621a78.911508 78.911508 0 0 0 17.376138 26.056982c7.528456 7.532068 15.627686 13.319297 25.478981 17.37975 9.851295 4.645678 20.262527 6.376067 31.280661 6.376067z" fill="#1A1A1A" p-id="1608"></path><path d="M490.725972 387.050758a22.592592 22.592592 0 0 0 11.285458 19.554477 22.596204 22.596204 0 0 0 22.592592 0 22.560079 22.560079 0 0 0 11.28907-19.554477c0-12.473972-10.115007-22.588979-22.596204-22.588979a22.592592 22.592592 0 0 0-22.570916 22.588979z" fill="#1A1A1A" p-id="1609"></path></svg>',iconOTYes:'<svg viewBox="64 64 896 896" focusable="false" class="" data-icon="check-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" fill="#52c41a"></path><path d="M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z" fill="#f6ffed"></path><path d="M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z" fill="#52c41a"></path></svg>',iconOTNo:'<svg t="1690801094533" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3185" width="16" height="16"><path d="M512 0a512 512 0 1 1 0 1024A512 512 0 0 1 512 0z m0 93.12a418.88 418.88 0 1 0 0 837.76 418.88 418.88 0 0 0 0-837.76zM676.544 281.6L742.4 347.52 577.792 512l164.608 164.544L676.48 742.4 512 577.792 347.456 742.4 281.6 676.48 446.208 512 281.6 347.456 347.52 281.6 512 446.208 676.544 281.6z" fill="none" p-id="3186"></path></svg>',iconTelegraph:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M0 0v24h24V0zm6 6h12v3h-4.5v9h-3V9H6z"/></svg>',iconOTRemove:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="#888888" d="M16.066 8.995a.75.75 0 1 0-1.06-1.061L12 10.939L8.995 7.934a.75.75 0 1 0-1.06 1.06L10.938 12l-3.005 3.005a.75.75 0 0 0 1.06 1.06L12 13.06l3.005 3.006a.75.75 0 0 0 1.06-1.06L13.062 12z"/></svg>',iconOTJVue:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 128 128"><path fill="#1697f6" d="M65.3 34.414L40.84 76.79L64 116.926l30.672-53.13l30.66-53.128H79Zm0 0"/><path fill="#aeddff" d="m33.34 63.797l1.605 2.793l22.88-39.649l9.402-16.273H2.668Zm0 0"/><path fill="#1867c0" d="M79 10.668C90.594 48.82 64 116.926 64 116.926L40.84 76.789Zm0 0"/><path fill="#7bc6ff" d="M67.227 10.668c-48.844 0-32.282 55.922-32.282 55.922Zm0 0"/></svg>',iconOTWordpressdotcom:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 256 256"><g fill="none"><rect width="256" height="256" fill="#0073AA" rx="60"/><path fill="#fff" d="M42.214 127.994c0 33.955 19.733 63.299 48.347 77.205L49.641 93.083a85.46 85.46 0 0 0-7.427 34.911m143.694-4.329c0-10.601-3.808-17.943-7.074-23.658c-4.349-7.066-8.425-13.05-8.425-20.116c0-7.886 5.981-15.226 14.405-15.226c.381 0 .741.047 1.112.068c-15.262-13.982-35.595-22.519-57.929-22.519c-29.968 0-56.335 15.376-71.673 38.666c2.012.06 3.909.103 5.52.103c8.973 0 22.862-1.09 22.862-1.09c4.624-.272 5.17 6.52.55 7.067c0 0-4.647.547-9.818.818l31.238 92.918l18.773-56.303l-13.365-36.618c-4.619-.271-8.995-.818-8.995-.818c-4.623-.271-4.081-7.339.542-7.066c0 0 14.166 1.088 22.595 1.088c8.972 0 22.862-1.088 22.862-1.088c4.628-.273 5.171 6.519.55 7.066c0 0-4.657.547-9.818.818l31.001 92.214l8.556-28.592c3.709-11.866 6.531-20.388 6.531-27.732"/><path fill="#fff" d="m129.503 135.498l-25.738 74.79a85.779 85.779 0 0 0 24.233 3.495a85.682 85.682 0 0 0 28.486-4.863a7.476 7.476 0 0 1-.61-1.182zm73.766-48.66a65.8 65.8 0 0 1 .578 8.82c0 8.705-1.626 18.491-6.523 30.727l-26.203 75.759c25.503-14.872 42.657-42.501 42.657-74.148c.001-14.915-3.808-28.94-10.509-41.158"/><path fill="#fff" d="M127.998 28C72.86 28 28 72.857 28 127.994c0 55.144 44.86 99.999 99.998 99.999c55.135 0 100.002-44.855 100.002-99.999C227.998 72.857 183.133 28 127.998 28m0 195.41c-52.61 0-95.413-42.804-95.413-95.416c0-52.609 42.802-95.409 95.413-95.409c52.607 0 95.407 42.8 95.407 95.409c0 52.612-42.8 95.416-95.407 95.416"/></g></svg>'},To={PRE_CUSTOM_HALOWEB:"custom_Haloweb",PRE_CUSTOM_BILIBILI:"custom_Bilibili",PRE_FS_LOCAL_SYSTEM:"fs_LocalSystem"};class ct{static logger=L("env-util");static isSiyuanElectron(){const e=je.siyuanWindow(),t=e?.process?.versions?.node,o=e?.process?.versions?.electron;return!T.isEmptyString(t)&&!T.isEmptyString(o)}static getHomeFolder(){return je.siyuanWindow()?.siyuan?.config?.system?.homeDir??""}static ensurePath(e,t){try{const o=je.siyuanWindow();if(!o?.fs)return this.logger.warn("file system module not available"),!1;const s=o.fs,a=o.require("path");t&&e.includes(t)&&(e=e.replace(t,""));let i=a.normalize(e);return s.existsSync(i)||(s.mkdirSync(i,{recursive:!0}),this.logger.debug(`created directory: ${i}`)),!0}catch(o){return this.logger.error(`check path failed for "${e}":`,o),!1}}static writeFile(e,t){try{const o=je.siyuanWindow();if(!o?.fs)return this.logger.warn("file system module not available"),!1;const s=o.fs,i=o.require("path").normalize(e);return s.writeFileSync(i,t,"utf-8"),this.logger.debug(`file written: ${i}`),!0}catch(o){return this.logger.error(`failed to write file "${e}":`,o),!1}}static deleteFile(e){try{const t=je.siyuanWindow();if(!t?.fs)return this.logger.warn("file system module not available"),!1;const o=t.fs,a=t.require("path").normalize(e);return o.existsSync(a)?(o.unlinkSync(a),this.logger.debug(`file deleted: ${a}`),!0):(this.logger.warn(`file not found, skip deletion: ${a}`),!1)}catch(t){return this.logger.error(`failed to delete file "${e}":`,t),!1}}static writeBinaryFile(e,t){try{const o=je.siyuanWindow();if(!o?.fs)return this.logger.warn("File system module not available"),!1;const s=o.fs,i=o.require("path").normalize(e),n=this.dirname(i);if(!this.ensurePath(n))return!1;const l=Jo.from(t);return s.writeFileSync(i,l),this.logger.debug(`Binary file written: ${i} (${l.length} bytes)`),!0}catch(o){return this.logger.error(`Failed to write binary file "${e}":`,o),!1}}static dirname(e){try{const t=je.siyuanWindow();return e?t?.require?t.require("path").dirname(e):e.substring(0,e.lastIndexOf("/")):""}catch(t){return this.logger.error("Path dirname failed, using fallback:",t),e?e.substring(0,e.lastIndexOf("/")):""}}static sanitizeFilename(e){return e.replace(/[\\/:*?"<>|]/g,"_")}static joinPath(...e){try{const t=je.siyuanWindow();return t?.require?t.require("path").join(...e):e.join("/")}catch(t){return this.logger.error("path join failed, using fallback:",t),e.join("/")}}}const dc=ct.isSiyuanElectron(),Wt={cookieWhiteList:[U.Custom_Wechat.toString(),U.Custom_Zhihu.toString()],uaWhiteList:["https://*.qq.com/*","https://*.bilibili.com/*","https://*.xiaohongshu.com/*"],cookieLimit:[],cookieLimitTipsAuth:{},cookieLimitTipsImg:{},headersMap:{}},uc=p=>[{type:me.Common,title:p("setting.platform.universal"),img:"./images/universal.webp",description:p("setting.platform.universal.desc")},{type:me.Github,title:p("setting.platform.github"),img:"./images/github.png",description:p("setting.platform.github.desc")},{type:me.Gitlab,title:p("setting.platform.gitlab"),img:"./images/gitlab.jpg",description:p("setting.platform.gitlab.desc")},{type:me.Metaweblog,title:p("setting.platform.metaweblog"),img:"./images/xmlrpc.png",description:p("setting.platform.metaweblog.desc")},{type:me.Wordpress,title:p("setting.platform.wordpress"),img:"./images/wordpress-logo.svg",description:p("setting.platform.wordpress.desc")},{type:me.Custom,title:p("setting.platform.custom"),img:"./images/http.png",description:p("setting.platform.custom.desc")},{type:me.Fs,title:p("setting.platform.fs"),img:"./images/fs.png",description:p("setting.platform.fs.desc")}],Re={commonCfg:[{platformType:me.Common,subPlatformType:U.Common_Yuque,platformKey:"common_Yuque",platformName:"è¯­é›€",platformIcon:we.iconIFYuque,authMode:de.API,isEnabled:!1},{platformType:me.Common,subPlatformType:U.Common_Notion,platformKey:"common_Notion",platformName:"Notion",platformIcon:we.iconIFNotion,authMode:de.API,isEnabled:!1},{platformType:me.Common,subPlatformType:U.Common_Halo,platformKey:"common_Halo",platformName:"Halo29",platformIcon:we.iconIFHalo,authMode:de.API,isEnabled:!1},{platformType:me.Common,subPlatformType:U.Common_Telegraph,platformKey:"common_Telegraph",platformName:"Telegraph",platformIcon:we.iconTelegraph,authMode:de.API,isEnabled:!1},{platformType:me.Common,subPlatformType:U.Common_Confluence,platformKey:"common_Confluence",platformName:"Confluence",platformIcon:we.iconIFConfluence,authMode:de.API,isEnabled:!1}],githubCfg:[{platformType:me.Github,subPlatformType:U.Github_Hexo,platformKey:"github_Hexo",platformName:"Hexo",platformIcon:we.iconIFHexo,authMode:de.API,isEnabled:!1},{platformType:me.Github,subPlatformType:U.Github_Hugo,platformKey:"github_Hugo",platformName:"Hugo",platformIcon:we.iconIFHugo,authMode:de.API,isEnabled:!1},{platformType:me.Github,subPlatformType:U.Github_Jekyll,platformKey:"github_Jekyll",platformName:"Jekyll",platformIcon:we.iconIFJekyll,authMode:de.API,isEnabled:!1},{platformType:me.Github,subPlatformType:U.Github_Quartz,platformKey:"github_Quartz",platformName:"Quartz",platformIcon:we.iconIFJekyll,authMode:de.API,isEnabled:!1},{platformType:me.Github,subPlatformType:U.Github_Vuepress,platformKey:"github_Vuepress",platformName:"Vuepress",platformIcon:we.iconIFVuepress,authMode:de.API,isEnabled:!1},{platformType:me.Github,subPlatformType:U.Github_Vuepress2,platformKey:"github_Vuepress2",platformName:"Vuepress2",platformIcon:we.iconIFVuepress2,authMode:de.API,isEnabled:!1},{platformType:me.Github,subPlatformType:U.Github_Vitepress,platformKey:"github_Vitepress",platformName:"Vitepress",platformIcon:we.iconIFVue,authMode:de.API,isEnabled:!1}],gitlabCfg:[{platformType:me.Gitlab,subPlatformType:U.Gitlab_Hexo,platformKey:"gitlab_Gitlabhexo",platformName:"Gitlabhexo",platformIcon:we.iconIFHexo,authMode:de.API,isEnabled:!1},{platformType:me.Gitlab,subPlatformType:U.Gitlab_Hugo,platformKey:"gitlab_Gitlabhugo",platformName:"Gitlabhugo",platformIcon:we.iconIFHugo,authMode:de.API,isEnabled:!1},{platformType:me.Gitlab,subPlatformType:U.Gitlab_Jekyll,platformKey:"gitlab_Gitlabjekyll",platformName:"Gitlabjekyll",platformIcon:we.iconIFJekyll,authMode:de.API,isEnabled:!1},{platformType:me.Gitlab,subPlatformType:U.Gitlab_Vuepress,platformKey:"gitlab_Gitlabvuepress",platformName:"Gitlabvuepress",platformIcon:we.iconIFVuepress,authMode:de.API,isEnabled:!1},{platformType:me.Gitlab,subPlatformType:U.Gitlab_Vuepress2,platformKey:"gitlab_Gitlabvuepress2",platformName:"Gitlabvuepress2",platformIcon:we.iconIFVuepress2,authMode:de.API,isEnabled:!1},{platformType:me.Gitlab,subPlatformType:U.Gitlab_Vitepress,platformKey:"gitlab_Gitlabvitepress",platformName:"Gitlabvitepress",platformIcon:we.iconIFVue,authMode:de.API,isEnabled:!1}],metaweblogCfg:[{platformType:me.Metaweblog,subPlatformType:U.Metaweblog_Cnblogs,platformKey:"metaweblog_Cnblogs",platformName:"åšå®¢å›­",platformIcon:we.iconIFCnblogs,authMode:de.API,isEnabled:!1},{platformType:me.Metaweblog,subPlatformType:U.Metaweblog_Typecho,platformKey:"metaweblog_Typecho",platformName:"Typecho",platformIcon:we.iconIFTypecho,authMode:de.API,isEnabled:!1},{platformType:me.Metaweblog,subPlatformType:U.Metaweblog_Jvue,platformKey:"metaweblog_Jvue",platformName:"Jvue",platformIcon:we.iconOTJVue,authMode:de.API,isEnabled:!1}],wordpressCfg:[{platformType:me.Wordpress,subPlatformType:U.Wordpress_Wordpress,platformKey:"wordpress_Wordpress",platformName:"Wordpress",platformIcon:we.iconIFWordpress,authMode:de.API,isEnabled:!1},{platformType:me.Wordpress,subPlatformType:U.Wordpress_Wordpressdotcom,platformKey:"wordpress_Wordpressdotcom",platformName:"Wordpress.com",platformIcon:we.iconOTWordpressdotcom,authMode:de.API,isEnabled:!1}],customCfg:[{platformType:me.Custom,subPlatformType:U.Custom_Zhihu,platformKey:"custom_Zhihu",platformName:"çŸ¥ä¹Ž",platformIcon:we.iconIFZhihu,authMode:de.WEBSITE,authUrl:"https://www.zhihu.com/signin",domain:"zhihu.com",isEnabled:!1},{platformType:me.Custom,subPlatformType:U.Custom_CSDN,platformKey:"custom_Csdn",platformName:"CSDN",platformIcon:we.iconIFCSDN,authMode:de.WEBSITE,authUrl:"https://passport.csdn.net/login",domain:"csdn.net",isEnabled:!1},{platformType:me.Custom,subPlatformType:U.Custom_Wechat,platformKey:"custom_Wechat",platformName:"å¾®ä¿¡å…¬ä¼—å·",platformIcon:we.iconIFWechat,authMode:de.WEBSITE,authUrl:"https://mp.weixin.qq.com/",domain:"qq.com",isEnabled:!1},{platformType:me.Custom,subPlatformType:U.Custom_Jianshu,platformKey:"custom_Jianshu",platformName:"ç®€ä¹¦",platformIcon:we.iconIFJianshu,authMode:de.WEBSITE,authUrl:"https://www.jianshu.com/sign_in",domain:"jianshu.com",isEnabled:!1},{platformType:me.Custom,subPlatformType:U.Custom_Juejin,platformKey:"custom_Juejin",platformName:"æŽ˜é‡‘",platformIcon:we.iconIFJuejin,authMode:de.WEBSITE,authUrl:"https://juejin.cn/login",domain:"juejin.cn",isEnabled:!1},{platformType:me.Custom,subPlatformType:U.Custom_Haloweb,platformKey:To.PRE_CUSTOM_HALOWEB,platformName:"Haloç½‘é¡µç‰ˆ",platformIcon:we.iconIFHaloweb,authMode:de.WEBSITE,authUrl:"/login",domain:"",isEnabled:!1},{platformType:me.Custom,subPlatformType:U.Custom_Bilibili,platformKey:To.PRE_CUSTOM_BILIBILI,platformName:"å“”å“©å“”å“©",platformIcon:we.iconIFBilibili,authMode:de.WEBSITE,authUrl:"https://passport.bilibili.com/login",domain:"bilibili.com",isEnabled:!1}],fsCfg:[{platformType:me.Fs,subPlatformType:U.Fs_LocalSystem,platformKey:To.PRE_FS_LOCAL_SYSTEM,platformName:"æœ¬åœ°ç³»ç»Ÿ",platformIcon:we.iconIFLocalSystem,authMode:de.API,isEnabled:dc}],systemCfg:[{platformType:me.System,subPlatformType:U.System_Siyuan,platformKey:"system_Siyuan",platformName:"æ€æºç¬”è®°",platformIcon:we.iconIFSiyuan,authMode:de.API,isEnabled:!0,isSys:!0}]};var lt=(p=>(p.METHOD_ADD="add",p.METHOD_EDIT="edit",p))(lt||{});class ue{logger;deviceType;win;moduleBase;fetch;xmlbuilder2;simpleXmlrpc;constructor(){this.logger=L("app-instance"),this.deviceType=ss.getDevice(),this.fetch=nr,this.xmlbuilder2={create:lr.create},this.simpleXmlrpc={SimpleXmlRpcClient:Cn,Serializer:Sn,Deserializer:kn,XmlrpcUtil:Tn},this.win=je.siyuanWindow(),this.moduleBase=`${this.win?.siyuan?.config?.system?.workspaceDir}/data${Wi}`}}class Lt extends ql{}class ps extends Lt{}class Yt extends Yl{placeholder={};constructor(e,t,o,s,a){super(),this.home=e,this.apiUrl=t,this.username=o,this.password=s,this.tokenSettingUrl=void 0,this.apiStatus=!1,this.blogid="",this.blogName="",this.posidKey="",this.previewUrl="",this.pageType=ce.Markdown,this.middlewareUrl=a,this.usernameEnabled=!1,this.allowPreviewUrlChange=!0,this.showTokenTip=!1,this.yamlLinkEnabled=!0,this.placeholder=new Lt}}class eo extends Yt{home="";apiUrl="";username="";password="";apiStatus=!1;blogid="";blogName="";posidKey="";previewUrl="";pageType=ce.Markdown;placeholder={};middlewareUrl="";constructor(e,t,o,s,a){super(e,t,o,s,a),this.home=e,this.apiUrl=t,this.username=o,this.password=s,this.apiStatus=!1,this.blogid="",this.blogName="",this.posidKey="",this.previewUrl="",this.pageType=ce.Html,this.middlewareUrl=a,this.placeholder=new ps,this.usernameEnabled=!0,this.showTokenTip=!1,this.allowPreviewUrlChange=!0,this.tagEnabled=!0,this.cateEnabled=!0,this.categoryType=Q.CategoryType_Multi,this.allowCateChange=!0,this.knowledgeSpaceEnabled=!1}}class mc extends eo{constructor(e,t,o,s){super("https://www.cnblogs.com/",e,t,o,s),this.tokenSettingUrl="https://i.cnblogs.com/settings",this.previewUrl="/[userid]/p/[postid].html",this.pageType=ce.Markdown,this.usernameEnabled=!0,this.passwordType=xe.PasswordType_Token,this.showTokenTip=!0,this.allowPreviewUrlChange=!0,this.tagEnabled=!0,this.cateEnabled=!0,this.categoryType=Q.CategoryType_Multi,this.allowCateChange=!0,this.knowledgeSpaceEnabled=!1}}class ln{static METHOD_GET_USERS_BLOGS="blogger.getUsersBlogs";static METHOD_DELETE_POST="blogger.deletePost"}class Ut{static METHOD_GET_USERS_BLOGS="metaWeblog.getUsersBlogs";static METHOD_NEW_POST="metaWeblog.newPost";static METHOD_EDIT_POST="metaWeblog.editPost";static METHOD_DELETE_POST="metaWeblog.deletePost";static METHOD_GET_RECENT_POSTS="metaWeblog.getRecentPosts";static METHOD_GET_POST="metaWeblog.getPost";static METHOD_GET_CATEGORIES="metaWeblog.getCategories";static METHOD_NEW_MEDIA_OBJECT="metaWeblog.newMediaObject"}const Yo=(p,e)=>{const t=L("use-proxy"),{kernelApi:o,isUseSiyuanProxy:s}=Ge(),a=new ue,i="";p=p??fe,e=e??"";const n=new rr(a,i,p,Vt),l=new Sn(a),c=async(d,g=[],v=void 0,h="GET",b="application/json",P=!1,k="text",E="text")=>{if(s||!s&&P)return t.info("Using Siyuan forwardProxy"),await w(d,g,v,h,b,k,E);{t.info("Using middleware proxy fetch");const M=g.length>0?g[0]:{},H={method:h,headers:{...M,"Content-Type":b},body:v};t.info("commonFetchClient url in proxyFetch =>",d),t.info("commonFetchClient fetchOptions in proxyFetch =>",H);const B=await n.fetchCall(d,H,P);return t.debug("Result of proxyFetch in commonFetchClient =>",B),B}},r=async(d,g,v,h=!1)=>{const b=l.serializeMethodCall(g,v);let P=await c(d,[],b,"POST","text/xml",h,"base64");P=Tn.removeXmlHeader(P);const E=await new kn().deserializeMethodResponse(P);return t.debug("xmlrpc fetch result, resJson =>",E),E},m=async(d,g=[],v=void 0,h="GET")=>{const b=`${e.endsWith("/")?e:e+"/"}${d}`,P=g.length>0?g[0]:{},k=["Origin","Referer","Cookie"],E=se.getProperty(P,"x-cors-headers");let M=te.safeParse(E,{});for(const[I,N]of Object.entries(P)){const oe=I.toLowerCase();k.map(j=>j.toLowerCase()).includes(oe)&&(t.warn(`corsFetch header ${I} is not allowed`),M[I]=N,delete P[I])}P["x-cors-headers"]=JSON.stringify(M);const H={method:h,headers:P,body:v};t.debug("corsFetch url =>",b),t.debug("corsFetch options =>",H);const B=await fetch(b,H),D={},G=te.safeParse(B.headers.get("cors-received-headers"),{});for(const[I,N]of Object.entries(G))if(I==="cors-received-headers"){const oe=G["cors-received-headers"];for(const[j,O]of Object.entries(oe))D[j]=O;delete G[I]}else D[I]=N;t.debug("corsFetch corsRespHeaders =>",D);const x=await B.text();t.debug("corsFetch resText =>",x);const ee=te.safeParse(x,{});return ee["cors-received-headers"]=JSON.stringify(D),t.debug("corsFetch resJson =>",ee),ee},w=async(d,g=[],v=void 0,h="GET",b="application/json",P="text",k="text")=>{let E=v;const M=`${i}${d}`,H=g.length>0?g[0]:{};let B=b,D,G=new ArrayBuffer(0);if(h!=="GET"){const I=new Request("",{method:h,body:E});console.log("generate temp myRequest =>",I),G=await I.arrayBuffer(),(I.headers.get("Content-Type")??b).includes("multipart/form-data")&&(B=I.headers.get("Content-Type"))}P==="text"?D=sa.from(G).toString("utf8"):P==="base64"?D=sa.from(G).toString("base64"):P==="hex"?D=sa.from(G).toString("hex"):D=G;const x=[H];t.debug("siyuan forwardProxy url =>",M),t.debug("siyuan forwardProxy fetchOptions =>",{headers:g,payload:D,method:h,contentType:b});const ee=await o.forwardProxy(M,x,D,h,B,P,k,3e4);if(t.debug("proxyFetch result =>",ee),!(ee.status>=200&&ee.status<300)){const I=te.safeParse(ee?.body,{});throw T.isEmptyString(I?.msg)?new Error(T.decodeUnicodeToChinese(T.isEmptyString(ee?.body)?`è¯·æ±‚å¼‚å¸¸ï¼š${ee.status}`:ee?.body)):new Error(I?.msg)}if(k==="text")if(b==="application/json"){const I=ee?.body;return te.safeParse(I,{})}else return b==="text/html"||b==="text/xml"?ee?.body:(t.info("SiYuan proxy directly response fetchResult for content type:",b),ee);else return ee};return{isUseSiyuanProxy:s,proxyFetch:c,proxyXmlrpc:r,corsFetch:m}};class ns{static getFormData(e){const t=e.win;let o=t.FormData,s=t.Blob;if(t.require){const a=t.require(`${e.moduleBase}libs/node-fetch-cjs/dist/index.js`);o=a.FormData,s=a.Blob}return{FormData:o,Blob:s}}static getFormDataFetch(e){return e.win.require(`${e.moduleBase}libs/zhi-formdata-fetch/index.cjs`)}}class Rt extends _n{appInstance;logger;cfg;baseExtendApi;isUseSiyuanProxy;proxyFetch;corsFetch;constructor(e,t){super(),this.appInstance=e,this.cfg=t,this.logger=L("base-web-api"),this.baseExtendApi=new Rn(this,t);const{isUseSiyuanProxy:o,proxyFetch:s,corsFetch:a}=Yo(t.middlewareUrl,t.corsAnywhereUrl);this.isUseSiyuanProxy=o,this.proxyFetch=s,this.corsFetch=a}async checkAuth(){return!0}getPostPreviewUrl(e){return this.getPreviewUrl(e)}async getCategories(e){return this.baseExtendApi.getCategories(e)}async getTags(){return this.baseExtendApi.getTags()}updateCfg(e){this.cfg=e}async buildCookie(e){return e.map(t=>`${t.name}=${t.value}`).join(";")}getYamlAdaptor(){return null}async preEditPost(e,t,o){return await this.baseExtendApi.preEditPost(e,t,o)}async newPost(e,t){try{const o=await this.addPost(e);if(o.status!=="success")throw new Error("ç½‘é¡µæŽˆæƒå‘å¸ƒæ–‡ç« å¼‚å¸¸");return o.post_id}catch(o){throw o}}async newMediaObject(e,t){this.logger.debug("newMediaObject on baseWebApi =>",e);const o=await this.uploadFile(e);return{attachment_id:o?.id,date_created_gmt:new Date,parent:0,link:o?.url,title:e.name,caption:"",description:"",metadata:{width:0,height:0,file:"",filesize:0,sizes:[]},type:e.type,thumbnail:"",id:o?.article_id,file:e.name,url:o.url}}async webFetch(e,t=[],o={},s="GET",a="application/json",i=!1,n="text",l="text"){const c=t.length>0?t[0]:{},r=s==="GET"||s==="HEAD"?void 0:o;if(this.isUseSiyuanProxy||!this.isUseSiyuanProxy&&i||!i){this.logger.info("Using legency web fetch"),delete c["x-cors-headers"];const m=[c];return await this.proxyFetch(e,m,r,s,a,i,n,l)}else{this.logger.info("Using cors web fetch");const m=[c];return this.corsFetch(e,m,r,s)}}async webFormFetch(e,t,o,s=!1){if(this.isUseSiyuanProxy||!this.isUseSiyuanProxy&&s||!s){this.logger.info("Using legency web formFetch");const{isInSiyuanOrSiyuanNewWin:a}=pt();if(!a()||s){const i=await this.webFetch(e,t,o,"POST",void 0,s,"base64","base64"),n=$t.fromBase64(i.body),l=te.safeParse(n,{});return this.logger.debug("apiForm doFetch success, resJson=>",l),l}else{const i=ns.getFormDataFetch(this.appInstance),n=t.length>0?t[0]:{};this.logger.debug("before zhi-formdata-fetch, header =>",n),this.logger.debug("before zhi-formdata-fetch, url =>",e);const l=await i(this.appInstance.moduleBase,e,n,o);return this.logger.debug("apiForm doFetch success, resText =>",l),te.safeParse(l,{})}}else return this.logger.info("Using cors-anywhere web formFetch"),this.corsFetch(e,t,o,"POST")}}class Nn{static logger=L("lute-instance");static getInstance(){if(typeof window>"u")return this.logger.warn("ä¸æ˜¯æµè§ˆå™¨çŽ¯å¢ƒï¼Œä¸æ¸²æŸ“"),null;const e=window.Lute;return e?(this.logger.info("found Lute =>",e),this.logger.info("ä½¿ç”¨Luteæ¸²æŸ“Markdown"),{lute:e.New(),Lute:e}):(this.logger.warn("æœªæ‰¾åˆ°Luteï¼Œä¸æ¸²æŸ“"),null)}}class ko{static logger=L("lute-util");static mdToHtml(e){const{lute:t,Lute:o}=Nn.getInstance(),s={renderInlineMathCloseMarker:(i,n)=>n?["$",o.WalkContinue]:["",o.WalkContinue],renderInlineMathContent:(i,n)=>n?[i.TokensStr(),o.WalkContinue]:["",o.WalkContinue],renderInlineMathOpenMarker:(i,n)=>n?["$",o.WalkContinue]:["",o.WalkContinue],renderInlineMath:(i,n)=>["",o.WalkContinue],renderMathBlockCloseMarker:(i,n)=>n?["$$",o.WalkContinue]:["",o.WalkContinue],renderMathBlockContent:(i,n)=>n?[i.TokensStr(),o.WalkContinue]:["",o.WalkContinue],renderMathBlockOpenMarker:(i,n)=>n?["$$",o.WalkContinue]:["",o.WalkContinue],renderMathBlock:(i,n)=>["",o.WalkContinue]};t.SetJSRenderers({renderers:{Md2HTML:s}});const a=t.MarkdownStr("",e);return this.logger.debug("md to html =>",{html:a}),a}}var hc={};const fc=L("siyuan-util"),{isInSiyuanWidget:yc,isInSiyuanBrowser:bc}=pt(),yi=async(p,e,t)=>{try{const o=await p.getFile(e,t);return t==="text"?!T.isEmptyString(o):o!==null}catch{return!1}},Hn=()=>{if(window.frameElement==null||window.frameElement.parentElement==null||window.frameElement.parentElement.parentElement==null)return"";const p=window.frameElement.parentElement.parentElement;if(!p)return"";const e=p.getAttribute("data-node-id");return e||""},wc=()=>{let p;const e=window;return e&&e.terwer&&e.terwer.pageId&&(p=e.terwer.pageId),p},Ln=async(p,e)=>{if(!T.isEmptyString(p))return fc.debug("æ˜¾ç¤ºæŒ‡å®špageId=>",p),p;if(yc()){const s=Hn();if(!T.isEmptyString(s)){const{kernelApi:a}=Ge();return(await a.getBlockByID(s)).root_id}}if(bc()){const s=wc();if(!T.isEmptyString(s))return s}if(Ot.isInBrowser){const s=Ot.getQueryParam("id");if(!T.isEmptyString(s))return s}const o=hc.VITE_SIYUAN_DEV_PAGE_ID;return T.isEmptyString(o)?"":o},Xo=()=>{const p=L("use-picgo-bridge"),{siyuanConfig:e,kernelApi:t,blogApi:o}=Ge(),s=async(l,c)=>{let r=c;const m="æ–‡æ¡£å¯èƒ½å·²ç»æˆåŠŸå‘å¸ƒï¼Œä½†æ˜¯å›¾ç‰‡ä¸Šä¼ å¤±è´¥æˆ–è€…å½“å‰åœºæ™¯ä¸æ”¯æŒå›¾ç‰‡ä¸Šä¼ ï¼Œè¯¦ç»†ä¿¡æ¯=>";try{const w=await t.getBlockAttrs(l),d={pageId:l,meta:w};T.isEmptyString(r)&&(r=(await o.getPost(l)).markdown);const v=await(await en.getInstance(e,Vt)).uploadPostImagesToBed(d.pageId,d.meta,r);v.hasImages?v.flag?r=v.mdContent:(p.warn(m+v.errmsg),X.warning(m+v.errmsg)):p.info(m+v.errmsg)}catch(w){p.error(m,w),X.error("æ–‡æ¡£å¯èƒ½å·²ç»æˆåŠŸå‘å¸ƒï¼Œä½†æ˜¯å›¾ç‰‡ä¸Šä¼ å¤±è´¥æˆ–è€…å½“å‰åœºæ™¯ä¸æ”¯æŒå›¾ç‰‡ä¸Šä¼ ï¼Œè¯¦ç»†ä¿¡æ¯=>"+w)}return r},a=async(l,c)=>{const r=new cr;let m=[];p.debug("getImageItemsFromMd=>",{md:c});const w=r.parseImagesToArray(c);m=[...new Set([...m,...w])],p.debug("retImgs=>",m);const d=await t.getBlockAttrs(l),g=e.apiUrl??"",h=await(await en.getInstance(e,Vt)).doConvertImagesToImagesItemArray(d,m,g);return p.debug("imageItemArray=>",h),h},i=async l=>{let c=Je.None;return T.isEmptyString(l.picbedService)?(await n()&&l.picgoPicbedSupported?c=Je.PicGo:l.bundledPicbedSupported?c=Je.Bundled:c=Je.None,p.info("ä½¿ç”¨é»˜è®¤çš„å›¾åºŠæœåŠ¡")):(c=l.picbedService,p.info("ä½¿ç”¨è‡ªå®šä¹‰å›¾åºŠæœåŠ¡")),c},n=async()=>{const{kernelApi:l}=Ge();return await yi(l,"/data/plugins/siyuan-plugin-picgo/plugin.json","text")};return{handlePicgo:s,getImageItemsFromMd:a,getPicbedServiceType:i,checkPicgoInstalled:n}},ys=async p=>new Promise((e,t)=>{const o=new FileReader;o.onload=s=>{const a=Jo.from(s.target.result);e(a)},o.onerror=t,o.readAsArrayBuffer(p)}),_c=p=>{const e=p.match(/^data:(.*?);base64,/);return e&&e[1]?e[1]:""},Yi=async p=>{const e=await Pc(p);return vc(p,e)},vc=(p,e)=>{const t=e.split(";base64,").pop()||"";let o="unknown-image";p&&(o=p.substring(p.lastIndexOf("/")+1));const s=_c(e);return{imageName:o,mimeType:s,imageBase64:t}},Qo=p=>{const e=$t.toUint8Array(p);return Jo.from(e)};function Pc(p){return new Promise((e,t)=>{(async()=>{let o=null;try{o=await(await window.fetch(p)).blob()}catch(s){return t(s)}if(o!=null){const s=new FileReader;s.readAsDataURL(o),s.onloadend=function(){const a=s.result;e(a)},s.onerror=function(a){t(a)}}})()})}const Tc=p=>{const e=new Uint8Array(p);return Jo.from(e)};class kc{metadata}class Sc{tags;categories;templates;constructor(){this.tags=[],this.categories=[],this.templates=[]}}const bi=()=>{const p="storage/syp/platform-metadata.json",e="platform-metadata",t=()=>{const i=new kc;return Fi(p,e,i,{serializer:jo.object})},o=()=>{const i=t();return Vi(i)};return{getPlatformMetadata:i=>{const n=[],l=[],c=[],m=o().value;if(m.metadata&&m.metadata.hasOwnProperty(i)){const w=m.metadata[i];n.push(...w.tags),l.push(...w.categories),c.push(...w.templates)}return{tags:n,categories:l,templates:c}},updatePlatformMetadata:(i,n,l,c)=>{if(n.length===0&&l.length===0&&c.length===0)return;const r=t(),m=r.value;m.metadata=m.metadata??{},m.metadata.hasOwnProperty(i)||(m.metadata[i]=new Sc);const w=m.metadata[i];w.tags=w.tags.filter(d=>d.trim()!==""),w.categories=w.categories.filter(d=>d.trim()!==""),w.templates=w.templates.filter(d=>d.trim()!==""),n.length>0&&(w.tags=Array.from(new Set([...w.tags,...n.filter(d=>d.trim()!=="")]))),l.length>0&&(w.categories=Array.from(new Set([...w.categories,...l.filter(d=>d.trim()!=="")]))),c.length>0&&(w.templates=Array.from(new Set([...w.templates,...c.filter(d=>d.trim()!=="")]))),m.metadata[i]=w,r.value=m}}};class rn{static replaceSignToAnother(e,t,o,s){const a=t.replace(/\*/g,"\\*"),i=[],n=[],l=[],c=[],r=e.replace(new RegExp("```[\\s\\S]*?```|`.*?`|\\$\\$[\\s\\S]*?\\$\\$|\\$.*?\\$","g"),g=>{if(g.startsWith("```"))return i.push(g),`__PUBLISHER_PLACEHOLDER_CODEBLOCK${i.length-1}`;if(g.startsWith("`"))return n.push(g),`__PUBLISHER_PLACEHOLDER_INLINECODE${n.length-1}`;if(g.startsWith("$$"))return l.push(g),`__PUBLISHER_PLACEHOLDER_FORMULA${l.length-1}`;if(g.startsWith("$"))return c.push(g),`__PUBLISHER_PLACEHOLDER_INLINEFORMULA${c.length-1}`}),m=new RegExp(`(?<!\`)(?<!\`\`\`[\\s\\S])(?<!\\$[\\s\\S])(?<!\\$$[\\s\\S])${a}(.*?[^${a}])${a}(?![\\s\\S]*?\`)(?![\\s\\S]*?\`\`\`)(?![\\s\\S]*?\\$)(?![\\s\\S]*?\\$$)`,"g");return r.replace(m,(g,v)=>`${o}${v}${s}`).replace(/(__PUBLISHER_PLACEHOLDER_CODEBLOCK(\d+))|(__PUBLISHER_PLACEHOLDER_INLINECODE(\d+))|(__PUBLISHER_PLACEHOLDER_FORMULA(\d+))|(__PUBLISHER_PLACEHOLDER_INLINEFORMULA(\d+))/g,(g,v,h,b,P,k,E,M,H)=>{if(v)return i[parseInt(h,10)];if(b)return n[parseInt(P,10)];if(k)return l[parseInt(E,10)];if(M)return c[parseInt(H,10)]})}static getHumanFilename(e){return e.replace(/([\u4e00-\u9fa5])([a-zA-Z0-9])/g,"$1-$2").replace(/([a-zA-Z0-9])([\u4e00-\u9fa5])/g,"$1-$2").replace(/[^\w\u4e00-\u9fa5\/\-_.~]/g,"").replace(/\s+/g,"-").replace(/\/+/g,"/").replace(/-+/g,"-").replace(/_+/g,"_").replace(/\.{2,}/g,".").replace(/^-+|-+$/g,"")}}class js{static genImageRegex(e,t={}){const{exactMatch:o=!1,caseSensitive:s=!1,allowQueryParams:a=!0,escapeSpecialChars:i=!0}=t;let n=e;i&&(n=this.escapeRegExp(n));let l;o?l=a?`${n}(?:\\?[^"'s<>]*)?`:n:l=a?`[^"'s<>]*${n}[^"'s<>]*(?:\\?[^"'s<>]*)?`:`[^"'s<>]*${n}[^"'s<>]*`;const c=`<img\\s[^>]*?src\\s*=\\s*["']?(${l})["']?[^>]*>`;return new RegExp(c,s?"g":"gi")}static genMdImageRegex(e,t={}){const{exactMatch:o=!1,caseSensitive:s=!1,allowQueryParams:a=!0,escapeSpecialChars:i=!0}=t;let n=e;i&&(n=this.escapeRegExp(n));let l;o?l=a?`${n}(?:\\?[^\\]\\)\\s]*)?`:n:l=a?`[^\\]\\)\\s]*${n}[^\\]\\)\\s]*(?:\\?[^\\]\\)\\s]*)?`:`[^\\]\\)\\s]*${n}[^\\]\\)\\s]*`;const c=`!\\[[^\\]]*\\]\\(\\s*(${l})\\s*(?:"[^"]*")?\\s*\\)`;return new RegExp(c,s?"g":"gi")}static escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}static hasImageTag(e){return/<img\s[^>]*?src\s*=\s*["']?([^"'\s>]+)["']?[^>]*>/i.test(e)}static extractImageUrls(e){const t=/<img[^>]+src\s*=\s*["']([^"']+)["'][^>]*>/gi;return Array.from(e.matchAll(t)).map(o=>o[1]).filter(o=>o&&o.trim().length>0)}static getNameFromImageUrl(e){return e.split("/").pop().split(".")[0]||""}}var Xi=(p=>(p.NO_PAGE_ID_FOUND_IN_MEDIA_MACRO_MODE="no pageId found in macro mode",p))(Xi||{});class Rn extends _n{logger;api;cfg;picgoBridge;isSiyuanOrSiyuanNewWin;kernelApi;constructor(e,t){super(),this.logger=L("base-extend-api"),this.api=e,this.cfg=t,this.picgoBridge=Xo();const{isInSiyuanOrSiyuanNewWin:o}=pt();this.isSiyuanOrSiyuanNewWin=o();const{kernelApi:s}=Ge();this.kernelApi=s}async preEditPost(e,t,o){return e=await this.handleFilename(e,t,o),e=await this.handleDesc(e,t,o),e=await this.handleCategories(e,t,o),e=await this.handlePictures(e,t,o),e=await this.handleMd(e,t,o),e=await this.handleYaml(e,t,o),e=await this.handleOther(e,t,o),e}async getCategories(e){const t=[],{getPlatformMetadata:o}=bi(),s=nn(this.cfg.posidKey),{categories:a}=o(s);return a.forEach(i=>{const n=new Qe;n.categoryId=i,n.categoryName=i,t.push(n)}),t}async getTags(){const e=[],{getPlatformMetadata:t}=bi(),o=nn(this.cfg.posidKey),{tags:s}=t(o);return s.forEach(a=>{const i=new zo;i.tagId=a,i.tagName=a,e.push(i)}),e}async handleFilename(e,t,o){const s=o?.cfg,a=Pe(e);if(s?.mdFilenameRule){s.useMdFilename=!!s?.mdFilenameRule?.includes("[filename]");const r=Ae.formatIsoToZhDate(a.dateCreated.toISOString(),!0).split(" ")[0].split("-"),m=r[0],w=r[1],d=r[2];this.logger.debug("created numarr=>",r);let g=s.mdFilenameRule;if(g=g.replace(/\[yyyy]/g,m).replace(/\[MM]/g,w).replace(/\[mm]/g,w).replace(/\[dd]/g,d),s?.mdFilenameRule?.includes("category")){const v=a?.categories?.[0]??"";g=g.replace("[category]",v)}if(s?.mdFilenameRule?.includes("cats")){const v=a?.categories?.join("/")??"";g=g.replace(/\[cats]/,v)}if(s?.mdFilenameRule?.includes("tag")){const v=a?.mt_keywords?.split(",")?.[0]??"";g=g.replace(/\[tag]/,v)}if(s?.mdFilenameRule?.includes("tags")){const v=a?.mt_keywords?.split(",")?.join("/")??"";g=g.replace(/\[tags]/,v)}s.useMdFilename?g=g.replace(/\[filename]/g,a.originalTitle):g=g.replace(/\[slug]/g,a.wp_slug),g=rn.getHumanFilename(g),a.mdFilename=g}const{getReadOnlyPublishPreferenceSetting:i}=Tt();return i().value.fixTitle&&(a.title=Dt.removeTitleNumber(a.title).replace(/\.md/g,"")),this.logger.debug("å¤„ç†MDæ–‡ä»¶åå®Œæˆï¼Œpost",{post:ne(a)}),a}async handleDesc(e,t,o){const s=Pe(e);return s.mt_excerpt=s.shortDesc,s.mt_text_more=s.shortDesc,s}async handleCategories(e,t,o){const s=o?.cfg,a=Pe(e),i=a.cate_slugs?.[0]??s.blogid,n=[];i?.toString().includes(Mt)&&(s.usePathCategory=!0);const l=oa.dirname(a.link);if(s.usePathCategory){const r=oa.join(i.replace(Mt,""),l);a.cate_slugs=[r];const m=l.split("/");if(m.length>1)for(let w=1;w<m.length;w++){const d=m[w];if(T.isEmptyString(d))continue;const g=Dt.removeTitleNumber(d);n.push(g)}}this.logger.info("ç›®å½•è·¯å¾„è½¬æ¢çš„åˆ†ç±» =>",n);const c=[...new Set([...n??[],...a?.categories??[]])].filter(r=>r.trim()!=="");return a.categories=c,this.logger.info("æœ€ç»ˆçš„åˆ†ç±» =>",a.categories),this.logger.debug("ç›®å½•è·¯å¾„è½¬æ¢å®Œæˆï¼Œpost",{post:ne(a)}),a}async handleMd(e,t,o){const s=o?.cfg,a=o?.setting,i=Pe(e);let n=i.markdown;n=ie.extractMarkdown(n),n=rn.replaceSignToAnother(n,"=="," **","** ");const{getReadOnlyPublishPreferenceSetting:l}=Tt(),c=l(),r=/\[(.+?)]\(siyuan:\/\/blocks\/(\d+-\w+)\)/g;return n=await this.replaceOuterLinks(n,r,{pref:c,cfg:s,setting:a}),i.markdown=n,this.logger.debug("markdownå¤„ç†å®Œæ¯•ï¼Œpost",{post:ne(i)}),i}async handleOther(e,t,o){const s=o?.cfg,a=Pe(e),i=ie.extractMarkdown(a.markdown);return a.html=ko.mdToHtml(i),s?.pageType==ce.Markdown?a.description=a.markdown:a.description=a.html,a}async handleYaml(e,t,o){const s=o?.cfg,a=Pe(e);this.logger.debug("å¼€å§‹å¤„ç†yamlï¼Œpost",{post:ne(a)});const i=this.api.getYamlAdaptor();switch(a.yamlType){case Jt.Yaml_custom_auto:{const n=i.convertToYaml(a,void 0,s);a.yaml=n.formatter,a.markdown=n.mdFullContent,a.html=n.htmlContent,this.logger.info("rehandled yaml using YamlConverterAdaptor");break}case Jt.Yaml_custom_hand:{const n=a.yaml;if(this.checkPropertiesStartsWith(n,"siyuan://")||a.editMode!==Fe.EditMode_source){const l=new Ze,c=await ie.yaml2ObjAsync(a.yaml);l.yamlObj=c;const r=i.convertToYaml(a,l,s);a.yaml=r.formatter,a.markdown=r.mdFullContent,a.html=r.htmlContent,this.logger.info("assign latest custom yaml to md")}else a.markdown=ie.addYamlToMd(a.yaml,a.markdown),this.logger.info("assert yaml is saved by source mode, ignore");break}default:{const n=Ri.toYamlObj(a),l=ie.obj2Yaml(n),c=ie.extractMarkdown(a.markdown);a.yaml=l,a.markdown=c,a.html=ko.mdToHtml(c),this.logger.info("yaml adaptor not found, using default");break}}return this.logger.debug("yamlå¤„ç†ä¹‹åŽï¼Œpost",{post:ne(a)}),a}async handlePictures(e,t,o){const s=o?.cfg;o?.dynCfg;const a=Pe(e);switch(this.logger.debug("å›¾ç‰‡å¤„ç†ä¹‹å‰, post =>",{post:ne(a)}),s.picbedService){case Je.PicGo:{this.logger.info("ä½¿ç”¨ PicGOä¸Šä¼ å›¾ç‰‡"),this.logger.debug("å¼€å§‹å›¾ç‰‡å¤„ç†, post =>",{post:ne(a)}),a.markdown=await this.picgoBridge.handlePicgo(t,a.markdown),this.logger.debug("å›¾ç‰‡å¤„ç†å®Œæ¯•, post.markdown =>",{md:a.markdown});break}case Je.Bundled:{this.logger.info("ä½¿ç”¨å¹³å°ä¸Šä¼ å›¾ç‰‡");let n=!1;const l=await this.getImagesFromMd(t,a.markdown);if(l.length===0)return this.logger.info("æœªæ‰¾åˆ°å›¾ç‰‡ï¼Œä¸å¤„ç†"),a;this.logger.info(`æ‰¾åˆ°${l.length}å¼ å›¾ç‰‡ï¼Œå¼€å§‹ä¸Šä¼ `);const c={};try{for(const r of l){const m=r.url;if(m.startsWith("http")&&!m.startsWith(window.location.origin)){this.logger.warn(`å¿½ç•¥åœ¨çº¿å›¾ç‰‡ ${m}`);continue}const w=await this.readFileToBase64(m),d=Qo(w.imageBase64),g=new rs(r.name,w.mimeType,d);g.post=a,this.logger.debug("before upload, mediaObject =>",g);const v=await this.api.newMediaObject(g);this.logger.debug("attachResult =>",v),v&&v.macro?(c[r.originUrl]=v.macro,n=!0):v&&v.url&&(c[r.originUrl]=v.url);const h=`ä½¿ç”¨å¹³å°è‡ªå¸¦çš„å›¾ç‰‡ä¸Šä¼ èƒ½åŠ›ï¼Œå·²æˆåŠŸä¸Šä¼ å›¾ç‰‡ ${r.name}`;await this.pushMsg({msg:h,timeout:3e3})}}catch(r){const m=r.message||r;let w=!1;if(m.includes(Xi.NO_PAGE_ID_FOUND_IN_MEDIA_MACRO_MODE)&&(w=!0),w)this.logger.info("ignore error in macro mode");else{const d="æ–‡ç« å¯èƒ½å·²ç»å‘å¸ƒæˆåŠŸï¼Œä½†æ˜¯å¹³å°å›¾ç‰‡ä¸Šä¼ å¤±è´¥ã€‚è¯·æ‰“å¼€ã€Œå¼€å‘è€…å·¥å…·ã€æŸ¥çœ‹é”™è¯¯æ—¥å¿—";this.logger.error(d,r),await this.kernelApi.pushMsg({msg:d,timeout:7e3})}}if(this.logger.info("å¹³å°å›¾ç‰‡å…¨éƒ¨ä¸Šä¼ å®Œæˆï¼Œå°†å¼€å§‹è¿›è¡Œè¿žæŽ¥æ›¿æ¢ï¼ŒurlMap =>",c),n){this.logger.info("ä½¿ç”¨ Confluence å®æ›¿æ¢å›¾ç‰‡");for(const r in c)if(c.hasOwnProperty(r)){const m=js.genMdImageRegex(r);a.markdown=a.markdown.replace(m,c[r])}}else{this.logger.info("ä½¿ç”¨é“¾æŽ¥æ›¿æ¢å›¾ç‰‡");const r=new RegExp(Object.keys(c).map(w=>`\\b${w}\\b`).join("|"),"g"),m=w=>c[w]||w;a.markdown=a.markdown.replace(r,m)}break}default:{await this.kernelApi.pushMsg({msg:"æœªæŒ‡å®šä¸Šä¼ å›¾ç‰‡æœåŠ¡ï¼Œä¸å¤„ç†å›¾ç‰‡",timeout:7e3}),this.logger.warn("æœªæŒ‡å®šä¸Šä¼ å›¾ç‰‡æœåŠ¡ï¼Œä¸å¤„ç†å›¾ç‰‡");break}}return a.html=ko.mdToHtml(a.markdown),this.logger.info("å›¾ç‰‡é¢„å¤„ç†å…¨éƒ¨å®Œæˆ"),this.logger.debug("å›¾ç‰‡å¤„ç†ä¹‹åŽï¼Œpost",{post:ne(a)}),a}async getImagesFromMd(e,t){return this.picgoBridge.getImageItemsFromMd(e,t)}async readFileToBase64(e){let t;if(this.isSiyuanOrSiyuanNewWin)this.logger.info("Inside Siyuan notes, use the built-in request to obtain base64"),t=await Yi(e);else{this.logger.info("Outside the browser, use an image proxy");let o;if(this.api instanceof Ct)o=await this.api.apiFetch(e,[],void 0,"GET",void 0,!0,"base64","base64");else if(this.api instanceof Rt)o=await this.api.webFetch(e,[],void 0,"GET",void 0,!0,"base64","base64");else throw new Error("proxyFetch is not valid");this.logger.debug("readFileToBase64 proxyFetch response =>",o);const s=o.body;let a="unknown-image";e&&(a=e.substring(e.lastIndexOf("/")+1)),t={imageName:a,mimeType:o.contentType,imageBase64:s}}return this.logger.debug("readFileToBase64 proxyFetch base64Info =>",{base64Info:t}),t}async pushMsg(e){await this.kernelApi.pushMsg(e)}async replaceOuterLinks(e,t,o){const{pref:s,cfg:a,setting:i}=o,n=this,l=Array.from(e.matchAll(t));let c=e;for(const r of l){const[m,w,d]=r;let g=w;s.value.fixTitle&&(g=Dt.removeTitleNumber(g));let v;const h=se.getProperty(i,d,{}),b=a.posidKey;if(h.hasOwnProperty(b)){let P;const k=h[b];if(P=await n.api.getPostPreviewUrl(k),a?.mdFilenameRule?.includes("[filename]")){const E=h[rt.Custom_slug],M=oa.basename(k).replace(/\.md/g,"");P=P.replace(M,E)}!P.startsWith("http")&&!P.startsWith("/")&&(P=`/${P}`),v=P,c=c.replace(m,`[${g}](${v})`)}else{if(s.value.ignoreBlockRef!==!0)throw this.logger.error("å¼•ç”¨çš„æ–‡æ¡£å°šæœªå‘å¸ƒï¼Œæ‚¨å¯ä»¥åˆ é™¤æ­¤å¤–é“¾å†å‘å¸ƒï¼Œæˆ–è€…å…ˆå‘å¸ƒå¤–é“¾æ–‡ç«  =>",d),new Error(`å¼•ç”¨çš„æ–‡æ¡£ ${d} å°šæœªå‘å¸ƒï¼Œæ‚¨å¯ä»¥åˆ é™¤æ­¤å¤–é“¾å†å‘å¸ƒï¼Œæˆ–è€…å…ˆå‘å¸ƒå¤–é“¾æ–‡ç« `);c=c.replace(m,g)}}return c}checkPropertiesStartsWith(e,t){if(se.isEmptyObject(e))return!1;for(const o in e)if(e.hasOwnProperty(o)&&!T.isEmptyString(e[o])&&e[o].startsWith(t))return!0;return!1}}class Ct extends Xl{appInstance;logger;cfg;baseExtendApi;isUseSiyuanProxy;proxyFetch;corsFetch;constructor(e,t){super(),this.appInstance=e,this.cfg=t,this.logger=L("base-blog-api"),this.baseExtendApi=new Rn(this,t);const{isUseSiyuanProxy:o,proxyFetch:s,corsFetch:a}=Yo(t.middlewareUrl,t.corsAnywhereUrl);this.isUseSiyuanProxy=o,this.proxyFetch=s,this.corsFetch=a}async checkAuth(){return!0}getYamlAdaptor(){return null}getPostPreviewUrl(e){return this.getPreviewUrl(e)}async preEditPost(e,t,o){return await this.baseExtendApi.preEditPost(e,t,o)}async getCategories(e){return this.baseExtendApi.getCategories(e)}async getTags(){return this.baseExtendApi.getTags()}async apiFetch(e,t=[],o=void 0,s="GET",a="application/json",i=!1,n="text",l="text"){const c=t.length>0?t[0]:{};if(this.isUseSiyuanProxy||!this.isUseSiyuanProxy&&i||!i){this.logger.info("Using legency api fetch"),delete c["x-cors-headers"];const r=[{...c}];return this.proxyFetch(e,r,o,s,a,i,n,l)}else{this.logger.info("Using cors api fetch");const r=[{...c}];return this.corsFetch(e,r,o,s)}}async apiFormFetch(e,t,o,s=!1){if(this.isUseSiyuanProxy||!this.isUseSiyuanProxy&&s||!s){this.logger.info("Using legency api formFetch");const{isInSiyuanOrSiyuanNewWin:a}=pt();if(!a()||s){const i=await this.apiFetch(e,t,o,"POST",void 0,s,"base64","base64"),n=$t.fromBase64(i.body),l=te.safeParse(n,{});return this.logger.debug("apiForm doFetch success, resJson=>",l),l}else{const i=ns.getFormDataFetch(this.appInstance),n=t.length>0?t[0]:{};this.logger.debug("before zhi-formdata-fetch, headers =>",t),this.logger.debug("before zhi-formdata-fetch, url =>",e);const l=await i(this.appInstance.moduleBase,e,n,o);return this.logger.debug("apiForm doFetch success, resText =>",l),te.safeParse(l,{})}}else return this.logger.info("Using cors-anywhere api formFetch"),this.corsFetch(e,t,o,"POST")}}class bs extends Ct{proxyXmlrpc;constructor(e,t){super(e,t),this.cfg.blogid="metaweblog",this.logger=L("metaweblog-api-adaptor");const{proxyXmlrpc:o}=Yo(t.middlewareUrl);this.proxyXmlrpc=o}async checkAuth(){return!0}async getUsersBlogs(){let e=[];return e=await this.metaweblogCall(Ut.METHOD_GET_USERS_BLOGS,[this.cfg.blogid,this.cfg.username,this.cfg.password]),this.logger.debug("getUsersBlogs=>",e),e}async getRecentPostsCount(e){return 0}async getRecentPosts(e){const t=[],o=await this.metaweblogCall(Ut.METHOD_GET_RECENT_POSTS,[this.cfg.blogid,this.cfg.username,this.cfg.password,e]);for(let s=0;s<o.length;s++){const a=o[s],i=new Be;i.postid=a.postid,i.title=a.title,i.mt_keywords=a.mt_keywords,i.permalink=a.permalink,i.description=a.description,i.wp_slug=a.wp_slug,i.dateCreated=a.dateCreated,i.categories=a.categories,t.push(i)}return t}async getPost(e){return await this.metaweblogCall(Ut.METHOD_GET_POST,[e,this.cfg.username,this.cfg.password])}async newPost(e,t){t=t??!0;const o=e.post_status;e.post_status=t===!1?xt.PostStatusEnum_Draft:xt.PostStatusEnum_Publish,o!==e.post_status&&(e.post_status=o);const s=this.createPostStruct(e);this.logger.debug("postStruct=>",s);let a=await this.metaweblogCall(Ut.METHOD_NEW_POST,[this.cfg.blogid,this.cfg.username,this.cfg.password,s,t]);return a=a+"",a=a.replace(/"/g,""),this.logger.debug("ret=>",a),a}async editPost(e,t,o){o=o??!0;const s=t.post_status;t.post_status=o===!1?xt.PostStatusEnum_Draft:xt.PostStatusEnum_Publish,s!==t.post_status&&(t.post_status=s);const a=this.createPostStruct(t);this.logger.debug("postStruct=>",a);const i=await this.metaweblogCall(Ut.METHOD_EDIT_POST,[e,this.cfg.username,this.cfg.password,a,o]);return this.logger.debug("ret=>",i),i}async deletePost(e){const t=await this.metaweblogCall(Ut.METHOD_DELETE_POST,[this.cfg.blogid,e,this.cfg.username,this.cfg.password,!1]);return this.logger.debug("ret=>",t),t}async getPreviewUrl(e){return this.cfg.previewUrl.replace(/\[postid\]/g,e)}async getCategories(){const e=[];try{const o=await this.metaweblogCall(Ut.METHOD_GET_CATEGORIES,[this.cfg.blogid,this.cfg.username,this.cfg.password]);this.logger.debug("èŽ·å–çš„åˆ†ç±»ä¿¡æ¯ï¼ŒdataArr=>",o),o.forEach(s=>{const a=new Qe;a.categoryId=s.categoryId,a.categoryName=s.categoryName,a.description=s.description,a.categoryDescription=s.categoryDescription,a.htmlUrl=s.htmlUrl,a.parentId=s.parentId,a.rssUrl=s.rssUrl,e.push(a)})}catch(t){this.logger.error("åˆ†ç±»èŽ·å–å¤±è´¥",t)}return e}async newMediaObject(e,t){let o;try{o=await this.metaweblogCall(Ut.METHOD_NEW_MEDIA_OBJECT,[this.cfg.blogid,this.cfg.username,this.cfg.password,{name:e.name,type:e.type,bits:e.bits}]),this.logger.debug("ä¸Šä¼ åª’ä½“å®Œæˆ, ret =>",o)}catch(s){this.logger.error("åª’ä½“ä¸Šä¼ å¤±è´¥",s)}return o}async metaweblogCall(e,t){return await this.proxyXmlrpc(this.cfg.apiUrl,e,t)}createPostStruct(e){const t={};return T.isEmptyString(e.title)||Object.assign(t,{title:e.title}),T.isEmptyString(e.mt_keywords)||Object.assign(t,{mt_keywords:e.mt_keywords}),T.isEmptyString(e.mt_excerpt)||Object.assign(t,{mt_excerpt:e.mt_excerpt}),T.isEmptyString(e.mt_text_more)||Object.assign(t,{mt_text_more:e.mt_text_more}),T.isEmptyString(e.description)||Object.assign(t,{description:e.description}),T.isEmptyString(e.wp_slug)||Object.assign(t,{wp_slug:e.wp_slug}),Object.assign(t,{categories:e.categories||[]}),Object.assign(t,{post_status:e.post_status??xt.PostStatusEnum_Publish}),T.isEmptyString(e.wp_password)||Object.assign(t,{wp_password:e.wp_password}),t}}class Cc extends bs{MD_CATEGORY="[Markdown]";constructor(e,t){super(e,t),this.logger=L("cnblogs-api-adaptor"),this.cfg.blogid="cnblogs"}async getUsersBlogs(){let e=[];return e=await this.metaweblogCall(ln.METHOD_GET_USERS_BLOGS,[this.cfg.blogid,this.cfg.username,this.cfg.password]),this.logger.debug("getUsersBlogs=>",e),e}async newPost(e,t){return e=this.assignMdCategory(e),super.newPost(e,t)}async editPost(e,t,o){return t=this.assignMdCategory(t),super.editPost(e,t,o)}async deletePost(e){const t=await this.metaweblogCall(ln.METHOD_DELETE_POST,[this.cfg.blogid,e,this.cfg.username,this.cfg.password,!1]);return this.logger.debug("ret=>",t),t}async getCategories(){const e=[];try{const o=await this.metaweblogCall(Ut.METHOD_GET_CATEGORIES,[this.cfg.blogid,this.cfg.username,this.cfg.password]);this.logger.debug("åšå®¢å›­èŽ·å–çš„åˆ†ç±»ä¿¡æ¯ï¼ŒdataArr=>",o),o.forEach(s=>{const a=new Qe;s.title!==this.MD_CATEGORY&&(a.categoryId=s.categoryid,a.categoryName=s.title,a.description=s.description,a.categoryDescription=s.categoryDescription,a.htmlUrl=s.htmlUrl,a.parentId=s.parentId,a.rssUrl=s.rssUrl,e.push(a))})}catch(t){this.logger.error("åšå®¢å›­åˆ†ç±»èŽ·å–å¤±è´¥",t)}return e}async getPreviewUrl(e){const t=this.cfg.apiUrl?this.cfg.apiUrl.match(/[^/]+$/)?.[0]??"":"";return this.cfg.previewUrl.replace(/\[userid]/g,t).replace(/\[postid]/g,e)}assignMdCategory(e){const t=e.categories??[];return t.some(o=>o.toLowerCase()===this.MD_CATEGORY.toLowerCase())||t.push(this.MD_CATEGORY),e}}var yo={};const wi=async(p,e)=>{const t=L("use-cnblogs-api");t.info("Start using Cnblogs API...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:i}=pe(),n=await i();if(s=te.safeParse(n[p],{}),se.isEmptyObject(s)){const l=A.emptyOrDefault(yo.VITE_CNBLOGS_API_URL,"https://rpc.cnblogs.com/metaweblog/[your-blog-name]"),c=A.emptyOrDefault(yo.VITE_CNBLOGS_USERNAME,""),r=A.emptyOrDefault(yo.VITE_CNBLOGS_AUTH_TOKEN,""),m=A.emptyOrDefault(yo.VITE_MIDDLEWARE_URL,fe);s=new mc(l,c,r,m),t.debug("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.tagEnabled=!0,s.cateEnabled=!0,s.categoryType=Q.CategoryType_Multi,s.allowCateChange=!0,s.knowledgeSpaceEnabled=!1,s.picgoPicbedSupported=!0,s.bundledPicbedSupported=!0;const a=new Cc(o,s);return t.info("Cnblogs API created successfully."),{cfg:s,blogApi:a}};class Gn{static logger=L("wordpress-utils");static parseHomeAndUrl(e){this.logger.debug(`Parsing Home address: ${e}`);let t="";return e.endsWith("/xmlrpc.php")?(t=e,e=e.replace("/xmlrpc.php","")):(e=e.replace(/\/$/,""),t=`${e}/xmlrpc.php`),this.logger.debug(`Parse result: home=${e}, apiUrl=${t}`),{home:e,apiUrl:t}}}class Bn extends eo{constructor(e,t,o,s){super(e,"",t,o,s);const{home:a,apiUrl:i}=Gn.parseHomeAndUrl(e);this.home=a,this.apiUrl=i,this.previewUrl="/?p=[postid]",this.pageType=ce.Html,this.usernameEnabled=!0,this.showTokenTip=!1,this.allowPreviewUrlChange=!0,this.tagEnabled=!0,this.cateEnabled=!0,this.categoryType=Q.CategoryType_Multi,this.allowCateChange=!0,this.knowledgeSpaceEnabled=!1}}class Ec extends bs{constructor(e,t){super(e,t),this.logger=L("wordpress-api-adaptor"),this.cfg.blogid="wordpress"}}var bo={};const _i=async(p,e)=>{const t=L("use-wordpress-api");t.info("Start using Wordpress API...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:i}=pe(),n=await i();if(s=te.safeParse(n[p],{}),se.isEmptyObject(s)){const l=A.emptyOrDefault(bo.VITE_WORDPRESS_API_URL,"http://your-wordpress-home.com"),c=A.emptyOrDefault(bo.VITE_WORDPRESS_USERNAME,""),r=A.emptyOrDefault(bo.VITE_WORDPRESS_AUTH_TOKEN,""),m=A.emptyOrDefault(bo.VITE_MIDDLEWARE_URL,fe);s=new Bn(l,c,r,m),t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.tagEnabled=!0,s.cateEnabled=!0,s.categoryType=Q.CategoryType_Multi,s.allowCateChange=!0,s.knowledgeSpaceEnabled=!1,s.picgoPicbedSupported=!0,s.bundledPicbedSupported=!0;const a=new Ec(o,s);return t.info("Wordpress API created successfully.",s),{cfg:s,blogApi:a}};class jn{static logger=L("typecho-utils");static parseHomeAndUrl(e){this.logger.debug(`Parsing Home address: ${e}`);let t="";return e.endsWith("/index.php/action/xmlrpc")?(t=e,e=e.replace("/index.php/action/xmlrpc","")):(e=e.replace(/\/$/,""),t=`${e}/index.php/action/xmlrpc`),this.logger.debug(`Parse result: home=${e}, apiUrl=${t}`),{home:e,apiUrl:t}}}class Ac extends eo{constructor(e,t,o,s){super(e,"",t,o,s);const{home:a,apiUrl:i}=jn.parseHomeAndUrl(e);this.home=a,this.apiUrl=i,this.previewUrl="/index.php/archives/[postid]",this.pageType=ce.Html,this.showTokenTip=!1,this.allowPreviewUrlChange=!0,this.tagEnabled=!0,this.cateEnabled=!0,this.categoryType=Q.CategoryType_Multi,this.allowCateChange=!0,this.knowledgeSpaceEnabled=!1}}class Ic extends bs{constructor(e,t){super(e,t),this.logger=L("typecho-api-adaptor"),this.cfg.blogid="typecho"}}var wo={};const vi=async(p,e)=>{const t=L("use-typecho-api");t.info("Start using Typecho API...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:i}=pe(),n=await i();if(s=te.safeParse(n[p],{}),se.isEmptyObject(s)){const l=A.emptyOrDefault(wo.VITE_TYPECHO_API_URL,"http://your-typecho-home.com/"),c=A.emptyOrDefault(wo.VITE_TYPECHO_USERNAME,""),r=A.emptyOrDefault(wo.VITE_TYPECHO_AUTH_TOKEN,""),m=A.emptyOrDefault(wo.VITE_MIDDLEWARE_URL,fe);s=new Ac(l,c,r,m),t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.tagEnabled=!0,s.cateEnabled=!0,s.categoryType=Q.CategoryType_Multi,s.allowCateChange=!0,s.knowledgeSpaceEnabled=!1,s.picgoPicbedSupported=!0,s.bundledPicbedSupported=!0;const a=new Ic(o,s);return t.info("Typecho API created successfully.",s),{cfg:s,blogApi:a}};class Uc extends Yt{constructor(e,t,o){super("https://www.yuque.com/","https://www.yuque.com/api/v2",e,t,o),this.tokenSettingUrl="https://www.yuque.com/settings/tokens",this.showTokenTip=!0,this.previewUrl="/[notebook]/[postid]",this.pageType=ce.Markdown,this.usernameEnabled=!0,this.passwordType=xe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!1,this.cateEnabled=!1,this.knowledgeSpaceEnabled=!0,this.knowledgeSpaceTitle="çŸ¥è¯†åº“",this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="ç”±äºŽè¯­é›€å¹³å°çš„é™åˆ¶ï¼Œæš‚æ—¶ä¸æ”¯æŒç¼–è¾‘æ‰€å±žçŸ¥è¯†åº“ã€‚å¦‚æžœæ‚¨æƒ³ç§»åŠ¨æ–‡æ¡£ï¼Œè¯·å…ˆç‚¹å‡»å–æ¶ˆåˆ é™¤è¯¥æ–‡æ¡£ï¼Œç„¶åŽé‡æ–°é€‰æ‹©æ–°çš„çŸ¥è¯†åº“å‘å¸ƒ"}}class xc extends Ct{constructor(e,t){super(e,t),this.logger=L("yuque-api-adaptor")}async getUsersBlogs(){const e=[];return(await this.getRepos()).forEach(o=>{const s=new et;s.blogid=o.namespace,s.blogName=o.name,s.url=o.namespace,e.push(s)}),e}async newPost(e,t){const o=e.cate_slugs?.[0]??this.cfg.blogid;return await this.addDoc(e.title,e.wp_slug,e.description,o)}async editPost(e,t,o){const s=this.getYuquePostidKey(e);return await this.updateDoc(s.docId,t.title,t.wp_slug,t.description,s.docRepo)}async deletePost(e){const t=this.getYuquePostidKey(e);return await this.delDoc(t.docId,t.docRepo)}async getPost(e,t){const o=this.getYuquePostidKey(e),s=await this.getDoc(o.docId,o.docRepo);this.logger.debug("yuqueDoc=>",s);const a=new Be;a.title=s.title,a.description=s.body;const i=s.book,n=[];return n.push(i.namespace),a.cate_slugs=n,a}async getCategories(){const e=[],t=await this.getRepos();return t&&t.length>0&&t.forEach(o=>{if(o.type==="Book"){const s=new Qe;s.categoryId=`${this.cfg.username}/${o.slug}`,s.categoryName=o.name,s.description=o.name,s.categoryDescription=o.name,e.push(s)}}),e}async getPreviewUrl(e){const t=this.cfg.previewUrl??"",o=this.getYuquePostidKey(e),s=o.docId,a=o.docRepo??this.cfg.blogid??"";return t.replace("[postid]",s).replace("[notebook]",a)}async getRepos(){const e="/users/"+this.cfg.username+"/repos",t=await this.yuqueRequest(e,{},"GET");return this.logger.debug("yuque repos=>",t),t}async addDoc(e,t,o,s){let a="/repos/"+this.cfg.blogid+"/docs";s&&(a="/repos/"+s+"/docs",this.logger.warn("yuque addDoc with repo",s));const i={title:e,slug:t,format:"markdown",body:o},n=await this.yuqueRequest(a,i,"POST");if(this.logger.debug("yuqueRequest addDoc=>",n),!n)throw new Error("è¯·æ±‚è¯­é›€APIå¼‚å¸¸");return s?`${n.id}_${s}`:`${n.id}`}async updateDoc(e,t,o,s,a){let i="/repos/"+this.cfg.blogid+"/docs/"+e;a&&(i="/repos/"+a+"/docs/"+e,this.logger.warn("yuque updateDoc with repo",a));const n={title:t,slug:o,body:s,_force_asl:1};if(!await this.yuqueRequest(i,n,"PUT"))throw new Error("è¯·æ±‚è¯­é›€APIå¼‚å¸¸");return!0}getYuquePostidKey(e){let t,o;if(e.indexOf("_")>0){const s=e.split("_");t=s[0],o=s[1]}else t=e;return{docId:t,docRepo:o}}async delDoc(e,t){let o="/repos/"+this.cfg.blogid+"/docs/"+e;if(t&&(o="/repos/"+t+"/docs/"+e,this.logger.warn("yuque delDoc with repo",t)),!await this.yuqueRequest(o,{},"DELETE"))throw new Error("è¯·æ±‚è¯­é›€APIå¼‚å¸¸");return!0}async getDoc(e,t){let o="/repos/"+this.cfg.blogid+"/docs/"+e;t&&(o="/repos/"+t+"/docs/"+e,this.logger.warn("yuque getDoc with repo",t));const s=await this.yuqueRequest(o,{},"GET");if(!s)throw new Error("è¯·æ±‚è¯­é›€APIå¼‚å¸¸");return s}async yuqueRequest(e,t,o="POST"){const s="application/json",a={"Content-Type":s,"X-Auth-Token":this.cfg.password},i=`${this.cfg.apiUrl}${e}`;this.logger.debug("å‘è¯­é›€è¯·æ±‚æ•°æ®ï¼ŒapiUrl =>",i),this.logger.debug("å‘è¯­é›€è¯·æ±‚æ•°æ®ï¼Œparams =>",t);const n=se.isEmptyObject(t)?"":JSON.stringify(t),l=await this.apiFetch(i,[a],n,o,s,!1,"base64");if(this.logger.debug("å‘è¯­é›€è¯·æ±‚æ•°æ®ï¼ŒresJson =>",l),l?.status===401)throw new Error(l?.message);return l.data?l.data:null}}var aa={};const Pi=async(p,e)=>{const t=L("use-yuque-api");t.info("Start using Yuque API...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:i}=pe(),n=await i();if(s=te.safeParse(n[p],{}),se.isEmptyObject(s)){const l=A.emptyOrDefault(aa.VITE_YUQUE_USERNAME,""),c=A.emptyOrDefault(aa.VITE_YUQUE_AUTH_TOKEN,""),r=A.emptyOrDefault(aa.VITE_MIDDLEWARE_URL,fe);s=new Uc(l,c,r),t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.tagEnabled=!1,s.cateEnabled=!1,s.knowledgeSpaceEnabled=!0,s.knowledgeSpaceType=Q.CategoryType_Single,s.allowKnowledgeSpaceChange=!1,s.placeholder.knowledgeSpaceReadonlyModeTip="ç”±äºŽè¯­é›€å¹³å°çš„é™åˆ¶ï¼Œæš‚æ—¶ä¸æ”¯æŒç¼–è¾‘æ‰€å±žçŸ¥è¯†åº“ã€‚å¦‚æžœæ‚¨æƒ³ç§»åŠ¨æ–‡æ¡£ï¼Œè¯·å…ˆç‚¹å‡»å–æ¶ˆåˆ é™¤è¯¥æ–‡æ¡£ï¼Œç„¶åŽé‡æ–°é€‰æ‹©æ–°çš„çŸ¥è¯†åº“å‘å¸ƒ",s.picgoPicbedSupported=!0,s.bundledPicbedSupported=!1;const a=new xc(o,s);return t.info("Yuque API created successfully.",s),{cfg:s,blogApi:a}},Mc=(p,e,t)=>new OSS({endpoint:p,accessKeyId:t.access_id,accessKeySecret:t.access_key,stsToken:t.access_token,cname:!0,bucket:e});class cn{static processZHTable(e){const t=is(e),o=t("table thead").html();return t("table thead").remove(),t("table tbody tr:first-child").before(o),t("table").attr("data-draft-node","block").attr("data-draft-type","table").attr("data-size","normal").attr("data-row-style","normal"),t.html()}static processZHMath(e){const t=is(e,{xml:{xmlMode:!0,decodeEntities:!1}}),o=/\$\$([^\$]+)\$\$|\$([^\$]+)\$/g;return t("*:not(pre)").each((a,i)=>{const l=(t(i).html()??"").replace(o,(c,r,m)=>{const w=r||m;return`<img eeimg="1" src="//www.zhihu.com/equation?tex=${encodeURIComponent(w)}" 
            alt="${w}" />`});t(i).html(l)}),t.html()}}class Ft{static HEADERS={MACOS_CHROME:{"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36"}}}class Dc extends Rt{async getMetaData(){const e=await this.zhihuFetch("https://www.zhihu.com/api/v4/me?include=account_status%2Cis_bind_phone%2Cis_force_renamed%2Cemail%2Crenamed_fullname"),t=!!e.uid;return this.logger.info(`get zhihu metadata finished, flag => ${t}`),{flag:t,uid:e.uid,title:e.name,avatar:e.avatar_url,supportTypes:["html"],type:"zhihu",displayName:"çŸ¥ä¹Ž",home:"https://www.zhihu.com/settings/account",icon:"https://static.zhihu.com/static/favicon.ico"}}async getUsersBlogs(){let e=[];const t=await this.getColumns();return this.logger.debug("get columns=>",t),t.forEach(o=>{const s=new et,a=o.column;s.blogid=a.id,s.blogName=a.title,s.url=a.url,e.push(s)}),this.logger.debug("getUsersBlogs=>",e),e}async preEditPost(e,t,o){const s=await super.preEditPost(e,t,o),a=o?.cfg,i=Pe(s),n=i.html;this.logger.info("å‡†å¤‡å¤„ç†çŸ¥ä¹Žæ­£æ–‡"),this.logger.debug("html =>",{html:n});let l=n;return l=cn.processZHTable(l),l=cn.processZHMath(l),i.html=l,this.logger.info("çŸ¥ä¹Žæ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedHtml =>",{updatedHtml:l}),a?.pageType==ce.Markdown?i.description=i.markdown:i.description=i.html,i}async addPost(e){const t=JSON.stringify({title:e.title,content:e.description}),o=await this.zhihuFetch("https://zhuanlan.zhihu.com/api/articles/drafts",t,"POST");if(this.logger.debug("save zhihu draft res=>",o),!o.id)throw new Error("çŸ¥ä¹Žæ–‡ç« å‘å¸ƒå¤±è´¥");const s=o.id.toString(),a=JSON.stringify({column:null,commentPermission:"anyone",disclaimer_type:"none",disclaimer_status:"close",table_of_contents_enabled:!1,commercial_report_info:{commercial_types:[]},commercial_zhitask_bind_info:null}),i=await this.zhihuFetch(`https://zhuanlan.zhihu.com/api/articles/${o.id}/publish`,a,"PUT");this.logger.debug("publish zhihu article pubRes=>",i);const n=e.cate_slugs?.[0]??this.cfg.blogid;return await this.addPostToColumn(n,s),{status:"success",post_id:s}}async editPost(e,t,o){const s=JSON.stringify({title:t.title,content:t.description,table_of_contents:!1,delta_time:10}),a=await this.zhihuFetch(`https://zhuanlan.zhihu.com/api/articles/${e}/draft`,s,"PATCH");if(this.logger.debug("updated zhihu draft =>",a),a?.error?.message)throw new Error(`çŸ¥ä¹Žæ–‡ç« æ›´æ–°å¤±è´¥ï¼š[${a.error.name}] `+a.error.message);const i=JSON.stringify({disclaimer_type:"none",disclaimer_status:"close",table_of_contents_enabled:!1,commercial_report_info:{commercial_types:[]},commercial_zhitask_bind_info:null}),n=await this.zhihuFetch(`https://zhuanlan.zhihu.com/api/articles/${e}/publish`,i,"PUT");return this.logger.debug("edit zhihu pubRes=>",n),!0}async getPreviewUrl(e){return`https://zhuanlan.zhihu.com/p/${e}`}async deletePost(e){let t=!1;try{const o=await this.zhihuFetch(`https://www.zhihu.com/api/v4/articles/${e}`,void 0,"DELETE");if(this.logger.debug("delete zhihu article res=>",o),o.success)t=!0;else throw new Error(o.error.message)}catch(o){throw this.logger.error("çŸ¥ä¹Žæ–‡ç« åˆ é™¤å¤±è´¥",o),o}return t}async getCategories(){const e=[],t=await this.getColumns();return this.logger.debug("get columns=>",t),t.forEach(o=>{const s=new Qe,a=o.column;s.categoryId=a.id,s.categoryName=a.title,s.description=a.url,s.categoryDescription=a.url,e.push(s)}),e}async uploadFile(e){const t=new Blob([e.bits],{type:e.type}),o=e.name;if(this.logger.debug(`zhihu start uploadFile ${o}=>`,t),t instanceof Blob){const s=await t.arrayBuffer(),a=Tc(s),i=fi.MD5(a.toString("utf8")).toString(),n=JSON.stringify({image_hash:i,source:"article"});this.logger.debug("zhihu uploadFile, params =>",n);const l=await this.zhihuFormFetch("https://api.zhihu.com/images",n,{});this.logger.debug("zhihu uploadFile, fileResp =>",l);const c=l.upload_file;if(l.upload_file.state==1){const r=await this.untilImageDone(c.image_id);this.logger.debug("imgDetail",r),c.object_key=r.original_hash}else{const r=l.upload_token;try{const m=Mc("https://zhihu-pics-upload.zhimg.com","zhihu-pics",r),w=await m.put(c.object_key,new Blob([a]));this.logger.debug("zhihu uploadFile finished",{client:m,finalUrl:w})}catch(m){throw this.logger.error("çŸ¥ä¹Žå›¾ç‰‡ä¸Šä¼ å¤±è´¥ =>",m),new Error("çŸ¥ä¹Žå›¾ç‰‡ä¸Šä¼ å¤±è´¥, é”™è¯¯åŽŸå›  =>"+m)}}return t.type==="image/gif"&&(c.object_key=c.object_key+".gif"),{id:c.object_key,object_key:c.object_key,url:"https://pic4.zhimg.com/"+c.object_key}}return{}}async getColumns(){let e;try{e=await this.zhihuFetch(`https://www.zhihu.com/api/v4/members/${this.cfg.username}/column-contributions?include=data%5B*%5D.column.intro%2Cfollowers%2Carticles_count%2Cvoteup_count%2Citems_count&offset=0&limit=20`,void 0,"GET")}catch(t){this.logger.error("zhihu get columns error",t)}return e?.data??[]}async zhihuFetch(e,t,o="GET",s={},a="application/json"){const i=new Map;i.set("Cookie",this.cfg.password);const n={...Object.fromEntries(i),"User-Agent":Ft.HEADERS.MACOS_CHROME["User-Agent"],...s},l=t,c=e;this.logger.debug("å‘ Zhihu è¯·æ±‚æ•°æ®ï¼ŒapiUrl =>",c),this.logger.debug("å‘ Zhihu è¯·æ±‚æ•°æ®ï¼Œheaders =>",s),this.logger.debug("å‘ Zhihu è¯·æ±‚æ•°æ®ï¼Œbody =>",l);const r=await this.webFetch(c,[n],l,o,a,!0,"base64");return this.logger.debug("å‘ Zhihu è¯·æ±‚æ•°æ®ï¼ŒresJson =>",r),r??null}async zhihuFormFetch(e,t,o={}){const s=e,a=new Map;a.set("Cookie",this.cfg.password);const i={...Object.fromEntries(a),"User-Agent":Ft.HEADERS.MACOS_CHROME["User-Agent"],...o},n={method:"POST",headers:i,body:t};this.logger.debug("å‘çŸ¥ä¹Žå‘é€è¡¨å•æ•°æ®ï¼ŒapiUrl =>",s),this.logger.debug("å‘çŸ¥ä¹Žå‘é€è¡¨å•æ•°æ®ï¼Œoptions =>",n);const l=await this.webFormFetch(s,[i],t,!0);if(l.error)throw new Error("çŸ¥ä¹Žè¡¨å•æäº¤é”™è¯¯ã€‚è¯¦ç»†é”™è¯¯ =>"+l.error);return this.logger.debug("å‘çŸ¥ä¹Žå‘é€è¡¨å•æ•°æ®ï¼ŒresJson =>",l),l}async addPostToColumn(e,t){if(T.isEmptyString(e)||T.isEmptyString(t)){this.logger.info("æ–‡ç« æˆ–è€…ä¸“æ ä¸ºç©ºï¼Œä¸æ”¶å½•");return}try{const o=JSON.stringify({type:"article",id:t});await this.zhihuFetch(`https://www.zhihu.com/api/v4/columns/${e}/items`,o,"POST")}catch(o){this.logger.error("æ–‡ç« æ”¶å½•åˆ°ä¸“æ å¤±è´¥",o)}this.logger.info("æ–‡ç« æ”¶å½•åˆ°ä¸“æ æˆåŠŸ")}async untilImageDone(e){const t=this;return new Promise(function(o,s){function a(){t.logger.debug("untilImageDone start processing...",e),(async()=>{const i=await t.zhihuFetch(`https://api.zhihu.com/images/${e}`,void 0,"GET");t.logger.debug("imgDetail",i),i.status!="processing"?(t.logger.info("image upload all done"),o(i)):(t.logger.debug("go next",a),setTimeout(a,300))})()}a()})}}class Xt extends Ql{}class Qt extends Zl{placeholder={};constructor(e,t,o,s,a){super(s,a),this.home=e,this.apiUrl=t,this.username=o,this.password=s,this.apiStatus=!1,this.blogid="",this.blogName="",this.posidKey="",this.previewUrl="",this.pageType=ce.Markdown,this.middlewareUrl=a,this.usernameEnabled=!1,this.allowPreviewUrlChange=!0,this.showTokenTip=!1,this.yamlLinkEnabled=!0,this.tagEnabled=!1,this.cateEnabled=!1,this.knowledgeSpaceEnabled=!1,this.placeholder=new Xt}}class Oc extends Qt{logoutUrl;constructor(e,t,o){super("https://zhuanlan.zhihu.com","https://zhuanlan.zhihu.com/api",e,t,o),this.logoutUrl="https://www.zhihu.com/logout",this.previewUrl="/p/[postid]",this.pageType=ce.Html,this.passwordType=xe.PasswordType_Cookie,this.usernameEnabled=!0,this.tagEnabled=!1,this.cateEnabled=!1,this.knowledgeSpaceEnabled=!0,this.knowledgeSpaceTitle="ä¸“æ ",this.knowledgeSpaceType=Q.CategoryType_Single,this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="ç”±äºŽçŸ¥ä¹Žå¹³å°çš„é™åˆ¶ï¼Œæš‚æ—¶ä¸æ”¯æŒç¼–è¾‘æ‰€å±žä¸“æ ã€‚å¦‚æžœæ‚¨æƒ³ç§»åŠ¨æ–‡æ¡£ï¼Œè¯·å…ˆç‚¹å‡»å–æ¶ˆåˆ é™¤è¯¥æ–‡æ¡£ï¼Œç„¶åŽé‡æ–°é€‰æ‹©æ–°çš„ä¸“æ å‘å¸ƒ"}}class Kn extends Xt{}var ia={};const Ti=async(p,e)=>{const t=L("use-zhihu-web");t.info("Start using Zhihu WebAuth...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:i}=pe(),n=await i();if(s=te.safeParse(n[p],{}),se.isEmptyObject(s)){const c=A.emptyOrDefault(ia.VITE_MIDDLEWARE_URL,fe),r=A.emptyOrDefault(ia.VITE_ZHIHU_AUTH_TOKEN,"");s=new Oc("",r,c),s.picbedService=Je.Bundled,t.debug("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");const l=A.emptyOrDefault(ia.VITE_MIDDLEWARE_URL,fe);T.isEmptyString(s.middlewareUrl)&&(s.middlewareUrl=l),T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.tagEnabled=!1,s.cateEnabled=!1,s.knowledgeSpaceEnabled=!0,s.knowledgeSpaceType=Q.CategoryType_Single,s.allowKnowledgeSpaceChange=!1,s.placeholder||(s.placeholder=new Kn),s.placeholder.knowledgeSpaceReadonlyModeTip="ç”±äºŽçŸ¥ä¹Žå¹³å°çš„é™åˆ¶ï¼Œæš‚æ—¶ä¸æ”¯æŒç¼–è¾‘æ‰€å±žä¸“æ ã€‚å¦‚æžœæ‚¨æƒ³ç§»åŠ¨æ–‡æ¡£ï¼Œè¯·å…ˆç‚¹å‡»å–æ¶ˆåˆ é™¤è¯¥æ–‡æ¡£ï¼Œç„¶åŽé‡æ–°é€‰æ‹©æ–°çš„ä¸“æ å‘å¸ƒ",s.logoutUrl="https://www.zhihu.com/logout",s.picgoPicbedSupported=!1,s.bundledPicbedSupported=!0;const a=new Dc(o,s);return{cfg:s,webApi:a}};var $c={};const ki=async(p,e)=>{const t=L("use-metaweblog-api");t.info("Start using Metaweblog API...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:i}=pe(),n=await i();if(s=te.safeParse(n[p],{}),se.isEmptyObject(s)){const m=A.emptyOrDefault($c.VITE_MIDDLEWARE_URL,fe);s=new eo("","","","",m),t.debug("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.tagEnabled=!0,s.cateEnabled=!0,s.categoryType=Q.CategoryType_Multi,s.allowCateChange=!0,s.knowledgeSpaceEnabled=!1,s.picgoPicbedSupported=!0,s.bundledPicbedSupported=!0;const a=new bs(o,s);return t.info("Metaweblog API created successfully."),{cfg:s,blogApi:a}};class Vc extends Yt{constructor(e,t){super("https://www.notion.so/","https://api.notion.com/v1","",e,t),this.tokenSettingUrl="https://www.notion.so/my-integrations",this.showTokenTip=!0,this.previewUrl="/[postid]",this.pageType=ce.Markdown,this.passwordType=xe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!1,this.cateEnabled=!1,this.knowledgeSpaceEnabled=!0,this.knowledgeSpaceTitle="æ ¹é¡µé¢",this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="ç”±äºŽNotionå¹³å°çš„é™åˆ¶ï¼Œæš‚æ—¶ä¸æ”¯æŒç¼–è¾‘æ‰€å±žçˆ¶é¡µé¢ã€‚å¦‚æžœæ‚¨æƒ³ç§»åŠ¨æ–‡æ¡£ï¼Œè¯·å…ˆç‚¹å‡»å–æ¶ˆåˆ é™¤è¯¥æ–‡æ¡£ï¼Œç„¶åŽé‡æ–°é€‰æ‹©æ–°çš„æ ¹é¡µé¢å‘å¸ƒ",this.cateSearchEnabled=!0}}class Nc extends Ct{constructor(e,t){super(e,t),this.logger=L("notion-api-adaptor")}async getUsersBlogs(e){const t=[];return(await this.getPages(e)).forEach(s=>{const a=new et;a.blogid=s.id;const i=s?.properties?.title?.title??[];a.blogName=i.map(n=>n.plain_text).join(""),a.url=s.public_url,t.push(a)}),this.logger.debug("get usersBlogs result=>",t),t}async newPost(e,t){const o=e.cate_slugs?.[0]??this.cfg.blogid;return await this.createPage(e.title,e.description,o)}async editPost(e,t,o){await this.deletePost(e);const s=await this.newPost(t),{getSetting:a,updateSetting:i}=pe(),n=await a(),l=this.cfg.posidKey,c=t.originalId,r=se.getProperty(n,c,{});return r[l]=s,n[c]=r,await i(n),!0}async deletePost(e){const t=this.getNotionPostidKey(e);return await this.deletePage(t.pageId)}async getPost(e,t){const o=this.getNotionPostidKey(e),s=await this.getPage(o.pageId);this.logger.debug("notionPage=>",s),this.logger.debug("postid=>",e);const a=new Be,i=s?.properties?.title?.title??[];a.title=i.map(c=>c.plain_text).join(""),a.description="æš‚ä¸æ”¯æŒNotionæ­£æ–‡";const n=s?.parent?.page_id,l=[];return l.push(n),a.cate_slugs=l,a}async getCategories(e){const t=[],o=await this.getPages(e);return o&&o.length>0&&o.forEach(s=>{const a=new Qe;a.categoryId=s.id;const i=s?.properties?.title?.title??[];a.categoryName=i.map(n=>n.plain_text).join(""),a.description=a.categoryName,a.categoryDescription=a.categoryName,a.htmlUrl=s.public_url,t.push(a)}),t}async getPreviewUrl(e){const t=this.cfg.previewUrl??"",s=this.getNotionPostidKey(e).endUrl;return t.replace("[postid]",s)}async getPages(e){const t={page_size:10,query:e??"",filter:{value:"page",property:"object"}},s=(await this.notionRequest("/search",t,"POST")).results;if(this.logger.debug("notion pages=>",s),s.length===0)throw new Error("no shared page linked to your connection, you must have at least one page as root page, see more at: https://stackoverflow.com/a/75537092/4037224");return s}async createPage(e,t,o){const s=o??this.cfg.blogid,a=Dn.markdownToNotion(t),i={parent:{page_id:s},properties:{title:[{text:{content:e}}]},children:a};this.logger.debug("before createPage =>",{markdownText:t,notionObject:a});const n=await this.notionRequest("/pages",i,"POST");if(n.object!=="page")throw new Error("Notion create page error");const c=n.url.split("/").slice(-1)[0];return`${n.id}_${c}`}async deletePage(e){this.logger.debug("before deletePage, pageId=>",e);const t=`/pages/${e}`,o={archived:!0},s=await this.notionRequest(t,o,"PATCH");if(s.object!=="page")throw new Error("Notion delete page error");return s.archived}async updatePage(e,t,o){throw new Error("Notionæ˜¯åŸºäºŽå—çš„APIï¼Œæš‚æ—¶ä¸æ”¯æŒæ›´æ–°ï¼Œå¦‚éœ€æ›´æ–°ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ")}async getPage(e){this.logger.debug("before getPage, pageId=>",e);const t=`/pages/${e}`,o=await this.notionRequest(t,{},"GET");if(o.object!=="page")throw new Error("Notion get page error");return o}getNotionPostidKey(e){let t,o;if(e.indexOf("_")>0){const s=e.split("_");t=s[0],o=s[1]}else t=e;return{pageId:t,endUrl:o}}async notionRequest(e,t,o="POST"){const s="application/json",a={"Content-Type":s,Authorization:`Bearer ${this.cfg.password}`,"Notion-Version":"2022-06-28"},i=`${this.cfg.apiUrl}${e}`;this.logger.debug("å‘Notionè¯·æ±‚æ•°æ®ï¼ŒapiUrl =>",i),this.logger.debug("å‘Notionè¯·æ±‚æ•°æ®ï¼Œparams =>",t);const n=se.isEmptyObject(t)?void 0:JSON.stringify(t),l=await this.apiFetch(i,[a],n,o,s,!0,"base64","text");if(this.logger.debug("å‘Notionè¯·æ±‚æ•°æ®ï¼ŒresJson =>",l),l?.status===400||l?.status===401||l?.status===404||l?.status===429)throw new Error(l?.message);return l}}var pn={};const Si=async(p,e)=>{const t=L("use-notion-api");t.info("Start using Notion API...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:i}=pe(),n=await i();if(s=te.safeParse(n[p],{}),se.isEmptyObject(s)){const l=A.emptyOrDefault(pn.VITE_NOTION_AUTH_TOKEN,""),c=A.emptyOrDefault(pn.VITE_MIDDLEWARE_URL,fe);s=new Vc(l,c),t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.tagEnabled=!1,s.cateEnabled=!1,s.knowledgeSpaceEnabled=!0,s.knowledgeSpaceType=Q.CategoryType_Single,s.allowKnowledgeSpaceChange=!1,s.placeholder.knowledgeSpaceReadonlyModeTip="ç”±äºŽNotionå¹³å°çš„é™åˆ¶ï¼Œæš‚æ—¶ä¸æ”¯æŒç¼–è¾‘æ‰€å±žçˆ¶é¡µé¢ã€‚å¦‚æžœæ‚¨æƒ³ç§»åŠ¨æ–‡æ¡£ï¼Œè¯·å…ˆç‚¹å‡»å–æ¶ˆåˆ é™¤è¯¥æ–‡æ¡£ï¼Œç„¶åŽé‡æ–°é€‰æ‹©æ–°çš„æ ¹é¡µé¢å‘å¸ƒ",s.cateSearchEnabled=!0,s.picgoPicbedSupported=!0,s.bundledPicbedSupported=!1;const a=new Nc(o,s);return t.info("Notion API created successfully.",s),{cfg:s,blogApi:a}};class Gt extends Yt{githubRepo;githubBranch;defaultPath;defaultMsg;author;email;site;mdFilenameRule;previewPostUrl="";previewUrl="";constructor(e,t,o,s,a){super("https://github.com","https://api.github.com",e,t,a),this.username=e,this.usernameEnabled=!0,this.password=t,this.passwordType=xe.PasswordType_Token,this.tokenSettingUrl="https://github.com/settings/tokens",this.showTokenTip=!0,this.tagEnabled=!0,this.cateEnabled=!0,this.knowledgeSpaceEnabled=!1,this.githubRepo=o,this.githubBranch=s,this.previewUrl="/[user]/[repo]/blob/[branch]/[docpath]",this.previewPostUrl="/post/[postid].html",this.defaultPath="/",this.defaultMsg="auto published by siyuan-plugin-publisher",this.author="terwer",this.email="youweics@163.com",this.site=T.pathJoin(this.home,"/"+this.username),this.mdFilenameRule="[filename].md",this.middlewareUrl=a}}class zn extends Gt{constructor(e,t,o,s,a){super(e,t,o,s,a),this.tokenSettingUrl="https://github.com/settings/tokens",this.showTokenTip=!0,this.defaultPath="source/_posts",this.previewUrl="/[user]/[repo]/blob/[branch]/[docpath]",this.previewPostUrl="/post/[postid].html",this.mdFilenameRule="[filename].md",this.imageStorePath="source/images",this.imageLinkPath="source/images",this.pageType=ce.Markdown,this.passwordType=xe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!0,this.cateEnabled=!0,this.allowCateChange=!0,this.categoryType=Q.CategoryType_Multi,this.knowledgeSpaceEnabled=!0,this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="Hexo å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",this.knowledgeSpaceType=Q.CategoryType_Tree_Single}}class gs extends Ct{githubClient;constructor(e,t){super(e,t),this.logger=L("common-github-api-adaptor");const o=new vr(t.username,t.githubRepo,t.password);o.defaultBranch=t.githubBranch,o.defaultPath=t.defaultPath,o.defaultMsg=t.defaultMsg,o.author=t.author,o.email=t.email,o.previewMdUrl=t.previewUrl,o.previewUrl=t.previewPostUrl,o.baseUrl=t.home,o.mdFilenameRule=t.mdFilenameRule,this.githubClient=new Pr(o)}async checkAuth(){let e;try{const t="test.md";await this.safeDeletePost(t);const o=await this.githubClient.publishGithubPage(t,"Hello, World!");await this.safeDeletePost(t),e=!T.isEmptyString(o?.content?.path)}catch(t){this.logger.info("checkAuth error =>",t),e=!1}return this.logger.info(`checkAuth finished => ${e}`),e}async getUsersBlogs(){const e=[],t=await this.githubClient.getGithubPageTreeNode("");if(this.logger.debug("getGithubPageTreeNode =>",t),t&&t.length>0){const o=new et,s=this.cfg;o.blogid=s.defaultPath,o.blogName=s.defaultPath,o.url=T.pathJoin(T.pathJoin(s.home,s.username),s.githubRepo),e.push(o)}return this.logger.debug("result result =>",e),e}async newPost(e,t){this.logger.debug("start newPost =>",{post:ne(e)});const o=this.cfg,s=e.cate_slugs?.[0]??o.blogid,a=e.mdFilename??"auto-"+fs.newID()+".md";let i=T.pathJoin(s,a);i.startsWith("/")&&(i=i.substring(1)),i.startsWith("./")&&(i=i.substring(2)),this.logger.info("Githubæ–‡ç« å°†è¦æœ€ç»ˆå‘é€åˆ°ä»¥ä¸‹ç›®å½• =>",i);let n;try{const l=await this.githubClient.publishGithubPage(i,e.description);if(!l?.content?.path)throw new Error("Github è°ƒç”¨APIå¼‚å¸¸");n=l}catch{try{await this.deletePost(i)}catch(r){this.logger.warn("å°è¯•åˆ é™¤å¤±è´¥ï¼Œå¿½ç•¥",r)}const c=await this.githubClient.publishGithubPage(i,e.description);if(!c?.content?.path)throw new Error("é‡å‘ä¾æ—§å¤±è´¥ï¼ŒGithub è°ƒç”¨APIå¼‚å¸¸");n=c}return n.content.path}async getPost(e,t){this.logger.debug("start getPost =>",{postid:e});const o=await this.githubClient.getGithubPage(e);if(this.logger.debug("getPost finished =>",o),!o)throw new Error("Github è°ƒç”¨APIå¼‚å¸¸");let s=new Be;s.postid=o.path,s.mdFilename=o.name,s.markdown=$t.fromBase64(o.content),s.description=s.markdown;const a=this.getYamlAdaptor();if(a!==null){const l=await ie.yaml2ObjAsync(s.description),c=new Ze;c.yamlObj=l,this.logger.debug("extract frontFormatter, yamlFormatObj =>",c),s=a.convertToAttr(s,c,this.cfg),this.logger.debug("handled yamlObj using YamlConverterAdaptor =>",l)}const i=[],n=o.path.replace(o.name,"").replace(/\/$/,"");return i.push(n),s.cate_slugs=i,s}async editPost(e,t,o){this.logger.debug("start editPost =>",{postid:e,post:ne(t)});const s=e;if(!s)throw new Error("postid ä¸èƒ½ä¸ºç©º");const a=s.substring(0,s.lastIndexOf("/")),i=s.substring(s.lastIndexOf("/")+1),n=t.cate_slugs?.[0]??a;let l=T.pathJoin(n,i);if(l.startsWith("/")&&(l=l.substring(1)),a!==n){this.logger.info(`ç›®å½•å·²æ›´æ”¹ï¼Œä»Ž ${a} ç§»åŠ¨åˆ° ${n}`);try{if(await this.githubClient.deleteGithubPage(s),!(await this.githubClient.publishGithubPage(l,t.description))?.content?.path)throw new Error("Github è°ƒç”¨APIå¼‚å¸¸ï¼Œæ— æ³•åœ¨æ–°ç›®å½•åˆ›å»ºæ–‡ä»¶");return t.postid=l,X.success(`ç›®å½•å·²æˆåŠŸä»Ž ${a} ç§»åŠ¨åˆ° ${n}`),!0}catch(c){throw this.logger.error("ç§»åŠ¨æ–‡ä»¶å¤±è´¥",c),c}}else{if(!(await this.githubClient.updateGithubPage(t.postid,t.description))?.content?.path)throw new Error("Github è°ƒç”¨APIå¼‚å¸¸");return!0}}async deletePost(e){if(!(await this.githubClient.deleteGithubPage(e))?.commit?.sha)throw new Error("Github è°ƒç”¨APIå¼‚å¸¸");return!0}async getCategoryTreeNodes(e){return await this.githubClient.getGithubPageTreeNode(e)}async getPreviewUrl(e){const t=this.cfg;let o;return o=t.previewUrl.replace("[user]",t.username).replace("[repo]",t.githubRepo).replace("[branch]",t.githubBranch).replace("[docpath]",e),o}async getPostPreviewUrl(e){let t;if(!e)throw new Error("postid ä¸èƒ½ä¸ºç©º");const o=e.substring(e.lastIndexOf("/")+1).replace(".md","");return t=this.cfg.previewPostUrl.replace("[postid]",o),t}async newMediaObject(e){try{const t=e.bits,o=$t.fromUint8Array(t),s=this.getImagePath(this.cfg.imageStorePath,e,"source/images").imagePath,a=this.getImagePath(this.cfg.imageLinkPath,e,"images").absImgPath;this.logger.info("Github å›¾ç‰‡å°†è¦æœ€ç»ˆå‘é€åˆ°ä»¥ä¸‹ç›®å½• =>",s),this.logger.info("å›¾ç‰‡å¯ä»¥ä½¿ç”¨ä¸‹åˆ—é“¾æŽ¥è®¿é—®",a);try{const c=await this.githubClient.publishGithubPage(s,o,"base64");this.logger.debug("github publishGithubPage res =>",c)}catch(c){if(this.logger.error("github publishGithubPage error =>",c),c.status===422)this.logger.warn("image already exists",c);else throw c}const i=e.name,n=a,l=e.name;return this.logger.info("Github å›¾ç‰‡ä¸Šä¼ æˆåŠŸ"),{attachment_id:i,date_created_gmt:new Date,parent:0,link:n,title:e.name,caption:"",description:"",metadata:{width:0,height:0,file:"",filesize:0,sizes:[]},type:e.type,thumbnail:"",id:l,file:e.name,url:n}}catch(t){throw this.logger.error("Error uploading image to github:",t),t}}getImagePath(e,t,o,s=!0){let a,i;if(e.startsWith("[docpath]")){const l=t.post.cate_slugs?.[0]??this.cfg.blogid,c=T.pathJoin(l,e.replace("[docpath]",""));a=T.pathJoin(c,t.name)}else{if(e.startsWith("./"))return{imagePath:e,absImgPath:e};{const n=T.isEmptyString(e)?o:e;a=T.pathJoin(n,t.name)}}return a.startsWith("/")&&(a=a.substring(1)),i=T.pathJoin("/",a),{imagePath:a,absImgPath:i}}async safeDeletePost(e){try{await this.githubClient.deleteGithubPage(e)}catch{}return!0}}class to extends qt{logger=L("hexo-yaml-converter-adaptor");convertToYaml(e,t,o){if(this.logger.debug("æ‚¨æ­£åœ¨ä½¿ç”¨ Hexo Yaml Converter",{post:ne(e)}),t?(this.logger.info("yaml å·²å­˜åœ¨ï¼Œæ ¹æ®æœ€æ–°é…ç½®æ›´æ–°",{post:ne(e)}),t.yamlObj={}):t=new Ze,t.yamlObj.title=e.title,t.yamlObj.date=Ae.formatIsoToZh(e.dateCreated.toISOString(),!0),e.dateUpdated||(e.dateUpdated=new Date),t.yamlObj.updated=Ae.formatIsoToZh(e.dateUpdated.toISOString(),!0),T.isEmptyString(e.shortDesc)||(t.yamlObj.excerpt=e.shortDesc),!T.isEmptyString(e.mt_keywords)){const i=e.mt_keywords.split(",");t.yamlObj.tags=i}if(e.categories?.length>0&&(t.yamlObj.categories=e.categories),o.yamlLinkEnabled){let i="/post/"+e.wp_slug+".html";if(o instanceof Gt){const n=o;if(!T.isEmptyString(o.previewPostUrl)){i=n.previewPostUrl.replace("[postid]",e.wp_slug);const r=Ae.formatIsoToZh(e.dateCreated.toISOString(),!0).split(" ")[0].split("-");this.logger.debug("created numarr=>",r);const m=r[0],w=r[1],d=r[2];i=i.replace(/\[yyyy]/g,m),i=i.replace(/\[MM]/g,w),i=i.replace(/\[mm]/g,w),i=i.replace(/\[dd]/g,d),t.yamlObj.categories?.length>0?i=i.replace(/\[cats]/,t.yamlObj.categories.join("/")):i=i.replace(/\/\[cats]/,"")}}t.yamlObj.permalink=i}const s=te.safeParse(o?.dynYamlCfg??"{}",{});se.isEmptyObject(s)?(t.yamlObj.comments=!0,t.yamlObj.toc=!0):Object.keys(s).forEach(i=>{t.yamlObj[i]=s[i]});let a=ie.obj2Yaml(t.yamlObj);return this.logger.debug("yaml=>",a),t.formatter=a,t.mdContent=e.markdown,t.mdFullContent=ie.addYamlToMd(t.formatter,t.mdContent),t.htmlContent=e.html,this.logger.info("ç”Ÿæˆé»˜è®¤çš„YAML"),t}convertToAttr(e,t,o){return this.logger.debug("å¼€å§‹è½¬æ¢YAMLåˆ°Post",t),t.yamlObj?.title&&(e.title=t.yamlObj?.title),t.yamlObj?.date&&(e.dateCreated=Ae.convertStringToDate(t.yamlObj?.date)),t.yamlObj?.updated&&(e.dateUpdated=Ae.convertStringToDate(t.yamlObj?.updated)),e.shortDesc=t.yamlObj?.excerpt,e.mt_keywords=t.yamlObj?.tags?.join(","),e.categories=t.yamlObj?.categories,e.yaml=ie.obj2Yaml(t.yamlObj),this.logger.debug("è½¬æ¢å®Œæˆï¼Œpost =>",e),e}}class Jn extends gs{getYamlAdaptor(){return new to}async preEditPost(e,t,o){const s=await super.preEditPost(e,t,o),a=o?.cfg,i=Pe(s),n=i.markdown;this.logger.info("å‡†å¤‡å¤„ç† Hexo æ­£æ–‡"),this.logger.debug("md =>",{md:n});const l=ie.extractFrontmatter(n,!0);let c=ie.extractMarkdown(n);return i.markdown=`${l}
${c}`,this.logger.info("Hexo æ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedMd =>",{yfm:l,updatedMd:c}),a?.pageType==ce.Markdown?i.description=i.markdown:i.description=i.html,i}}var Ss={};const So=async(p,e)=>{const t=L("use-hexo-api");t.info("Start using Hexo API...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:n}=pe(),l=await n();if(s=te.safeParse(l[p],{}),se.isEmptyObject(s)){const c=A.emptyOrDefault(Ss.VITE_GITHUB_USERNAME,""),r=A.emptyOrDefault(Ss.VITE_GITHUB_AUTH_TOKEN,""),m=A.emptyOrDefault(Ss.VITE_GITHUB_REPO,""),w=A.emptyOrDefault(Ss.VITE_GITHUB_BRANCH,"main"),d=A.emptyOrDefault(Ss.VITE_MIDDLEWARE_URL,fe);s=new zn(c,r,m,w,d),t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.tagEnabled=!0,s.cateEnabled=!0,s.allowCateChange=!0,s.categoryType=Q.CategoryType_Multi,s.knowledgeSpaceEnabled=!0,s.knowledgeSpaceTitle="å‘å¸ƒç›®å½•",s.allowKnowledgeSpaceChange=!1,s.placeholder.knowledgeSpaceReadonlyModeTip="Hexo å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",s.knowledgeSpaceType=Q.CategoryType_Tree_Single,s.picgoPicbedSupported=!0,s.bundledPicbedSupported=!0;const a=new to,i=new Jn(o,s);return t.info("Hexo API created successfully.",s),{cfg:s,yamlAdaptor:a,blogApi:i}},yt={TOKEN_SETTING_URL:"-/user_settings/personal_access_tokens"};class Hc extends zn{constructor(e,t,o,s,a){super(e,t,o,s,a),this.home="[your-gitlab-home]",this.apiUrl="[your-gitlab-api-url]",this.tokenSettingUrl=`[your-gitlab-host]/${yt.TOKEN_SETTING_URL}`,this.showTokenTip=!0,this.defaultPath="source/_posts",this.previewUrl="/[user]/[repo]/blob/[branch]/[docpath]",this.previewPostUrl="/post/[postid].html",this.mdFilenameRule="[slug].md",this.pageType=ce.Markdown,this.passwordType=xe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!0,this.cateEnabled=!0,this.allowCateChange=!0,this.categoryType=Q.CategoryType_Multi,this.knowledgeSpaceEnabled=!0,this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="Githubhexo å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",this.knowledgeSpaceType=Q.CategoryType_Tree_Single}}class Wn extends to{}class Lc{logger;appInstance;cfg;constructor(e,t){this.logger=L("gitlab-fetch-client-proxy"),this.appInstance=e,this.cfg=t}async fetchCall(e,t,o){try{const s=T.pathJoin(this.cfg.apiUrl,e);this.logger.debug("gitlab fetch adaptor start"),this.logger.debug("apiUrl=>",s),this.logger.debug("fetchOptions=>",t);const a=await this.appInstance.fetch(s,t);if(this.logger.debug("gitlab fetch adaptor endï¼Œresp=>",a),a.ok)return this.safeParseBodyJson(a);{const i=await a.text();if(a.status===400&&i.includes("already exists"))return{exist:!0};throw`gitlab fetch adaptor è¯·æ±‚é”™è¯¯ï¼Œcode ${a.status}, detail => ${JSON.stringify({statusText:a.statusText,msg:i})}`}}catch(s){throw this.logger.error(s),new Error("è¯·æ±‚å¤„ç†å¼‚å¸¸ => "+s.toString())}}async safeParseBodyJson(e){const t=await e.text();return te.safeParse(t,{})}}class ws extends Ct{gitlabClient;gitlabCfg;constructor(e,t){super(e,t),this.logger=L("common-gitlab-api-adaptor"),this.gitlabCfg=t;const o=new Lc(e,t);this.gitlabClient=new Tr(e,t.apiUrl,t.password,t.username,t.githubRepo,t.githubBranch,t.defaultMsg,t.email,t.author,o,t.middlewareUrl,Vt)}async checkAuth(){let e;try{const t="test.md";await this.safeDeletePost(t);const o=await this.gitlabClient.createRepositoryFile(t,"Hello, World!");await this.safeDeletePost(t),e=!T.isEmptyString(o?.file_path)}catch(t){this.logger.info("checkAuth error =>",t),e=!1}return this.logger.info(`checkAuth finished => ${e}`),e}async getUsersBlogs(){const e=[],t=await this.gitlabClient.getRepositoryTree("");if(this.logger.debug("getRepositoryTree =>",t),t&&t.length>0){const o=new et,s=this.cfg;o.blogid=s.defaultPath,o.blogName=s.defaultPath,o.url=T.pathJoin(T.pathJoin(s.home,s.username),s.githubRepo),e.push(o)}return this.logger.debug("result result =>",e),e}async newPost(e,t){this.logger.debug("start newPost =>",{post:ne(e)});const o=this.cfg,s=e.cate_slugs?.[0]??o.blogid,a=e.mdFilename??"auto-"+fs.newID()+".md";let i=T.pathJoin(s,a);i.startsWith("/")&&(i=i.substring(1)),i.startsWith("./")&&(i=i.substring(2)),this.logger.info("Gitlabæ–‡ç« å°†è¦æœ€ç»ˆå‘é€åˆ°ä»¥ä¸‹ç›®å½• =>",i);let n;try{const l=await this.gitlabClient.createRepositoryFile(i,e.description);if(this.logger.debug("gitlab newPost finished =>",l),!l?.file_path)throw new Error("Gitlab è°ƒç”¨APIå¼‚å¸¸ =>"+l?.message);n=l}catch{try{await this.deletePost(i)}catch(r){this.logger.warn("å°è¯•åˆ é™¤å¤±è´¥ï¼Œå¿½ç•¥",r)}const c=await this.gitlabClient.createRepositoryFile(i,e.description);if(!c?.file_path)throw new Error("é‡å‘ä¾æ—§å¤±è´¥ï¼ŒGitlab è°ƒç”¨APIå¼‚å¸¸ =>"+c?.message);n=c}return n.file_path}async getPost(e,t){this.logger.debug("start getPost =>",{postid:e});const o=await this.gitlabClient.getRepositoryFile(e);if(this.logger.debug("gitlab getPost finished =>",o),!o)throw new Error("Gitlab è°ƒç”¨APIå¼‚å¸¸");let s=new Be;s.postid=o.file_path,s.mdFilename=o.file_name,s.markdown=$t.fromBase64(o.content),s.description=s.markdown;const a=this.getYamlAdaptor();if(a!==null){const l=await ie.yaml2ObjAsync(s.description),c=new Ze;c.yamlObj=l,this.logger.debug("extract frontFormatter, yamlFormatObj =>",c),s=a.convertToAttr(s,c,this.cfg),this.logger.debug("handled yamlObj using YamlConverterAdaptor =>",l)}const i=[],n=o.file_path.replace(o.file_name,"").replace(/\/$/,"");return i.push(n),s.cate_slugs=i,s}async editPost(e,t,o){this.logger.debug("start editPost =>",{postid:e,post:ne(t)});const s=await this.gitlabClient.updateRepositoryFile(t.postid,t.description);if(this.logger.debug("gitlab editPost finished =>",s),!s?.file_path)throw new Error("Gitlab è°ƒç”¨APIå¼‚å¸¸");return!0}async deletePost(e){try{const t=await this.gitlabClient.deleteRepositoryFile(e);this.logger.debug("gitlab deletePost finished =>",t)}catch(t){throw new Error("Gitlab è°ƒç”¨APIå¼‚å¸¸ =>"+t)}return!0}async getCategoryTreeNodes(e){return await this.gitlabClient.getRepositoryTree(e)}async getPreviewUrl(e){const t=this.cfg;let o;return o=t.previewUrl.replace("[user]",t.username).replace("[repo]",t.githubRepo).replace("[branch]",t.githubBranch).replace("[docpath]",e),o}async getPostPreviewUrl(e){let t;if(!e)throw new Error("postid ä¸èƒ½ä¸ºç©º");const o=e.substring(e.lastIndexOf("/")+1).replace(".md","");return t=this.cfg.previewPostUrl.replace("[postid]",o),t}async newMediaObject(e){try{const t=e.bits,o=$t.fromUint8Array(t);let s=T.pathJoin(this.cfg.imageStorePath??"images",e.name);s.startsWith("/")&&(s=s.substring(1)),s.startsWith("./")&&(s=s.substring(2)),this.logger.info("Gitlabå›¾ç‰‡å°†è¦æœ€ç»ˆå‘é€åˆ°ä»¥ä¸‹ç›®å½• =>",s);const a=await this.gitlabClient.createRepositoryFile(s,o,"base64");this.logger.debug("gitlab createRepositoryFile res =>",a);const i=e.name,n=e.name;let l=T.pathJoin(this.cfg.home,this.cfg.username);if(l=T.pathJoin(l,this.gitlabCfg.githubRepo),l=T.pathJoin(l,"-/raw"),l=T.pathJoin(l,this.gitlabCfg.githubBranch),a?.exist)this.logger.warn("å›¾ç‰‡å·²å­˜åœ¨ï¼Œç›´æŽ¥è¿”å›ž"),l=T.pathJoin(l,s);else{if(T.isEmptyString(a.file_path))throw new Error("Gitlab è°ƒç”¨APIå¼‚å¸¸");l=T.pathJoin(l,a.file_path)}const c=l;return this.logger.info("Gitlab å›¾ç‰‡ä¸Šä¼ æˆåŠŸ",c),{attachment_id:i,date_created_gmt:new Date,parent:0,link:c,title:e.name,caption:"",description:"",metadata:{width:0,height:0,file:"",filesize:0,sizes:[]},type:e.type,thumbnail:"",id:n,file:e.name,url:c}}catch(t){throw this.logger.error("Error uploading image to gitlab:",t),t}}async safeDeletePost(e){try{await this.gitlabClient.deleteRepositoryFile(e)}catch{}return!0}}class Rc extends ws{getYamlAdaptor(){return new Wn}async preEditPost(e,t,o){const s=await super.preEditPost(e,t,o),a=o?.cfg,i=Pe(s),n=i.markdown;this.logger.info("å‡†å¤‡å¤„ç† Gitlabhexo æ­£æ–‡"),this.logger.debug("md =>",{md:n});const l=ie.extractFrontmatter(n,!0);let c=ie.extractMarkdown(n);return i.markdown=`${l}
${c}`,this.logger.info("Gitlabhexo æ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedMd =>",{yfm:l,updatedMd:c}),a?.pageType==ce.Markdown?i.description=i.markdown:i.description=i.html,i}}var Cs={};const Co=async(p,e)=>{const t=L("use-gitlab-hexo-api");t.info("Start using Gitlabhexo API...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:n}=pe(),l=await n();if(s=te.safeParse(l[p],{}),se.isEmptyObject(s)){const c=A.emptyOrDefault(Cs.VITE_GITLAB_USERNAME,""),r=A.emptyOrDefault(Cs.VITE_GITLAB_AUTH_TOKEN,""),m=A.emptyOrDefault(Cs.VITE_GITLAB_REPO,""),w=A.emptyOrDefault(Cs.VITE_GITLAB_BRANCH,"main"),d=A.emptyOrDefault(Cs.VITE_MIDDLEWARE_URL,fe);s=new Hc(c,r,m,w,d),s.mdFilenameRule="[slug].md",t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.tagEnabled=!0,s.cateEnabled=!0,s.allowCateChange=!0,s.categoryType=Q.CategoryType_Multi,s.knowledgeSpaceEnabled=!0,s.knowledgeSpaceTitle="å‘å¸ƒç›®å½•",s.allowKnowledgeSpaceChange=!1,s.placeholder.knowledgeSpaceReadonlyModeTip="Gitlabhexo å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",s.knowledgeSpaceType=Q.CategoryType_Tree_Single,s.picgoPicbedSupported=!0,s.bundledPicbedSupported=!0;const a=new Wn,i=new Rc(o,s);return t.info("Gitlabhexo API created successfully.",s),{cfg:s,yamlAdaptor:a,blogApi:i}};class Gc extends Qt{logoutUrl;constructor(e,t,o){super("https://blog.csdn.net","https://bizapi.csdn.net",e,t,o),this.logoutUrl="https://passport.csdn.net/account/logout",this.previewUrl="/[userid]/article/details/[postid]",this.pageType=ce.Markdown,this.usernameEnabled=!1,this.passwordType=xe.PasswordType_Cookie,this.tagEnabled=!0,this.cateEnabled=!0,this.categoryType=Q.CategoryType_Multi,this.allowCateChange=!0,this.knowledgeSpaceEnabled=!1}}class gn{static logger=L("katex-utils");static renderToString(e){return this.logger.debug("å‡†å¤‡å¤„ç† Katex =>",{mathExpression:e}),kr.renderToString(e)}}class Xe{static X_CA_KEY="203803574";static X_CA_KEY_MEDIA="260196572";static APP_SECRET="9znpamsyl2c7cdrr9sas0le9vbc3r6ba";static APP_SECRET_MEDIA="t5PaqxVQpWoHgLGt7XPIvd5ipJcwJTU7";static generateXCaNonce(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return(e==="x"?t:3&t|8).toString(16)})}static generateXCaSignature(e,t,o,s,a){const i=new URL(e),n=tn.parse(Xe.APP_SECRET);let l;if(t==="GET"){const m=i.pathname+i.search;l=`GET
${o}

${a}

x-ca-key:${Xe.X_CA_KEY}
x-ca-nonce:${s}
${m}`}else{const m=i.pathname;l=`POST
${o}

${a}

x-ca-key:${Xe.X_CA_KEY}
x-ca-nonce:${s}
${m}`}const c=fi.HmacSHA256(l,n);return sn.stringify(c)}static generateXCaSignatureForMedia(e,t,o,s,a,i){const n=new URL(e),l=tn.parse(Xe.APP_SECRET_MEDIA);let c;if(t==="GET"){const w=n.pathname+n.search;c=`GET
${o}

${a}

x-ca-key:${Xe.X_CA_KEY_MEDIA}
x-ca-nonce:${s}
x-ca-timestamp:${i}
${w}`}else{const w=n.pathname;c=`POST
${o}

${a}

x-ca-key:${Xe.X_CA_KEY_MEDIA}
x-ca-nonce:${s}
x-ca-timestamp:${i}
${w}`}const r=fi.HmacSHA256(c,l);return sn.stringify(r)}static processCsdnMath(e){const t=is(e,{xml:{xmlMode:!0,decodeEntities:!1}});return t("body").find("*").not("pre, code, pre *, code *").each((o,s)=>{const a=t(s),i=a.html();if(!i)return;let n=i;n=n.replace(/\$\$([^$]+)\$\$/g,(l,c)=>`<span class="katex--display">${gn.renderToString(c.trim())}</span>`),n=n.replace(/\$([^$]+)\$/g,(l,c)=>`<span class="katex--inline">${gn.renderToString(c.trim())}</span>`),n!==i&&a.html(n)}),t.html()}static async processPrismjs(e,t){const o=`${Ir}/prismjs`,s="application/json",a={"Content-Type":s},i=JSON.stringify({html:t}),n=await e.webFetch(o,[a],i,"POST",s,!1);return console.log("processPrismjs res=>",n),n.html}}class Bc{static readCookie(e,t){const o=t.split(";");for(const s of o){const[a,i]=s.split("=");if(a.trim()===e)return decodeURIComponent(i)??""}return""}}class jc extends Rt{async getMetaData(){const e=await this.csdnFetch("https://bizapi.csdn.net/blog-console-api/v1/user/info"),t=!!e.data.username;return this.logger.info(`get csdn metadata finished, flag => ${t}`),{flag:t,uid:e.data.username,title:e.data.username,avatar:e.data.avatar,type:"csdn",displayName:"CSDN",supportTypes:["markdown","html"],home:"https://mp.csdn.net/",icon:"https://g.csdnimg.cn/static/logo/favicon32.ico"}}async getUsersBlogs(){let e=[];const t=await this.csdnFetch("https://bizapi.csdn.net/blog/phoenix/console/v1/column/list?type=all");if(this.logger.debug("get csdn columns =>",t),t?.code===200){const o=t?.data?.list,s=o?.column??[],a=o?.pay_column??[];s.forEach(i=>{const n=new et;n.blogid=i.id,n.blogName=i.edit_title,n.url=i.column_url,e.push(n)}),a.forEach(i=>{const n=new et;n.blogid=i.id,n.blogName=i.edit_title,n.url=i.column_url,e.push(n)})}return this.logger.debug("getUsersBlogs=>",e),e}async getCategories(){const e=[],t=await this.csdnFetch("https://bizapi.csdn.net/blog/phoenix/console/v1/column/list?type=all");if(this.logger.debug("get csdn columns =>",t),t?.code===200){const o=t?.data?.list,s=o?.column??[],a=o?.pay_column??[];s.forEach(i=>{const n=new Qe;n.categoryId=i.id,n.categoryName=i.edit_title,n.description=i.column_url,n.categoryDescription=i.desc,e.push(n)}),a.forEach(i=>{const n=new Qe;n.categoryId=i.id,n.categoryName=i.edit_title,n.description=i.column_url,n.categoryDescription=i.desc,e.push(n)})}return e}async preEditPost(e,t,o){const s=await super.preEditPost(e,t,o),a=o?.cfg,i=Pe(s),n=i.html;this.logger.info("å‡†å¤‡å¤„ç†CSDNæ­£æ–‡"),this.logger.debug("html =>",{html:n});let l=n;return l=Xe.processCsdnMath(l),i.html=l,this.logger.info("CSDNæ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedHtml =>",{updatedHtml:l}),a?.pageType==ce.Markdown?i.description=i.markdown:i.description=i.html,i}async addPost(e){let t=e.html;t=await Xe.processPrismjs(this,t);const o=JSON.stringify({title:e.title,markdowncontent:e.markdown,content:t,readType:"public",level:0,tags:e.mt_keywords,status:0,categories:e.categories.join(","),type:"original",original_link:"",authorized_status:!1,Description:e.shortDesc,not_auto_saved:"1",source:"pc_mdeditor",cover_images:[],cover_type:1,is_new:1,vote_id:0,resource_id:"",pubStatus:"publish"}),s=await this.csdnFetch("https://bizapi.csdn.net/blog-console-api/v3/mdeditor/saveArticle",[],o,"POST");if(this.logger.debug("save csdn post res=>",s),s?.code!==200)throw new Error("CSDNæ–‡ç« å‘å¸ƒå¤±è´¥ï¼Œå¯èƒ½æ˜¯ç­‰çº§ä¸å¤Ÿå¯¼è‡´ï¼Œå¦‚è¿‡ç­‰çº§ä¸å¤Ÿï¼Œè¯·åŽ»æŽ‰æ–‡ç« æ ‡ç­¾");return{status:"success",post_id:s.data.id.toString()}}async editPost(e,t,o){let s=t.html;s=await Xe.processPrismjs(this,s);const a=JSON.stringify({id:e,title:t.title,markdowncontent:t.markdown,content:s,readType:"public",level:"1",tags:t.mt_keywords,status:0,categories:t.categories.join(","),type:"original",original_link:"",authorized_status:!1,Description:t.shortDesc,resource_url:"",not_auto_saved:"1",source:"pc_mdeditor",cover_images:[],cover_type:1,is_new:1,vote_id:0,resource_id:"",pubStatus:"publish"}),i=await this.csdnFetch("https://bizapi.csdn.net/blog-console-api/v3/mdeditor/saveArticle",[],a,"POST");if(this.logger.debug("save csdn post res=>",i),i?.code!==200)throw new Error("CSDNæ–‡ç« æ›´æ–°å¤±è´¥ï¼Œå¯èƒ½æ˜¯ç­‰çº§ä¸å¤Ÿå¯¼è‡´ï¼Œå¦‚æžœç­‰çº§ä¸å¤Ÿï¼Œè¯·åŽ»æŽ‰æ–‡ç« æ ‡ç­¾");return this.logger.debug("edit csdn post res=>",i),!0}async getPost(e){const t=await this.csdnFetch(`https://bizapi.csdn.net/blog-console-api/v3/editor/getArticle?id=${e}`);this.logger.debug("get csdn post =>",t);const o=new Be;if(t?.code===200){const s=t?.data;o.postid=s.article_id,o.title=s.title,o.mt_keywords=s?.tags??"",o.categories=s?.categories.split(",")??[]}return o}async deletePost(e){let t=!1;try{const o=JSON.stringify({articleId:e,deep:!1}),s=await this.csdnFetch("https://bizapi.csdn.net/blog/phoenix/console/v1/article/del",[],o,"POST");if(this.logger.debug("delete csdn article res=>",s),s?.code!==200)throw new Error(s?.message);t=!0}catch(o){throw this.logger.error("CSDNæ–‡ç« åˆ é™¤å¤±è´¥",o),o}return t}async getPreviewUrl(e){const t=this.cfg.password,o=Bc.readCookie("UserName",t);return this.cfg.previewUrl.replace(/\[userid\]/g,o).replace(/\[postid\]/g,e)}async uploadFile(e){const{Blob:t}=ns.getFormData(this.appInstance),o=new t([e.bits],{type:e.type}),s=e.name;return this.logger.debug(`csdn start uploadFile ${s}=>`,o),o instanceof t?await this.csdnUploadImage2025(o,s):{}}async csdnUploadImage2025(e,t){const o="https://bizapi.csdn.net/resource-api/v1/image/direct/upload/signature",s=t.split(".").pop();if(!this.validateFileExt(s))return null;const a=await this.csdnMediaFetch(o,{},JSON.stringify({imageTemplate:"standard",appName:"direct_blog_markdown",imageSuffix:s}),"POST");if(a.code!==200)return this.logger.error("å›¾ç‰‡ä¸Šä¼ ç­¾åé”™è¯¯ï¼Œä¿¡æ¯å¦‚ä¸‹",a),null;const i=a.data;if(this.logger.debug("csdn image get sign info =>",i),!i)throw new Error("CSDNå›¾ç‰‡ç­¾åä¿¡æ¯èŽ·å–å¤±è´¥ =>"+t);const n=i.host,{FormData:l}=ns.getFormData(this.appInstance),c=new l;c.append("key",i.filePath),c.append("policy",i.policy),c.append("signature",i.signature),c.append("callbackBody",i.callbackBody),c.append("callbackBodyType",i.callbackBodyType),c.append("callbackUrl",i.callbackUrl),c.append("AccessKeyId",i.accessId),c.append("x:rtype",i.customParam.rtype),c.append("x:watermark",i.customParam.watermark),c.append("x:templateName",i.customParam.templateName),c.append("x:filePath",i.customParam.filePath),c.append("x:isAudit",i.customParam.isAudit),c.append("x:x-image-app",i.customParam["x-image-app"]),c.append("x:type",i.customParam.type),c.append("x:x-image-suffix",i.customParam["x-image-suffix"]),c.append("x:username",i.customParam.username),c.append("file",e),this.logger.debug("csdn image upload start...");const r={},m=await this.csdnFormFetch(n,c,r);if(m.code!==200)throw this.logger.error("CSDNå›¾ç‰‡ä¸Šä¼ å¤±è´¥ï¼Œä¿¡æ¯å¦‚ä¸‹",m),new Error("CSDNå›¾ç‰‡ä¸Šä¼ å¤±è´¥ =>"+t);return{id:m.data.targetObjectKey,object_key:m.data.targetObjectKey,url:m.data.imageUrl}}async csdnUploadImage(e,t){const o="https://imgservice.csdn.net/direct/v1.0/image/upload?watermark=&type=blog&rtype=markdown",s=t.split(".").pop();if(!this.validateFileExt(s))return null;const a=await this.csdnFetch(o,{"x-image-app":"direct_blog","x-image-suffix":s,"x-image-dir":"direct"});if(a.code!==200)return this.logger.error("å›¾ç‰‡å¯èƒ½å·²ç»ä¸Šä¼ ï¼Œä¿¡æ¯å¦‚ä¸‹",a),null;const i=a.data;if(this.logger.debug("csdn image uploadData =>",i),!i)throw new Error("CSDNå›¾ç‰‡ä¿¡æ¯èŽ·å–å¤±è´¥ =>"+t);const n=i.host,{FormData:l}=ns.getFormData(this.appInstance),c=new l;c.append("key",i.filePath),c.append("policy",i.policy),c.append("OSSAccessKeyId",i.accessId),c.append("success_action_status","200"),c.append("signature",i.signature),c.append("callback",i.callbackUrl),c.append("file",e),this.logger.debug("csdn image upload strat...");const r={},m=await this.csdnFormFetch(n,c,r);if(m.code!==200)throw new Error("CSDNå›¾ç‰‡ä¸Šä¼ å¤±è´¥ =>"+t);return{id:m.data.targetObjectKey,object_key:m.data.targetObjectKey,url:m.data.imageUrl}}validateFileExt(e){switch(e.toLowerCase()){case"jpg":case"png":case"jpeg":case"gif":return!0;default:return!1}}async csdnFetch(e,t={},o=void 0,s="GET",a="application/json"){const n=Xe.X_CA_KEY,l=Xe.generateXCaNonce(),c=Xe.generateXCaSignature(e,s,"*/*",l,a),r=new Map;r.set("accept","*/*"),r.set("content-type",a),r.set("x-ca-key",n),r.set("x-ca-nonce",l),r.set("x-ca-signature",c),r.set("x-ca-signature-headers","x-ca-key,x-ca-nonce"),r.set("Cookie",this.cfg.password);const m={...Object.fromEntries(r),...t},w={method:s,headers:m,body:o};return this.logger.debug("csdn url =>",e),this.logger.debug("csdn requestOptions =>",w),await this.webFetch(e,[m],o,s,a,!0,"base64")}async csdnMediaFetch(e,t={},o=void 0,s="GET",a="application/json"){const n=Xe.X_CA_KEY_MEDIA,l=Xe.generateXCaNonce(),c=new Date().getTime().toString(),r=Xe.generateXCaSignatureForMedia(e,s,"*/*",l,a,c),m=new Map;m.set("accept","*/*"),m.set("content-type",a),m.set("x-ca-key",n),m.set("x-ca-nonce",l),m.set("x-ca-timestamp",c),m.set("x-ca-signature",r),m.set("x-ca-signature-headers","x-ca-key,x-ca-nonce,x-ca-timestamp"),m.set("Cookie",this.cfg.password);const w={...Object.fromEntries(m),...t},d={method:s,headers:w,body:o};return this.logger.debug("csdn url =>",e),this.logger.debug("csdn requestOptions =>",d),await this.webFetch(e,[w],o,s,a,!0,"base64")}async csdnFormFetch(e,t,o={},s=!1){const a=e,i={method:"POST",headers:o,body:t};this.logger.debug("å‘ CSDN å‘é€è¡¨å•æ•°æ®ï¼ŒapiUrl =>",a),this.logger.debug("å‘ CSDN å‘é€è¡¨å•æ•°æ®ï¼Œoptions =>",i);const n=await this.webFormFetch(a,[o],t,s);if(n.error)throw new Error("CSDN è¡¨å•æäº¤é”™è¯¯ã€‚è¯¦ç»†é”™è¯¯ =>"+n.error);return this.logger.debug("å‘ CSDN å‘é€è¡¨å•æ•°æ®ï¼ŒresJson =>",n),n}}var na={};const Ci=async(p,e)=>{const t=L("use-csdn-web");t.info("Start using Csdn WebAuth...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:i}=pe(),n=await i();if(s=te.safeParse(n[p],{}),se.isEmptyObject(s)){const c=A.emptyOrDefault(na.VITE_MIDDLEWARE_URL,fe),r=A.emptyOrDefault(na.VITE_CSDN_AUTH_TOKEN,"");s=new Gc("",r,c),t.debug("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");const l=A.emptyOrDefault(na.VITE_MIDDLEWARE_URL,fe);T.isEmptyString(s.middlewareUrl)&&(s.middlewareUrl=l),T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.tagEnabled=!0,s.cateEnabled=!0,s.categoryType=Q.CategoryType_Multi,s.allowCateChange=!0,s.knowledgeSpaceEnabled=!1,s.picgoPicbedSupported=!1,s.bundledPicbedSupported=!0,s.logoutUrl="https://passport.csdn.net/account/logout",s.picgoPicbedSupported=!1,s.bundledPicbedSupported=!0;const a=new jc(o,s);return{cfg:s,webApi:a}};class Kc extends Qt{logoutUrl;constructor(e,t,o){super("https://mp.weixin.qq.com","https://mp.weixin.qq.com/cgi-bin/appmsg",e,t,o),this.logoutUrl="https://mp.weixin.qq.com/cgi-bin/logout",this.previewUrl="/cgi-bin/appmsg?t=media/appmsg_edit&action=edit&type=77&appmsgid=[postid]&token=[token]&lang=zh_CN",this.pageType=ce.Html,this.passwordType=xe.PasswordType_Cookie,this.usernameEnabled=!1,this.tagEnabled=!1,this.cateEnabled=!1,this.knowledgeSpaceEnabled=!1}}class zc extends Rt{async getMetaData(){const e=await this.weChatFetch("https://mp.weixin.qq.com/",void 0,"GET",{},"text/html");this.logger.debug("WechatWebAdaptor res=>",{res:e});const t=is(e),o=t("script")[0],s=t(o).text();this.logger.debug("scriptElement =>",{scriptText:s});const a=s.substring(s.indexOf("window.wx.commonData")),i=new Function("window.wx = {}; window.handlerNickname = function(){};"+a+"; return window.wx;")();this.logger.debug(a,i);const n=Object.assign({},i.commonData);if(delete window.wx,!n.data.t)throw new Error("å¾®ä¿¡å…¬ä¼—å·æœªç™»å½•æˆ–è€…ç™»å½•è¿‡æœŸï¼Œè¯·æ›´æ–°cookie");const l={flag:!T.isEmptyString(n.data.t),uid:n.data.user_name,title:n.data.nick_name,token:n.data.t,commonData:n,avatar:t(".weui-desktop-account__thumb").eq(0).attr("src"),type:"weixin",supportTypes:["html"],home:"https://mp.weixin.qq.com",icon:"https://mp.weixin.qq.com/favicon.ico"};return this.logger.info(`get wechat metadata finished, flag => ${l}`),l}async getUsersBlogs(){let e=[];const t=await this.weChatFetch("https://mp.weixin.qq.com/",void 0,"GET",{},"text/html");this.logger.debug("WechatWebAdaptor res=>",{res:t});const o=is(t),s=o("script")[0],a=o(s).text();this.logger.debug("scriptElement =>",{scriptText:a});const i=a.substring(a.indexOf("window.wx.commonData")),n=new Function("window.wx = {}; window.handlerNickname = function(){};"+i+"; return window.wx;")();this.logger.debug(i,n);const l=Object.assign({},n.commonData);if(delete window.wx,!l.data.t)throw new Error("å¾®ä¿¡å…¬ä¼—å·æœªç™»å½•æˆ–è€…ç™»å½•è¿‡æœŸï¼Œè¯·æ›´æ–°cookie");this.logger.info("get wechat commonData =>",l);const c=new et;return c.blogid=l.data.user_name,c.blogName=l.data.nick_name,e.push(c),this.logger.debug("getUsersBlogs=>",e),e}async addPost(e){this.logger.debug("addPost get metadata =>",{cfg:ne(this.cfg.metadata)});const t="https://mp.weixin.qq.com/cgi-bin/operate_appmsg?t=ajax-response&sub=create&type=77&token="+this.cfg.metadata.token+"&lang=zh_CN",o=Dt.parseHtml(e.shortDesc??"",119,!0),s={token:this.cfg.metadata.token,lang:"zh_CN",f:"json",ajax:"1",random:Math.random(),AppMsgId:"",count:"1",data_seq:null,operate_from:"Chrome",isnew:"0",autosave_log:"true",articlenum:"1",pre_timesend_set:"0",is_finder_video0:"0",finder_draft_id0:"0",applyori0:"0",ad_video_transition0:"",can_reward0:"0",pay_gifts_count0:"0",reward_reply_id0:"",related_video0:"",is_video_recommend0:"-1",title0:e.title,author0:"",writerid0:"0",fileid0:"",digest0:o,auto_gen_digest0:"1",content0:e.html,sourceurl0:"",last_choose_cover_from0:"0",need_open_comment0:"1",only_fans_can_comment0:"0",only_fans_days_can_comment0:"0",reply_flag0:"5",not_pay_can_comment0:"0",open_fansmsg0:"0",cdn_url0:"",cdn_235_1_url0:"",cdn_16_9_url0:"",cdn_3_4_url0:"",cdn_1_1_url0:"",cdn_finder_url0:"",cdn_video_url0:"",cdn_url_back0:"",crop_list0:"",app_cover_auto0:"0",music_id0:"",video_id0:"",voteid0:"",voteismlt0:"",supervoteid0:"",cardid0:"",cardquantity0:"",cardlimit0:"",vid_type0:"",show_cover_pic0:"0",shortvideofileid0:"",copyright_type0:"0",is_cartoon_copyright0:"0",copyright_img_list0:'{"max_width":578,"img_list":[]}',releasefirst0:"",platform0:"",reprint_permit_type0:"",allow_fast_reprint0:"0",allow_reprint0:"",allow_reprint_modify0:"",original_article_type0:"",ori_white_list0:"",video_ori_status0:"",hit_nickname0:"",free_content0:"",fee0:"0",ad_id0:"",guide_words0:"",is_share_copyright0:"0",share_copyright_url0:"",source_article_type0:"",reprint_recommend_title0:"",reprint_recommend_content0:"",share_page_type0:"0",share_imageinfo0:'{"list":[]}',share_video_id0:"",dot0:"{}",share_voice_id0:"",share_finder_audio_username0:"",share_finder_audio_exportid0:"",mmlistenitem_json_buf0:"",insert_ad_mode0:"",categories_list0:"[]",is_pay_subscribe0:"0",pay_fee0:"",pay_preview_percent0:"",pay_desc0:"",pay_album_info0:"",appmsg_album_info0:'{"appmsg_album_infos":[]}',can_insert_ad0:"1",audio_info0:'{"audio_infos":[]}',danmu_pub_type0_0:"0",is_set_sync_to_finder0:"0",sync_to_finder_cover0:"",sync_to_finder_cover_source0:"",import_to_finder0:"0",import_from_finder_export_id0:"",style_type0:"3",sticker_info0:'{"is_stickers":0,"common_stickers_num":0,"union_stickers_num":0,"sticker_id_list":[],"has_invalid_sticker":0}',new_pic_process0:"0",disable_recommend0:"0",req:'{"idx_infos":[{"save_old":0,"cps_info":{"cps_import":0}}]}',is_auto_type_setting:"3",save_type:"1",isneedsave:"0"},a=new FormData;for(const n in s)a.append(n,s[n]??"");const i=await this.wechatFormFetch(t,a);if(!i.appMsgId){const n=i.base_resp;throw new Error("åŒæ­¥åˆ°å¾®ä¿¡å…¬ä¼—å·å¤±è´¥ï¼Œé”™è¯¯å†…å®¹ï¼š"+(n&&n.errmsg?n.errmsg:n.ret))}return{status:"success",post_id:i.appMsgId.toString()}}async editPost(e,t,o){this.logger.debug("editPost get metadata =>",{cfg:ne(this.cfg.metadata)});let s=!1;const a="https://mp.weixin.qq.com/cgi-bin/operate_appmsg?t=ajax-response&sub=update&type=77&token="+this.cfg.metadata.token+"&lang=zh_CN",i=Dt.parseHtml(t.shortDesc??"",119,!0),n=e,l={token:this.cfg.metadata.token,lang:"zh_CN",f:"json",ajax:"1",random:Math.random(),AppMsgId:n,count:"1",data_seq:null,operate_from:"Chrome",isnew:"0",autosave_log:"true",articlenum:"1",pre_timesend_set:"0",is_finder_video0:"0",finder_draft_id0:"0",applyori0:"0",ad_video_transition0:"",can_reward0:"0",pay_gifts_count0:"0",reward_reply_id0:"",related_video0:"",is_video_recommend0:"-1",title0:t.title,author0:"",writerid0:"0",fileid0:"",digest0:i,auto_gen_digest0:"1",content0:t.html,sourceurl0:"",last_choose_cover_from0:"0",need_open_comment0:"1",only_fans_can_comment0:"0",reply_flag0:"5",not_pay_can_comment0:"0",open_fansmsg0:"0",cdn_url0:"",cdn_235_1_url0:"",cdn_16_9_url0:"",cdn_3_4_url0:"",cdn_1_1_url0:"",cdn_finder_url0:"",cdn_video_url0:"",cdn_url_back0:"",crop_list0:"",app_cover_auto0:"0",music_id0:"",voteid0:"",voteismlt0:"",supervoteid0:"",cardid0:"",cardquantity0:"",cardlimit0:"",vid_type0:"",show_cover_pic0:"0",shortvideofileid0:"",copyright_type0:"0",is_cartoon_copyright0:"0",copyright_img_list0:'{"max_width":578,"img_list":[]}',releasefirst0:"",platform0:"",reprint_permit_type0:"",allow_fast_reprint0:"0",allow_reprint0:"",allow_reprint_modify0:"",original_article_type0:"",ori_white_list0:"",video_ori_status0:"",hit_nickname0:"",free_content0:"",fee0:"0",ad_id0:"",guide_words0:"",is_share_copyright0:"0",share_copyright_url0:"",source_article_type0:"",reprint_recommend_title0:"",reprint_recommend_content0:"",share_page_type0:"0",share_imageinfo0:'{"list":[]}',share_video_id0:"",dot0:"{}",share_voice_id0:"",share_finder_audio_username0:"",share_finder_audio_exportid0:"",mmlistenitem_json_buf0:"",insert_ad_mode0:"",categories_list0:"[]",is_pay_subscribe0:"0",pay_fee0:"",pay_preview_percent0:"",pay_desc0:"",pay_album_info0:"",appmsg_album_info0:'{"appmsg_album_infos":[]}',can_insert_ad0:"1",audio_info0:'{"audio_infos":[]}',danmu_pub_type0_0:"0",is_set_sync_to_finder0:"0",sync_to_finder_cover0:"",sync_to_finder_cover_source0:"",import_to_finder0:"0",import_from_finder_export_id0:"",style_type0:"3",sticker_info0:'{"is_stickers":0,"common_stickers_num":0,"union_stickers_num":0,"sticker_id_list":[],"has_invalid_sticker":0}',new_pic_process0:"0",disable_recommend0:"0",req:'{"idx_infos":[{"save_old":0,"cps_info":{"cps_import":0}}]}',is_auto_type_setting:"3",save_type:"1",isneedsave:"0"},c=new FormData;for(const m in l)c.append(m,l[m]??"");const r=await this.wechatFormFetch(a,c);if(!r.appMsgId){const m=r.base_resp;throw new Error("åŒæ­¥åˆ°å¾®ä¿¡å…¬ä¼—å·å¤±è´¥ï¼Œé”™è¯¯å†…å®¹ï¼š"+(m&&m.errmsg?m.errmsg:m.ret))}return s=!0,s}async getPost(e){const t=this.cfg.metadata.token,o=`https://mp.weixin.qq.com/cgi-bin/appmsg?t=media/appmsg_edit&action=edit&type=77&appmsgid=${e}&token=${t}&lang=zh_CN`,s=await this.webFetch(o,[],{},"GET","text/html");this.logger.debug("get wechat post finished, res=>",s);const a=new Be,l=(is(s)("html").html()||"").match(/infos\s*=\s*({.*?}},)/);if(l&&l[1]){const c=l[1].replace(/,$/,"");this.logger.debug(`matched infoJSON ${typeof c} =>`,c);try{const r=te.safeParse(c,{});if(!se.isEmptyObject(r)){this.logger.debug("found infos =>",r);const m=r.item.find(w=>w.app_id.toString()===e);this.logger.debug("curItem =>",m),a.title=m.title,a.shortDesc=m.digest}}catch(r){this.logger.error("å¾®ä¿¡å…¬ä¼—å·JSONè§£æžé”™è¯¯",r)}}else this.logger.error("å¾®ä¿¡å…¬ä¼—å·æœªæ‰¾åˆ°infos = {}},");return a}async deletePost(e){let t=!1;const o="https://mp.weixin.qq.com/cgi-bin/operate_appmsg?sub=del&t=ajax-response",s={token:this.cfg.metadata.token,lang:"zh_CN",f:"json",ajax:"1",AppMsgId:e},a=new FormData;for(const n in s)a.append(n,s[n]??"");const i=await this.wechatFormFetch(o,a);if(!i.appMsgId){const n=i.base_resp;throw new Error("å¾®ä¿¡å…¬ä¼—å·æ–‡ç« åˆ é™¤å¤±è´¥ï¼Œé”™è¯¯å†…å®¹ï¼š"+(n&&n.errmsg?n.errmsg:n.ret))}return this.logger.debug("delete wechat article res=>",i),t=!0,t}async getPreviewUrl(e){const t=this.cfg.metadata.token;return`https://mp.weixin.qq.com/cgi-bin/appmsg?t=media/appmsg_edit&action=edit&type=77&appmsgid=${e}&token=${t}&lang=zh_CN`}async uploadFile(e){const t=new Blob([e.bits],{type:e.type}),o=e.name;if(this.logger.debug(`wechat start uploadFile ${o}=>`,t),t instanceof Blob){const s=this.cfg.metadata.commonData.data.user_name,a=this.cfg.metadata.commonData.data.ticket,i=this.cfg.metadata.commonData.data.time,n=this.cfg.metadata.commonData.data.t,l=new Date().getTime(),c=`https://mp.weixin.qq.com/cgi-bin/filetransfer?action=upload_material&f=json&scene=8&writetype=doublewrite&groupid=1&ticket_id=${s}&ticket=${a}&svr_time=${i}&token=${n}&lang=zh_CN&seq=${l}&t=`+Math.random(),r=await ys(t),m=new Blob([r],{type:t.type}),w=new FormData;w.append("type",t.type),w.append("id",new Date().getTime()),w.append("name",o),w.append("lastModifiedDate",new Date().toString()),w.append("size",t.size),w.append("file",m,o);const d=await this.wechatFormFetch(c,w);if(d.base_resp.err_msg!="ok")throw this.logger.error(`å¾®ä¿¡å…¬ä¼—å·å›¾ç‰‡ä¸Šä¼ å¤±è´¥, ${o} =>`,d.base_resp.err_msg),new Error("upload failed =>"+d.base_resp.err_msg);const g=d.cdn_url;return{id:d.content,object_key:d.content,url:g}}return{}}async preEditPost(e,t,o){const s=await super.preEditPost(e,t,o),a=o?.cfg,i=Pe(s),n=i.html;this.logger.info("å‡†å¤‡å¤„ç†å¾®ä¿¡å…¬ä¼—å·æ­£æ–‡"),this.logger.debug("html =>",{html:n});let l=n;return i.html=l,this.logger.info("å¾®ä¿¡å…¬ä¼—å·æ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedHtml =>",{updatedHtml:l}),a?.pageType==ce.Markdown?i.description=i.markdown:i.description=i.html,i}async weChatFetch(e,t,o="GET",s={},a="application/json"){const i=new Map;i.set("Cookie",this.cfg.password);const n={...Object.fromEntries(i),"User-Agent":Ft.HEADERS.MACOS_CHROME["User-Agent"],...s},l=t,c=e;this.logger.debug("å‘å¾®ä¿¡å…¬ä¼—å·è¯·æ±‚æ•°æ®ï¼ŒapiUrl =>",c),this.logger.debug("å‘å¾®ä¿¡å…¬ä¼—å·è¯·æ±‚æ•°æ®ï¼Œheaders =>",s),this.logger.debug("å‘å¾®ä¿¡å…¬ä¼—å·è¯·æ±‚æ•°æ®ï¼Œbody =>",l);const r=await this.webFetch(c,[n],l,o,a,!0,"base64","text");return this.logger.debug("å‘å¾®ä¿¡å…¬ä¼—å·è¯·æ±‚æ•°æ®ï¼ŒresJson =>",r),r??null}async wechatFormFetch(e,t){const o={Cookie:this.cfg.password,Referer:"https://mp.weixin.qq.com/cgi-bin/appmsg","User-Agent":Ft.HEADERS.MACOS_CHROME["User-Agent"]};return await this.webFormFetch(e,[o],t,!0)}}var la={};const Ei=async(p,e)=>{const t=L("use-wechat-web");t.info("Start using Wechat WebAuth...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:i}=pe(),n=await i();if(s=te.safeParse(n[p],{}),se.isEmptyObject(s)){const c=A.emptyOrDefault(la.VITE_MIDDLEWARE_URL,fe),r=A.emptyOrDefault(la.VITE_WECHAT_AUTH_TOKEN,"");s=new Kc("",r,c),s.picbedService=Je.Bundled,t.debug("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");const l=A.emptyOrDefault(la.VITE_MIDDLEWARE_URL,fe);T.isEmptyString(s.middlewareUrl)&&(s.middlewareUrl=l),T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.tagEnabled=!1,s.cateEnabled=!1,s.knowledgeSpaceEnabled=!1,s.picgoPicbedSupported=!1,s.bundledPicbedSupported=!0;const a=new zc(o,s);return{cfg:s,webApi:a}};class Jc extends Qt{logoutUrl;constructor(e,t,o){super("https://www.jianshu.com","https://www.jianshu.com",e,t,o),this.logoutUrl="https://www.jianshu.com/shakespeare/sign_out",this.previewUrl="/p/[postid]",this.pageType=ce.Markdown,this.passwordType=xe.PasswordType_Cookie,this.usernameEnabled=!1,this.tagEnabled=!1,this.cateEnabled=!1,this.knowledgeSpaceEnabled=!0,this.knowledgeSpaceTitle="ç¬”è®°æœ¬",this.knowledgeSpaceType=Q.CategoryType_Single,this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="ç”±äºŽç®€ä¹¦å¹³å°çš„é™åˆ¶ï¼Œæš‚æ—¶ä¸æ”¯æŒç¼–è¾‘æ‰€å±žç¬”è®°æœ¬ã€‚å¦‚æžœæ‚¨æƒ³ç§»åŠ¨æ–‡æ¡£ï¼Œè¯·å…ˆç‚¹å‡»å–æ¶ˆåˆ é™¤è¯¥æ–‡æ¡£ï¼Œç„¶åŽé‡æ–°é€‰æ‹©æ–°çš„ç¬”è®°æœ¬å‘å¸ƒ"}}class Wc extends Rt{async getMetaData(){const e=await this.jianshuFetch("https://www.jianshu.com/settings/basic.json"),t=e.data.avatar||"";let o="";t&&(o=t.substring(t.lastIndexOf("/")+1,t.lastIndexOf(".")));const s=!!o;return this.logger.info(`get jianshu metadata finished, flag => ${s}`),{flag:s,uid:o,title:e.data.nickname,avatar:t,type:"jianshu",displayName:"ç®€ä¹¦",supportTypes:["html"],home:"https://www.jianshu.com/settings/basic",icon:"https://www.jianshu.com/favicon.ico"}}async getUsersBlogs(){const e=[],t={accept:"application/json"},o=await this.jianshuFetch("https://www.jianshu.com/author/notebooks",void 0,"GET",t);return this.logger.info("get jianshu notebooks",o),o&&o.length>0&&o.forEach(s=>{const a=new et;a.blogid=s.id,a.blogName=s.name,e.push(a)}),this.logger.debug("getUsersBlogs=>",e),e}async getCategories(){const e=[],t={accept:"application/json"},o=await this.jianshuFetch("https://www.jianshu.com/author/notebooks",void 0,"GET",t);return this.logger.info("get jianshu notebooks",o),o&&o.length>0&&o.forEach(s=>{const a=new Qe;a.categoryId=s.id,a.categoryName=s.name,e.push(a)}),e}async addPost(e){this.logger.debug("start add post =>",{post:e});const t=e.cate_slugs?.[0]?.toString()??this.cfg.blogid.toString(),o={accept:"application/json"},s=JSON.stringify({notebook_id:t,title:e.title,at_bottom:!1}),a=await this.jianshuFetch("https://www.jianshu.com/author/notes",s,"POST",o);this.logger.debug("jianshu addPost initRes =>",a);const i=a.id,n=a.slug;return await this.updateJianshuArticle(i,e.title,e.description,1),this.logger.info(`æ–‡ç« å‘å¸ƒæˆåŠŸï¼Œå¼€å§‹ç»„è£…ç®€ä¹¦çš„IDç»„åˆ,pageId=${i},notebookId=${t},endUrl=${n}`),{status:"success",post_id:[i,t,n].join("_")}}async getPreviewUrl(e){const t=this.cfg.previewUrl??"",s=this.getJianshuPostidKey(e).endUrl;return t.replace("[postid]",s)}async deletePost(e){const o=this.getJianshuPostidKey(e).pageId,s={accept:"application/json"},a=await this.jianshuFetch(`https://www.jianshu.com/author/notes/${o}/soft_destroy`,JSON.stringify({}),"POST",s);return this.logger.debug("jianshu delete post res =>",a),!0}async editPost(e,t,o){let s=!1;try{const i=this.getJianshuPostidKey(e).pageId,n={accept:"application/json"},l=await this.jianshuFetch(`https://www.jianshu.com/author/notes/${i}/note_logs`,void 0,"GET",n);this.logger.debug("jianshu get post version res =>",l);const c=l.length+1;this.logger.debug("jianshu update post with new version =>",c),await this.updateJianshuArticle(i,t.title,t.description,c),s=!0}catch(a){this.logger.error("ç®€ä¹¦æ–‡ç« æ›´æ–°å¤±è´¥",a)}return s}async uploadFile(e){const t=new Blob([e.bits],{type:e.type}),o=e.name;if(this.logger.debug(`jianshu start uploadFile ${o}=>`,t),t instanceof Blob){const s="https://upload.qiniup.com/",a=await ys(t),i=new Blob([a],{type:t.type}),n=await this.jianshuFetch("https://www.jianshu.com/upload_images/token.json?filename="+o);this.logger.debug("jianshu get picture token res =>",n);const l=new FormData;l.append("token",n.token),l.append("key",n.key),l.append("x:protocol","https"),l.append("file",i,o);const c=await this.jianshuFormFetch(s,l);if(this.logger.debug("jianshu upload success, resJson =>",c),!c.url)throw new Error("ç®€ä¹¦å›¾ç‰‡ä¸Šä¼ å¤±è´¥ =>"+o);const r=c.url;return{id:n.key,object_key:n.key,url:r}}return{}}getJianshuPostidKey(e){let t,o,s;if(e.indexOf("_")>0){const a=e.split("_");t=a[0],o=a[1],s=a[2]}else t=e;return{pageId:t,notebookId:o,endUrl:s}}async updateJianshuArticle(e,t,o,s=1){const a={accept:"application/json"},i=JSON.stringify({id:e,autosave_control:s,title:t,content:o}),n=await this.jianshuFetch(`https://www.jianshu.com/author/notes/${e}`,i,"PUT",a);this.logger.debug("jianshu savePost saveRes =>",n);try{const l={accept:"application/json"},c=JSON.stringify({}),r=await this.jianshuFetch(`https://www.jianshu.com/author/notes/${e}/publicize`,c,"POST",l);this.logger.debug("jianshu publishPost pubRes =>",r)}catch(l){X.warning("ç®€ä¹¦æ–‡ç« å‘å¸ƒå¤±è´¥ï¼Œå†…å®¹å·²å­˜å…¥è‰ç¨¿ =>"+l),this.logger.error("ç®€ä¹¦æ–‡ç« å‘å¸ƒå¤±è´¥",l)}}async jianshuFetch(e,t,o="GET",s={},a="application/json"){const i=new Map;i.set("Cookie",this.cfg.password);const n={...Object.fromEntries(i),...s},l=t,c=e;this.logger.debug("å‘ç®€ä¹¦ç½‘ç«™è¯·æ±‚æ•°æ®ï¼ŒapiUrl =>",c),this.logger.debug("å‘ç®€ä¹¦ç½‘ç«™è¯·æ±‚æ•°æ®ï¼Œheaders =>",s),this.logger.debug("å‘ç®€ä¹¦ç½‘ç«™è¯·æ±‚æ•°æ®ï¼Œbody =>",l);const r=await this.webFetch(c,[n],l,o,a,!0,"base64");return this.logger.debug("å‘ç®€ä¹¦ç½‘ç«™è¯·æ±‚æ•°æ®ï¼ŒresJson =>",r),r??null}async jianshuFormFetch(e,t){const o={};return await this.webFormFetch(e,[o],t,!0)}}var ra={};const Ai=async(p,e)=>{const t=L("use-jianshu-web");t.info("Start using Jianshu WebAuth...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:i}=pe(),n=await i();if(s=te.safeParse(n[p],{}),se.isEmptyObject(s)){const c=A.emptyOrDefault(ra.VITE_MIDDLEWARE_URL,fe),r=A.emptyOrDefault(ra.VITE_JIANSHU_AUTH_TOKEN,"");s=new Jc("",r,c),t.debug("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");const l=A.emptyOrDefault(ra.VITE_MIDDLEWARE_URL,fe);T.isEmptyString(s.middlewareUrl)&&(s.middlewareUrl=l),T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.tagEnabled=!1,s.cateEnabled=!1,s.knowledgeSpaceEnabled=!0,s.knowledgeSpaceTitle="ç¬”è®°æœ¬",s.knowledgeSpaceType=Q.CategoryType_Single,s.allowKnowledgeSpaceChange=!1,s.placeholder.knowledgeSpaceReadonlyModeTip="ç”±äºŽç®€ä¹¦å¹³å°çš„é™åˆ¶ï¼Œæš‚æ—¶ä¸æ”¯æŒç¼–è¾‘æ‰€å±žç¬”è®°æœ¬ã€‚å¦‚æžœæ‚¨æƒ³ç§»åŠ¨æ–‡æ¡£ï¼Œè¯·å…ˆç‚¹å‡»å–æ¶ˆåˆ é™¤è¯¥æ–‡æ¡£ï¼Œç„¶åŽé‡æ–°é€‰æ‹©æ–°çš„ç¬”è®°æœ¬å‘å¸ƒ",s.logoutUrl="https://www.jianshu.com/shakespeare/sign_out",s.picgoPicbedSupported=!1,s.bundledPicbedSupported=!0;const a=new Wc(o,s);return{cfg:s,webApi:a}};class Fc extends Qt{logoutUrl;constructor(e,t,o){super("https://juejin.cn","https://api.juejin.cn",e,t,o),this.logoutUrl="https://juejin.cn/passport/web/logout",this.previewUrl="/post/[postid]",this.pageType=ce.Markdown,this.passwordType=xe.PasswordType_Cookie,this.usernameEnabled=!1,this.tagEnabled=!1,this.tagSlugEnabled=!0,this.cateEnabled=!1,this.categoryType=Q.CategoryType_Single,this.knowledgeSpaceEnabled=!0,this.knowledgeSpaceTitle="åˆ†ç±»",this.knowledgeSpaceType=Q.CategoryType_Single,this.allowKnowledgeSpaceChange=!0}}class qc extends Rt{async getMetaData(){const e=await this.juejinFetch("https://api.juejin.cn/user_api/v1/user/get",void 0,"GET"),t=!!e.data?.user_id;if(!t)throw new Error(`æŽ˜é‡‘å¹³å°æ ¡éªŒå¤±è´¥ï¼Œè¯¦ç»†é”™è¯¯ï¼šcode: ${e?.err_no}ï¼Œmsg: ${e?.err_msg}`);return this.logger.info(`get juejin metadata finished, flag => ${t}`),{flag:t,uid:e.data.user_id,title:e.data.user_name,avatar:e.data.avatar_large,type:"juejin",displayName:"æŽ˜é‡‘",raw:e.data,supportTypes:["markdown","html"],home:"https://juejin.cn/editor/drafts",icon:"https://juejin.cn/favicon.ico"}}async getUsersBlogs(){let e=[];const t={accept:"application/json"},o=await this.juejinFetch("https://api.juejin.cn/tag_api/v1/query_category_list",void 0,"POST",t);return this.logger.info("get juejin categories",o.data),o.data&&o.data.length>0&&o.data.forEach(a=>{const i=new et;i.blogid=a.category_id,i.blogName=a.category.category_name,i.url=a.category.icon,e.push(i)}),this.logger.debug("getUsersBlogs=>",e),e}async addPost(e){let t=e.cate_slugs?.[0]??this.cfg.blogid;T.isEmptyString(t)&&(t="6809637769959178254",this.logger.error("æŽ˜é‡‘å¹³å°æœªé€‰æ‹©åˆ†ç±»ï¼Œå°†ä½¿ç”¨é»˜è®¤åˆ†ç±»ï¼šåŽç«¯"));let o=e.tags_slugs??"";T.isEmptyString(o)&&(o="6809640482725954000",this.logger.error("æŽ˜é‡‘å¹³å°æœªé€‰æ‹©æ ‡ç­¾ï¼Œå°†ä½¿ç”¨é»˜è®¤æ ‡ç­¾ï¼šç¨‹åºå‘˜"));const s="ç”±äºŽæŽ˜é‡‘å¹³å°çš„æ‘˜è¦æœ‰å¼ºåˆ¶å­—æ•°è¦æ±‚ï¼Œè¿™é‡Œéœ€è¦ç»™ä¸€ä¸‹é»˜è®¤æ–‡å­—ä½œä¸ºæ‘˜è¦ã€‚è¿™é‡Œæ˜¯æŽ˜é‡‘å¹³å°çš„é»˜è®¤æ‘˜è¦ï¼Œæ‚¨å¯ä»¥ç¨åŽè‡ªè¡Œä¿®æ”¹ã€‚";if((T.isEmptyString(e.shortDesc)||e.shortDesc.length<s.length)&&(e.shortDesc=s,this.logger.error("æŽ˜é‡‘å¹³å°æœªè®¾ç½®æ‘˜è¦æˆ–è€…æ‘˜è¦å­—æ•°ï¼Œå°†ä½¿ç”¨é»˜è®¤æ‘˜è¦")),e.shortDesc.length<50){for(;e.shortDesc.length<50;)e.shortDesc+=e.shortDesc;e.shortDesc=e.shortDesc.slice(0,100)}else e.shortDesc.length>100&&(e.shortDesc=e.shortDesc.slice(0,100));const a="https://api.juejin.cn/content_api/v1/article_draft/create",i=JSON.stringify({category_id:t,tag_ids:o.split(","),link_url:"",cover_image:"",title:e.title,brief_content:e.shortDesc,edit_type:10,html_content:"deprecated",mark_content:e.description,theme_ids:[]}),n=await this.juejinFetch(a,i,"POST",{});if(this.logger.debug("juejin add post =>",n),n.err_no!==0)throw new Error("æŽ˜é‡‘æ–‡ç« è‰ç¨¿ä¿å­˜é”™è¯¯ =>"+n.err_msg);const l=n.data.id.toString();return{status:"success",post_id:[await this.publishPost(l),l].join("_")}}async editPost(e,t,o){const s=t.cate_slugs?.[0]??this.cfg.blogid;if(T.isEmptyString(s))throw new Error("æŽ˜é‡‘å¹³å°å¿…é¡»é€‰æ‹©ä¸€ä¸ªåˆ†ç±»");const a=t.tags_slugs??"";if(T.isEmptyString(a))throw new Error("æŽ˜é‡‘å¹³å°å¿…é¡»é€‰æ‹©ä¸€ä¸ªæ ‡ç­¾");const n=this.getJuejinPostidKey(e).draftId,l="https://api.juejin.cn/content_api/v1/article_draft/update",c=JSON.stringify({id:n,category_id:s,tag_ids:a.split(","),link_url:"",cover_image:"",title:t.title,brief_content:t.shortDesc,edit_type:10,html_content:"deprecated",mark_content:t.markdown,theme_ids:[]}),r=await this.juejinFetch(l,c,"POST",{});if(this.logger.debug("juejin update post =>",r),r.err_no!==0)throw new Error("æŽ˜é‡‘æ–‡ç« æ›´æ–°é”™è¯¯ =>"+r.err_msg);return await this.publishPost(n),!0}async getPreviewUrl(e){const o=this.getJuejinPostidKey(e).pageId;return this.cfg.previewUrl.replace("[postid]",o)}async deletePost(e){const t="https://api.juejin.cn/content_api/v1/article/delete",s=this.getJuejinPostidKey(e).pageId,a=JSON.stringify({article_id:s}),i=await this.juejinFetch(t,a,"POST",{});if(this.logger.debug("juejin delete post res =>",i),i.err_no!==0)throw new Error("æŽ˜é‡‘æ–‡ç« åˆ é™¤å¤±è´¥ =>"+i.err_msg);return!0}async getPost(e,t){const s=this.getJuejinPostidKey(e).pageId,a="https://api.juejin.cn/content_api/v1/article/detail",i=JSON.stringify({article_id:s}),n=await this.juejinFetch(a,i,"POST",{});if(this.logger.debug("juejin get post res =>",n),n.err_no!==0)throw new Error("æŽ˜é‡‘æ–‡ç« èŽ·å–å¤±è´¥ =>"+n.err_msg);const l=new Be,c=n.data.tags??[],r=[];c.forEach(d=>{r.push(d.tag_id)}),l.tags_slugs=r.join(",");const m=n.data.category.category_id,w=[];return w.push(m),l.cate_slugs=w,l}async getCategories(){const e=[],t={accept:"application/json"},o=await this.juejinFetch("https://api.juejin.cn/tag_api/v1/query_category_list",void 0,"POST",t);return this.logger.info("get juejin categories",o.data),o.data&&o.data.length>0&&o.data.forEach(s=>{const a=new Qe;a.categoryId=s.category_id,a.categoryName=s.category.category_name,e.push(a)}),e}async getTags(){const e=[],t={accept:"application/json"},o=JSON.stringify({cursor:"0",key_word:"",limit:10,sort_type:1}),s=await this.juejinFetch("https://api.juejin.cn/tag_api/v1/query_tag_list",o,"POST",t);return this.logger.info("get juejin categories",s.data),s.data&&s.data.length>0&&s.data.forEach(a=>{const i=new zo;i.tagId=a.tag_id,i.tagName=a.tag.tag_name,e.push(i)}),e}getJuejinPostidKey(e){let t,o;if(e.indexOf("_")>0){const s=e.split("_");t=s[0],o=s[1]}else t=e;return{pageId:t,draftId:o}}async publishPost(e){const t="https://api.juejin.cn/content_api/v1/article/publish",o=JSON.stringify({draft_id:e,sync_to_org:!1,column_ids:[],theme_ids:[]}),s=await this.juejinFetch(t,o,"POST",{});if(this.logger.debug("juejin publish post res =>",s),s.err_no!==0)throw new Error("æŽ˜é‡‘æ–‡ç« å‘å¸ƒå¤±è´¥ =>"+(s?.err_msg??s));return s.data.article_id.toString()}async juejinFetch(e,t,o="GET",s={},a="application/json"){const i=new Map;i.set("Cookie",this.cfg.password);const n={...Object.fromEntries(i),...s},l=t,c=e;this.logger.debug("å‘æŽ˜é‡‘è¯·æ±‚æ•°æ®ï¼ŒapiUrl =>",c),this.logger.debug("å‘æŽ˜é‡‘è¯·æ±‚æ•°æ®ï¼Œheaders =>",s),this.logger.debug("å‘æŽ˜é‡‘è¯·æ±‚æ•°æ®ï¼Œbody =>",l);const r=await this.webFetch(c,[n],l,o,a,!0,"base64");return this.logger.debug("å‘æŽ˜é‡‘è¯·æ±‚æ•°æ®ï¼ŒresJson =>",r),r??null}}var ca={};const Ii=async(p,e)=>{const t=L("use-juejin-web");t.info("Start using Juejin WebAuth...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:i}=pe(),n=await i();if(s=te.safeParse(n[p],{}),se.isEmptyObject(s)){const c=A.emptyOrDefault(ca.VITE_MIDDLEWARE_URL,fe),r=A.emptyOrDefault(ca.VITE_JUEJIN_AUTH_TOKEN,"");s=new Fc("",r,c),t.debug("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");const l=A.emptyOrDefault(ca.VITE_MIDDLEWARE_URL,fe);T.isEmptyString(s.middlewareUrl)&&(s.middlewareUrl=l),T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.tagEnabled=!1,s.tagSlugEnabled=!0,s.cateEnabled=!1,s.knowledgeSpaceEnabled=!0,s.knowledgeSpaceTitle="åˆ†ç±»",s.knowledgeSpaceType=Q.CategoryType_Single,s.allowKnowledgeSpaceChange=!0,s.logoutUrl="https://juejin.cn/passport/web/logout",s.picgoPicbedSupported=!0,s.bundledPicbedSupported=!1;const a=new qc(o,s);return{cfg:s,webApi:a}};class Fn extends Gt{constructor(e,t,o,s,a){super(e,t,o,s,a),this.tokenSettingUrl="https://github.com/settings/tokens",this.showTokenTip=!0,this.defaultPath="content/post",this.previewUrl="/[user]/[repo]/blob/[branch]/[docpath]",this.previewPostUrl="/post/[postid].html",this.mdFilenameRule="[slug].md",this.imageStorePath="static/images",this.imageLinkPath="images",this.pageType=ce.Markdown,this.passwordType=xe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!0,this.cateEnabled=!0,this.allowCateChange=!0,this.categoryType=Q.CategoryType_Multi,this.knowledgeSpaceEnabled=!0,this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="Hugo å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",this.knowledgeSpaceType=Q.CategoryType_Tree_Single}}class so extends qt{logger=L("hugo-yaml-converter-adaptor");convertToYaml(e,t,o){if(this.logger.debug("æ‚¨æ­£åœ¨ä½¿ç”¨ Hugo Yaml Converter",{post:ne(e)}),t)this.logger.info("yaml å·²ä¿å­˜ï¼Œä¸ä½¿ç”¨é¢„è®¾",{post:ne(e)});else{t=new Ze,t.yamlObj.title=e.title,t.yamlObj.slug=e.wp_slug,o.yamlLinkEnabled&&(t.yamlObj.url="/post/"+e.wp_slug+".html");let a="+00:00";const i=new Date().getTimezoneOffset()/-60,n=i>0?"+":"-";if(i.toString().length<2?a=`${n}0${i}:00`:a=`${n}${i}:00`,t.yamlObj.date=Ae.formatIsoToZh(e.dateCreated.toISOString(),!0)+a,e.dateUpdated||(e.dateUpdated=new Date),t.yamlObj.lastmod=Ae.formatIsoToZh(e.dateUpdated.toISOString(),!0)+a,!T.isEmptyString(e.mt_keywords)){const c=e.mt_keywords.split(",");t.yamlObj.tags=c}e.categories?.length>0&&(t.yamlObj.categories=e.categories),T.isEmptyString(e.mt_keywords)||(t.yamlObj.keywords=e.mt_keywords),T.isEmptyString(e.shortDesc)||(t.yamlObj.description=e.shortDesc);const l=te.safeParse(o?.dynYamlCfg??"{}",{});se.isEmptyObject(l)?(t.yamlObj.toc=!0,t.yamlObj.isCJKLanguage=!0):Object.keys(l).forEach(c=>{t.yamlObj[c]=l[c]})}let s=ie.obj2Yaml(t.yamlObj);return this.logger.debug("yaml=>",s),t.formatter=s,t.mdContent=e.markdown,t.mdFullContent=ie.addYamlToMd(t.formatter,t.mdContent),t.htmlContent=e.html,this.logger.info("ç”Ÿæˆé»˜è®¤çš„YAML"),t}convertToAttr(e,t,o){return this.logger.debug("å¼€å§‹è½¬æ¢YAMLåˆ°Post",t),t.yamlObj?.title&&(e.title=t.yamlObj?.title),t.yamlObj?.date&&(e.dateCreated=Ae.convertStringToDate(t.yamlObj?.date)),t.yamlObj?.lastmod&&(e.dateUpdated=Ae.convertStringToDate(t.yamlObj?.lastmod)),e.shortDesc=t.yamlObj?.description,e.mt_keywords=t.yamlObj?.tags?.join(","),e.categories=t.yamlObj?.categories,e.yaml=ie.obj2Yaml(t.yamlObj),this.logger.debug("è½¬æ¢å®Œæˆï¼Œpost =>",e),e}}class qn extends gs{getYamlAdaptor(){return new so}async preEditPost(e,t,o){const s=await super.preEditPost(e,t,o),a=o?.cfg,i=Pe(s),n=i.markdown;this.logger.info("å‡†å¤‡å¤„ç† Hugo æ­£æ–‡"),this.logger.debug("md =>",{md:n});const l=ie.extractFrontmatter(n,!0);let c=ie.extractMarkdown(n);return i.markdown=`${l}
${c}`,this.logger.info("Hugo æ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedMd =>",{yfm:l,updatedMd:c}),a?.pageType==ce.Markdown?i.description=i.markdown:i.description=i.html,i}}var Es={};const Eo=async(p,e)=>{const t=L("use-hugo-api");t.info("Start using Hexo API...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:n}=pe(),l=await n();if(s=te.safeParse(l[p],{}),se.isEmptyObject(s)){const c=A.emptyOrDefault(Es.VITE_GITHUB_USERNAME,""),r=A.emptyOrDefault(Es.VITE_GITHUB_AUTH_TOKEN,""),m=A.emptyOrDefault(Es.VITE_GITHUB_REPO,""),w=A.emptyOrDefault(Es.VITE_GITHUB_BRANCH,"main"),d=A.emptyOrDefault(Es.VITE_MIDDLEWARE_URL,fe);s=new Fn(c,r,m,w,d),s.mdFilenameRule="[slug].md",t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.tagEnabled=!0,s.cateEnabled=!0,s.allowCateChange=!0,s.categoryType=Q.CategoryType_Multi,s.knowledgeSpaceEnabled=!0,s.knowledgeSpaceTitle="å‘å¸ƒç›®å½•",s.allowKnowledgeSpaceChange=!1,s.placeholder.knowledgeSpaceReadonlyModeTip="Hugo å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",s.knowledgeSpaceType=Q.CategoryType_Tree_Single,s.picgoPicbedSupported=!0,s.bundledPicbedSupported=!0;const a=new so,i=new qn(o,s);return t.info("Hugo API created successfully.",s),{cfg:s,yamlAdaptor:a,blogApi:i}};class Yc extends Fn{constructor(e,t,o,s,a){super(e,t,o,s,a),this.home="[your-gitlab-home]",this.apiUrl="[your-gitlab-api-url]",this.tokenSettingUrl=`[your-gitlab-host]/${yt.TOKEN_SETTING_URL}`,this.showTokenTip=!0,this.defaultPath="content/post",this.previewUrl="/[user]/[repo]/blob/[branch]/[docpath]",this.previewPostUrl="/post/[postid].html",this.mdFilenameRule="[slug].md",this.pageType=ce.Markdown,this.passwordType=xe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!0,this.cateEnabled=!0,this.allowCateChange=!0,this.categoryType=Q.CategoryType_Multi,this.knowledgeSpaceEnabled=!0,this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="Githubhugo å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",this.knowledgeSpaceType=Q.CategoryType_Tree_Single}}class Yn extends so{}class Xc extends ws{getYamlAdaptor(){return new Yn}async preEditPost(e,t,o){const s=await super.preEditPost(e,t,o),a=o?.cfg,i=Pe(s),n=i.markdown;this.logger.info("å‡†å¤‡å¤„ç† Gitlabhugo æ­£æ–‡"),this.logger.debug("md =>",{md:n});const l=ie.extractFrontmatter(n,!0);let c=ie.extractMarkdown(n);return i.markdown=`${l}
${c}`,this.logger.info("Gitlabhugo æ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedMd =>",{yfm:l,updatedMd:c}),a?.pageType==ce.Markdown?i.description=i.markdown:i.description=i.html,i}}var As={};const Ao=async(p,e)=>{const t=L("use-gitlab-hugo-api");t.info("Start using Gitlabhugo API...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:n}=pe(),l=await n();if(s=te.safeParse(l[p],{}),se.isEmptyObject(s)){const c=A.emptyOrDefault(As.VITE_GITLAB_USERNAME,""),r=A.emptyOrDefault(As.VITE_GITLAB_AUTH_TOKEN,""),m=A.emptyOrDefault(As.VITE_GITLAB_REPO,""),w=A.emptyOrDefault(As.VITE_GITLAB_BRANCH,"main"),d=A.emptyOrDefault(As.VITE_MIDDLEWARE_URL,fe);s=new Yc(c,r,m,w,d),s.mdFilenameRule="[slug].md",t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.tagEnabled=!0,s.cateEnabled=!0,s.allowCateChange=!0,s.categoryType=Q.CategoryType_Multi,s.knowledgeSpaceEnabled=!0,s.knowledgeSpaceTitle="å‘å¸ƒç›®å½•",s.allowKnowledgeSpaceChange=!1,s.placeholder.knowledgeSpaceReadonlyModeTip="Gitlabhugo å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",s.knowledgeSpaceType=Q.CategoryType_Tree_Single,s.picgoPicbedSupported=!0,s.bundledPicbedSupported=!0;const a=new Yn,i=new Xc(o,s);return t.info("Gitlbhugo API created successfully.",s),{cfg:s,yamlAdaptor:a,blogApi:i}};class Xn extends Gt{constructor(e,t,o,s,a){super(e,t,o,s,a),this.tokenSettingUrl="https://github.com/settings/tokens",this.showTokenTip=!0,this.defaultPath="_posts",this.previewUrl="/[user]/[repo]/blob/[branch]/[docpath]",this.previewPostUrl="/post/[postid].html",this.mdFilenameRule="[yyyy]-[mm]-[dd]-[slug].md",this.imageStorePath="assets/images",this.imageLinkPath="assets/images",this.pageType=ce.Markdown,this.passwordType=xe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!0,this.cateEnabled=!0,this.allowCateChange=!0,this.categoryType=Q.CategoryType_Multi,this.knowledgeSpaceEnabled=!0,this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="Jekyll å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",this.knowledgeSpaceType=Q.CategoryType_Tree_Single}}class oo extends qt{logger=L("hexo-yaml-converter-adaptor");convertToYaml(e,t,o){this.logger.debug("æ‚¨æ­£åœ¨ä½¿ç”¨ Jekyll Yaml Converter",{post:ne(e)}),t?(this.logger.info("yaml å·²å­˜åœ¨ï¼Œæ ¹æ®æœ€æ–°é…ç½®æ›´æ–°",{post:ne(e)}),t.yamlObj={}):t=new Ze,t.yamlObj.title=e.title,t.yamlObj.date=Ae.formatIsoToZh(e.dateCreated.toISOString(),!0);let s="/post/"+e.wp_slug+".html";const a=o;if(a.yamlLinkEnabled&&!T.isEmptyString(a.previewPostUrl)&&(s=a.previewPostUrl.replace("[postid]",e.wp_slug)),this.logger.debug("link=>",s),t.yamlObj.permalink=s,T.isEmptyString(e.shortDesc)||(t.yamlObj.tagline=e.shortDesc),!T.isEmptyString(e.mt_keywords)){const l=e.mt_keywords.split(",");t.yamlObj.tags=l}e.categories?.length>0&&(t.yamlObj.categories=e.categories);const i=te.safeParse(o?.dynYamlCfg??"{}",{});se.isEmptyObject(i)?(t.yamlObj.layout="post",t.yamlObj.published=!0):Object.keys(i).forEach(l=>{t.yamlObj[l]=i[l]});let n=ie.obj2Yaml(t.yamlObj);return this.logger.debug("yaml=>",n),t.formatter=n,t.mdContent=e.markdown,t.mdFullContent=ie.addYamlToMd(t.formatter,t.mdContent),t.htmlContent=e.html,this.logger.info("ç”Ÿæˆé»˜è®¤çš„YAML"),t}convertToAttr(e,t,o){return this.logger.debug("å¼€å§‹è½¬æ¢YAMLåˆ°Post",t),t.yamlObj?.title&&(e.title=t.yamlObj?.title),t.yamlObj?.date&&(e.dateCreated=Ae.convertStringToDate(t.yamlObj?.date)),e.shortDesc=t.yamlObj?.tagline,e.mt_keywords=t.yamlObj?.tags?.join(","),e.categories=t.yamlObj?.categories,e.yaml=ie.obj2Yaml(t.yamlObj),this.logger.debug("è½¬æ¢å®Œæˆï¼Œpost =>",e),e}}class Qn extends gs{getYamlAdaptor(){return new oo}async preEditPost(e,t,o){const s=await super.preEditPost(e,t,o),a=o?.cfg,i=Pe(s),n=i.markdown;this.logger.info("å‡†å¤‡å¤„ç† Jekyll æ­£æ–‡"),this.logger.debug("md =>",{md:n});const l=ie.extractFrontmatter(n,!0);let c=ie.extractMarkdown(n);return i.markdown=`${l}
${c}`,this.logger.info("Jekyll æ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedMd =>",{yfm:l,updatedMd:c}),a?.pageType==ce.Markdown?i.description=i.markdown:i.description=i.html,i}}var Is={};const Io=async(p,e)=>{const t=L("use-jekyll-api");t.info("Start using Hexo API...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:n}=pe(),l=await n();if(s=te.safeParse(l[p],{}),se.isEmptyObject(s)){const c=A.emptyOrDefault(Is.VITE_GITHUB_USERNAME,""),r=A.emptyOrDefault(Is.VITE_GITHUB_AUTH_TOKEN,""),m=A.emptyOrDefault(Is.VITE_GITHUB_REPO,""),w=A.emptyOrDefault(Is.VITE_GITHUB_BRANCH,"main"),d=A.emptyOrDefault(Is.VITE_MIDDLEWARE_URL,fe);s=new Xn(c,r,m,w,d),s.mdFilenameRule="[yyyy]-[mm]-[dd]-[slug].md",t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.tagEnabled=!0,s.cateEnabled=!0,s.allowCateChange=!0,s.categoryType=Q.CategoryType_Multi,s.knowledgeSpaceEnabled=!0,s.knowledgeSpaceTitle="å‘å¸ƒç›®å½•",s.allowKnowledgeSpaceChange=!1,s.placeholder.knowledgeSpaceReadonlyModeTip="Jekyll å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",s.knowledgeSpaceType=Q.CategoryType_Tree_Single,s.picgoPicbedSupported=!0,s.bundledPicbedSupported=!0;const a=new oo,i=new Qn(o,s);return t.info("Jekyll API created successfully.",s),{cfg:s,yamlAdaptor:a,blogApi:i}};class Qc extends Xn{constructor(e,t,o,s,a){super(e,t,o,s,a),this.home="[your-gitlab-home]",this.apiUrl="[your-gitlab-api-url]",this.tokenSettingUrl=`[your-gitlab-host]/${yt.TOKEN_SETTING_URL}`,this.showTokenTip=!0,this.defaultPath="_posts",this.previewUrl="/[user]/[repo]/blob/[branch]/[docpath]",this.previewPostUrl="/post/[postid].html",this.mdFilenameRule="[yyyy]-[mm]-[dd]-[slug].md",this.pageType=ce.Markdown,this.passwordType=xe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!0,this.cateEnabled=!0,this.allowCateChange=!0,this.categoryType=Q.CategoryType_Multi,this.knowledgeSpaceEnabled=!0,this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="Gitlabjekyll å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",this.knowledgeSpaceType=Q.CategoryType_Tree_Single}}class Zn extends oo{}class Zc extends ws{getYamlAdaptor(){return new Zn}async preEditPost(e,t,o){const s=await super.preEditPost(e,t,o),a=o?.cfg,i=Pe(s),n=i.markdown;this.logger.info("å‡†å¤‡å¤„ç† Gitlabjekyll æ­£æ–‡"),this.logger.debug("md =>",{md:n});const l=ie.extractFrontmatter(n,!0);let c=ie.extractMarkdown(n);return i.markdown=`${l}
${c}`,this.logger.info("Gitlabjekyll æ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedMd =>",{yfm:l,updatedMd:c}),a?.pageType==ce.Markdown?i.description=i.markdown:i.description=i.html,i}}var Us={};const Uo=async(p,e)=>{const t=L("use-gitlab-hugo-api");t.info("Start using Gitlabhugo API...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:n}=pe(),l=await n();if(s=te.safeParse(l[p],{}),se.isEmptyObject(s)){const c=A.emptyOrDefault(Us.VITE_GITLAB_USERNAME,""),r=A.emptyOrDefault(Us.VITE_GITLAB_AUTH_TOKEN,""),m=A.emptyOrDefault(Us.VITE_GITLAB_REPO,""),w=A.emptyOrDefault(Us.VITE_GITLAB_BRANCH,"main"),d=A.emptyOrDefault(Us.VITE_MIDDLEWARE_URL,fe);s=new Qc(c,r,m,w,d),s.mdFilenameRule="[yyyy]-[mm]-[dd]-[slug].md",t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.tagEnabled=!0,s.cateEnabled=!0,s.allowCateChange=!0,s.categoryType=Q.CategoryType_Multi,s.knowledgeSpaceEnabled=!0,s.knowledgeSpaceTitle="å‘å¸ƒç›®å½•",s.allowKnowledgeSpaceChange=!1,s.placeholder.knowledgeSpaceReadonlyModeTip="Gitlabjekyll å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",s.knowledgeSpaceType=Q.CategoryType_Tree_Single,s.picgoPicbedSupported=!0,s.bundledPicbedSupported=!0;const a=new Zn,i=new Zc(o,s);return t.info("Gitlabjekyll API created successfully.",s),{cfg:s,yamlAdaptor:a,blogApi:i}};class ep extends Gt{constructor(e,t,o,s,a){super(e,t,o,s,a),this.tokenSettingUrl="https://github.com/settings/tokens",this.showTokenTip=!0,this.defaultPath="content",this.previewUrl="/[user]/[repo]/blob/[branch]/[docpath]",this.previewPostUrl="/post/[postid].html",this.mdFilenameRule="[filename].md",this.imageStorePath="assets/images",this.imageLinkPath="assets/images",this.pageType=ce.Markdown,this.passwordType=xe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!0,this.cateEnabled=!0,this.allowCateChange=!0,this.categoryType=Q.CategoryType_Multi,this.knowledgeSpaceEnabled=!0,this.allowKnowledgeSpaceChange=!0,this.placeholder.knowledgeSpaceReadonlyModeTip="Quartz å¹³å°å·²æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œæ›´æ”¹åŽä¼šè‡ªåŠ¨å°†æ–‡ç« ä»ŽåŽŸç›®å½•ç§»åŠ¨åˆ°æ–°ç›®å½•",this.knowledgeSpaceType=Q.CategoryType_Tree_Single}}class Zo extends qt{logger=L("quartz-yaml-converter-adaptor");convertToYaml(e,t,o){if(this.logger.debug("æ‚¨æ­£åœ¨ä½¿ç”¨ Quartz Yaml Converter",{post:ne(e)}),t)this.logger.info("yaml å·²ä¿å­˜ï¼Œä¸ä½¿ç”¨é¢„è®¾",{post:ne(e)});else{if(t=new Ze,t.yamlObj.title=e.title,t.yamlObj.date=Ae.formatIsoToZh(e.dateCreated.toISOString(),!0),e.dateUpdated||(e.dateUpdated=new Date),t.yamlObj.updated=Ae.formatIsoToZh(e.dateUpdated.toISOString(),!0),T.isEmptyString(e.shortDesc)||(t.yamlObj.description=e.shortDesc),!T.isEmptyString(e.mt_keywords)){const i=e.mt_keywords.split(",");t.yamlObj.tags=i}if(e.categories?.length>0&&(t.yamlObj.categories=e.categories),o.yamlLinkEnabled){let i="/post/"+e.wp_slug+".html";if(o instanceof Gt){const n=o;if(!T.isEmptyString(o.previewPostUrl)){i=n.previewPostUrl.replace("[postid]",e.wp_slug);const r=Ae.formatIsoToZh(e.dateCreated.toISOString(),!0).split(" ")[0].split("-");this.logger.debug("created numarr=>",r);const m=r[0],w=r[1],d=r[2];i=i.replace(/\[yyyy]/g,m),i=i.replace(/\[MM]/g,w),i=i.replace(/\[mm]/g,w),i=i.replace(/\[dd]/g,d),t.yamlObj.categories?.length>0?i=i.replace(/\[cats]/,t.yamlObj.categories.join("/")):i=i.replace(/\/\[cats]/,"")}}t.yamlObj.permalink=i}const a=te.safeParse(o?.dynYamlCfg??"{}",{});se.isEmptyObject(a)?(t.yamlObj.enableToc=!0,t.yamlObj.enableBackLinks=!0):Object.keys(a).forEach(i=>{t.yamlObj[i]=a[i]})}let s=ie.obj2Yaml(t.yamlObj);return this.logger.debug("yaml=>",s),t.formatter=s,t.mdContent=e.markdown,t.mdFullContent=ie.addYamlToMd(t.formatter,t.mdContent),t.htmlContent=e.html,this.logger.info("ç”Ÿæˆé»˜è®¤çš„YAML"),t}convertToAttr(e,t,o){return this.logger.debug("å¼€å§‹è½¬æ¢YAMLåˆ°Post",t),t.yamlObj?.title&&(e.title=t.yamlObj?.title),t.yamlObj?.date&&(e.dateCreated=Ae.convertStringToDate(t.yamlObj?.date)),t.yamlObj?.updated&&(e.dateUpdated=Ae.convertStringToDate(t.yamlObj?.updated)),e.shortDesc=t.yamlObj?.description,e.mt_keywords=t.yamlObj?.tags?.join(","),e.categories=t.yamlObj?.categories,e.yaml=ie.obj2Yaml(t.yamlObj),this.logger.debug("è½¬æ¢å®Œæˆï¼Œpost =>",e),e}}class el extends gs{getYamlAdaptor(){return new Zo}async preEditPost(e,t,o){const s=await super.preEditPost(e,t,o),a=o?.cfg,i=Pe(s),n=i.markdown;this.logger.info("å‡†å¤‡å¤„ç† Quartz æ­£æ–‡"),this.logger.debug("md =>",{md:n});const l=ie.extractFrontmatter(n,!0);let c=ie.extractMarkdown(n);return i.markdown=`${l}
${c}`,this.logger.info("Quartz æ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedMd =>",{yfm:l,updatedMd:c}),a?.pageType==ce.Markdown?i.description=i.markdown:i.description=i.html,i}}var xs={};const xo=async(p,e)=>{const t=L("use-quartz-api");t.info("Start using Quartz API...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:n}=pe(),l=await n();if(s=te.safeParse(l[p],{}),se.isEmptyObject(s)){const c=A.emptyOrDefault(xs.VITE_GITHUB_USERNAME,""),r=A.emptyOrDefault(xs.VITE_GITHUB_AUTH_TOKEN,""),m=A.emptyOrDefault(xs.VITE_GITHUB_REPO,""),w=A.emptyOrDefault(xs.VITE_GITHUB_BRANCH,"main"),d=A.emptyOrDefault(xs.VITE_MIDDLEWARE_URL,fe);s=new ep(c,r,m,w,d),t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.tagEnabled=!0,s.cateEnabled=!0,s.allowCateChange=!0,s.categoryType=Q.CategoryType_Multi,s.knowledgeSpaceEnabled=!0,s.knowledgeSpaceTitle="å‘å¸ƒç›®å½•",s.allowKnowledgeSpaceChange=!0,s.placeholder.knowledgeSpaceReadonlyModeTip="Quartz å¹³å°æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚æ–‡ç« å·²å‘å¸ƒè¿‡ä¼šå…ˆåˆ é™¤åŽŸæ¥çš„å†å‘å¸ƒæ–°çš„",s.knowledgeSpaceType=Q.CategoryType_Tree_Single,s.picgoPicbedSupported=!0,s.bundledPicbedSupported=!0;const a=new Zo,i=new el(o,s);return t.info("Quartz API created successfully.",s),{cfg:s,yamlAdaptor:a,blogApi:i}};class tl extends Gt{constructor(e,t,o,s,a){super(e,t,o,s,a),this.tokenSettingUrl="https://github.com/settings/tokens",this.showTokenTip=!0,this.defaultPath="docs",this.previewUrl="/[user]/[repo]/blob/[branch]/[docpath]",this.previewPostUrl="/post/[postid].html",this.mdFilenameRule="[filename].md",this.imageStorePath="docs/.vuepress/public/images",this.imageLinkPath="images",this.pageType=ce.Markdown,this.passwordType=xe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!0,this.cateEnabled=!0,this.allowCateChange=!0,this.categoryType=Q.CategoryType_Multi,this.knowledgeSpaceEnabled=!0,this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="Vuepress å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",this.knowledgeSpaceType=Q.CategoryType_Tree_Single}}class ao extends qt{logger=L("vuepress-yaml-converter-adaptor");convertToYaml(e,t,o){if(!e)return this.logger.error("postå¯¹è±¡ä¸ºç©ºï¼Œæ— æ³•è½¬æ¢ä¸ºYAML"),t||(t=new Ze),t;this.logger.debug("æ‚¨æ­£åœ¨ä½¿ç”¨ Vuepress Yaml Converter",{post:ne(e)}),t?(this.logger.info("yaml å·²å­˜åœ¨ï¼Œæ ¹æ®æœ€æ–°é…ç½®æ›´æ–°",{post:ne(e)}),t.yamlObj={}):t=new Ze,t.yamlObj.title=e.title||"æœªå‘½åæ–‡ç« ";try{t.yamlObj.date=e.dateCreated?Ae.formatIsoToZh(e.dateCreated.toISOString(),!0):new Date().toISOString()}catch(s){this.logger.error("æ—¥æœŸæ ¼å¼åŒ–å¤±è´¥",s),t.yamlObj.date=new Date().toISOString()}if(t.yamlObj.meta=[],T.isEmptyString(e.mt_keywords)||t.yamlObj.meta.push({name:"keywords",content:e.mt_keywords.split(",").join(" ")||""}),T.isEmptyString(e.shortDesc)||t.yamlObj.meta.push({name:"description",content:e.shortDesc}),!T.isEmptyString(e.mt_keywords))try{const s=e.mt_keywords.split(",");t.yamlObj.tags=s}catch(s){this.logger.error("æ ‡ç­¾åˆ†å‰²å¤±è´¥",s),t.yamlObj.tags=[]}if(e.categories&&Array.isArray(e.categories)&&e.categories.length>0&&(t.yamlObj.categories=e.categories),o?.yamlLinkEnabled&&e.wp_slug){let s="/post/"+e.wp_slug+".html";t.yamlObj.permalink=s}try{if(o){const s=o;let a=s.site||"";if(T.isEmptyString(a)&&s.home&&s.username)try{a=T.pathJoin(s.home,"/"+s.username)}catch(i){this.logger.error("è·¯å¾„æ‹¼æŽ¥å¤±è´¥",i),a=s.home||""}t.yamlObj.author={name:s.author??"terwer",link:a}}}catch(s){this.logger.error("ä½œè€…ä¿¡æ¯è®¾ç½®å¤±è´¥",s)}e.title&&typeof e.title=="string"&&e.title.includes("[æ—¥è®°]")&&(t.yamlObj.article=!1);try{const s=te.safeParse(o?.dynYamlCfg??"{}",{});se.isEmptyObject(s)||Object.keys(s).forEach(a=>{t.yamlObj[a]=s[a]})}catch(s){this.logger.error("åŠ¨æ€YAMLé…ç½®è§£æžå¤±è´¥",s)}try{let s=ie.obj2Yaml(t.yamlObj);this.logger.debug("yaml=>",s),t.formatter=s,t.mdContent=e.markdown||"",t.mdFullContent=ie.addYamlToMd(t.formatter,t.mdContent),t.htmlContent=e.html||"",this.logger.info("ç”Ÿæˆé»˜è®¤çš„YAML")}catch(s){this.logger.error("YAMLæ ¼å¼åŒ–å¤±è´¥",s)}return t}convertToAttr(e,t,o){if(this.logger.debug("å¼€å§‹è½¬æ¢YAMLåˆ°Post",t),!e)return this.logger.error("postå¯¹è±¡ä¸ºç©ºï¼Œæ— æ³•è½¬æ¢YAMLå±žæ€§"),new Be;if(!t||!t.yamlObj)return this.logger.error("yamlFormatObjå¯¹è±¡ä¸ºç©ºæˆ–yamlObjæœªå®šä¹‰ï¼Œæ— æ³•è½¬æ¢YAMLå±žæ€§"),e;try{try{typeof t.yamlObj.title=="string"&&!T.isEmptyString(t.yamlObj.title)&&(e.title=t.yamlObj.title)}catch(s){this.logger.error("æ ‡é¢˜è§£æžå¤±è´¥",s)}try{if(!T.isEmptyString(t.yamlObj.date))try{e.dateCreated=Ae.convertStringToDate(t.yamlObj.date)}catch(s){this.logger.error("æ—¥æœŸè§£æžå¤±è´¥",s),e.dateCreated=new Date}}catch(s){this.logger.error("æ—¥æœŸå­—æ®µè§£æžå¤±è´¥",s)}try{const s=t.yamlObj.meta;if(Array.isArray(s)&&s.length>0)for(let a=0;a<s.length;a++)try{const i=s[a];if(i?.name==="description"&&typeof i.content=="string"&&!T.isEmptyString(i.content)){e.shortDesc=i.content;break}}catch(i){this.logger.error("metaé¡¹è§£æžå¤±è´¥",i)}}catch(s){this.logger.error("æ‘˜è¦è§£æžå¤±è´¥",s)}try{Array.isArray(t.yamlObj.tags)&&t.yamlObj.tags.length>0&&(e.mt_keywords=t.yamlObj.tags.join(","))}catch(s){this.logger.error("æ ‡ç­¾è§£æžå¤±è´¥",s)}try{Array.isArray(t.yamlObj.categories)&&t.yamlObj.categories.length>0&&(e.categories=t.yamlObj.categories)}catch(s){this.logger.error("åˆ†ç±»è§£æžå¤±è´¥",s)}try{e.yaml=ie.obj2Yaml(t.yamlObj)}catch(s){this.logger.error("YAMLç”Ÿæˆå¤±è´¥",s),e.yaml=""}}catch(s){this.logger.error("YAMLå±žæ€§è½¬æ¢è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸",s)}return this.logger.debug("è½¬æ¢å®Œæˆï¼Œpost =>",e),e}}class sl extends gs{getYamlAdaptor(){return new ao}async preEditPost(e,t,o){const s=await super.preEditPost(e,t,o),a=o?.cfg,i=Pe(s),n=i.markdown;this.logger.info("å‡†å¤‡å¤„ç† Vuepress æ­£æ–‡"),this.logger.debug("md =>",{md:n});const l=ie.extractFrontmatter(n,!0);let c=ie.extractMarkdown(n);const r=i.shortDesc??"";return/(\n{2}<!-- more -->\n{2})/.test(c)||(c=`${r}

<!-- more -->

${c}`),i.markdown=`${l}
${c}`,this.logger.info("Vuepress æ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedMd =>",{yfm:l,updatedMd:c}),a?.pageType==ce.Markdown?i.description=i.markdown:i.description=i.html,i}}var Ms={};const Mo=async(p,e)=>{const t=L("use-vuepress-api");t.info("Start using Vuepress API...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:n}=pe(),l=await n();if(s=te.safeParse(l[p],{}),se.isEmptyObject(s)){const c=A.emptyOrDefault(Ms.VITE_GITHUB_USERNAME,""),r=A.emptyOrDefault(Ms.VITE_GITHUB_AUTH_TOKEN,""),m=A.emptyOrDefault(Ms.VITE_GITHUB_REPO,""),w=A.emptyOrDefault(Ms.VITE_GITHUB_BRANCH,"main"),d=A.emptyOrDefault(Ms.VITE_MIDDLEWARE_URL,fe);s=new tl(c,r,m,w,d),s.mdFilenameRule="[filename].md",t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.tagEnabled=!0,s.cateEnabled=!0,s.allowCateChange=!0,s.categoryType=Q.CategoryType_Multi,s.knowledgeSpaceEnabled=!0,s.knowledgeSpaceTitle="å‘å¸ƒç›®å½•",s.allowKnowledgeSpaceChange=!1,s.placeholder.knowledgeSpaceReadonlyModeTip="Vuepress å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",s.knowledgeSpaceType=Q.CategoryType_Tree_Single,s.picgoPicbedSupported=!0,s.bundledPicbedSupported=!0;const a=new ao,i=new sl(o,s);return t.info("Vuepress API created successfully.",s),{cfg:s,yamlAdaptor:a,blogApi:i}};class tp extends tl{constructor(e,t,o,s,a){super(e,t,o,s,a),this.home="[your-gitlab-home]",this.apiUrl="[your-gitlab-api-url]",this.tokenSettingUrl=`[your-gitlab-host]/${yt.TOKEN_SETTING_URL}`,this.showTokenTip=!0,this.defaultPath="docs",this.previewUrl="/[user]/[repo]/blob/[branch]/[docpath]",this.previewPostUrl="/post/[postid].html",this.mdFilenameRule="[filename].md",this.pageType=ce.Markdown,this.passwordType=xe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!0,this.cateEnabled=!0,this.allowCateChange=!0,this.categoryType=Q.CategoryType_Multi,this.knowledgeSpaceEnabled=!0,this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="Gitlabvuepress å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",this.knowledgeSpaceType=Q.CategoryType_Tree_Single}}class ol extends ao{}class sp extends ws{getYamlAdaptor(){return new ol}async preEditPost(e,t,o){const s=await super.preEditPost(e,t,o),a=o?.cfg,i=Pe(s),n=i.markdown;this.logger.info("å‡†å¤‡å¤„ç† Gitlabvuepress æ­£æ–‡"),this.logger.debug("md =>",{md:n});const l=ie.extractFrontmatter(n,!0);let c=ie.extractMarkdown(n);const r=i.shortDesc??"";return/(\n{2}<!-- more -->\n{2})/.test(c)||(c=`${r}

<!-- more -->

${c}`),i.markdown=`${l}
${c}`,this.logger.info("Gitlabvuepress æ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedMd =>",{yfm:l,updatedMd:c}),a?.pageType==ce.Markdown?i.description=i.markdown:i.description=i.html,i}}var Ds={};const Do=async(p,e)=>{const t=L("use-gitlab-hexo-api");t.info("Start using Gitlabvuepress API...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:n}=pe(),l=await n();if(s=te.safeParse(l[p],{}),se.isEmptyObject(s)){const c=A.emptyOrDefault(Ds.VITE_GITLAB_USERNAME,""),r=A.emptyOrDefault(Ds.VITE_GITLAB_AUTH_TOKEN,""),m=A.emptyOrDefault(Ds.VITE_GITLAB_REPO,""),w=A.emptyOrDefault(Ds.VITE_GITLAB_BRANCH,"main"),d=A.emptyOrDefault(Ds.VITE_MIDDLEWARE_URL,fe);s=new tp(c,r,m,w,d),s.mdFilenameRule="[filename].md",t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.tagEnabled=!0,s.cateEnabled=!0,s.allowCateChange=!0,s.categoryType=Q.CategoryType_Multi,s.knowledgeSpaceEnabled=!0,s.knowledgeSpaceTitle="å‘å¸ƒç›®å½•",s.allowKnowledgeSpaceChange=!1,s.placeholder.knowledgeSpaceReadonlyModeTip="Gitlabvuepress å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",s.knowledgeSpaceType=Q.CategoryType_Tree_Single,s.picgoPicbedSupported=!0,s.bundledPicbedSupported=!0;const a=new ol,i=new sp(o,s);return t.info("Gitlabvuepress API created successfully.",s),{cfg:s,yamlAdaptor:a,blogApi:i}};class al extends Gt{constructor(e,t,o,s,a){super(e,t,o,s,a),this.tokenSettingUrl="https://github.com/settings/tokens",this.showTokenTip=!0,this.defaultPath="src/post",this.previewUrl="/[user]/[repo]/blob/[branch]/[docpath]",this.previewPostUrl="/post/[postid].html",this.mdFilenameRule="[slug].md",this.imageStorePath="[docpath]/images",this.imageLinkPath="./images",this.pageType=ce.Markdown,this.passwordType=xe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!0,this.cateEnabled=!0,this.allowCateChange=!0,this.categoryType=Q.CategoryType_Multi,this.knowledgeSpaceEnabled=!0,this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="Vuepress2 å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",this.knowledgeSpaceType=Q.CategoryType_Tree_Single}}class io extends qt{logger=L("vuepress2-yaml-converter-adaptor");convertToYaml(e,t,o){if(this.logger.debug("æ‚¨æ­£åœ¨ä½¿ç”¨ Vuepress2 Yaml Converter",{post:ne(e)}),t?(this.logger.info("yaml å·²å­˜åœ¨ï¼Œæ ¹æ®æœ€æ–°é…ç½®æ›´æ–°",{post:ne(e)}),t.yamlObj={}):t=new Ze,t.yamlObj.title=e.title,t.yamlObj.short_title="",t.yamlObj.date=e.dateCreated,T.isEmptyString(e.shortDesc)||(t.yamlObj.description=e.shortDesc),!T.isEmptyString(e.mt_keywords)){const i=e.mt_keywords.split(",");t.yamlObj.tag=i}e.categories?.length>0&&(t.yamlObj.category=e.categories);const s=te.safeParse(o?.dynYamlCfg??"{}",{});se.isEmptyObject(s)?(t.yamlObj.article=!0,t.yamlObj.timeline=!1,t.yamlObj.isOriginal=!0):Object.keys(s).forEach(i=>{t.yamlObj[i]=s[i]});const a=ie.obj2Yaml(t.yamlObj);return t.formatter=this.removeTZ(a),t.mdContent=e.markdown,t.mdFullContent=ie.addYamlToMd(t.formatter,t.mdContent),t.htmlContent=e.html,this.logger.info("ç”Ÿæˆé»˜è®¤çš„YAML"),t}convertToAttr(e,t,o){if(this.logger.debug("å¼€å§‹è½¬æ¢YAMLåˆ°Post",t),!e)return this.logger.error("postå¯¹è±¡ä¸ºç©ºï¼Œæ— æ³•è½¬æ¢YAMLå±žæ€§"),new Be;if(!t||!t.yamlObj)return this.logger.error("yamlFormatObjå¯¹è±¡ä¸ºç©ºæˆ–yamlObjæœªå®šä¹‰ï¼Œæ— æ³•è½¬æ¢YAMLå±žæ€§"),e;try{try{typeof t.yamlObj.title=="string"&&!T.isEmptyString(t.yamlObj.title)&&(e.title=t.yamlObj.title)}catch(s){this.logger.error("æ ‡é¢˜è§£æžå¤±è´¥",s)}try{if(t.yamlObj.date)try{e.dateCreated=t.yamlObj.date}catch(s){this.logger.error("æ—¥æœŸè§£æžå¤±è´¥",s),e.dateCreated=new Date}}catch(s){this.logger.error("æ—¥æœŸå­—æ®µè§£æžå¤±è´¥",s)}try{e.shortDesc=t.yamlObj.description}catch(s){this.logger.error("æ‘˜è¦è§£æžå¤±è´¥",s)}try{Array.isArray(t.yamlObj.tags)&&t.yamlObj.tags.length>0?e.mt_keywords=t.yamlObj.tags.join(","):Array.isArray(t.yamlObj.tag)&&t.yamlObj.tag.length>0&&(e.mt_keywords=t.yamlObj.tag.join(","))}catch(s){this.logger.error("æ ‡ç­¾è§£æžå¤±è´¥",s)}try{Array.isArray(t.yamlObj.categories)&&t.yamlObj.categories.length>0?e.categories=t.yamlObj.categories:Array.isArray(t.yamlObj.category)&&t.yamlObj.category.length>0&&(e.categories=t.yamlObj.category)}catch(s){this.logger.error("åˆ†ç±»è§£æžå¤±è´¥",s)}try{const s=ie.obj2Yaml(t.yamlObj);e.yaml=this.removeTZ(s)}catch(s){this.logger.error("YAMLç”Ÿæˆå¤±è´¥",s),e.yaml=""}}catch(s){this.logger.error("YAMLå±žæ€§è½¬æ¢è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸",s)}return this.logger.debug("è½¬æ¢å®Œæˆï¼Œpost =>",e),e}removeTZ(e){return e.replace(/---([\s\S]*?)---/g,function(t,o){return t.replace(/T/g," ").replace(/\.\d{3}Z/g,"")})}}class il extends gs{getYamlAdaptor(){return new io}async preEditPost(e,t,o){const s=await super.preEditPost(e,t,o),a=o?.cfg,i=Pe(s),n=i.markdown;this.logger.info("å‡†å¤‡å¤„ç† Vuepress2 æ­£æ–‡"),this.logger.debug("md =>",{md:n});const l=ie.extractFrontmatter(n,!0);let c=ie.extractMarkdown(n);const r=i.shortDesc??"";return/(\n{2}<!-- more -->\n{2})/.test(c)||(c=`${r}

<!-- more -->

${c}`),i.markdown=`${l}
${c}`,this.logger.info("Vuepress2 æ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedMd =>",{yfm:l,updatedMd:c}),a?.pageType==ce.Markdown?i.description=i.markdown:i.description=i.html,i}}var Os={};const Oo=async(p,e)=>{const t=L("use-vuepress2-api");t.info("Start using Vuepress2 API...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:n}=pe(),l=await n();if(s=te.safeParse(l[p],{}),se.isEmptyObject(s)){const c=A.emptyOrDefault(Os.VITE_GITHUB_USERNAME,""),r=A.emptyOrDefault(Os.VITE_GITHUB_AUTH_TOKEN,""),m=A.emptyOrDefault(Os.VITE_GITHUB_REPO,""),w=A.emptyOrDefault(Os.VITE_GITHUB_BRANCH,"main"),d=A.emptyOrDefault(Os.VITE_MIDDLEWARE_URL,fe);s=new al(c,r,m,w,d),s.mdFilenameRule="[slug].md",t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.tagEnabled=!0,s.cateEnabled=!0,s.allowCateChange=!0,s.categoryType=Q.CategoryType_Multi,s.knowledgeSpaceEnabled=!0,s.knowledgeSpaceTitle="å‘å¸ƒç›®å½•",s.allowKnowledgeSpaceChange=!1,s.placeholder.knowledgeSpaceReadonlyModeTip="Vuepress2 å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",s.knowledgeSpaceType=Q.CategoryType_Tree_Single,s.picgoPicbedSupported=!0,s.bundledPicbedSupported=!0;const a=new io,i=new il(o,s);return t.info("Vuepress2 API created successfully.",s),{cfg:s,yamlAdaptor:a,blogApi:i}};class nl extends Gt{constructor(e,t,o,s,a){super(e,t,o,s,a),this.tokenSettingUrl="https://github.com/settings/tokens",this.showTokenTip=!0,this.defaultPath="docs",this.previewUrl="/[user]/[repo]/blob/[branch]/[docpath]",this.previewPostUrl="/post/[postid].html",this.mdFilenameRule="[slug].md",this.imageStorePath="[docpath]/images",this.imageLinkPath="./images",this.pageType=ce.Markdown,this.passwordType=xe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!0,this.cateEnabled=!0,this.allowCateChange=!0,this.categoryType=Q.CategoryType_Multi,this.knowledgeSpaceEnabled=!0,this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="Vitepress å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",this.knowledgeSpaceType=Q.CategoryType_Tree_Single}}class no extends qt{logger=L("vitepress-yaml-converter-adaptor");convertToYaml(e,t,o){this.logger.debug("æ‚¨æ­£åœ¨ä½¿ç”¨ Vitepress Yaml Converter",{post:ne(e)}),t?(this.logger.info("yaml å·²å­˜åœ¨ï¼Œæ ¹æ®æœ€æ–°é…ç½®æ›´æ–°",{post:ne(e)}),t.yamlObj={}):t=new Ze,t.yamlObj.title=e.title,T.isEmptyString(e.shortDesc)||(t.yamlObj.description=e.shortDesc),t.yamlObj.date=Ae.formatIsoToZh(e.dateCreated.toISOString(),!0),t.yamlObj.head=[],T.isEmptyString(e.mt_keywords)||t.yamlObj.head.push({name:"keywords",content:e.mt_keywords.split(",").join(" ")}),T.isEmptyString(e.shortDesc)||t.yamlObj.head.push({name:"description",content:e.shortDesc}),e.categories?.length>0&&(t.yamlObj.categories=e.categories);const s=te.safeParse(o?.dynYamlCfg??"{}",{});se.isEmptyObject(s)?(t.yamlObj.outline="deep",t.yamlObj.sidebar=!1,t.yamlObj.prev=!1,t.yamlObj.next=!1):Object.keys(s).forEach(i=>{t.yamlObj[i]=s[i]});let a=ie.obj2Yaml(t.yamlObj);return this.logger.debug("yaml=>",a),t.formatter=a,t.mdContent=e.markdown,t.mdFullContent=ie.addYamlToMd(t.formatter,t.mdContent),t.htmlContent=e.html,this.logger.info("ç”Ÿæˆé»˜è®¤çš„YAML"),t}convertToAttr(e,t,o){this.logger.debug("å¼€å§‹è½¬æ¢YAMLåˆ°Post",t),t.yamlObj?.title&&(e.title=t.yamlObj?.title),t.yamlObj?.date&&(e.dateCreated=Ae.convertStringToDate(t.yamlObj?.date)),t.yamlObj?.description&&(e.shortDesc=t.yamlObj.description);const s=t.yamlObj?.head;if(s&&s.length>0)for(let a=0;a<s.length;a++){const i=s[a];if(i?.name==="keywords"&&!T.isEmptyString(i.content)){e.mt_keywords=i.content?.split(" ").join(",");break}}return e.categories=t.yamlObj?.categories,e.yaml=ie.obj2Yaml(t.yamlObj),this.logger.debug("è½¬æ¢å®Œæˆï¼Œpost =>",e),e}}class ll extends gs{getYamlAdaptor(){return new no}async preEditPost(e,t,o){const s=await super.preEditPost(e,t,o),a=o?.cfg,i=Pe(s),n=i.markdown;this.logger.info("å‡†å¤‡å¤„ç† Vitepress æ­£æ–‡"),this.logger.debug("md =>",{md:n});const l=ie.extractFrontmatter(n,!0);let c=ie.extractMarkdown(n);return i.markdown=`${l}
${c}`,this.logger.info("Vitepress æ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedMd =>",{yfm:l,updatedMd:c}),a?.pageType==ce.Markdown?i.description=i.markdown:i.description=i.html,i}}var $s={};const $o=async(p,e)=>{const t=L("use-vitepress-api");t.info("Start using Vitepress API...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:n}=pe(),l=await n();if(s=te.safeParse(l[p],{}),se.isEmptyObject(s)){const c=A.emptyOrDefault($s.VITE_GITHUB_USERNAME,""),r=A.emptyOrDefault($s.VITE_GITHUB_AUTH_TOKEN,""),m=A.emptyOrDefault($s.VITE_GITHUB_REPO,""),w=A.emptyOrDefault($s.VITE_GITHUB_BRANCH,"main"),d=A.emptyOrDefault($s.VITE_MIDDLEWARE_URL,fe);s=new nl(c,r,m,w,d),s.mdFilenameRule="[slug].md",t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.tagEnabled=!0,s.cateEnabled=!0,s.allowCateChange=!0,s.categoryType=Q.CategoryType_Multi,s.knowledgeSpaceEnabled=!0,s.knowledgeSpaceTitle="å‘å¸ƒç›®å½•",s.allowKnowledgeSpaceChange=!1,s.placeholder.knowledgeSpaceReadonlyModeTip="Vitepress å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",s.knowledgeSpaceType=Q.CategoryType_Tree_Single,s.picgoPicbedSupported=!0,s.bundledPicbedSupported=!0;const a=new no,i=new ll(o,s);return t.info("Vitepress API created successfully.",s),{cfg:s,yamlAdaptor:a,blogApi:i}};class op extends al{constructor(e,t,o,s,a){super(e,t,o,s,a),this.home="[your-gitlab-home]",this.apiUrl="[your-gitlab-api-url]",this.tokenSettingUrl=`[your-gitlab-host]/${yt.TOKEN_SETTING_URL}`,this.showTokenTip=!0,this.defaultPath="src/post",this.previewUrl="/[user]/[repo]/blob/[branch]/[docpath]",this.previewPostUrl="/post/[postid].html",this.mdFilenameRule="[slug].md",this.pageType=ce.Markdown,this.passwordType=xe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!0,this.cateEnabled=!0,this.allowCateChange=!0,this.categoryType=Q.CategoryType_Multi,this.knowledgeSpaceEnabled=!0,this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="Gitlabvuepress2 å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",this.knowledgeSpaceType=Q.CategoryType_Tree_Single}}class rl extends io{}class ap extends ws{getYamlAdaptor(){return new rl}async preEditPost(e,t,o){const s=await super.preEditPost(e,t,o),a=o?.cfg,i=Pe(s),n=i.markdown;this.logger.info("å‡†å¤‡å¤„ç† Gitlabvuepress2 æ­£æ–‡"),this.logger.debug("md =>",{md:n});const l=ie.extractFrontmatter(n,!0);let c=ie.extractMarkdown(n);const r=i.shortDesc??"";return/(\n{2}<!-- more -->\n{2})/.test(c)||(c=`${r}

<!-- more -->

${c}`),i.markdown=`${l}
${c}`,this.logger.info("Gitlabvuepress2 æ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedMd =>",{yfm:l,updatedMd:c}),a?.pageType==ce.Markdown?i.description=i.markdown:i.description=i.html,i}}var Vs={};const Vo=async(p,e)=>{const t=L("use-gitlab-hexo-api");t.info("Start using Gitlabvuepress2 API...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:n}=pe(),l=await n();if(s=te.safeParse(l[p],{}),se.isEmptyObject(s)){const c=A.emptyOrDefault(Vs.VITE_GITLAB_USERNAME,""),r=A.emptyOrDefault(Vs.VITE_GITLAB_AUTH_TOKEN,""),m=A.emptyOrDefault(Vs.VITE_GITLAB_REPO,""),w=A.emptyOrDefault(Vs.VITE_GITLAB_BRANCH,"main"),d=A.emptyOrDefault(Vs.VITE_MIDDLEWARE_URL,fe);s=new op(c,r,m,w,d),s.mdFilenameRule="[slug].md",t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.tagEnabled=!0,s.cateEnabled=!0,s.allowCateChange=!0,s.categoryType=Q.CategoryType_Multi,s.knowledgeSpaceEnabled=!0,s.knowledgeSpaceTitle="å‘å¸ƒç›®å½•",s.allowKnowledgeSpaceChange=!1,s.placeholder.knowledgeSpaceReadonlyModeTip="Gitlabvuepress2 å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",s.knowledgeSpaceType=Q.CategoryType_Tree_Single,s.picgoPicbedSupported=!0,s.bundledPicbedSupported=!0;const a=new rl,i=new ap(o,s);return t.info("Gitlabvuepress2 API created successfully.",s),{cfg:s,yamlAdaptor:a,blogApi:i}};class ip extends nl{constructor(e,t,o,s,a){super(e,t,o,s,a),this.home="[your-gitlab-home]",this.apiUrl="[your-gitlab-api-url]",this.tokenSettingUrl=`[your-gitlab-host]/${yt.TOKEN_SETTING_URL}`,this.showTokenTip=!0,this.defaultPath="docs",this.previewUrl="/[user]/[repo]/blob/[branch]/[docpath]",this.previewPostUrl="/post/[postid].html",this.mdFilenameRule="[slug].md",this.pageType=ce.Markdown,this.passwordType=xe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!0,this.cateEnabled=!0,this.allowCateChange=!0,this.categoryType=Q.CategoryType_Multi,this.knowledgeSpaceEnabled=!0,this.allowKnowledgeSpaceChange=!1,this.placeholder.knowledgeSpaceReadonlyModeTip="Gitlabvitepress å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",this.knowledgeSpaceType=Q.CategoryType_Tree_Single}}class cl extends no{}class np extends ws{getYamlAdaptor(){return new cl}async preEditPost(e,t,o){const s=await super.preEditPost(e,t,o),a=o?.cfg,i=Pe(s),n=i.markdown;this.logger.info("å‡†å¤‡å¤„ç† Gitlabvitepress æ­£æ–‡"),this.logger.debug("md =>",{md:n});const l=ie.extractFrontmatter(n,!0);let c=ie.extractMarkdown(n);return i.markdown=`${l}
${c}`,this.logger.info("Gitlabvitepress æ­£æ–‡å¤„ç†å®Œæ¯•"),this.logger.debug("updatedMd =>",{yfm:l,updatedMd:c}),a?.pageType==ce.Markdown?i.description=i.markdown:i.description=i.html,i}}var Ns={};const No=async(p,e)=>{const t=L("use-gitlab-vitepress-api");t.info("Start using Gitlabvitepress API...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:n}=pe(),l=await n();if(s=te.safeParse(l[p],{}),se.isEmptyObject(s)){const c=A.emptyOrDefault(Ns.VITE_GITLAB_USERNAME,""),r=A.emptyOrDefault(Ns.VITE_GITLAB_AUTH_TOKEN,""),m=A.emptyOrDefault(Ns.VITE_GITLAB_REPO,""),w=A.emptyOrDefault(Ns.VITE_GITLAB_BRANCH,"main"),d=A.emptyOrDefault(Ns.VITE_MIDDLEWARE_URL,fe);s=new ip(c,r,m,w,d),s.mdFilenameRule="[slug].md",t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.tagEnabled=!0,s.cateEnabled=!0,s.allowCateChange=!0,s.categoryType=Q.CategoryType_Multi,s.knowledgeSpaceEnabled=!0,s.knowledgeSpaceTitle="å‘å¸ƒç›®å½•",s.allowKnowledgeSpaceChange=!1,s.placeholder.knowledgeSpaceReadonlyModeTip="Gitlabvitepress å¹³å°æš‚ä¸æ”¯æŒä¿®æ”¹å‘å¸ƒç›®å½•ï¼Œå¦‚éœ€ä¿®æ”¹ï¼Œè¯·åˆ é™¤ä¹‹åŽé‡æ–°å‘å¸ƒ",s.knowledgeSpaceType=Q.CategoryType_Tree_Single,s.picgoPicbedSupported=!0,s.bundledPicbedSupported=!0;const a=new cl,i=new np(o,s);return t.info("Gitlabvitepress API created successfully.",s),{cfg:s,yamlAdaptor:a,blogApi:i}};class lp extends Yt{constructor(e,t,o){super("","",e,t,o),this.home="[your-halo-home]",this.apiUrl="[your-halo-api-url]",this.previewUrl="/archives/{slug}",this.pageType=ce.Html,this.usernameEnabled=!0,this.showTokenTip=!1,this.allowPreviewUrlChange=!0,this.tagEnabled=!0,this.cateEnabled=!0,this.categoryType=Q.CategoryType_Multi,this.allowCateChange=!0,this.knowledgeSpaceEnabled=!1}}class pl{slug;name;year;month;day;constructor(e,t,o){this.slug=e,this.name=t;const i=Ae.formatIsoToZhDate(o.toISOString(),!0).split(" ")[0].split("-");this.year=i[0],this.month=i[1],this.day=i[2]}}class zt{static addIdToH1_H6(e){return e.replace(/<h([1-6])>(.*?)<\/h\1>/g,function(t,o,s){return`<h${o} id="${s}">${s}</h${o}>`})}}class rp extends Ct{constructor(e,t){super(e,t),this.logger=L("halo-api-adaptor-v29")}async getUsersBlogs(){const e=[];return(await this.getHaloCategories()).forEach(o=>{const s=new et;s.blogid=o.spec.slug,s.blogName=o.spec.displayName,s.url=o.status.permalink,e.push(s)}),this.logger.debug("get halo categories =>",e),e}async newPost(e,t){const o={post:{spec:{title:"",slug:"",template:"",cover:"",deleted:!1,publish:!1,publishTime:void 0,pinned:!1,allowComment:!0,visible:"PUBLIC",priority:0,excerpt:{autoGenerate:!0,raw:""},categories:[],tags:[],htmlMetas:[]},apiVersion:"content.halo.run/v1alpha1",kind:"Post",metadata:{name:"",annotations:{}}},content:{raw:"",content:"",rawType:this.cfg.pageType}};this.cfg.pageType==="markdown"?o.content.raw=e.markdown:o.content.raw=zt.addIdToH1_H6(e.html),o.content.content=zt.addIdToH1_H6(e.html),T.isEmptyString(e.shortDesc)?o.post.spec.excerpt.autoGenerate=!0:(o.post.spec.excerpt.autoGenerate=!1,o.post.spec.excerpt.raw=e.shortDesc),o.post.metadata.name=fs.randomUuid(),o.post.spec.title=e.title,o.post.spec.slug=e.wp_slug;try{if(e.categories&&e.categories.length>0){const i=await this.getCategoryNames(e.categories);o.post.spec.categories=i}if(!T.isEmptyString(e.mt_keywords)){const i=e.mt_keywords.split(","),n=await this.getTagNames(i);o.post.spec.tags=n}}catch(i){throw i}o.post.spec.publishTime=e.dateCreated.toISOString();const s=await this.haloFetch("/apis/api.console.halo.run/v1alpha1/posts",o,"POST");if(this.logger.debug("halo newPost res =>",s),!s?.metadata?.name)throw new Error("Halo æ–‡ç« å‘å¸ƒå¤±è´¥");this.logger.debug("halo æ–‡ç« è‰ç¨¿å®Œæˆ"),await this.haloFetch(`/apis/api.console.halo.run/v1alpha1/posts/${o.post.metadata.name}/publish`,{},"PUT"),this.logger.debug("halo æ–‡ç« å‘å¸ƒå®Œæˆ");const a=new pl(s.spec.slug,s.metadata.name,e.dateCreated);return this.logger.debug("postidMeta =>",a),JSON.stringify(a)}async editPost(e,t,o){let s=!1;try{const i=this.getHaloPostidKey(e).name;let n=await this.getHaloPost(i);if(this.logger.debug("get latest halo post =>",{name:i,haloPost:n}),!n.post)throw new Error("èŽ·å–æ–‡ç« ä¿¡æ¯å¤±è´¥ï¼Œå¦‚æžœæ–‡ç« åˆ é™¤ï¼Œè¯·å¼ºåˆ¶åˆ é™¤è§£é™¤å…³è”");if(n.content.rawType==="markdown"?n.content.raw=t.markdown:n.content.raw=zt.addIdToH1_H6(t.html),n.content.content=zt.addIdToH1_H6(t.html),T.isEmptyString(t.shortDesc)?n.post.spec.excerpt.autoGenerate=!0:(n.post.spec.excerpt.autoGenerate=!1,n.post.spec.excerpt.raw=t.shortDesc),n.post.metadata.name=i,n.post.spec.title=t.title,n.post.spec.slug=t.wp_slug,t.categories&&t.categories.length>0){const l=await this.getCategoryNames(t.categories);n.post.spec.categories=l}if(!T.isEmptyString(t.mt_keywords)){const l=t.mt_keywords.split(","),c=await this.getTagNames(l);n.post.spec.tags=c}n.post.spec.publishTime=t.dateCreated.toISOString(),await this.haloFetch(`/apis/content.halo.run/v1alpha1/posts/${i}`,n.post,"PUT"),await this.haloFetch(`/apis/api.console.halo.run/v1alpha1/posts/${i}/content`,n.content,"PUT"),await this.haloFetch(`/apis/api.console.halo.run/v1alpha1/posts/${n.post.metadata.name}/publish`,{},"PUT"),this.logger.debug("halo æ–‡ç« å‘å¸ƒå®Œæˆ")}catch(a){this.logger.error("Haloæ–‡ç« æ›´æ–°å¤±è´¥",a)}return s}async getPost(e,t){const s=this.getHaloPostidKey(e).name,a=await this.getHaloPost(s);this.logger.debug("getPost haloPost =>",{name:s,haloPost:a});const i=new Be;return i.title=a.post.spec.title,i.wp_slug=a.post.spec.slug,i.shortDesc=a.post.spec.excerpt.raw,i.tags_slugs=a.post.spec.tags.join(","),i.cate_slugs=a.post.spec.categories,i}async getPreviewUrl(e){const t=this.getHaloPostidKey(e);return this.cfg.previewUrl.replace("{slug}",t.slug).replace("{name}",t.name).replace("{year}",t.year).replace("{month}",t.month).replace("{day}",t.day)}async deletePost(e){const o=`/apis/api.console.halo.run/v1alpha1/posts/${this.getHaloPostidKey(e).name}/recycle`,s=await this.haloFetch(o,{},"PUT");if(this.logger.debug("halo deletePost res =>",s),!s?.metadata?.name)throw new Error("Halo æ–‡ç« åˆ é™¤å¤±è´¥");return!0}async getCategories(){const e=[],t=await this.getHaloCategories();return t&&t.length>0&&(t.forEach(o=>{const s=new Qe;s.categoryId=o.spec.slug,s.categoryName=o.spec.displayName,s.description=o.spec.displayName,s.categoryDescription=o.spec.description,e.push(s)}),this.logger.debug("get halo categories =>",e)),e}async getTags(){return(await this.getHaloTags()).map(t=>{const o=new zo;return o.tagId=t.spec.slug,o.tagName=t.spec.displayName,o.description=t.spec.displayName,o})}async newMediaObject(e,t){let o;try{const n=e.bits;this.logger.debug("newMediaObject on halo =>",e);const{FormData:l,Blob:c}=ns.getFormData(this.appInstance),r=`${this.cfg.apiUrl}/apis/api.console.halo.run/v1alpha1/attachments/upload`,m=new c([n],{type:e.type}),w=new l;if(w.append("file",m,e.name),w.append("policyName","default-policy"),w.append("groupName",""),w.append("file",m,e.name),o=await this.haloFormFetch(r,w),this.logger.debug("halo upload success, res =>",o),!o.metadata)throw new Error("Haloå›¾ç‰‡ä¸Šä¼ å¤±è´¥ =>"+e.name)}catch(n){throw this.logger.error("Error uploading image to halo:",n),new Error("Error uploading image to halo:"+n.toString())}const s=o?.spec?.displayName,a=o?.metadata?.name,i=this.cfg.home+(o?.metadata?.annotations["storage.halo.run/uri"]??"");return{attachment_id:s,date_created_gmt:new Date,parent:0,link:i,title:e.name,caption:"",description:"",metadata:{width:0,height:0,file:"",filesize:0,sizes:[]},type:e.type,thumbnail:"",id:a,file:e.name,url:i}}getHaloPostidKey(e){return te.safeParse(e,{})}async getHaloPost(e){try{const t=await this.haloFetch(`/apis/content.halo.run/v1alpha1/posts/${e}`,{},"GET"),o=await this.haloFetch(`/apis/api.console.halo.run/v1alpha1/posts/${e}/head-content`,{},"GET");return Promise.resolve({post:t,content:o})}catch{return Promise.resolve(void 0)}}async getCategoryNames(e){const t=await this.getHaloCategories(),o=e.filter(i=>!t.find(n=>n.spec.displayName===i)),s=await Promise.all(o.map(async(i,n)=>{const l=await Js.getPageSlug(i,!0);return await this.haloFetch("/apis/content.halo.run/v1alpha1/categories",{spec:{displayName:i,slug:l,description:"",cover:"",template:"",priority:t.length+n,children:[]},apiVersion:"content.halo.run/v1alpha1",kind:"Category",metadata:{name:"",generateName:"category-"}},"POST")})),a=e.map(i=>{const n=t.find(l=>l.spec.displayName===i);return n?n.metadata.name:void 0}).filter(Boolean);return this.logger.debug("newCategories =>",s),[...a,...s.map(i=>i.metadata.name)]}async getHaloCategories(){const e=await this.haloFetch("/apis/content.halo.run/v1alpha1/categories",{},"GET");return Promise.resolve(e.items)}async getTagNames(e){const t=await this.getHaloTags(),o=e.filter(i=>!t.find(n=>n.spec.displayName===i)),s=await Promise.all(o.map(async i=>{const n=await Js.getPageSlug(i,!0);return await this.haloFetch("/apis/content.halo.run/v1alpha1/tags",{spec:{displayName:i,slug:n,color:"#ffffff",cover:""},apiVersion:"content.halo.run/v1alpha1",kind:"Tag",metadata:{name:"",generateName:"tag-"}},"POST")})),a=e.map(i=>{const n=t.find(l=>l.spec.displayName===i);return n?n.metadata.name:void 0}).filter(Boolean);return this.logger.debug("newTags =>",s),[...a,...s.map(i=>i.metadata.name)]}async getHaloTags(){const e=await this.haloFetch("/apis/content.halo.run/v1alpha1/tags",{},"GET");return Promise.resolve(e.items)}async haloFetch(e,t,o="POST",s={}){const a="application/json",i="Basic "+$t.btoa(this.cfg.username+":"+this.cfg.password),n={"Content-Type":a,Authorization:i,...s},l=`${this.cfg.apiUrl}${e}`;this.logger.debug("å‘ Halo è¯·æ±‚æ•°æ®ï¼ŒapiUrl =>",l);const c=se.isEmptyObject(t)?"":JSON.stringify(t);this.logger.debug("å‘ Halo è¯·æ±‚æ•°æ®ï¼Œbody =>",c);const r=await this.apiFetch(l,[n],c,o,a,!1,"base64","text");return this.logger.debug("å‘ Halo è¯·æ±‚æ•°æ®ï¼ŒresJson =>",r),r??null}async haloFormFetch(e,t){const s={Authorization:"Basic "+$t.btoa(this.cfg.username+":"+this.cfg.password)};return await this.apiFormFetch(e,[s],t)}}var pa={};const Ui=async(p,e)=>{const t=L("use-halo-api");t.info("Start using Halo API...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:i}=pe(),n=await i();if(s=te.safeParse(n[p],{}),se.isEmptyObject(s)){const l=A.emptyOrDefault(pa.VITE_YUQUE_USERNAME,""),c=A.emptyOrDefault(pa.VITE_YUQUE_AUTH_TOKEN,""),r=A.emptyOrDefault(pa.VITE_MIDDLEWARE_URL,fe);s=new lp(l,c,r),t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.usernameEnabled=!0,s.tagEnabled=!0,s.cateEnabled=!0,s.categoryType=Q.CategoryType_Multi,s.allowCateChange=!0,s.knowledgeSpaceEnabled=!1,s.picgoPicbedSupported=!0,s.bundledPicbedSupported=!0;const a=new rp(o,s);return t.info("Halo API created successfully.",s),{cfg:s,blogApi:a}};var ls=(p=>(p.ANONYMOUS="anonymous",p.LOGIN_USER="user",p))(ls||{});class cp extends Yt{postType;accessToken;saveHash;forceReAuth;constructor(e,t,o){super(e,"https://edit.telegra.ph","",t,o),this.postType="anonymous",this.previewUrl="/[postid]",this.allowPreviewUrlChange=!1,this.forceReAuth=!1}}class Go{static logger=L("cookie-utils");static addCookieArray(e,t,o=!1){let s=!1;return t.forEach(a=>{const[i]=a.split("="),n=this.parseCookie(a),l=e.findIndex(c=>c.startsWith(`${i}=`));if(l!==-1){const c=this.parseCookie(e[l]);(!T.isEmptyString(n.expires)&&!T.isEmptyString(c.expires)&&new Date(n.expires).getTime()>new Date(c.expires).getTime()||o)&&(e[l]=a,s=!0)}else e.push(a),s=!0}),{isUpdated:s,cookieArray:wr(e)}}static getCookie(e,t){return e.find(o=>o.startsWith(`${t}=`))}static getCookieFromString(e,t){if(typeof window>"u"&&!t)return"";const o=(t||document.cookie).split(";"),s=new RegExp(`^${e}=`);for(const a of o){const i=a.trim();if(s.test(i))return i.split("=")[1]}return""}static getCookieObject(e,t){const o=this.getCookie(e,t);return this.parseCookie(o)}static parseCookie(e){let t={};try{t=Sr.parse(e),this.logger.debug("cookieObj",t)}catch(o){this.logger.warn("Failed to parse cookie =>"+o)}return t}}class pp extends Ct{TPH_TOKEN_KEY="tph_token";TPH_UUID_KEY="tph_uuid";async getUsersBlogs(){const e=this.cfg,t=[];if(e.postType===ls.LOGIN_USER){if(T.isEmptyString(e.password)||T.isEmptyString(e.accessToken)||T.isEmptyString(e.saveHash))throw new Error("ç™»å½•æ¨¡å¼å¿…é¡»æ‰‹åŠ¨å¡«å†™ uuid ã€ Access Token å’Œ save hashï¼Œè¯·ä»Žæµè§ˆå™¨å¼€å‘è€…å·¥å…·èŽ·å–");const o=new et;o.blogid=e.saveHash,o.blogName="telegra.ph",o.url=e.apiUrl}else{const o="text/plain";let s={};s.origin="https://telegra.ph",s.referer="https://telegra.ph/",s["Content-Type"]=o;const a={"x-cors-headers":JSON.stringify(s)};for(const[m,w]of Object.entries(s))a[m]=w;let i,n=await this.telegraphFetch("/check","page_id=0","POST",a,o);if(this.logger.debug("checkJson =>",n),n["cors-received-headers"]){if(n.error)throw new Error("telegra.ph request error =>"+n.error);i=te.safeParse(n["cors-received-headers"],{})["Set-Cookie-Array"]}else if(n.status==200){i=n.headers["Set-Cookie"];const m=te.safeParse(n.body,{});n={...n,...m}}else throw new Error(`telegra.ph request error ${n.status}=>`+n.body);const l=new et;l.blogid=n.save_hash,l.blogName="telegra.ph",l.url=e.apiUrl;const{isUpdated:c,cookieArray:r}=Go.addCookieArray(e?.corsCookieArray??[],i,e.forceReAuth);if(this.logger.info(`æ˜¯å¦éœ€è¦åˆ·æ–°ï¼š${c}ï¼Œæ˜¯å¦å¼ºåˆ¶åˆ·æ–°ï¼š${e.forceReAuth}`),c){const m=Go.getCookieObject(i,this.TPH_UUID_KEY);l.metadataMap={username:n.author_name,password:m[this.TPH_UUID_KEY],saveHash:n.save_hash,corsCookieArray:r}}else this.logger.warn("Cookie è¿˜åœ¨æœ‰æ•ˆæœŸï¼Œå¯ç­‰å¾… Cookie è¿‡æœŸä¹‹åŽå†è¿›è¡Œæ“ä½œ",r);t.push(l)}return this.logger.debug("get telegraph cfg =>",t),t}async newPost(e,t){const o=this.cfg;let s={},a;const i=`${this.TPH_UUID_KEY}=${o.password}`;if(o.postType==ls.ANONYMOUS){if(T.isEmptyString(o.password))throw new Error(`Cookie ${this.TPH_UUID_KEY} èŽ·å–å¤±è´¥ï¼Œæ— æ³•æ–°å»ºæ–‡ç« `);a=i,this.logger.warn("å½“å‰ä¸ºåŒ¿åå‘å¸ƒ")}else{if(T.isEmptyString(o.password)||T.isEmptyString(o.accessToken))throw new Error(`Cookie ${this.TPH_UUID_KEY},${this.TPH_TOKEN_KEY} èŽ·å–å¤±è´¥ï¼Œæ— æ³•æ–°å»ºæ–‡ç« `);const g=`${this.TPH_TOKEN_KEY}=${o.accessToken}`;a=[i,g].join(";")}s.Cookie=a??"",s.origin="https://telegra.ph",s.referer="https://telegra.ph/";const n={"x-cors-headers":JSON.stringify(s)};for(const[g,v]of Object.entries(s))n[g]=v;const l=new FormData,c=on(e.description),r=new Blob([JSON.stringify(c)],{type:"text/plain"});l.append("Data",r,"content.html"),l.append("title",e.title),l.append("author",o.username),l.append("save_hash",o.saveHash),l.append("page_id","0");const m=await this.telegraphFormFetch("/save",l,n);if(m.error)throw new Error("telegra.ph å‘å¸ƒé”™è¯¯ï¼Œæ³¨æ„ï¼šåˆ‡æ¢è®¾å¤‡ï¼ˆåŒ…æ‹¬ä»ŽPCåˆ°æµè§ˆå™¨çŽ¯å¢ƒï¼‰éœ€è¦é‡æ–°éªŒè¯ï¼Œå¹¶ä¸”èŽ·å–æ–°tokenã€‚è¯¦ç»†é”™è¯¯ =>"+m.error);this.logger.debug("telegraph newPost resJson =>",m);const w={update_cookie:a,page_id:m.page_id,path:m.path,save_hash:o.saveHash};return JSON.stringify(w)}async editPost(e,t,o){const s=this.cfg,a=te.safeParse(e,{});let i={};if(T.isEmptyString(a.update_cookie))throw new Error("Cookie èŽ·å–å¤±è´¥ï¼Œæ— æ³•æ›´æ–°æ–‡ç« ");i.Cookie=a.update_cookie,i.origin="https://telegra.ph",i.referer="https://telegra.ph/";const n={"x-cors-headers":JSON.stringify(i)};for(const[w,d]of Object.entries(i))n[w]=d;const l=new FormData,c=on(t.description),r=new Blob([JSON.stringify(c)],{type:"text/plain"});l.append("Data",r,"content.html"),l.append("title",t.title),l.append("author",s.username),l.append("save_hash",a.save_hash),l.append("page_id",a.page_id);const m=await this.telegraphFormFetch("/save",l,n);if(m.error)throw new Error("telegra.ph æ›´æ–°å¤±è´¥ï¼Œæ³¨æ„ï¼šåˆ‡æ¢è®¾å¤‡ï¼ˆåŒ…æ‹¬ä»ŽPCåˆ°æµè§ˆå™¨çŽ¯å¢ƒï¼‰éœ€è¦é‡æ–°éªŒè¯ï¼Œå¹¶ä¸”èŽ·å–æ–°tokenã€‚è¯¦ç»†é”™è¯¯ =>"+m.error);return this.logger.debug("telegraph editPost resJson =>",m),!0}async deletePost(e){throw new Error("telegra.ph æš‚ä¸æ”¯æŒåˆ é™¤æ–‡ç« åŠŸèƒ½")}async getPost(e,t){const o=new Be;return o.postid=e,o}async getPreviewUrl(e){const t=te.safeParse(e,{});return(this.cfg.previewUrl??"").replace("[postid]",t?.path??"")}async telegraphFetch(e,t,o="GET",s={},a="application/json"){const i=t,n=`${this.cfg.apiUrl}${e}`;this.logger.debug("å‘ Telegraph è¯·æ±‚æ•°æ®ï¼ŒapiUrl =>",n),this.logger.debug("å‘ Telegraph è¯·æ±‚æ•°æ®ï¼Œheaders =>",s),this.logger.debug("å‘ Telegraph è¯·æ±‚æ•°æ®ï¼Œbody =>",i);const l=await this.apiFetch(n,[s],i,o,a,!0);return this.logger.debug("å‘ Telegraph è¯·æ±‚æ•°æ®ï¼ŒresJson =>",l),l??null}async telegraphFormFetch(e,t,o={}){const s=`${this.cfg.apiUrl}${e}`,a={method:"POST",headers:o,body:t};this.logger.debug("å‘ Telegraph å‘é€è¡¨å•æ•°æ®ï¼ŒapiUrl =>",s),this.logger.debug("å‘ Telegraph å‘é€è¡¨å•æ•°æ®ï¼Œoptions =>",a);const i=await this.apiFormFetch(s,[o],t,!0);if(i.error)throw new Error("telegra.ph å‘å¸ƒé”™è¯¯ï¼Œæ³¨æ„ï¼šåˆ‡æ¢è®¾å¤‡ï¼ˆåŒ…æ‹¬ä»ŽPCåˆ°æµè§ˆå™¨çŽ¯å¢ƒï¼‰éœ€è¦é‡æ–°éªŒè¯ï¼Œå¹¶ä¸”èŽ·å–æ–°tokenã€‚è¯¦ç»†é”™è¯¯ =>"+i.error);return this.logger.debug("å‘ Telegraph å‘é€è¡¨å•æ•°æ®ï¼ŒresJson =>",i),i}}var ga={};const xi=async(p,e)=>{const t=L("use-telegraph-api");t.info("Start using Telegraph API...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:i}=pe(),n=await i();if(s=te.safeParse(n[p],{}),se.isEmptyObject(s)){const l=A.emptyOrDefault(ga.VITE_TELEGRAPH_URL,"https://telegra.ph"),c=A.emptyOrDefault(ga.VITE_MIDDLEWARE_URL,fe),r=A.emptyOrDefault(ga.VITE_TELEGRAPH_TOKEN,"");s=new cp(l,r,c),t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.usernameEnabled=!0,s.cateEnabled=!1,s.tagEnabled=!1,s.postType=s.postType??ls.ANONYMOUS,s.picgoPicbedSupported=!0,s.bundledPicbedSupported=!1;const a=new pp(o,s);return t.info("Telegraph API created successfully.",s),{cfg:s,blogApi:a}};class gp extends eo{constructor(e,t,o,s,a){super(e,t,o,s,a),this.home=e,this.apiUrl=t,this.previewUrl="/post/[postid].html",this.pageType=ce.Markdown,this.showTokenTip=!1,this.allowPreviewUrlChange=!1,this.tagEnabled=!0,this.cateEnabled=!0,this.categoryType=Q.CategoryType_Multi,this.allowCateChange=!0,this.knowledgeSpaceEnabled=!1}}class dp extends bs{constructor(e,t){super(e,t),this.logger=L("typecho-api-adaptor"),this.cfg.blogid="jvue"}}var Hs={};const Mi=async(p,e)=>{const t=L("use-jvue-api");t.info("Start using Jvue API...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:i}=pe(),n=await i();if(s=te.safeParse(n[p],{}),se.isEmptyObject(s)){const l=A.emptyOrDefault(Hs.VITE_JVUE_HOME,""),c=A.emptyOrDefault(Hs.VITE_JVUE_API_URL,""),r=A.emptyOrDefault(Hs.VITE_JVUE_USERNAME,""),m=A.emptyOrDefault(Hs.VITE_JVUE_PASSWORD,""),w=A.emptyOrDefault(Hs.VITE_MIDDLEWARE_URL,fe);s=new gp(l,c,r,m,w),t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.tagEnabled=!0,s.cateEnabled=!0,s.categoryType=Q.CategoryType_Multi,s.allowCateChange=!0,s.knowledgeSpaceEnabled=!1,s.picgoPicbedSupported=!0,s.bundledPicbedSupported=!0;const a=new dp(o,s);return t.info("Jvue API created successfully.",s),{cfg:s,blogApi:a}};class up extends Yt{parentPageId;constructor(e,t,o,s){super(e,t,"",o,s),this.tokenSettingUrl="[your-confluence-host]/plugins/personalaccesstokens/usertokens.action",this.showTokenTip=!0,this.previewUrl="/spaces/[spaceKey]/pages/[postid]",this.pageType=ce.Html,this.usernameEnabled=!1,this.passwordType=xe.PasswordType_Token,this.allowPreviewUrlChange=!1,this.tagEnabled=!1,this.cateEnabled=!1,this.knowledgeSpaceEnabled=!0,this.knowledgeSpaceTitle="ç©ºé—´",this.allowKnowledgeSpaceChange=!0,this.parentPageId="",this.placeholder.knowledgeSpaceReadonlyModeTip="",this.picgoPicbedSupported=!0,this.bundledPicbedSupported=!0}}class mp extends Ct{constructor(e,t){super(e,t),this.cfg=t,this.logger=L("confluence-api-adaptor")}async getUsersBlogs(){const e=[];return(await this.getSpaces()).forEach(o=>{const s=new et;s.blogid=o.key,s.blogName=o.name,s.url=o.key,e.push(s)}),e}async newPost(e,t){const o=e.cate_slugs?.[0]??this.cfg.blogid,s=js.hasImageTag(e.description);if(this.logger.debug(`new hasImage=>${s}`),!s)return await this.createPage(e.title,e.description,o);const a=await this.createPage(e.title,e.description,o);e.postid=a;const i=js.extractImageUrls(e.description);this.logger.debug(`new imageUrls=>${i}`);let n=0;for(const c of i){if(c.startsWith("http"))continue;const r=window.location.origin,m=T.pathJoin(r,c),w=await this.baseExtendApi.readFileToBase64(m),d=Qo(w.imageBase64),g=js.getNameFromImageUrl(m),v=new rs(g,w.mimeType,d);v.post=e;const h=await this.newMediaObject(v),b=js.genImageRegex(c);e.description=e.description.replace(b,h.macro),n++}const l=`ä½¿ç”¨Confluenceè‡ªå¸¦çš„å›¾ç‰‡ä¸Šä¼ èƒ½åŠ›ï¼Œå·²æˆåŠŸä¸Šä¼ å›¾ç‰‡ ${n} å¼ `;return await this.baseExtendApi.pushMsg({msg:l,timeout:3e3}),await this.editPost(a,e,t),a}async editPost(e,t,o){const s=this.getConfluencePostidKey(e);return await this.updatePage(s.pageId,t.title,t.description,s.spaceKey)}async deletePost(e){const t=this.getConfluencePostidKey(e);return await this.deletePage(t.pageId)}async getPost(e,t){const o=this.getConfluencePostidKey(e),s=await this.getPage(o.pageId);this.logger.debug("confluence page=>",s);const a=new Be;a.title=s.title,a.description=s.body?.storage?.value||"";const i=s.space,n=[];return n.push(i.key),a.cate_slugs=n,a}async getCategories(){const e=[],t=await this.getSpaces();return t&&t.length>0&&t.forEach(o=>{const s=new Qe;s.categoryId=o.key,s.categoryName=o.name,s.description=o.name,s.categoryDescription=o.name,e.push(s)}),e}async newMediaObject(e,t){let o;const s=e.post,i=this.getConfluencePostidKey(s.postid).pageId;if(!i)throw new Error(`Error uploading image to confluence: ${Xi.NO_PAGE_ID_FOUND_IN_MEDIA_MACRO_MODE}`);let n;try{const c=e.bits;this.logger.debug("newMediaObject on confluence =>",e);const r=`/rest/api/content/${i}/child/attachment`,m=new Blob([c],{type:e.type}),w=new FormData;w.append("id",i),w.append("file",m,e.name),w.append("minorEdit","false"),o=await this.confluenceMediaFetch(r,w),this.logger.debug("confluence upload media finished=>",o)}catch(c){const r=c.message;if(r.includes("same file name as an existing attachment")){const m=["png","jpg","jpeg","gif","bmp","webp","svg"],w=new RegExp(`attachment: (\\S+\\.(?:${m.join("|")}))`,"i"),d=r.match(w);if(d)n=d[1];else{const g=r.indexOf("attachment: ")+12,v=r.indexOf(". Log referral");g>11&&v>g&&(n=r.substring(g,v))}this.logger.debug("get duplicate fileï¼š"+n)}else throw this.logger.error("Error uploading image to confluence:",c),new Error("Error uploading image to confluence:"+c.toString())}if(this.logger.debug("newMediaObject success, start update metadata to page=>",o),!n){const c=o.results||[];if(c.length<=0)throw new Error("Error uploading image to confluence: no attachment id found");n=c[0].title}return{macro:`<p><ac:image ac:height="250"><ri:attachment ri:filename="${n}" /></ac:image></p>`}}async getPreviewUrl(e){const t=this.cfg.previewUrl??"",o=this.getConfluencePostidKey(e),s=o.pageId,a=o.spaceKey??this.cfg.blogid??"";return t.replace("[postid]",s).replace("[spaceKey]",a)}async getSpaces(){const e="/rest/api/space",t={limit:100},o=await this.confluenceRequest(e,t,"GET");return this.logger.debug("confluence spaces=>",o),o.results||[]}async createPage(e,t,o){const s="/rest/api/content",a=o||this.cfg.blogid,i=o==this.cfg.blogid?this.cfg.parentPageId?.trim():void 0,n=this.normalizeContentForConfluence(t,e),l={type:"page",title:e,space:{key:a},body:{storage:{value:n,representation:"storage"}}};i&&(l.ancestors=[{id:i}]);const c=await this.confluenceRequest(s,l,"POST");if(this.logger.debug("confluence createPage=>",c),!c||!c.id)throw new Error("è¯·æ±‚ Confluence API å¼‚å¸¸");return a?`${c.id}_${a}`:`${c.id}`}async getPagesBySpace(e){const t="/rest/api/content",o={spaceKey:e,type:"page",limit:200,expand:"ancestors"},s=await this.confluenceRequest(t,o,"GET");return this.logger.debug("confluence pages list=>",s),(s?.results??[]).map(a=>({id:a.id,title:a.title}))}async updatePage(e,t,o,s){const i=(await this.getPage(e)).version.number,n=`/rest/api/content/${e}`,l=this.normalizeContentForConfluence(o,t),c={id:e,type:"page",title:t,version:{number:i+1},body:{storage:{value:l,representation:"storage"}}};if(!await this.confluenceRequest(n,c,"PUT"))throw new Error("è¯·æ±‚ Confluence API å¼‚å¸¸");return!0}async getPage(e){const t=`/rest/api/content/${e}`,o={expand:"body.storage,version,space"},s=await this.confluenceRequest(t,o,"GET");if(!s)throw new Error("è¯·æ±‚ Confluence API å¼‚å¸¸");return s}async deletePage(e){const t=`/rest/api/content/${e}`;if(!await this.confluenceRequest(t,{},"DELETE"))throw new Error("è¯·æ±‚ Confluence API å¼‚å¸¸");return!0}getConfluencePostidKey(e){let t,o;if(e.indexOf("_")>0){const s=e.split("_");t=s[0],o=s[1]}else t=e;return{pageId:t,spaceKey:o}}async confluenceRequest(e,t,o="POST"){const s=`${this.cfg.apiUrl}${e}`;this.logger.debug("å‘ Confluence è¯·æ±‚æ•°æ®ï¼ŒapiUrl =>",s),this.logger.debug("å‘ Confluence è¯·æ±‚æ•°æ®ï¼Œparams =>",t);let a=s,i;if(o==="GET"&&t&&!se.isEmptyObject(t)){const n=new URLSearchParams(t).toString();a=`${s}?${n}`}else o!=="GET"&&(i=se.isEmptyObject(t)?void 0:JSON.stringify(t));try{const n="application/json",l={"Content-Type":n,Authorization:`Bearer ${this.cfg.password}`,"X-Atlassian-Token":"no-check"};this.logger.debug("å‘ Confluence è¯·æ±‚æ•°æ®ï¼ŒapiUrl =>",s),this.logger.debug("å‘ Confluence è¯·æ±‚æ•°æ®ï¼Œparams =>",i);const c=await this.apiFetch(a,[l],i,o,n,!0,"base64");return this.logger.debug("å‘ Confluence è¯·æ±‚æ•°æ®ï¼ŒresJson =>",c),c}catch(n){throw this.logger.error("Confluence API è¯·æ±‚å¼‚å¸¸ =>",n),n}}async confluenceMediaFetch(e,t=void 0){try{const o="application/json",s=`${this.cfg.apiUrl}${e}`,a={Authorization:`Bearer ${this.cfg.password}`,"X-Atlassian-Token":"no-check"};return this.logger.debug(`å‘ Confluence è¯·æ±‚æ•°æ®ä¸Šä¼ æ–‡ä»¶ï¼ŒapiUrl => header:${a}`,s),await this.apiFetch(s,[a],t,"POST",o,!0,"base64")}catch(o){throw this.logger.error("Confluence ä¸Šä¼ æ–‡ä»¶ API è¯·æ±‚å¼‚å¸¸ =>",o),o}}normalizeContentForConfluence(e,t){if(!e)return e;try{const o=is(e,{decodeEntities:!1,xmlMode:!0});if(t){const i=t.trim(),n=["h1","h2"];for(const l of n){const c=o(l).filter((r,m)=>o(m).text().trim()===i).first();if(c.length>0){c.remove();break}}}return o("pre").each((i,n)=>{const l=o(n),c=l.children("code").first(),r=[c.attr("data-language"),c.attr("data-subtype"),c.attr("data-info"),l.attr("data-language"),l.attr("data-subtype"),l.attr("data-info"),c.attr("class"),l.attr("class")];let m="";for(const v of r){if(!v)continue;const h=v.match(/language-([\w#+-]+)/i);if(h){m=h[1];break}if(/^[\w#+-]+$/i.test(v)){m=v;break}}const d=((c.length>0?c.text():l.text())?.replace(/\r\n/g,`
`)??"").replace(/]]>/g,"]]]]><![CDATA[>"),g=['<ac:structured-macro ac:name="code">',m?`<ac:parameter ac:name="language">${m}</ac:parameter>`:"",`<ac:plain-text-body><![CDATA[${d}]]></ac:plain-text-body>`,"</ac:structured-macro>"];l.replaceWith(g.join(""))}),(o.root().html()??e).replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/<br>/g,"<br />")}catch(o){return this.logger.warn("Failed to normalize Confluence content, fallback to original",o),e}}}const gl={TOKEN_SETTING_URL:"plugins/personalaccesstokens/usertokens.action"};var da={};const Bo=async(p,e)=>{const t=L("use-confluence-api");t.info("Start using Confluence API...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:i}=pe(),n=await i();if(s=te.safeParse(n[p],{}),se.isEmptyObject(s)){const l=A.emptyOrDefault(da.VITE_CONFLUENCE_HOME,""),c=A.emptyOrDefault(da.VITE_CONFLUENCE_AUTH_TOKEN,""),r=A.emptyOrDefault(da.VITE_MIDDLEWARE_URL,fe);s=new up(l,l,c,r),s.picbedService=Je.Bundled,t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.tagEnabled=!1,s.cateEnabled=!1,s.knowledgeSpaceEnabled=!0,s.knowledgeSpaceType=Q.CategoryType_Single,s.allowKnowledgeSpaceChange=!0,s.parentPageId=s.parentPageId??"",s.tokenSettingUrl=T.pathJoin(s.home,gl.TOKEN_SETTING_URL),s.previewUrl="/spaces/[spaceKey]/pages/[postid]",s.picgoPicbedSupported=!0,s.bundledPicbedSupported=!0;const a=new mp(o,s);return t.info("Confluence API created successfully.",s),{cfg:s,blogApi:a}};class dn{static METHOD_GET_USERS_BLOGS="blogger.getUsersBlogs";static METHOD_DELETE_POST="blogger.deletePost"}class hp extends bs{constructor(e,t){super(e,t),this.logger=L("wordpress-dot-com-api-adaptor"),this.cfg.blogid="wordpress-dot-com"}async getUsersBlogs(){let e=[];return e=await this.metaweblogCall(dn.METHOD_GET_USERS_BLOGS,[this.cfg.blogid,this.cfg.username,this.cfg.password]),this.logger.debug("getUsersBlogs=>",e),e}async deletePost(e){const t=await this.metaweblogCall(dn.METHOD_DELETE_POST,[this.cfg.blogid,e,this.cfg.username,this.cfg.password,!1]);return this.logger.debug("ret=>",t),t}async metaweblogCall(e,t){return await this.proxyXmlrpc(this.cfg.apiUrl,e,t,!0)}}var _o={};const Di=async(p,e)=>{const t=L("use-wordpress-dot-com-api");t.info("Start using Wordpress.com API...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:i}=pe(),n=await i();if(s=te.safeParse(n[p],{}),se.isEmptyObject(s)){const l=A.emptyOrDefault(_o.VITE_WORDPRESS_API_URL,"https://[username].wordpress.com"),c=A.emptyOrDefault(_o.VITE_WORDPRESS_USERNAME,""),r=A.emptyOrDefault(_o.VITE_WORDPRESS_AUTH_TOKEN,""),m=A.emptyOrDefault(_o.VITE_MIDDLEWARE_URL,fe);s=new Bn(l,c,r,m),t.info("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.tagEnabled=!0,s.cateEnabled=!0,s.categoryType=Q.CategoryType_Multi,s.allowCateChange=!0,s.knowledgeSpaceEnabled=!1,s.picgoPicbedSupported=!0,s.bundledPicbedSupported=!0;const a=new hp(o,s);return t.info("Wordpress.com API created successfully.",s),{cfg:s,blogApi:a}};class fp extends Qt{logoutUrl;constructor(e,t){super(e,e,"","",t),this.logoutUrl=`${e}/logout`,this.previewUrl="/archives/{slug}",this.pageType=ce.Html,this.usernameEnabled=!1,this.showTokenTip=!1,this.allowPreviewUrlChange=!0,this.tagEnabled=!0,this.cateEnabled=!0,this.categoryType=Q.CategoryType_Multi,this.allowCateChange=!0,this.knowledgeSpaceEnabled=!1}}class yp extends pl{}class bp extends Rt{async getMetaData(){const e=await this.halowebFetch("/actuator/globalinfo"),t=!T.isEmptyString(e?.siteTitle);return this.logger.info(`get haloweb metadata finished, flag => ${t}`),{flag:t,uid:"",title:"",avatar:"",type:"haloweb",displayName:"Haloç½‘é¡µç‰ˆ",supportTypes:["markdown","html"],home:e.externalUrl,icon:"https://g.csdnimg.cn/static/logo/favicon32.ico"}}async getUsersBlogs(){const e=[];return(await this.getHaloCategories()).forEach(o=>{const s=new et;s.blogid=o.spec.slug,s.blogName=o.spec.displayName,s.url=o.status.permalink,e.push(s)}),this.logger.debug("get halo categories =>",e),e}async getPost(e,t){const s=this.getHaloPostidKey(e).name,a=await this.getHaloPost(s);this.logger.debug("getPost haloPost =>",{name:s,haloPost:a});const i=new Be;return i.title=a.post.spec.title,i.wp_slug=a.post.spec.slug,i.shortDesc=a.post.spec.excerpt.raw,i.tags_slugs=a.post.spec.tags.join(","),i.cate_slugs=a.post.spec.categories,i}async newPost(e,t){const o={post:{spec:{title:"",slug:"",template:"",cover:"",deleted:!1,publish:!1,publishTime:void 0,pinned:!1,allowComment:!0,visible:"PUBLIC",priority:0,excerpt:{autoGenerate:!0,raw:""},categories:[],tags:[],htmlMetas:[]},apiVersion:"content.halo.run/v1alpha1",kind:"Post",metadata:{name:"",annotations:{}}},content:{raw:"",content:"",rawType:this.cfg.pageType}};this.cfg.pageType==="markdown"?o.content.raw=e.markdown:o.content.raw=zt.addIdToH1_H6(e.html),o.content.content=zt.addIdToH1_H6(e.html),T.isEmptyString(e.shortDesc)?o.post.spec.excerpt.autoGenerate=!0:(o.post.spec.excerpt.autoGenerate=!1,o.post.spec.excerpt.raw=e.shortDesc),o.post.metadata.name=fs.randomUuid(),o.post.spec.title=e.title,o.post.spec.slug=e.wp_slug;try{if(e.categories&&e.categories.length>0){const i=await this.getCategoryNames(e.categories);o.post.spec.categories=i}if(!T.isEmptyString(e.mt_keywords)){const i=e.mt_keywords.split(","),n=await this.getTagNames(i);o.post.spec.tags=n}}catch(i){throw i}o.post.spec.publishTime=e.dateCreated.toISOString();const s=await this.halowebFetch("/apis/api.console.halo.run/v1alpha1/posts",o,"POST");if(this.logger.debug("halo newPost res =>",s),!s?.metadata?.name)throw new Error("Halo æ–‡ç« å‘å¸ƒå¤±è´¥");this.logger.debug("halo æ–‡ç« è‰ç¨¿å®Œæˆ"),await this.halowebFetch(`/apis/api.console.halo.run/v1alpha1/posts/${o.post.metadata.name}/publish`,{},"PUT"),this.logger.debug("halo æ–‡ç« å‘å¸ƒå®Œæˆ");const a=new yp(s.spec.slug,s.metadata.name,e.dateCreated);return this.logger.debug("postidMeta =>",a),JSON.stringify(a)}async editPost(e,t,o){let s=!1;try{const i=this.getHaloPostidKey(e).name;let n=await this.getHaloPost(i);if(this.logger.debug("get latest halo post =>",{name:i,haloPost:n}),!n.post)throw new Error("èŽ·å–æ–‡ç« ä¿¡æ¯å¤±è´¥ï¼Œå¦‚æžœæ–‡ç« åˆ é™¤ï¼Œè¯·å¼ºåˆ¶åˆ é™¤è§£é™¤å…³è”");if(n.content.rawType==="markdown"?n.content.raw=t.markdown:n.content.raw=zt.addIdToH1_H6(t.html),n.content.content=zt.addIdToH1_H6(t.html),T.isEmptyString(t.shortDesc)?n.post.spec.excerpt.autoGenerate=!0:(n.post.spec.excerpt.autoGenerate=!1,n.post.spec.excerpt.raw=t.shortDesc),n.post.metadata.name=i,n.post.spec.title=t.title,n.post.spec.slug=t.wp_slug,t.categories&&t.categories.length>0){const l=await this.getCategoryNames(t.categories);n.post.spec.categories=l}if(!T.isEmptyString(t.mt_keywords)){const l=t.mt_keywords.split(","),c=await this.getTagNames(l);n.post.spec.tags=c}n.post.spec.publishTime=t.dateCreated.toISOString(),await this.halowebFetch(`/apis/content.halo.run/v1alpha1/posts/${i}`,n.post,"PUT"),await this.halowebFetch(`/apis/api.console.halo.run/v1alpha1/posts/${i}/content`,n.content,"PUT"),await this.halowebFetch(`/apis/api.console.halo.run/v1alpha1/posts/${n.post.metadata.name}/publish`,{},"PUT"),this.logger.debug("halo æ–‡ç« å‘å¸ƒå®Œæˆ")}catch(a){this.logger.error("Haloæ–‡ç« æ›´æ–°å¤±è´¥",a)}return s}async getPreviewUrl(e){const t=this.getHaloPostidKey(e);return this.cfg.previewUrl.replace("{slug}",t.slug).replace("{name}",t.name).replace("{year}",t.year).replace("{month}",t.month).replace("{day}",t.day)}async deletePost(e){const o=`/apis/api.console.halo.run/v1alpha1/posts/${this.getHaloPostidKey(e).name}/recycle`,s=await this.halowebFetch(o,{},"PUT");if(this.logger.debug("halo deletePost res =>",s),!s?.metadata?.name)throw new Error("Halo æ–‡ç« åˆ é™¤å¤±è´¥");return!0}async getCategories(){const e=[],t=await this.getHaloCategories();return t&&t.length>0&&(t.forEach(o=>{const s=new Qe;s.categoryId=o.spec.slug,s.categoryName=o.spec.displayName,s.description=o.spec.displayName,s.categoryDescription=o.spec.description,e.push(s)}),this.logger.debug("get halo categories =>",e)),e}async getTags(){return(await this.getHaloTags()).map(t=>{const o=new zo;return o.tagId=t.spec.slug,o.tagName=t.spec.displayName,o.description=t.spec.displayName,o})}async newMediaObject(e,t){let o;try{const n=e.bits;this.logger.debug("newMediaObject on halo =>",e);const{FormData:l,Blob:c}=ns.getFormData(this.appInstance),r="/apis/api.console.halo.run/v1alpha1/attachments/upload",m=new c([n],{type:e.type}),w=new l;if(w.append("file",m,e.name),w.append("policyName","default-policy"),w.append("groupName",""),w.append("file",m,e.name),o=await this.halowebFormFetch(r,w),this.logger.debug("halo upload success, res =>",o),!o.metadata)throw new Error("Haloå›¾ç‰‡ä¸Šä¼ å¤±è´¥ =>"+e.name)}catch(n){throw this.logger.error("Error uploading image to halo:",n),new Error("Error uploading image to halo:"+n.toString())}const s=o?.spec?.displayName,a=o?.metadata?.name,i=this.cfg.home+(o?.metadata?.annotations["storage.halo.run/uri"]??"");return{attachment_id:s,date_created_gmt:new Date,parent:0,link:i,title:e.name,caption:"",description:"",metadata:{width:0,height:0,file:"",filesize:0,sizes:[]},type:e.type,thumbnail:"",id:a,file:e.name,url:i}}getHaloPostidKey(e){return te.safeParse(e,{})}async getCategoryNames(e){const t=await this.getHaloCategories(),o=e.filter(i=>!t.find(n=>n.spec.displayName===i)),s=await Promise.all(o.map(async(i,n)=>{const l=await Js.getPageSlug(i,!0);return await this.halowebFetch("/apis/content.halo.run/v1alpha1/categories",{spec:{displayName:i,slug:l,description:"",cover:"",template:"",priority:t.length+n,children:[]},apiVersion:"content.halo.run/v1alpha1",kind:"Category",metadata:{name:"",generateName:"category-"}},"POST")})),a=e.map(i=>{const n=t.find(l=>l.spec.displayName===i);return n?n.metadata.name:void 0}).filter(Boolean);return this.logger.debug("newCategories =>",s),[...a,...s.map(i=>i.metadata.name)]}async getTagNames(e){const t=await this.getHaloTags(),o=e.filter(i=>!t.find(n=>n.spec.displayName===i)),s=await Promise.all(o.map(async i=>{const n=await Js.getPageSlug(i,!0);return await this.halowebFetch("/apis/content.halo.run/v1alpha1/tags",{spec:{displayName:i,slug:n,color:"#ffffff",cover:""},apiVersion:"content.halo.run/v1alpha1",kind:"Tag",metadata:{name:"",generateName:"tag-"}},"POST")})),a=e.map(i=>{const n=t.find(l=>l.spec.displayName===i);return n?n.metadata.name:void 0}).filter(Boolean);return this.logger.debug("newTags =>",s),[...a,...s.map(i=>i.metadata.name)]}async getHaloCategories(){return(await this.halowebFetch("/apis/content.halo.run/v1alpha1/categories",{},"GET")).items}async getHaloPost(e){try{const t=await this.halowebFetch(`/apis/content.halo.run/v1alpha1/posts/${e}`,{},"GET"),o=await this.halowebFetch(`/apis/api.console.halo.run/v1alpha1/posts/${e}/head-content`,{},"GET");return Promise.resolve({post:t,content:o})}catch{return Promise.resolve(void 0)}}async getHaloTags(){return(await this.halowebFetch("/apis/content.halo.run/v1alpha1/tags",{},"GET")).items}async halowebFetch(e,t,o="GET",s={},a="application/json"){const i=new Map;i.set("Cookie",this.cfg.password);const n={...Object.fromEntries(i),...s},l=`${this.cfg.apiUrl}${e}`;this.logger.debug("å‘ Halo è¯·æ±‚æ•°æ®ï¼ŒapiUrl =>",l);const c=se.isEmptyObject(t)?"":JSON.stringify(t);this.logger.debug("å‘Haloç½‘é¡µç‰ˆè¯·æ±‚æ•°æ®ï¼ŒapiUrl =>",l),this.logger.debug("å‘Haloç½‘é¡µç‰ˆè¯·æ±‚æ•°æ®ï¼Œheaders =>",s),this.logger.debug("å‘Haloç½‘é¡µç‰ˆè¯·æ±‚æ•°æ®ï¼Œbody =>",c);const r=await this.webFetch(l,[n],c,o,a,!0,"base64");return this.logger.debug("å‘Haloç½‘é¡µç‰ˆè¯·æ±‚æ•°æ®ï¼ŒresJson =>",r),r??null}async halowebFormFetch(e,t,o={}){const s=`${this.cfg.apiUrl}${e}`,a=new Map;a.set("Cookie",this.cfg.password);const i={...Object.fromEntries(a),...o},n={method:"POST",headers:i,body:t};this.logger.debug("å‘Haloç½‘é¡µç‰ˆå‘é€è¡¨å•æ•°æ®ï¼ŒapiUrl =>",s),this.logger.debug("å‘Haloç½‘é¡µç‰ˆå‘é€è¡¨å•æ•°æ®ï¼Œoptions =>",n);const l=await this.webFormFetch(s,[i],t);if(l.error)throw new Error("Haloç½‘é¡µç‰ˆè¡¨å•æäº¤é”™è¯¯ã€‚è¯¦ç»†é”™è¯¯ =>"+l.error);return this.logger.debug("å‘Haloç½‘é¡µç‰ˆå‘é€è¡¨å•æ•°æ®ï¼ŒresJson =>",l),l}}var un={};const wp=p=>{const t=te.safeParse(p[Me],{})?.totalCfg||[];return Zs(t,To.PRE_CUSTOM_HALOWEB)},Oi=async(p,e)=>{const t=L("use-haloweb-web");t.info("Start using Haloweb WebAuth...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:i}=pe(),n=await i(),l=wp(n);s=te.safeParse(n[p],{});const c=new URL(l.authUrl);if(se.isEmptyObject(s)){const m=A.emptyOrDefault(un.VITE_MIDDLEWARE_URL,fe);s=new fp(c.origin,m),s.picbedService=Je.Bundled,t.debug("Configuration is empty, using default environment variables.")}else(c.origin!==s.home||c.origin!==s.apiUrl)&&(s.home=c.origin,s.apiUrl=c.origin,t.info("authUrl has changed, update cfg.home and cfg.apiUrl")),t.info("Using configuration from settings...");const r=A.emptyOrDefault(un.VITE_MIDDLEWARE_URL,fe);T.isEmptyString(s.middlewareUrl)&&(s.middlewareUrl=r),T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.tagEnabled=!0,s.cateEnabled=!0,s.categoryType=Q.CategoryType_Multi,s.allowCateChange=!0,s.knowledgeSpaceEnabled=!1,s.picgoPicbedSupported=!0,s.bundledPicbedSupported=!0;const a=new bp(o,s);return{cfg:s,webApi:a}};class _p extends Qt{logoutUrl;constructor(e,t){super("https://www.bilibili.com/opus","https://api.bilibili.com","",e,t),this.logoutUrl="https://passport.bilibili.com/login",this.previewUrl="/[postid]",this.pageType=ce.Markdown,this.usernameEnabled=!1,this.passwordType=xe.PasswordType_Cookie,this.tagEnabled=!1,this.cateEnabled=!1,this.knowledgeSpaceEnabled=!0,this.knowledgeSpaceTitle="æ–‡é›†",this.knowledgeSpaceType=Q.CategoryType_Single,this.allowKnowledgeSpaceChange=!0,this.knowledgeSpaceEnabled=!1,this.picgoPicbedSupported=!1,this.bundledPicbedSupported=!0,this.picbedService=Je.Bundled}}class vp{static logger=L("bilibili-md-util");static md2bilbiliNodes(e){const{lute:t,Lute:o}=Nn.getInstance();this.logger.debug("lute instance=>",t);const s=te.safeParse(t.RenderJSON(e),{});this.logger.debug("lute json=>",JSON.stringify(s));const a=[],i=[];return this.processNode(s,a,i),{ops:a,content:{paragraphs:i}}}static processNode(e,t,o){const{Type:s,Children:a=[]}=e;switch(s){case"NodeDocument":this.processDocumentNode(e,t,o);break;case"NodeParagraph":this.processParagraphNode(e,t,o);break;case"NodeList":this.processListNode(e,t,o);break;case"NodeListItem":this.processListItemNode(e,t,o);break;case"NodeHeading":this.processHeadingNode(e,t,o);break;case"NodeText":this.processTextNode(e,t,o);break;case"NodeStrong":this.processStrongNode(e,t,o);break;case"NodeImage":this.processImageNode(e,t,o);break;case"NodeCodeBlock":this.processCodeBlockNode(e,t,o);break;default:a.forEach(i=>this.processNode(i,t,o))}}static processDocumentNode(e,t,o){e.Children?.forEach(s=>this.processNode(s,t,o))}static processHeadingNode(e,t,o){const s=Math.min(e.HeadingLevel||2,2),a=e.Children?.map(n=>n.Type==="NodeText"&&n.Data||"").join("")||"";t.push({insert:a}),t.push({attributes:{header:s},insert:`
`});const i={para_type:1,text:{nodes:[{node_type:1,word:{words:a,font_size:s>1?22:24,font_level:s>1?"xLarge":"xxLarge",style:{bold:!0}}}]}};o.push(i)}static processListNode(e,t,o){e.Children?.forEach(s=>this.processNode(s,t,o))}static processListItemNode(e,t,o){const s=e.Children?.map(i=>i.Type==="NodeParagraph"?i.Children?.map(n=>n.Type==="NodeText"&&n.Data||"").join(""):"").join("")||"";t.push({insert:`${s}
`});const a={para_type:1,text:{nodes:[{node_type:1,word:{words:s,font_size:24,font_level:"xxLarge",style:{bold:!0}}}]}};o.push(a)}static processParagraphNode(e,t,o){const s=[];e.Children?.forEach(i=>{this.processNode(i,t,s)});const a={para_type:1,text:{nodes:[]},pic:{pics:[],style:1}};s.forEach(i=>{i.pic?(a.pic.style=i.pic.style,a.pic.pics.push(...i.pic.pics)):i.text?a.text.nodes.push(...i.text.nodes):this.logger.warn("unknown node type",i)}),o.push(a)}static processTextNode(e,t,o){const s=e.Data||"";t.push({insert:s});const a={para_type:1,text:{nodes:[{node_type:1,word:{words:s,font_size:17,font_level:"regular",style:{}}}]}};o.push(a)}static processStrongNode(e,t,o){const s=e.Children?.map(i=>i.Type==="NodeText"&&i.Data||"").join("")||"";t.push({insert:s,attributes:{bold:!0}});const a={para_type:1,text:{nodes:[{node_type:1,word:{words:s,font_size:17,font_level:"regular",style:{bold:!0}}}]}};o.push(a)}static processImageNode(e,t,o){const s=e.Children?.find(n=>n.Type==="NodeLinkDest")?.Data||"",a=e.Children?.find(n=>n.Type==="NodeLinkText")?.Data||"image";t.push({insert:`
`,attributes:{"native-image":{alt:a,url:s,width:500,height:500,size:55183,status:"loaded"}}});const i={para_type:2,pic:{style:1,pics:[{url:s,width:500,height:500,size:53.8896484375}]}};o.push(i)}static processCodeBlockNode(e,t,o){const s=e.Children?.find(n=>n.Type==="NodeCodeBlockFenceInfoMarker")?.Data||"",a=e.Children?.find(n=>n.Type==="NodeCodeBlockCode")?.Data||"";t.push({attributes:{blockquote:!0},insert:s+`
`+a+`
`});const i={para_type:4,text:{nodes:[{node_type:1,word:{words:a,font_size:17,font_level:"regular",style:{}}}]}};o.push(i)}}class Ls{static genUploadId(e=0){const t=Math.floor(Date.now()/1e3),o=Math.floor(Math.random()*1e4);return`${e}_${t}_${o}`}static parseMd(e){return vp.md2bilbiliNodes(e)}}class Pp extends Rt{bilibiliMetaDataCfg={};async getMetaData(){const e=await this.bilibiliFetch("https://member.bilibili.com/x/web/elec/user"),t=e.code===0;return this.logger.info(`get bilibili metadata finished, flag => ${t}`),{flag:t,uid:e.data.mid,title:e.data.mid,avatar:"",type:"bilibili",displayName:"å“”å“©å“”å“©",supportTypes:["markdown","html"],home:"https://member.bilibili.com/platform/home",icon:"https://static.hdslb.com/images/favicon.ico"}}async getUsersBlogs(){let e=[];const t=await this.bilibiliFetch("/x/article/creative/list/all",void 0,void 0,"GET","application/json",!1,!0);this.logger.debug("get bilibili lists res =>",t);const o=t?.data?.lists;return o&&o.length>0&&o.forEach(s=>{const a=new et;a.blogid=s.id,a.blogName=s.name,a.url=`https://www.bilibili.com/read/readlist/rl${s.id}`,e.push(a)}),this.logger.debug("getUsersBlogs=>",e),e}async preEditPost(e,t,o){const s=await super.preEditPost(e,t,o),a=o.dynCfg,i=o.setting[a.platformKey];return this.logger.debug("preEditPost bilibiliMetaDataCfg =>",i),this.bilibiliMetaDataCfg=i,s}async addPost(e){const t=this.bilibiliMetaDataCfg.metadata.uid;this.logger.debug("get userId from preEditPost=>",t);const o=Ls.genUploadId(t);this.logger.debug("bilibili before parse, md=>",e.markdown);const s=Ls.parseMd(e.markdown);this.logger.debug("bilibili add post blibiliDatas=>",s);const a=JSON.stringify({raw_content:JSON.stringify({ops:s.ops}),opus_req:{upload_id:o,opus:{opus_source:2,title:e.title,content:s.content,article:{category_id:15,list_id:0,originality:0,reproduced:0,biz_tags:[]},pub_info:{}},scene:12,meta:{app_meta:{from:"create.article.web",mobi_app:"web"}},option:{private_pub:2}}});this.logger.debug("bilibili after parse, params=>",a);const i=await this.bilibiliFetch("/x/dynamic/feed/create/opus",{},a,"POST","application/json",!1,!0);if(this.logger.debug("bilibili add post res=>",i),i?.code!==0)throw new Error(`å“”å“©å“”å“©æ–‡ç« å‘å¸ƒå¤±è´¥ï¼Œå¯èƒ½åŽŸå› ï¼š${i?.code} ${i?.message}`);return{status:"success",post_id:JSON.stringify(i.data)}}async editPost(e,t,o){const s=this.bilibiliMetaDataCfg.metadata.uid,a=Ls.genUploadId(s);this.logger.debug("bilibili before parse, md=>",t.markdown);const i=Ls.parseMd(t.markdown);this.logger.debug("bilibili add post blibiliDatas=>",i);const n=JSON.stringify({raw_content:JSON.stringify({ops:i.ops}),opus_req:{upload_id:a,opus:{opus_source:2,title:t.title,content:i.content,article:{category_id:15,list_id:0,originality:0,reproduced:0,biz_tags:[]},pub_info:{}},scene:12,meta:{app_meta:{from:"create.article.web",mobi_app:"web"}},option:{}},dyn_id_str:this.getDynId(e)});this.logger.debug("bilibili after parse, params=>",n);const l=await this.bilibiliFetch("/x/dynamic/feed/edit/opus",{},n,"POST","application/json",!1,!0);if(this.logger.debug("bilibili edit post res=>",l),l?.code!==0){if(l?.code===37419)return await this.addDraft(t),this.logger.warn("Bç«™æ–‡ç« ç¼–è¾‘æ¬¡æ•°ç”¨å°½ï¼Œå·²è‡ªåŠ¨ä¿å­˜ä¸ºè‰ç¨¿ï¼Œæ˜Žå¤©å¯ç»§ç»­æäº¤"),X.warning("Bç«™æ–‡ç« ç¼–è¾‘æ¬¡æ•°ç”¨å°½ï¼Œå·²è‡ªåŠ¨ä¿å­˜ä¸ºè‰ç¨¿ï¼Œæ˜Žå¤©å¯ç»§ç»­æäº¤"),!0;throw new Error(`å“”å“©å“”å“©æ–‡ç« æ›´æ–°å¤±è´¥ï¼Œå¯èƒ½åŽŸå› ï¼š${l?.code} ${l?.message}`)}return!0}async deletePost(e){const t=this.getPostMeta(e),o=JSON.stringify({dyn_id_str:t.dyn_id_str,dyn_type:t.dyn_type,rid_str:t.dyn_rid.toString()}),s=await this.bilibiliFetch("/x/dynamic/feed/operate/remove",{},o,"POST","application/json",!1,!0);if(this.logger.debug("bilibili delete post res=>",s),s?.code!==0)throw new Error(`å“”å“©å“”å“©æ–‡ç« åˆ é™¤å¤±è´¥ï¼Œå¯èƒ½åŽŸå› ï¼š${s?.code} ${s?.message}`);return!0}async getPost(e){const t=this.getDynReadId(e),o=await this.bilibiliFetch(`/x/article/creative/article/view?aid=${t}`,void 0,void 0,"GET","application/json",!1,!0);this.logger.debug("get bilibili post =>",o);const s=new Be;if(o?.code===0){const a=o?.data;s.postid=e,s.title=a.title,s.categories=[a.list.name]}return s}async getPreviewUrl(e){const t=this.getDynId(e);return this.cfg.previewUrl.replace(/\[postid]/g,t)}async getCategories(){const e=[],t=await this.bilibiliFetch("/x/article/creative/list/all",void 0,void 0,"GET","application/json",!1,!0);if(this.logger.debug("get bilibili lists =>",t),t?.code===0){const o=t.data.lists;o&&o.length>0&&o.forEach(s=>{const a=new Qe;a.categoryId=s.id,a.categoryName=s.name,a.description=s.summary,a.categoryDescription=s.summary,e.push(a)})}return e}async uploadFile(e){const t=new Blob([e.bits],{type:e.type}),o=e.name;if(this.logger.debug(`bilibili start uploadFile ${o}=>`,t),t instanceof Blob){const s="/x/article/creative/article/upcover",a=await ys(t),i=new Blob([a],{type:t.type}),n=new FormData;n.append("binary",i,o),n.append("filename",o);const l=await this.bilibiliFormFetch(s,n);if(this.logger.debug("bilibili uploadFile res=>",l),l?.code!=0)throw this.logger.error(`å“”å“©å“”å“©å›¾ç‰‡ä¸Šä¼ å¤±è´¥ï¼Œå¯èƒ½åŽŸå› ï¼š${l?.code} ${l?.message}`),new Error(`å“”å“©å“”å“©å›¾ç‰‡ä¸Šä¼ å¤±è´¥ï¼Œå¯èƒ½åŽŸå› ï¼š${l?.code} ${l?.message}`);const c=l.data.url;return{id:c,object_key:c,url:c}}return{}}getDynId(e){return this.getPostMeta(e)?.dyn_id_str}getDynReadId(e){return this.getPostMeta(e)?.dyn_rid}getPostMeta(e){return te.safeParse(e,{})}async addDraft(e){this.logger.debug("bilibili before parse, md=>",e.markdown);const t=Ls.parseMd(e.markdown);this.logger.debug("bilibili add post blibiliDatas=>",t);const o={type:3,title:e.title,banner_url:"",content:JSON.stringify({ops:t.ops}),summary:"",words:3,category:15,list_id:0,tid:3,reprint:0,tags:[],image_urls:[],origin_image_urls:[],media_id:"",spoiler:"",original:0,top_video_bvid:"",up_reply_closed:0,comment_selected:0,private_pub:2},s=new FormData;for(const i in o)s.append(i,o[i]??"");const a=await this.bilibiliFormFetch("/x/article/creative/draft/addupdate",s);this.logger.debug("bilibili add draft res=>",a)}async bilibiliFetch(e,t={},o=void 0,s="GET",a="application/json",i=!0,n=!1){const l=Go.getCookieFromString("bili_jct",this.cfg.password),c=i?e:T.pathJoin(this.cfg.apiUrl,e),r=n?Ot.setUrlParameter(c,"csrf",l):c,m=new Map;m.set("Cookie",this.cfg.password);const w={...Object.fromEntries(m),"User-Agent":Ft.HEADERS.MACOS_CHROME["User-Agent"],...t},d=o,g={method:s,headers:w,body:o};return this.logger.debug("bilibili url =>",r),this.logger.debug("bilibili requestOptions =>",g),await this.webFetch(r,[w],d,s,a,!0,"base64","text")}async bilibiliFormFetch(e,t){const o=T.pathJoin(this.cfg.apiUrl,e);new Map().set("Cookie",this.cfg.password);const a={Cookie:this.cfg.password,"User-Agent":Ft.HEADERS.MACOS_CHROME["User-Agent"]},i=Go.getCookieFromString("bili_jct",this.cfg.password);t.append("csrf",i);const n={method:"POST",headers:a,body:t};return this.logger.debug("bilibili form url =>",o),this.logger.debug("bilibili form options =>",n),await this.webFormFetch(o,[a],t,!0)}}var ua={};const $i=async(p,e)=>{const t=L("use-bilibili-web");t.info("Start using Bilibili WebAuth...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:i}=pe(),n=await i();if(s=te.safeParse(n[p],{}),se.isEmptyObject(s)){const c=A.emptyOrDefault(ua.VITE_MIDDLEWARE_URL,fe),r=A.emptyOrDefault(ua.VITE_BILIBILI_AUTH_TOKEN,"");s=new _p(r,c),t.debug("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");const l=A.emptyOrDefault(ua.VITE_MIDDLEWARE_URL,fe);T.isEmptyString(s.middlewareUrl)&&(s.middlewareUrl=l),T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}s.cateEnabled=!1,s.knowledgeSpaceEnabled=!0,s.knowledgeSpaceTitle="æ–‡é›†",s.knowledgeSpaceType=Q.CategoryType_Single,s.allowKnowledgeSpaceChange=!0;const a=new Pp(o,s);return{cfg:s,webApi:a}};class Tp extends Rt{async getMetaData(){const e={"User-Agent":Ft.HEADERS.MACOS_CHROME["User-Agent"],referer:"https://creator.xiaohongshu.com/publish/publish?from=menu"},t=await this.xiaohongshuFetch("/api/galaxy/user/my-info",e);throw this.logger.debug("get xiaohongshu metadata finished=>",t),new Error("å¼€å‘ä¸­ã€‚ã€‚ã€‚")}async xiaohongshuFetch(e,t={},o=void 0,s="GET",a="application/json"){const i=T.pathJoin(this.cfg.apiUrl,e),n=new Map;n.set("Cookie",this.cfg.password);const l={...Object.fromEntries(n),...t},c=o,r={method:s,headers:l,body:o};return this.logger.debug("xiaohongshu url =>",i),this.logger.debug("xiaohongshu requestOptions =>",r),await this.webFetch(i,[l],c,s,a,!0,"base64","text")}async xiaohongshuFormFetch(e,t){const o=T.pathJoin(this.cfg.apiUrl,e);new Map().set("Cookie",this.cfg.password);const a={Cookie:this.cfg.password},i={method:"POST",headers:a,body:t};return this.logger.debug("xiaohongshu form url =>",o),this.logger.debug("xiaohongshu form options =>",i),await this.webFormFetch(o,[a],t,!0)}}class kp extends Qt{constructor(e,t,o){super("https://creator.xiaohongshu.com","https://creator.xiaohongshu.com",e,t,o),this.previewUrl="/p/[postid]",this.pageType=ce.Markdown,this.passwordType=xe.PasswordType_Cookie,this.usernameEnabled=!1,this.tagEnabled=!1,this.cateEnabled=!1,this.knowledgeSpaceEnabled=!1}}var ma={};const mn=async(p,e)=>{const t=L("use-xiaohongshu-web");t.info("Start using Xiaohongshu WebAuth...");const o=new ue;let s;if(e)t.info("Initialize with the latest newCfg passed in..."),s=e;else{const{getSetting:i}=pe(),n=await i();if(s=te.safeParse(n[p],{}),se.isEmptyObject(s)){const c=A.emptyOrDefault(ma.VITE_MIDDLEWARE_URL,fe),r=A.emptyOrDefault(ma.VITE_XIAOHONGSHU_AUTH_TOKEN,"");s=new kp(r,c),t.debug("Configuration is empty, using default environment variables.")}else t.info("Using configuration from settings...");const l=A.emptyOrDefault(ma.VITE_MIDDLEWARE_URL,fe);T.isEmptyString(s.middlewareUrl)&&(s.middlewareUrl=l),T.isEmptyString(s.posidKey)&&(s.posidKey=_e(p))}const a=new Tp(o,s);return{cfg:s,webApi:a}};var Te=(p=>(p.Default="default",p.Hexo="hexo",p.Hugo="hugo",p.Jekyll="jekyll",p.Vuepress="vuepress",p.Vuepress2="vuepress2",p.Vitepress="vitepress",p.Quartz="quartz",p))(Te||{});class Sp extends Yt{storePath;realStorePath;fsYamlType;constructor(){super(null,null,null,null,null),this.homeEnabled=!1,this.apiUrlEnabled=!1,this.previewUrlEnabled=!1,this.passwordType=xe.PasswordType_None,this.picgoPicbedSupported=!0,this.picbedService=Je.Bundled,this.storePath=T.pathJoin(ct.getHomeFolder(),"Downloads/syp"),this.realStorePath=this.storePath,this.imageStorePath="assets",this.fsYamlType=Te.Default}}class Ho extends qt{constructor(e){super()}convertToYaml(e,t,o){t||(t=new Ze,t=new Ze,t.yamlObj.title=e.title);let s=ie.obj2Yaml(t.yamlObj);return t.formatter=s,t.mdContent=e.markdown,t.mdFullContent=ie.addYamlToMd(t.formatter,t.mdContent),t.htmlContent=e.html,t}convertToAttr(e,t,o){return e}}class Cp extends Ct{constructor(e,t){super(e,t),this.logger=L("local-system-adaptor")}async getUsersBlogs(e){const t=this.cfg;this.logger.debug("Ensure that the save path exists1...",t);const o=t.storePath,s=T.pathJoin(o,t.imageStorePath),a=ct.ensurePath(o,Mt),i=ct.ensurePath(s,Mt);if(!a||!i)throw new Error("æ–‡ä»¶å­˜å‚¨è·¯å¾„æˆ–åª’ä½“å­˜å‚¨è·¯å¾„åˆå§‹åŒ–å¤±è´¥ï¼");return Promise.resolve([])}getYamlAdaptor(){const e=this.cfg;switch(e.fsYamlType){case Te.Hexo:return this.logger.info("ä½¿ç”¨ Hexo YAML é€‚é…å™¨"),new to;case Te.Hugo:return this.logger.info("ä½¿ç”¨ Hugo YAML é€‚é…å™¨"),new so;case Te.Jekyll:return this.logger.info("ä½¿ç”¨ Jekyll YAML é€‚é…å™¨"),new oo;case Te.Vuepress:return this.logger.info("ä½¿ç”¨ VuePress YAML é€‚é…å™¨"),new ao;case Te.Vuepress2:return this.logger.info("ä½¿ç”¨ VuePress2 YAML é€‚é…å™¨"),new io;case Te.Vitepress:return this.logger.info("ä½¿ç”¨ VitePress YAML é€‚é…å™¨"),new no;case Te.Quartz:return this.logger.info("ä½¿ç”¨ Quartz YAML é€‚é…å™¨"),new Zo;case Te.Default:default:return this.logger.info("ä½¿ç”¨é»˜è®¤ YAML é€‚é…å™¨"),new Ho(e)}}async preEditPost(e,t,o){const s=this.cfg;s.storePath.includes(Mt)&&(e.cate_slugs=[Mt]);let a;switch(s.fsYamlType){case Te.Hexo:{a=await new Jn(this.appInstance,s).preEditPost(e,t,o);break}case Te.Hugo:{a=await new qn(this.appInstance,s).preEditPost(e,t,o);break}case Te.Jekyll:{a=await new Qn(this.appInstance,s).preEditPost(e,t,o);break}case Te.Vuepress:{a=await new sl(this.appInstance,s).preEditPost(e,t,o);break}case Te.Vuepress2:{a=await new il(this.appInstance,s).preEditPost(e,t,o);break}case Te.Vitepress:{a=await new ll(this.appInstance,s).preEditPost(e,t,o);break}case Te.Quartz:{a=await new el(this.appInstance,s).preEditPost(e,t,o);break}default:{a=await super.preEditPost(e,t,o);break}}return a?.cate_slugs.length>0&&(s.realStorePath=s.storePath.replace(Mt,a.cate_slugs[0])),a}async newPost(e,t){const o=this.cfg;e.title;const s=e.originalTitle,a=e.description;let i=o.storePath;T.isEmptyString(o.realStorePath)||(i=o.realStorePath);const n=`${ct.sanitizeFilename(s)}.md`,l=ct.joinPath(i,n);let c=!1;if(ct.ensurePath(i)?(c=ct.writeFile(l,a),this.logger.info(`Post saved locally: ${l}`)):this.logger.error(`Failed to create directory: ${i}`),!c)throw new Error(`æ–‡æ¡£å‘å¸ƒåˆ°æ–‡ä»¶ç³»ç»Ÿå¤±è´¥: ${l}ï¼Œè¯·æ‰“å¼€å¼€å‘è€…å·¥å…·æŸ¥çœ‹é”™è¯¯æ—¥å¿—`);return l}async editPost(e,t,o){return await this.newPost(t,o),!0}async deletePost(e){return ct.deleteFile(e)}async newMediaObject(e){const t=e.bits,o=this.cfg;this.logger.debug("Ensure that the save path exists...",o);let s=o.storePath;T.isEmptyString(o.realStorePath)||(s=o.realStorePath);const a=s,i=T.pathJoin(a,o.imageStorePath??"assets");let n=T.pathJoin(i,e.name);const l=ct.dirname(n);let c=!1;if(ct.ensurePath(l)&&ct.writeBinaryFile(n,t)&&(c=!0,this.logger.info(`media saved: ${n}`)),!c)throw new Error(`åª’ä½“å‘å¸ƒåˆ°æ–‡ä»¶ç³»ç»Ÿå¤±è´¥: ${n}ï¼Œè¯·æ‰“å¼€å¼€å‘è€…å·¥å…·æŸ¥çœ‹é”™è¯¯æ—¥å¿—`);const r=fs.newUuid(),m=n.replace(a,".");return{attachment_id:r,date_created_gmt:new Date,parent:0,link:a,title:e.name,caption:"",description:"",metadata:{width:0,height:0,file:m,filesize:t.length,sizes:[]},type:e.type,thumbnail:"",id:r,file:e.name,url:m}}async getPreviewUrl(e){return"file://"+e}}class ht{static logger=L("fs-utils");static getYamlAdaptor(e){const t=e.fsYamlType;ht.logger.debug(`YAML type: ${t}`);let o=new Ho(e);try{switch(t){case Te.Hexo:ht.logger.info("Using Hexo YAML adapter"),o=new to;break;case Te.Hugo:ht.logger.info("Using Hugo YAML adapter"),o=new so;break;case Te.Jekyll:ht.logger.info("Using Jekyll YAML adapter"),o=new oo;break;case Te.Vuepress:ht.logger.info("Using Vuepress YAML adapter"),o=new ao;break;case Te.Vitepress:ht.logger.info("Using Vitepress YAML adapter"),o=new no;break;case Te.Quartz:ht.logger.info("Using Quartz YAML adapter"),o=new Zo;break;case Te.Vuepress2:ht.logger.info("Using Vuepress2 YAML adapter"),o=new io;break;case Te.Default:default:ht.logger.info("Using default LocalSystem YAML adapter"),o=new Ho(e);break}}catch(s){ht.logger.error(`Failed to load YAML adapter for type ${t}, using default`,s),o=new Ho(e)}return o}}const Lo=async(p,e)=>{const t=L("use-local-system-api");let o;if(e)o=e;else{const{getSetting:n}=pe(),l=await n();o=te.safeParse(l[p],{}),se.isEmptyObject(o)?o=new Sp:t.info("Using configuration from settings..."),T.isEmptyString(o.posidKey)&&(o.posidKey=_e(p))}const s=new ue;o.tagEnabled=!0,o.cateEnabled=!0,o.picgoPicbedSupported=!0,o.bundledPicbedSupported=!0;const a=new Cp(s,o),i=ht.getYamlAdaptor(o);return{cfg:o,blogApi:a,yamlAdaptor:i}};class be{static logger=L("adaptors");static async getCfg(e,t){let o=null;switch(Po(e)){case U.Common_Yuque:{const{cfg:a}=await Pi(e,t);o=a;break}case U.Common_Notion:{const{cfg:a}=await Si(e,t);o=a;break}case U.Common_Halo:{const{cfg:a}=await Ui(e,t);o=a;break}case U.Common_Telegraph:{const{cfg:a}=await xi(e,t);o=a;break}case U.Common_Confluence:{const{cfg:a}=await Bo(e,t);o=a;break}case U.Github_Hexo:{const{cfg:a}=await So(e,t);o=a;break}case U.Github_Hugo:{const{cfg:a}=await Eo(e,t);o=a;break}case U.Github_Jekyll:{const{cfg:a}=await Io(e,t);o=a;break}case U.Github_Quartz:{const{cfg:a}=await xo(e,t);o=a;break}case U.Github_Vuepress:{const{cfg:a}=await Mo(e,t);o=a;break}case U.Github_Vuepress2:{const{cfg:a}=await Oo(e,t);o=a;break}case U.Github_Vitepress:{const{cfg:a}=await $o(e,t);o=a;break}case U.Gitlab_Hexo:{const{cfg:a}=await Co(e,t);o=a;break}case U.Gitlab_Hugo:{const{cfg:a}=await Ao(e,t);o=a;break}case U.Gitlab_Jekyll:{const{cfg:a}=await Uo(e,t);o=a;break}case U.Gitlab_Vuepress:{const{cfg:a}=await Do(e,t);o=a;break}case U.Gitlab_Vuepress2:{const{cfg:a}=await Vo(e,t);o=a;break}case U.Gitlab_Vitepress:{const{cfg:a}=await No(e,t);o=a;break}case U.Metaweblog_Metaweblog:{const{cfg:a}=await ki(e,t);o=a;break}case U.Metaweblog_Cnblogs:{const{cfg:a}=await wi(e,t);o=a;break}case U.Metaweblog_Typecho:{const{cfg:a}=await vi(e,t);o=a;break}case U.Metaweblog_Jvue:{const{cfg:a}=await Mi(e,t);o=a;break}case U.Wordpress_Wordpress:{const{cfg:a}=await _i(e,t);o=a;break}case U.Wordpress_Wordpressdotcom:{const{cfg:a}=await Di(e,t);o=a;break}case U.Custom_Zhihu:{const{cfg:a}=await Ti(e);o=a;break}case U.Custom_CSDN:{const{cfg:a}=await Ci(e);o=a;break}case U.Custom_Wechat:{const{cfg:a}=await Ei(e);o=a;break}case U.Custom_Jianshu:{const{cfg:a}=await Ai(e);o=a;break}case U.Custom_Juejin:{const{cfg:a}=await Ii(e);o=a;break}case U.Custom_Haloweb:{const{cfg:a}=await Oi(e);o=a;break}case U.Custom_Bilibili:{const{cfg:a}=await $i(e);o=a;break}case U.Custom_Xiaohongshu:{const{cfg:a}=await mn(e);o=a;break}case U.Fs_LocalSystem:{const{cfg:a}=await Lo(e);o=a;break}case U.System_Siyuan:{const{siyuanConfig:a}=Ge();o=a;break}default:{o={};break}}return this.logger.debug(`get conf from key ${e}=>`,o),o}static async getAdaptor(e,t){let o=null;switch(Po(e)){case U.Common_Yuque:{const{blogApi:a}=await Pi(e,t);o=a;break}case U.Common_Notion:{const{blogApi:a}=await Si(e,t);o=a;break}case U.Common_Halo:{const{blogApi:a}=await Ui(e,t);o=a;break}case U.Common_Telegraph:{const{blogApi:a}=await xi(e,t);o=a;break}case U.Common_Confluence:{const{blogApi:a}=await Bo(e,t);o=a;break}case U.Github_Hexo:{const{blogApi:a}=await So(e,t);o=a;break}case U.Github_Hugo:{const{blogApi:a}=await Eo(e,t);o=a;break}case U.Github_Jekyll:{const{blogApi:a}=await Io(e,t);o=a;break}case U.Github_Quartz:{const{blogApi:a}=await xo(e,t);o=a;break}case U.Github_Vuepress:{const{blogApi:a}=await Mo(e,t);o=a;break}case U.Github_Vuepress2:{const{blogApi:a}=await Oo(e,t);o=a;break}case U.Github_Vitepress:{const{blogApi:a}=await $o(e,t);o=a;break}case U.Gitlab_Hexo:{const{blogApi:a}=await Co(e,t);o=a;break}case U.Gitlab_Hugo:{const{blogApi:a}=await Ao(e,t);o=a;break}case U.Gitlab_Jekyll:{const{blogApi:a}=await Uo(e,t);o=a;break}case U.Gitlab_Vuepress:{const{blogApi:a}=await Do(e,t);o=a;break}case U.Gitlab_Vuepress2:{const{blogApi:a}=await Vo(e,t);o=a;break}case U.Gitlab_Vitepress:{const{blogApi:a}=await No(e,t);o=a;break}case U.Metaweblog_Metaweblog:{const{blogApi:a}=await ki(e,t);o=a;break}case U.Metaweblog_Cnblogs:{const{blogApi:a}=await wi(e,t);o=a;break}case U.Metaweblog_Typecho:{const{blogApi:a}=await vi(e,t);o=a;break}case U.Metaweblog_Jvue:{const{blogApi:a}=await Mi(e,t);o=a;break}case U.Wordpress_Wordpress:{const{blogApi:a}=await _i(e,t);o=a;break}case U.Wordpress_Wordpressdotcom:{const{blogApi:a}=await Di(e,t);o=a;break}case U.Custom_Zhihu:{const{webApi:a}=await Ti(e,t);o=a;break}case U.Custom_CSDN:{const{webApi:a}=await Ci(e,t);o=a;break}case U.Custom_Wechat:{const{webApi:a}=await Ei(e,t);o=a;break}case U.Custom_Jianshu:{const{webApi:a}=await Ai(e,t);o=a;break}case U.Custom_Juejin:{const{webApi:a}=await Ii(e,t);o=a;break}case U.Custom_Haloweb:{const{webApi:a}=await Oi(e,t);o=a;break}case U.Custom_Bilibili:{const{webApi:a}=await $i(e,t);o=a;break}case U.Custom_Xiaohongshu:{const{webApi:a}=await mn(e,t);o=a;break}case U.Fs_LocalSystem:{const{blogApi:a}=await Lo(e,t);o=a;break}case U.System_Siyuan:{const{blogApi:a}=Ge();o=a;break}}return this.logger.debug(`get blogAdaptor from key ${e}`),o}static async getYamlAdaptor(e,t){let o=null;switch(Po(e)){case U.Github_Hexo:{const{yamlAdaptor:a}=await So(e,t);o=a;break}case U.Github_Hugo:{const{yamlAdaptor:a}=await Eo(e,t);o=a;break}case U.Github_Jekyll:{const{yamlAdaptor:a}=await Io(e,t);o=a;break}case U.Github_Quartz:{const{yamlAdaptor:a}=await xo(e,t);o=a;break}case U.Github_Vuepress:{const{yamlAdaptor:a}=await Mo(e,t);o=a;break}case U.Github_Vuepress2:{const{yamlAdaptor:a}=await Oo(e,t);o=a;break}case U.Github_Vitepress:{const{yamlAdaptor:a}=await $o(e,t);o=a;break}case U.Gitlab_Hexo:{const{yamlAdaptor:a}=await Co(e,t);o=a;break}case U.Gitlab_Hugo:{const{yamlAdaptor:a}=await Ao(e,t);o=a;break}case U.Gitlab_Jekyll:{const{yamlAdaptor:a}=await Uo(e,t);o=a;break}case U.Gitlab_Vuepress:{const{yamlAdaptor:a}=await Do(e,t);o=a;break}case U.Gitlab_Vuepress2:{const{yamlAdaptor:a}=await Vo(e,t);o=a;break}case U.Gitlab_Vitepress:{const{yamlAdaptor:a}=await No(e,t);o=a;break}case U.Fs_LocalSystem:{const{yamlAdaptor:a}=await Lo(e,t);o=a;break}default:{this.logger.info(`No specific YAML adapter found for platform key: ${e}, using null`),o=null;break}}return this.logger.debug(`get yamlAdaptor from key ${e}=>`,o),o}}const lo=()=>{const{getSetting:p}=pe(),e=new ue;return{getPublishCfg:async s=>{const a=await p(),n=te.safeParse(a[Me],{})?.totalCfg||[];if(s){const l=te.safeParse(a[s],{}),c=await be.getCfg(s,l),r=Zs(n,s);return{setting:a,dynamicConfigArray:n,cfg:c,dynCfg:r}}else return{setting:a,dynamicConfigArray:n,cfg:void 0,dynCfg:void 0}},getPublishApi:async(s,a)=>{const i=await be.getAdaptor(s,a);return A.blogApi(e,i)}}},ro=()=>{const p=L("use-publish"),{t:e}=Z(),{updateSetting:t}=pe(),{kernelApi:o,blogApi:s}=Ge(),{getPublishApi:a}=lo(),{updatePlatformMetadata:i}=bi(),n=re({isPublishLoading:!1,publishProcessStatus:!1,isAdd:!0,errMsg:""}),l=async(d,g,v,h)=>{const b=v.setting,P=v.cfg;v.dynCfg;let k,E;try{const M=Re.systemCfg.some(G=>G.platformKey===d);if(p.info(`isSys=>${M}`),M)k=g;else{const G=P.posidKey;if(T.isEmptyString(G))throw new Error("é…ç½®é”™è¯¯ï¼ŒposidKeyä¸èƒ½ä¸ºç©ºï¼Œè¯·æ£€æŸ¥é…ç½®");const x=se.getProperty(b,g,{});k=se.getProperty(x,G)}n.isAdd=T.isEmptyString(k);const H=Pe(h);p.debug("å‡†å¤‡å¼€å§‹å‘å¸ƒå¤„ç†, doc =>",{post:ne(h)}),H.postid=k;const B=await a(d,P);p.info(`å¼€å§‹æ–‡ç« é¢„å¤„ç†, isAdd =>${n.isAdd}`),p.debug("post=>",ne(H));const D=await B.preEditPost(H,g,v);if(p.info(`æ–‡ç« å…¨éƒ¨é¢„å¤„ç†å®Œæ¯•ï¼Œid=${g},key=${d}`),p.debug("æœ€ç»ˆç»“æžœ =>",{finalPost:ne(D)}),n.isAdd){p.info("æ–‡ç« æœªå‘å¸ƒï¼Œå‡†å¤‡å‘å¸ƒ");const G=await B.newPost(D);k=G;const x=P.posidKey,ee=se.getProperty(b,g,{});ee[x]=k,ee[rt.Custom_slug]=D.wp_slug,b[g]=ee,await t(b),p.info("new post=>",G),p.info("æ–‡ç« å‘å¸ƒæˆåŠŸ")}else{p.info("æ–‡ç« å·²å‘å¸ƒï¼Œå‡†å¤‡æ›´æ–°");const G=await B.editPost(k,D),x=se.getProperty(b,g,{});x.hasOwnProperty(rt.Custom_slug)?D.wp_slug=x[rt.Custom_slug]:(p.info("æ£€æµ‹åˆ°æœªç”Ÿæˆè¿‡åˆ«åï¼Œå‡†å¤‡æ›´æ–°åˆ«å"),x[rt.Custom_slug]=D.wp_slug,b[g]=x,await t(b)),D.postid&&D.postid!==k&&(p.info(`æ–‡ç« ç›®å½•å·²æ›´æ”¹ï¼Œæ›´æ–°postidä»Ž ${k} åˆ° ${D.postid}`),x[P.posidKey]=D.postid,b[g]=x,await t(b),k=D.postid,X.success("æ–‡ç« ç›®å½•å·²æ›´æ”¹ï¼Œå‘å¸ƒä¿¡æ¯å·²æ›´æ–°")),p.info("edit post=>",G),p.info("æ–‡ç« æ›´æ–°æˆåŠŸ")}if(p.info("å‘å¸ƒå®Œæˆï¼Œå‡†å¤‡å¤„ç†æ–‡ç« å±žæ€§ã€å…ƒæ•°æ®"),M)p.info("å†…ç½®å¹³å°ï¼Œå¿½ç•¥ä¿å­˜å±žæ€§");else{const G=Bs(d);await o.setSingleBlockAttr(g,G,D.yaml);const x=Pe(D),ee=x.mt_keywords?.split(",")??[],I=x?.categories??[];i(d,ee,I,[])}p.info("æ–‡ç« å±žæ€§å¤„ç†å®Œæˆ"),E=await m(B,g,P),n.publishProcessStatus=!0}catch(M){n.errMsg=e("main.opt.failure")+"=>"+M,await o.pushErrMsg({msg:n.errMsg,timeout:7e3}),n.publishProcessStatus=!1}return{key:d,status:n.publishProcessStatus,name:P?.blogName,previewUrl:E,errMsg:n.errMsg}},c=async(d,g,v)=>{const h=v.setting,b=v.cfg;v.dynCfg;try{const P=b.posidKey;if(T.isEmptyString(P))throw new Error("é…ç½®é”™è¯¯ï¼ŒposidKeyä¸èƒ½ä¸ºç©ºï¼Œè¯·æ£€æŸ¥é…ç½®");const k=se.getProperty(h,g,{}),E=se.getProperty(k,P);if(T.isEmptyString(E))throw new Error("æœªæ‰¾åˆ°postidï¼Œæ— æ³•åˆ é™¤ï¼Œè¯·æ‰‹åŠ¨åœ¨å¹³å°åˆ é™¤");const M=await a(d,b);if(n.publishProcessStatus=await M.deletePost(E),n.publishProcessStatus){const B={...se.getProperty(h,g,{})};B.hasOwnProperty(P)&&delete B[P],B.hasOwnProperty(rt.Custom_slug)&&delete B[rt.Custom_slug],h[g]=B,await t(h),p.info(`[${d}] [${g}] æ–‡ç« å‘å¸ƒä¿¡æ¯å·²ç§»é™¤`);const D=Bs(d);await o.setSingleBlockAttr(g,D,""),p.info(`[${d}] [${g}] å±žæ€§å·²ç§»é™¤`)}}catch(P){n.errMsg=e("main.opt.failure")+"=>"+P,await o.pushErrMsg({msg:n.errMsg,timeout:7e3})}return{key:d,status:n.publishProcessStatus,errMsg:n.errMsg}},r=async(d,g,v)=>{try{const h=v.setting,b=v.cfg,P=v.dynCfg,k=b.posidKey;if(T.isEmptyString(k))throw new Error("é…ç½®é”™è¯¯ï¼ŒposidKeyä¸èƒ½ä¸ºç©ºï¼Œè¯·æ£€æŸ¥é…ç½®");if(!T.isEmptyString(k)){const M={...se.getProperty(h,g,{})};M.hasOwnProperty(k)&&delete M[k],h[g]=M,await t(h);const H=Bs(d);await o.setSingleBlockAttr(g,H,""),p.info(`[${d}] [${g}] å±žæ€§å·²ç§»é™¤`),await o.pushMsg({msg:e("main.opt.ok"),timeout:2e3}),p.info(`[${d}] [${g}] æ–‡ç« å‘å¸ƒä¿¡æ¯å·²å¼ºåˆ¶ç§»é™¤`),X.success(`[${d}] [${g}] æ–‡ç« å‘å¸ƒä¿¡æ¯å·²å¼ºåˆ¶ç§»é™¤`)}}catch(h){X.error(e("main.opt.failure")+"=>"+h),p.error(e("main.opt.failure")+"=>",h),await o.pushErrMsg({msg:e("main.opt.failure")+"=>"+h,timeout:7e3})}},m=async(d,g,v)=>{const{getSetting:h}=pe(),b=await h(),P=v.posidKey,E=se.getProperty(b,g,{})[P];let M=await d.getPreviewUrl(E);return/^[a-z]+:\/\//.test(M)?M:T.pathJoin(v?.home??"",M)},w={assignInitSlug:async(d,g,v)=>{const h=v.setting,b=se.getProperty(h,g,{}),P=Pe(d),k=se.getProperty(b,rt.Custom_slug,P.wp_slug);if(!T.isEmptyString(k))P.wp_slug=k,p.info("Using existing siyuan note slug");else{const E=await Js.getPageSlug(P.title,!0);P.wp_slug=`${E}`,p.info("Generated new slug")}return P.post_status=xt.PostStatusEnum_Publish,P},assignInitAttrs:async(d,g,v)=>{v.setting;const h=v.cfg,P=v.dynCfg.platformKey,k=Re.systemCfg.some(H=>H.platformKey===P),E=await w.assignInitSlug(d,g,v);let M=Pe(E);if(!k){const H=Bs(P),B=await o.getSingleBlockAttr(g,H),D=ie.extractFrontmatter(B).trim(),G=await be.getYamlAdaptor(P,h);if(G!==null)if(T.isEmptyString(D)){const x=G.convertToYaml(M,void 0,h);p.info("YAMLæœªä¿å­˜ï¼Œä½¿ç”¨é€‚é…å™¨ç”Ÿæˆé»˜è®¤çš„yamlFormatObj",{yamlFormatObj:ne(x)}),M=G.convertToAttr(M,x,h),M.yamlType=Jt.Yaml_custom_auto,p.debug("ä½¿ç”¨é€‚é…å™¨åˆå§‹åŒ–è½¬æ¢yamlObjåˆ°postå®Œæˆ =>",{post:ne(M)})}else{const x=new Ze,ee=await ie.yaml2ObjAsync(B);x.yamlObj=ee,M=G.convertToAttr(M,x,h),M.yamlType=Jt.Yaml_custom_hand,p.info("æœ‰é€‚é…å™¨ä¸”YAMLå·²ä¿å­˜ï¼Œå§‹ç»ˆä¿æŒæœ€æ–°çš„ YAML",{post:ne(M)})}else if(M.yamlType=Jt.YAML_default,T.isEmptyString(D))p.info("æœªä¿å­˜è¿‡YAMLï¼Œæœªæ‰¾åˆ°é€‚é…å™¨ï¼Œé»˜è®¤ä¸å¤„ç†",{post:ne(M)});else{const x=await ie.yaml2ObjAsync(B);M.yaml=B,Ri.fromYaml(M,x),p.info("è¯»å–å·²ç»å­˜åœ¨çš„YAMLï¼Œæ— é€‚é…å™¨ï¼Œä½¿ç”¨fromYamlç”Ÿæˆé»˜è®¤çš„yamlObj",{post:ne(M)})}}return M},doInitSinglePage:async(d,g,v=lt.METHOD_ADD,h)=>{const b=h.setting,P=h.cfg;h.dynCfg;const k=P.posidKey;if(T.isEmptyString(k))throw new Error("é…ç½®é”™è¯¯ï¼ŒposidKeyä¸èƒ½ä¸ºç©ºï¼Œè¯·æ£€æŸ¥é…ç½®");const E=se.getProperty(b,g,{}),M=se.getProperty(E,k),H=await a(d,P);let B="",D={};const G=await s.getPost(g);if(v===lt.METHOD_ADD)p.info("Add, using siyuan post"),D=Pe(G),D.mt_keywords=D?.mt_keywords??"",D.categories=D?.categories??[];else{if(p.info("Reading post from remote platform"),T.isEmptyString(M))throw new Error("æœªæ‰¾åˆ°postidï¼Œå°†æ— æ³•è¿›è¡Œæ›´æ–°");const x=await H.getPost(M);D=Pe(x),p.debug("get init platformPost ok =>",D),D.title=x.title,D.originalId=G.originalId,D.link=G.link,D.markdown=G.markdown,D.html=G.html,D.description=G.description,B=await m(H,g,P)}return p.debug("doInitPage finished mergedPost =>",ne(D)),{mergedPost:D,postPreviewUrl:B}},doOverideBatchPost:(d,g)=>{const v=Pe(g);return v.title=d.title,v.originalId=d.originalId,v.link=d.link,v.shortDesc=d.shortDesc,v.mt_excerpt=d.mt_excerpt,v.mt_keywords=d.mt_keywords,v.categories=d.categories,v},doMergeBatchPost:(d,g)=>{const v=Pe(g);v.originalId=d.originalId,v.link=d.link,T.isEmptyString(v.shortDesc)&&(v.shortDesc=v.mt_excerpt),T.isEmptyString(v.mt_excerpt)&&(v.mt_excerpt=v.shortDesc);const h=d?.mt_keywords?.split(",")??[],b=g?.mt_keywords?.split(",")??[],P=[...new Set([...h.map(E=>E.trim()),...b.map(E=>E.trim())])].filter(E=>E.trim()!=="");v.mt_keywords=P.join(",");const k=[...new Set([...(d?.categories??[]).map(E=>E.trim()),...(g?.categories??[]).map(E=>E.trim())])].filter(E=>E.trim()!=="");return v.categories=k,v}};return{singleFormData:n,doSinglePublish:l,doSingleDelete:c,doForceSingleDelete:r,initPublishMethods:w,getPostPreviewUrl:m}},co=p=>{const e=Y(0),t=Y(0),o=()=>{e.value=new Date().getTime()},s=()=>{const a=new Date().getTime();t.value=a-e.value};return Ws(()=>{o()}),Ke(p,a=>{p.value?s():o()}),{loadingTime:t}};class Nt{static subPlatformName(e,t){return T.isEmptyString(e)?"":e.includes("_")?T.upperFirst(T.getByLength(e.split("_")[1],t??9)):this.shortPlatformName(e,t??9)}static shortPlatformName(e,t){return T.isEmptyString(e)?"":T.upperFirst(T.getByLength(e.replace("Gitlab",""),t??9))}static longPlatformName(e,t){if(T.isEmptyString(e))return"";const o=T.upperFirst(T.getByLength(e.replace("Gitlab",""),t??9));return e.includes("Gitlab")?`Gitlab-${o}`:o}}const Ep={[U.Github_Hexo]:"https://siyuan.wiki/s/20230908182140-8riar0r",[U.Github_Hugo]:"https://siyuan.wiki/s/20230908182946-itm4luf",[U.Github_Jekyll]:"https://siyuan.wiki/s/20230908183451-fjs2nr0",[U.Github_Quartz]:"https://siyuan.wiki/s/20230908182140-8riar0r",[U.Github_Vuepress]:"https://siyuan.wiki/s/20230908183534-29f49bz",[U.Github_Vuepress2]:"https://siyuan.wiki/s/20230908183739-2x156oj",[U.Github_Vitepress]:"https://siyuan.wiki/s/20230914173253-mx2gaxd"},Ap={id:"page-body"},Ip={key:0,class:"page-head"},Up={class:"flex items-center"},xp={class:"text-large font-600 mr-3"},Mp={class:"page-content-box"},Dp=J({__name:"BackPage",props:{title:{type:String,default:""},hasBackEmit:{type:Boolean,default:!1},helpKey:{type:String,default:""}},emits:["backEmit"],setup(p,{emit:e}){const t=L("back-page"),{t:o}=Z(),s=kt();tt();const{query:a}=tt(),i=p,n=Y(a.showBack==="true"),l=e,c=()=>{l&&i.hasBackEmit?(t.info("using backEmit do back"),l("backEmit")):(t.warn("no backEmit, using router handle back"),s.back())},r=()=>{const w=Ep[i.helpKey];T.isEmptyString(w)?window.open("https://siyuan.wiki/s/20230810132040-nn4q7vs","_blank"):window.open(w,"_blank")},m=Ko(()=>o("common.help"));return(w,d)=>{const g=Se,v=Gi,h=pr;return _(),$("div",Ap,[n.value?(_(),$("div",Ip,[f(h,{icon:u(Nl),title:"è¿”å›ž",onClick:c},{content:y(()=>[C("div",Up,[C("span",xp,R(i.title),1),p.helpKey?(_(),S(v,{key:0,effect:"light",content:m.value,placement:"top"},{default:y(()=>[p.helpKey?(_(),S(g,{key:0,icon:u(Hl),circle:"",size:"small",type:"info",class:"ml-2 help-btn",onClick:Ks(r,["stop"])},null,8,["icon"])):F("",!0)]),_:1},8,["content"])):F("",!0)])]),_:1},8,["icon"])])):F("",!0),C("div",Mp,[Pt(w.$slots,"default",{},void 0,!0)])])}}}),He=ge(Dp,[["__scopeId","data-v-c2776402"]]),Op={id:"quick-publish-box"},$p={class:"publish-tips"},Vp={key:0,class:"is-loading info-tips"},Np={key:1,class:"success-tips"},Hp=["title"],Lp=["title"],Rp=["href"],Gp={key:2,class:"fail-tips"},Bp=["title"],jp=["title"],Kp=J({__name:"QuickPublish",setup(p){const e=L("quick-publish-worker"),t=tt(),{singleFormData:o,doSinglePublish:s,initPublishMethods:a}=ro(),{blogApi:i}=Ge(),{getPublishCfg:n}=lo(),{t:l}=Z(),c=Re.systemCfg.map(b=>b.platformKey),r=re(t.params),m=r.key,w=r.id,d=re({processResult:{}}),g=Y(!1),{loadingTime:v}=co(g),h=b=>{const P=je.siyuanWindow();P?.syp?.alert?P.syp.alert(b):vt.alert(b)};return st(async()=>{o.isPublishLoading=!0,setTimeout(async()=>{try{const b=await n(m);let P=await i.getPost(w);P=await a.assignInitAttrs(P,w,b),e.debug("quick publish inited siyuanPost =>",ne(P)),e.info("ä¿å­˜åˆ°ç³»ç»Ÿå¹³å°å¼€å§‹");for(const k of c){const E=await n(k);await s(k,w,E,P)}e.info("ä¿å­˜åˆ°ç³»ç»Ÿå¹³å°ç»“æŸ"),e.info("å•ä¸ªå¿«é€Ÿå‘å¸ƒå¼€å§‹"),d.processResult=await s(m,w,b,P),e.info("å•ä¸ªå¿«é€Ÿå‘å¸ƒç»“æŸ"),g.value=!0}catch(b){e.error(l("main.opt.failure")+"=>",b),X.error(l("main.opt.failure")+"=>"+b)}finally{o.isPublishLoading=!1}},200)}),(b,P)=>{const k=Qs;return _(),S(He,{title:"æžé€Ÿå‘å¸ƒ - "+u(m)},{default:y(()=>[C("div",Op,[C("div",$p,[u(o).isPublishLoading?(_(),$("div",Vp,[...P[1]||(P[1]=[C("i",{class:"el-icon is-loading"},[C("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[C("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})])],-1),V(" å‘å¸ƒä¸­ï¼Œè¯·ç¨åŽ... ",-1)])])):u(o).publishProcessStatus?(_(),$("div",Np,[V(R(u(o).isAdd?"å‘å¸ƒåˆ°":"æ›´æ–°æ–‡ç« åˆ°")+" ",1),C("span",{title:d.processResult.key}," ["+R(u(Nt).subPlatformName(d.processResult.key,6))+"] ",9,Hp),u(T).isEmptyString(d.processResult.name)?F("",!0):(_(),$("span",{key:0,title:d.processResult.name},R(`[${u(T).getByLength(d.processResult.name,8)}]`),9,Lp)),P[2]||(P[2]=V(" æˆåŠŸï¼Œ ",-1)),C("a",{href:d.processResult.previewUrl,target:"_blank"},"æŸ¥çœ‹æ–‡ç« ",8,Rp),f(k,{"loading-time":u(v),style:{padding:"0 10px 0 10px",display:"inline-block"}},null,8,["loading-time"])])):(_(),$("div",Gp,[V(R(u(o).isAdd?"å‘å¸ƒåˆ°":"æ›´æ–°æ–‡ç« åˆ°")+" ",1),C("span",{title:d.processResult.key}," ["+R(u(Nt).subPlatformName(d.processResult.key,6))+"] ",9,Bp),u(T).isEmptyString(d.processResult.name)?F("",!0):(_(),$("span",{key:0,title:d.processResult.name},R(`[${u(T).getByLength(d.processResult.name,8)}]`),9,jp)),P[3]||(P[3]=V(" å¤±è´¥ï¼ ",-1)),C("a",{href:"javascript:;",onClick:P[0]||(P[0]=E=>h(d.processResult.errMsg))},"è¯¦ç»†é”™è¯¯"),f(k,{"loading-time":u(v),style:{padding:"0 10px 0 10px",display:"inline-block"}},null,8,["loading-time"])]))])])]),_:1},8,["title"])}}}),zp=ge(Kp,[["__scopeId","data-v-cb15a9ec"]]),Jp={key:1},Wp={class:"platform-title"},Fp={class:"platform-desc"},qp={class:"one-key-preview"},Yp={class:"icon-list"},Xp={class:"el-icon"},Qp=["innerHTML"],Zp=J({__name:"SinglePublishSelectPlatform",props:{id:{type:String,default:""}},setup(p){const e=L("single-publish-select-platform"),t=new ue,{getPostPreviewUrl:o}=ro(),{kernelApi:s}=Ge(),{getReadOnlyPublishPreferenceSetting:a}=Tt(),i=p,{t:n}=Z(),l=kt(),{getSetting:c}=pe(),r=re({isInit:!1,enabledConfigArray:[],postInfo:{},postMeta:{},unpublishCount:0}),m=Y(""),w=(k,E)=>{k.stopPropagation();const M=d(E)?"edit":"add",H=`/publish/singlePublish/doPublish/${E}/${i.id}`;e.info("will go to =>",H);const B={path:H,query:{showBack:"true",method:M}};l.push(B)},d=k=>{const E=_e(k),M=se.getProperty(r.postMeta,E);return!T.isEmptyString(M)},g=async(k,E)=>{if(k.stopPropagation(),!d(E)){r.unpublishCount++;return}const H=await be.getCfg(E),B=await be.getAdaptor(E,H),D=A.blogApi(t,B),G=await o(D,i.id,H);window.open(G)},v=async k=>{vt.confirm("å°†åœ¨é»˜è®¤æµè§ˆå™¨æ‰“å¼€æ‰€æœ‰å·²å‘å¸ƒå¹³å°çš„æ–‡ç« é¢„è§ˆé¡µé¢ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ","æ¸©é¦¨æç¤º",{type:"error",icon:ze(Ni),confirmButtonText:n("main.opt.ok"),cancelButtonText:n("main.opt.cancel")}).then(async()=>{for(const E of r.enabledConfigArray)await g(k,E.platformKey);(r.enabledConfigArray.length===0||r.unpublishCount===r.enabledConfigArray.length)&&(r.unpublishCount=0,X.error("æ–‡ç« æœªå‘å¸ƒè¿‡ï¼Œè¯·è‡³å°‘å‘å¸ƒåˆ°ä¸€ä¸ªå¹³å°ï¼"))}).catch(()=>{})},h=async()=>{const k=await c(),M=te.safeParse(k[Me],{})?.totalCfg||[];if(r.enabledConfigArray=M.filter(B=>B.isEnabled&&B.isAuth),r.postMeta=se.getProperty(k,i.id,{}),r.postInfo=await s.getBlockByID(i.id),a().value.fixTitle){const B=Dt.removeTitleNumber(r.postInfo.content).replace(/\.md/g,"");m.value=B}else m.value=r.postInfo.content},b=Y(!1),{loadingTime:P}=co(b);return Ws(async()=>{await h(),r.isInit=!0,b.value=!0}),(k,E)=>{const M=Qs,H=Ht,B=Ne,D=Se,G=qs,x=Ki,ee=Fs,I=ji,N=Bi,oe=He;return _(),$(ke,null,[f(M,{"loading-time":u(P),style:{padding:"0 24px"}},null,8,["loading-time"]),r.isInit?(_(),$("div",Jp,[f(oe,{title:"å•ä¸ªæ–‡ç« å‘å¸ƒ"},{default:y(()=>[C("div",Wp,R(m.value),1),C("div",Fp,[C("p",null,[f(B,{class:"desc-tip",type:"warning",title:"ç‚¹å‡»å›¾æ ‡è¿›å…¥å¯¹åº”å¹³å°çš„å‘å¸ƒé¡µé¢ï¼Œå¦‚æžœæ–‡ç« å·²å‘å¸ƒï¼Œå¯ç‚¹å‡» [é¢„è§ˆ] ç›´æŽ¥åœ¨æµè§ˆå™¨æ‰“å¼€é¢„è§ˆé¡µé¢ã€‚"})])]),C("div",qp,[f(D,{type:"primary",size:"small",onClick:v},{default:y(()=>[...E[0]||(E[0]=[V("ä¸€é”®é¢„è§ˆ",-1)])]),_:1})]),f(N,{gutter:20,class:"row-box"},{default:y(()=>[(_(!0),$(ke,null,Ie(r.enabledConfigArray,j=>(_(),S(I,{span:8,sm:12,xs:12,md:12,lg:8,xl:8,title:j.platformName,class:"platform-select-card"},{default:y(()=>[f(ee,{class:"card-item"},{default:y(()=>[C("div",Yp,[f(x,{type:d(j.platformKey)?"success":"danger",value:d(j.platformKey)?"é¢„è§ˆ":"æœªå‘å¸ƒ",onClick:Ks(O=>g(O,j.platformKey),["stop"]),class:as(d(j.platformKey)?"item published-item":"item")},{default:y(()=>[f(G,{class:"define-item",onClick:Ks(O=>w(O,j.platformKey),["stop"])},{default:y(()=>[C("i",Xp,[C("span",{innerHTML:j?.platformIcon},null,8,Qp)]),V(" "+R(u(Nt).longPlatformName(j?.platformName,11)),1)]),_:2},1032,["onClick"])]),_:2},1032,["type","value","onClick","class"])])]),_:2},1024)]),_:2},1032,["title"]))),256))]),_:1})]),_:1})])):(_(),S(H,{key:0,class:"placeholder platform-skt",rows:12,animated:""}))],64)}}}),eg=ge(Zp,[["__scopeId","data-v-d5475443"]]),St=L("widget-utils"),ha=(p,e,t,o,s)=>{const{isInSiyuanWidget:a}=pt();a()?tg(p,void 0,void 0,!1,!1,!t,e,t,o):window.open(p)},tg=(p,e,t,o=!1,s=!1,a=!0,i,n=void 0,l=void 0)=>{try{if(T.isEmptyString(p)){St.error("Url cannot be empty");return}const{isInSiyuanWidget:c}=pt();if(!Ot.isElectron()&&!c){St.info("BrowserWindow can ony be available in siyuan Electron environment");return}St.info(T.f("Opening a new BrowserWindow from url => {0}",p));const r=t??je.siyuanWindow(),{app:m,BrowserWindow:w,getCurrentWindow:d}=r.require("@electron/remote"),g=r.require("@electron/remote").require("@electron/remote/main"),v=d(),h=new w({parent:v,width:900,height:750,show:a,resizable:!0,modal:s,icon:je.browserJoinPath(je.siyuanWindow().siyuan.config.system.appDir,"stage","icon-large.png"),titleBarOverlay:{color:"#cccccca5",symbolColor:"black"},webPreferences:{nativeWindowOpen:!0,nodeIntegration:!0,webviewTag:!0,webSecurity:!1,contextIsolation:!1}});h.webContents.session.webRequest.onBeforeSendHeaders({urls:Wt.uaWhiteList},(k,E)=>{const M=new URL(p);if(console.warn("UA å·²ä¿®æ”¹é€‚é…ï¼Œå½“å‰è¯·æ±‚ä¸º",M),Wt.headersMap[M.href]){const H=Wt.headersMap[M.href];for(const B in H)k.requestHeaders[B]=H[B];console.warn("ä½¿ç”¨è‡ªå®šä¹‰header")}else k.requestHeaders["User-Agent"]=Ft.HEADERS.MACOS_CHROME["User-Agent"],console.warn("ä½¿ç”¨é»˜è®¤header");E({cancel:!1,requestHeaders:k.requestHeaders})}),g.enable(h.webContents),o&&h.webContents.openDevTools();const P=async()=>{const k=i.extraScript;if(k)try{const D=await h.webContents.executeJavaScript(k);St.info(`æ‰§è¡Œé¢å¤–è„šæœ¬æˆåŠŸï¼š${D}`),await l(D)}catch(D){St.error(`æ‰§è¡Œé¢å¤–è„šæœ¬å¤±è´¥ï¼š${D}`),X.error(`æ‰§è¡Œé¢å¤–è„šæœ¬å¤±è´¥ï¼š${D}`)}const E=h.webContents.session,M=i.domain,B=(await E.cookies.get({})).filter(D=>D.domain===M||D.domain===`.${M}`||D.domain.endsWith(`.${M}`));B.length>0?(St.info("è¯»å–æ‰€æœ‰cookiesæˆåŠŸ",B),await n(i,B)):St.info("æœªè¯»å–åˆ°Cookie")};h.on("close",k=>{St.info("çª—å£å…³é—­äº‹ä»¶è§¦å‘")}),h.loadURL(p),n?P().then(()=>{h.hide(),h.close()}):(St.info("cookieCallback is undefined"),h.show())}catch(c){St.error("Open browser window failed",c),X.error(`Open browser window failed =>${c}`)}},sg=p=>p.querySelector("div.protyle:not(.fn__none)")?.querySelector("div.protyle-title")?.getAttribute("data-node-id"),po=()=>{const p=window.parent.document;return sg(p)},og=J({__name:"SinglePublish",setup(p){const{query:e}=tt(),t=e.id??po();return(o,s)=>(_(),S(eg,{id:u(t)},null,8,["id"]))}}),ag=J({__name:"PublishStatus",props:{modelValue:{type:Object,default:{}}},emits:["emitSyncPublishStatus"],setup(p,{emit:e}){const{t}=Z(),o=p,s=re({status:o.modelValue?.post_status,password:o.modelValue?.wp_password}),a=e,i=()=>{const n=s.status,l=s.password;a("emitSyncPublishStatus",n,l)};return(n,l)=>{const c=Xs,r=Ys,m=Ce,w=Ue;return _(),$("div",null,[f(m,{label:u(t)("publisher.post.status")},{default:y(()=>[f(r,{modelValue:s.status,"onUpdate:modelValue":l[0]||(l[0]=d=>s.status=d),class:"ml-4",onChange:i},{default:y(()=>[f(c,{value:u(xt).PostStatusEnum_Publish,size:"large"},{default:y(()=>[V(R(u(t)("publisher.post.status.pubish")),1)]),_:1},8,["value"]),f(c,{value:u(xt).PostStatusEnum_Draft,size:"large"},{default:y(()=>[V(R(u(t)("publisher.post.status.draft")),1)]),_:1},8,["value"]),f(c,{value:u(xt).PostStatusEnum_Private,size:"large"},{default:y(()=>[V(R(u(t)("publisher.post.status.private")),1)]),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),f(m,{label:u(t)("publisher.post.password")},{default:y(()=>[f(w,{type:"password",modelValue:s.password,"onUpdate:modelValue":l[1]||(l[1]=d=>s.password=d),placeholder:u(t)("publisher.post.password.tip"),onInput:i},null,8,["modelValue","placeholder"])]),_:1},8,["label"])])}}}),ig={key:0,class:"multi-categories"},ng=J({__name:"MultiCategories",props:{categoryConfig:{type:Object,default:{}},categories:{type:Array,default:[]}},emits:["emitSyncMultiCates"],setup(p,{emit:e}){const t=L("multi-categories"),{t:o}=Z(),s=p,a=re({categoryConfig:s.categoryConfig,categories:s.categories,useRemoteData:!T.isEmptyString(s.categoryConfig.apiType),cate:{categorySelected:[],categoryList:[]}}),i=e,n=(w,d,g,v)=>{},l=(w,d)=>{t.debug("checked item=>",{data:ne(w),status:ne(d)});const g=[];d.checkedKeys.forEach(h=>{g.push(h.toString())}),a.categories=g,t.debug(" formData.categories=>",{categories:ne(a.categories)}),i("emitSyncMultiCates",g)},c=w=>{const d=w;t.debug("å‡†å¤‡åˆ é™¤ =>",d);const g=a.categories.filter(v=>v!==d);a.categories=g,t.debug("formData.categories=>",{categories:ne(a.categories)}),i("emitSyncMultiCates",g)},r=w=>{const d=w;t.debug("é€‰ä¸­é¡¹å·²æ”¹å˜ =>",d),i("emitSyncMultiCates",a.cate.categorySelected)},m=async()=>{if(a.categoryConfig.cateEnabled){let w=[];if(t.debug(`useRemoteData => ${a.useRemoteData}`),a.useRemoteData){const d=a.categoryConfig.cfg;if(w=await(await be.getAdaptor(a.categoryConfig.apiType,d)).getCategories(),w.length===0&&(w=a.categories.map(v=>{const h=new Qe;return h.categoryId=v,h.categoryName=v,h})),t.debug("getCategories for multi categories",w),w.length>0){a.cate.categoryList=w.map(h=>({value:h.categoryName,label:h.categoryName})),t.debug("get multi categoryList =>",{categoryList:ne(a.cate.categoryList)});const v=a.categories;a.cate.categorySelected=v,i("emitSyncMultiCates",v),t.debug("muti cates is syncing =>",{cates:ne(v)})}}else{const d=a.categories??[];w=d.map(g=>{const v=new Qe;return v.categoryId=g,v.categoryName=g,v.categoryDescription=g,v}),w.length>0&&(a.cate.categoryList=w.map(g=>({value:g.categoryId,label:g.categoryName})),a.cate.categorySelected=d),t.debug("è¯»å–å·²æœ‰åˆ†ç±» =>",{cates:ne(d)})}}};return st(async()=>{await m()}),(w,d)=>{const g=Wo,v=Ce;return a.categoryConfig.cateEnabled?(_(),$("div",ig,[f(v,{label:u(o)("main.cat")},{default:y(()=>[f(g,{style:{width:"100%"},modelValue:a.cate.categorySelected,"onUpdate:modelValue":d[0]||(d[0]=h=>a.cate.categorySelected=h),data:a.cate.categoryList,filterable:"","allow-create":"",multiple:"","check-on-click-node":!0,"render-after-expand":!1,"show-checkbox":"",placeholder:u(o)("main.cat.select"),"empty-text":u(o)("main.cat.empty"),"no-data-text":u(o)("main.cat.empty"),disabled:a.categoryConfig.readonlyMode,onNodeClick:n,onCheck:l,onRemoveTag:c,onChange:r},null,8,["modelValue","data","placeholder","empty-text","no-data-text","disabled"])]),_:1},8,["label"])])):F("",!0)}}}),lg=ge(ng,[["__scopeId","data-v-f32b327a"]]),rg={title:"è‡ªåŠ¨æå–æ ‡é¢˜",description:"ä»Žæ–‡ç« å†…å®¹ä¸­ç”Ÿæˆæœ‰æ„ä¹‰çš„æ ‡é¢˜",key:"title",content:"è¯·ä¸ºè¿™ç¯‡æ–‡ç« ç”Ÿæˆç®€æ´ä¸”å®Œæ•´æ¦‚æ‹¬çš„æ ‡é¢˜ï¼Œåªå¤„ç†æ–‡æœ¬ï¼Œå°½é‡è¿”å›žä¸­æ–‡æ ‡é¢˜ã€‚æ ‡é¢˜é•¿åº¦ä¸è¶…è¿‡100ä¸ªä¸­æ–‡å­—ç¬¦æˆ–255ä¸ªè‹±æ–‡å­—ç¬¦ã€‚è¾“å‡ºä¸º JSON æ ¼å¼ï¼Œé”®åä¸º titleï¼Œç»“æžœéœ€æ”¾åœ¨ {} å†…ã€‚å®Œæ•´ç»“æžœå¿…é¡»æ˜¯åˆæ³•JSONï¼Œä¸å¾—åŒ…å«éžæ³• JSON å­—ç¬¦ã€‚"},cg={title:"è‡ªåŠ¨æå–æ‘˜è¦",description:"ä»Žæ–‡ç« å†…å®¹ç”Ÿæˆæ–‡ç« æ‘˜è¦",key:"desc",content:"è¯·ä¸ºè¿™ç¯‡æ–‡ç« ç”Ÿæˆç®€æ˜Žæ‰¼è¦çš„æ‘˜è¦ï¼Œåªå¤„ç†æ–‡æœ¬ï¼Œå°½é‡è¿”å›žä¸­æ–‡æ‘˜è¦ã€‚æ‘˜è¦é•¿åº¦ä¸è¶…è¿‡1024ä¸ªä¸­æ–‡å­—ç¬¦æˆ–2048ä¸ªè‹±æ–‡å­—ç¬¦ã€‚è¾“å‡ºä¸º JSON æ ¼å¼ï¼Œé”®åä¸º descï¼Œç»“æžœéœ€æ”¾åœ¨ {} å†…ã€‚å®Œæ•´ç»“æžœå¿…é¡»æ˜¯åˆæ³•JSONï¼Œä¸å¾—åŒ…å«éžæ³• JSON å­—ç¬¦ã€‚"},pg={title:"è‡ªåŠ¨æå–æ‘˜è¦",description:"ä»Žæ–‡ç« å†…å®¹ç”Ÿæˆæ–‡ç« æ‘˜è¦",key:"desc",content:"è¯·ä¸ºè¿™ç¯‡æ–‡ç« ç”Ÿæˆç®€æ˜Žæ‰¼è¦çš„æ‘˜è¦ï¼Œåªå¤„ç†æ–‡æœ¬ï¼Œå°½é‡è¿”å›žä¸­æ–‡æ‘˜è¦ã€‚æ‘˜è¦é•¿åº¦ä¸è¶…è¿‡1024ä¸ªä¸­æ–‡å­—ç¬¦æˆ–2048ä¸ªè‹±æ–‡å­—ç¬¦ã€‚è¾“å‡ºä¸ºæ–‡æœ¬æ ¼å¼ï¼Œå†…å®¹ä¸ºè¯­ä¹‰åŒ–çš„æ‘˜è¦ã€‚å®Œæ•´ç»“æžœå¿…é¡»æ˜¯æ–‡æœ¬æ‘˜è¦ï¼Œä¸å¾—åŒ…å«éžæ³•å­—ç¬¦ã€‚"},gg={title:"è‡ªåŠ¨æå–æ ‡ç­¾",description:"ä¸ºæ–‡ç« æ·»åŠ æ ‡ç­¾",key:"tags",content:"è¯·ä¸ºè¿™ç¯‡æ–‡ç« ç”Ÿæˆæ ‡ç­¾ï¼Œåªå¤„ç†æ–‡æœ¬ï¼Œå°½é‡è¿”å›žä¸­æ–‡æ ‡ç­¾ã€‚å•ä¸ªæ ‡ç­¾ä¸è¶…è¿‡6ä¸ªå­—ç¬¦ï¼Œå¤šä¸ªæ ‡ç­¾ç”¨è‹±æ–‡é€—å·åˆ†éš”ï¼Œæœ€å¤šè¿”å›ž5ä¸ªæ ‡ç­¾ã€‚å¦‚æžœå•ä¸ªæ ‡ç­¾æ˜¯è‹±æ–‡ï¼Œè‹±æ–‡å­—æ¯å¿…é¡»å…¨éƒ¨å°å†™å¹¶ä¸”æ¯ä¸ªå•è¯ä¹‹é—´ç”¨-æ‹¼æŽ¥ã€‚æ ‡ç­¾åç§°ä¸èƒ½é‡å¤ï¼Œä¸èƒ½åŒ…å«ä»»ä½•é™¤è‹±æ–‡å­—æ¯ã€-ä»¥åŠæ±‰å­—ä»¥å¤–çš„å­—ç¬¦ã€‚è¾“å‡ºä¸º JSON æ ¼å¼ï¼Œé”®åä¸º tagsï¼ŒæŒ‡ä»¤æ”¾åœ¨æ•°ç»„å†…ï¼Œç»“æžœéœ€æ”¾åœ¨ {} å†…ã€‚å®Œæ•´ç»“æžœå¿…é¡»æ˜¯åˆæ³•JSONï¼Œä¸å¾—åŒ…å«éžæ³• JSON å­—ç¬¦ã€‚"},dg={title:"è‡ªåŠ¨æå–åˆ†ç±»",description:"å¯¹æ–‡ç« å†…å®¹è¿›è¡Œåˆ†ç±»",key:"categories",content:"è¯·ä¸ºè¿™ç¯‡æ–‡ç« æ–‡ç« å†…å®¹è¿›è¡Œåˆ†ç±»ï¼Œåªå¤„ç†æ–‡æœ¬ï¼Œå°½é‡è¿”å›žä¸­æ–‡åˆ†ç±»ã€‚æ¯ä¸ªåˆ†ç±»åç§°ä¸è¶…è¿‡6ä¸ªå­—ç¬¦ï¼Œæœ€å¤šè¿”å›ž3ä¸ªåˆ†ç±»ã€‚å¦‚æžœåˆ†ç±»æ˜¯è‹±æ–‡ï¼Œéœ€è¦ä½¿ç”¨é©¼å³°å‘½åå¹¶ä¸”é¦–å­—æ¯å¤§å†™ã€‚è¾“å‡ºä¸º JSON æ ¼å¼ï¼Œé”®åä¸º categoriesï¼Œç»“æžœéœ€æ”¾åœ¨ {} å†…ã€‚å®Œæ•´ç»“æžœå¿…é¡»æ˜¯åˆæ³•JSONï¼Œä¸å¾—åŒ…å«éžæ³• JSON å­—ç¬¦ã€‚"},go={titlePrompt:rg,shortDescPrompt:cg,shortDescPromptStream:pg,tagPrompt:gg,categoryPrompt:dg},ug="modulepreload",mg=function(p,e){return new URL(p,e).href},hn={},hg=function(e,t,o){let s=Promise.resolve();if(t&&t.length>0){let c=function(r){return Promise.all(r.map(m=>Promise.resolve(m).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};const i=document.getElementsByTagName("link"),n=document.querySelector("meta[property=csp-nonce]"),l=n?.nonce||n?.getAttribute("nonce");s=c(t.map(r=>{if(r=mg(r,o),r in hn)return;hn[r]=!0;const m=r.endsWith(".css"),w=m?'[rel="stylesheet"]':"";if(o)for(let g=i.length-1;g>=0;g--){const v=i[g];if(v.href===r&&(!m||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${w}`))return;const d=document.createElement("link");if(d.rel=m?"stylesheet":ug,m||(d.as="script"),d.crossOrigin="",d.href=r,l&&d.setAttribute("nonce",l),document.head.appendChild(d),m)return new Promise((g,v)=>{d.addEventListener("load",g),d.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${r}`)))})}))}function a(i){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=i,window.dispatchEvent(n),!n.defaultPrevented)throw i}return s.then(i=>{for(const n of i||[])n.status==="rejected"&&a(n.reason);return e().catch(a)})};var Ro=(p=>(p[p.MAX_INPUT_TOKEN_LENGTH=3e3]="MAX_INPUT_TOKEN_LENGTH",p))(Ro||{}),vo={DEV_MODE:"false",APP_BASE:"/plugins/siyuan-plugin-publisher/",NODE_ENV:"development",VITE_DEFAULT_TYPE:"siyuan"};const Bt=()=>{const p=L("use-chatgpt"),{getReadOnlyPublishPreferenceSetting:e}=Tt(),t=e();let o;const s=async()=>{if(o===void 0){const{ChatGPTAPI:n,ChatGPTUnofficialProxyAPI:l}=await hg(async()=>{const{ChatGPTAPI:c,ChatGPTUnofficialProxyAPI:r}=await import("./chunks/chunk.vendor_chatgpt.js");return{ChatGPTAPI:c,ChatGPTUnofficialProxyAPI:r}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85]),import.meta.url);try{T.isEmptyString(t.value.experimentalAIProxyUrl)?o=new n({apiKey:A.emptyOrDefault(vo.OPENAI_ACCESS_TOKEN,t.value.experimentalAICode),apiBaseUrl:A.emptyOrDefault(vo.OPENAI_BASE_URL,t.value.experimentalAIBaseUrl),debug:Vt,fetch:self.fetch.bind(self),completionParams:{model:t.value.experimentalAIApiModel,max_tokens:t.value.experimentalAIApiMaxTokens,temperature:t.value.experimentalAIApiTemperature}}):o=new l({accessToken:A.emptyOrDefault(vo.OPENAI_API_KEY,t.value.experimentalAICode),apiReverseProxyUrl:A.emptyOrDefault(vo.OPENAI_PROXY_URL,t.value.experimentalAIProxyUrl),debug:Vt,fetch:self.fetch.bind(self)})}catch(c){throw p.error("Failed to initialize ChatGPT API:",c),c}}return o};return{getChatInput:(n,l)=>{const c=n.substring(0,Ro.MAX_INPUT_TOKEN_LENGTH),r=Dt.parseHtml(l,Ro.MAX_INPUT_TOKEN_LENGTH,!0);return A.emptyOrDefault(c,r)},chat:async(n,l)=>{try{const c=await s();l=l||{};const r=l?.completionParams??{};l.completionParams={...r,model:t.value.experimentalAIApiModel,max_tokens:t.value.experimentalAIApiMaxTokens>0?t.value.experimentalAIApiMaxTokens:Ro.MAX_INPUT_TOKEN_LENGTH,temperature:t.value.experimentalAIApiTemperature},p.debug("chat q =>",{q:n,opts:l});const m=await c.sendMessage(n,l);return p.debug("chat res =>",m),l.stream?m:m.text}catch(c){p.error("Chat encountered an error:",c),X.error("Chat encountered an error:"+c)}}}},fg={class:"category-box"},yg={key:0},bg={key:1},wg={key:2},_g=J({__name:"PublishCategories",props:{useAi:{type:Boolean,default:!1},categoryType:{type:String,default:Q.CategoryType_None},categoryConfig:{type:Object,default:{}},categories:{type:Array,default:[]},md:{type:String,default:""},html:{type:String,default:""}},emits:["emitSyncCates"],setup(p,{emit:e}){const t=L("publish-categories"),{t:o}=Z(),s=p,a=re({useAi:s.useAi,categoryType:s.categoryType,categoryConfig:s.categoryConfig,categories:s.categories,isLoading:!1,recommCates:[],md:s.md,html:s.html});Ke(()=>s.useAi,c=>{a.useAi=c}),Ke(()=>s.html,c=>{a.html=c});const i=e,n=c=>{t.debug("sync single cates =>",{cates:ne(c)}),a.categories=c,i("emitSyncCates",c)},l=async()=>{try{a.isLoading=!0;const c=go.categoryPrompt.content,{chat:r,getChatInput:m}=Bt(),w=await r(c,{name:"categories",systemMessage:m(a?.md,a.html)});if(T.isEmptyString(w)){X.error("è¯·æ±‚é”™è¯¯ï¼Œè¯·åœ¨åå¥½è®¾ç½®é…ç½®è¯·æ±‚åœ°å€å’ŒChatGPT keyï¼");return}const d=te.safeParse(w,{});if(!d?.categories||d?.categories.length==0)throw new Error("æ–‡æ¡£ä¿¡æ¯é‡å¤ªå°‘ï¼Œæœªèƒ½æŠ½å–æœ‰æ•ˆä¿¡æ¯");a.recommCates=d.categories,t.info("ä½¿ç”¨AIæ™ºèƒ½ç”Ÿæˆçš„åˆ†ç±»ç»“æžœ =>",{inputWord:c,chatText:w})}catch(c){t.error(o("main.opt.failure")+"=>",c),X.error(o("main.opt.failure")+"=>"+c)}finally{a.isLoading=!1}};return(c,r)=>{const m=lg,w=zi,d=Ce,g=Se,v=Ne;return _(),$("div",fg,[a.categoryType===u(Q).CategoryType_Multi?(_(),$("div",yg,[f(m,{"category-config":a.categoryConfig,"onUpdate:categoryConfig":r[0]||(r[0]=h=>a.categoryConfig=h),categories:a.categories,"onUpdate:categories":r[1]||(r[1]=h=>a.categories=h),onEmitSyncMultiCates:n},null,8,["category-config","categories"])])):(_(),$("div",bg)),a.useAi&&a.categoryConfig.cateEnabled?(_(),$("div",wg,[a.recommCates.length>0?(_(),S(d,{key:0,class:"recomm-show"},{default:y(()=>[r[2]||(r[2]=V(" æŽ¨èçš„åˆ†ç±»ï¼š ",-1)),(_(!0),$(ke,null,Ie(a.recommCates,h=>(_(),S(w,{class:"ml-2 recomm-cate",type:"success"},{default:y(()=>[V(R(h),1)]),_:2},1024))),256))]),_:1})):F("",!0),f(d,{class:"cat-action"},{default:y(()=>[f(g,{size:"small",loading:a.isLoading,type:"primary",onClick:l},{default:y(()=>[V(R(a.isLoading?u(o)("main.opt.loading"):u(o)("main.auto.fetch.cate")),1)]),_:1},8,["loading"])]),_:1}),f(d,null,{default:y(()=>[f(v,{closable:!1,title:u(o)("category.ai.hand"),class:"form-item-tip",type:"warning"},null,8,["title"])]),_:1}),r[3]||(r[3]=C("div",{class:"form-item-bottom"},null,-1))])):F("",!0)])}}}),vg=ge(_g,[["__scopeId","data-v-655f0f37"]]),Pg={class:"form-tags"},Tg=J({__name:"PublishTags",props:{useAi:{type:Boolean,default:!1},pageId:{type:String,default:""},tags:{type:String,default:""},tagConfig:{type:Object,default:{}},md:{type:String,default:""},html:{type:String,default:""}},emits:["emitSyncTags"],setup(p,{emit:e}){const t=L("publish-tags"),{t:o}=Z(),s=p,a=Y(),i=re({isTagLoading:!1,useAi:s.useAi,pageId:s.pageId,tagConfig:s.tagConfig,tag:{inputValue:"",dynamicTags:T.isEmptyString(s.tags)?[]:s.tags.split(","),platformTags:[],inputVisible:!1,selectVisible:!0},md:s.md,html:s.html});Ke(()=>s.useAi,r=>{i.useAi=r}),Ke(()=>s.html,r=>{i.html=r});const n=e,l={handleTagClose:r=>{i.tag.dynamicTags.splice(i.tag.dynamicTags.indexOf(r),1),n("emitSyncTags",i.tag.dynamicTags)},tagShowInput:()=>{i.tag.inputVisible=!0,Hi(()=>{a.value.input.focus()})},tagShowSelect:()=>{i.tag.selectVisible=!i.tag.selectVisible},handleTagInputConfirm:()=>{i.tag.inputValue&&(i.tag.dynamicTags.includes(i.tag.inputValue)||i.tag.dynamicTags.push(i.tag.inputValue),i.tag.platformTags.includes(i.tag.inputValue)||i.tag.platformTags.push({value:i.tag.inputValue,label:i.tag.inputValue}),n("emitSyncTags",i.tag.dynamicTags)),i.tag.inputVisible=!1,i.tag.inputValue=""},fetchTag:async()=>{try{i.isTagLoading=!0;const r=go.tagPrompt.content,{chat:m,getChatInput:w}=Bt(),d=await m(r,{name:"tags",systemMessage:w(i?.md,i.html)});if(T.isEmptyString(d)){X.error("è¯·æ±‚é”™è¯¯ï¼Œè¯·åœ¨åå¥½è®¾ç½®é…ç½®è¯·æ±‚åœ°å€å’ŒChatGPT keyï¼");return}const g=te.safeParse(d,{});if(!g?.tags||g?.tags.length==0)throw new Error("æ–‡æ¡£ä¿¡æ¯é‡å¤ªå°‘ï¼Œæœªèƒ½æŠ½å–æœ‰æ•ˆä¿¡æ¯");for(let v=0;v<g.tags.length;v++)i.tag.dynamicTags.includes(g.tags[v])||i.tag.dynamicTags.push(g.tags[v]);t.info("ä½¿ç”¨AIæ™ºèƒ½ç”Ÿæˆçš„æ ‡ç­¾ç»“æžœ =>",{inputWord:r,chatText:d}),n("emitSyncTags",i.tag.dynamicTags),X.success("ä½¿ç”¨äººå·¥æ™ºèƒ½æ™ºèƒ½æå–æ ‡ç­¾æˆåŠŸ")}catch(r){t.error(o("main.opt.failure")+"=>",r),X.error(o("main.opt.failure")+"=>"+r)}finally{i.isTagLoading=!1}},onPlatformTagChange:r=>{const m=r;t.debug("é€‰ä¸­é¡¹å·²æ”¹å˜ =>",m),n("emitSyncTags",i.tag.dynamicTags)}},c=async()=>{if(i?.tagConfig?.cfg&&i?.tagConfig?.apiType){const r=i?.tagConfig?.cfg,w=await(await be.getAdaptor(i?.tagConfig?.apiType,r)).getTags();i.tag.platformTags=w.map(d=>({value:d.tagName,label:d.tagName})),t.debug("getTags for platforms",i.tag.platformTags)}else t.warn("tagConfig not found, ignore tags")};return st(async()=>{await c()}),(r,m)=>{const w=zi,d=Ue,g=Se,v=Ce,h=Wo;return _(),$("div",Pg,[f(v,{label:u(o)("main.tag")},{default:y(()=>[(_(!0),$(ke,null,Ie(i.tag.dynamicTags,b=>(_(),S(w,{key:b,"disable-transitions":!1,class:"mx-1 pub-tag",closable:"",onClose:P=>l.handleTagClose(b)},{default:y(()=>[V(R(b),1)]),_:2},1032,["onClose"]))),128)),i.tag.inputVisible?(_(),S(d,{key:0,ref_key:"tagRefInput",ref:a,modelValue:i.tag.inputValue,"onUpdate:modelValue":m[0]||(m[0]=b=>i.tag.inputValue=b),class:"ml-1 w-20 pub-tag-input",size:"small",onBlur:l.handleTagInputConfirm,onKeyup:bn(l.handleTagInputConfirm,["enter"])},null,8,["modelValue","onBlur","onKeyup"])):(_(),S(g,{key:1,class:"button-new-tag ml-1 el-tag",size:"small",onClick:l.tagShowInput},{default:y(()=>[V(R(u(o)("main.tag.new")),1)]),_:1},8,["onClick"])),i.tag.platformTags.length>0?(_(),S(g,{key:2,class:"button-new-tag ml-1 el-tag",size:"small",onClick:l.tagShowSelect},{default:y(()=>[V(R(i.tag.selectVisible?u(o)("main.tag.close"):u(o)("main.tag.select")),1)]),_:1},8,["onClick"])):F("",!0)]),_:1},8,["label"]),i.tag.platformTags.length>0&&i.tag.selectVisible?(_(),S(v,{key:0},{default:y(()=>[f(h,{modelValue:i.tag.dynamicTags,"onUpdate:modelValue":m[1]||(m[1]=b=>i.tag.dynamicTags=b),style:{width:"100%"},data:i.tag.platformTags,multiple:"","check-on-click-node":!0,"render-after-expand":!1,"show-checkbox":"",placeholder:u(o)("main.tag.select"),"empty-text":u(o)("main.tag.empty"),"no-data-text":u(o)("main.tag.empty"),onNodeClick:l.onPlatformTagChange,onCheck:l.onPlatformTagChange,onChange:l.onPlatformTagChange},null,8,["modelValue","data","placeholder","empty-text","no-data-text","onNodeClick","onCheck","onChange"])]),_:1})):F("",!0),i.useAi?(_(),S(v,{key:1},{default:y(()=>[f(g,{size:"small",loading:i.isTagLoading,type:"primary",onClick:l.fetchTag},{default:y(()=>[V(R(i.isTagLoading?u(o)("main.opt.loading"):u(o)("main.auto.fetch.tag")),1)]),_:1},8,["loading","onClick"])]),_:1})):F("",!0)])}}}),dl=ge(Tg,[["__scopeId","data-v-33368d2a"]]),kg={class:"form-desc"},ul=J({__name:"PublishDescription",props:{useAi:{type:Boolean,default:!1},pageId:{type:String,default:""},desc:{type:String,default:""},md:{type:String,default:""},html:{type:String,default:""}},emits:["emitSyncDesc"],setup(p,{emit:e}){const t=L("publish-description"),{t:o}=Z(),s=p,a=re({isDescLoading:!1,useAi:s.useAi,pageId:s.pageId,desc:s.desc,md:s.md,html:s.html});Ke(()=>s.useAi,c=>{a.useAi=c}),Ke(()=>s.html,c=>{a.html=c});const i=e,n=async()=>{a.isDescLoading=!0;const c=!0;try{if(c){const r=go.shortDescPromptStream.content,{chat:m,getChatInput:w}=Bt();a.desc="";const d=await m(r,{name:"desc",systemMessage:w(a?.md,a.html),stream:!0,onProgress:g=>{a.desc=g.text,t.debug("partialResponse=>",g.text)},timeoutMs:120*1e3});t.debug("chatResp=>",d)}i("emitSyncDesc",a.desc),X.success("ä½¿ç”¨äººå·¥æ™ºèƒ½æå–æ‘˜è¦æˆåŠŸ")}catch(r){t.error(o("main.opt.failure")+"=>",r),X.error(o("main.opt.failure")+"=>"+r)}finally{a.isDescLoading=!1}},l=()=>{i("emitSyncDesc",a.desc)};return(c,r)=>{const m=Ue,w=Ce,d=Se;return _(),$("div",kg,[f(w,{label:u(o)("main.desc")},{default:y(()=>[f(m,{modelValue:a.desc,"onUpdate:modelValue":r[0]||(r[0]=g=>a.desc=g),autosize:{minRows:3,maxRows:16},type:"textarea",placeholder:"è¯·è¾“å…¥æ–‡ç« æ‘˜è¦",onInput:l},null,8,["modelValue"])]),_:1},8,["label"]),a.useAi?(_(),S(w,{key:0},{default:y(()=>[f(d,{size:"small",loading:a.isDescLoading,type:"primary",onClick:n},{default:y(()=>[V(R(a.isDescLoading?u(o)("main.opt.loading"):u(o)("main.auto.fetch.desc")),1)]),_:1},8,["loading"])]),_:1})):F("",!0)])}}}),Sg={key:1,class:"single-tag-slug"},Cg=J({__name:"SingleTagSlug",props:{cfg:{type:Object,default:{}},apiType:{type:String,default:""},tagSlugs:{type:String,default:""}},emits:["emitSyncTagSlugs"],setup(p,{emit:e}){const t=L("single-tag-slugs");Z();const o=p,s=re({cfg:o.cfg,apiType:o.apiType,tagSlugs:T.isEmptyString(o.tagSlugs)?[]:o.tagSlugs.split(","),tag:{tagSelected:"",tagList:[]},isInit:!1}),a=e,i=l=>{const c=l;t.debug("value=>",c),t.debug("label=>",c);const r=[];r.push(c),s.tagSlugs=r,t.debug("tagSlugs=>",s.tagSlugs),a("emitSyncTagSlugs",r)},n=async()=>{let l=[];const c=s.cfg;l=await(await be.getAdaptor(s.apiType,c)).getTags(),t.debug("getTags for single slug tag",l),l.length>0&&(s.tag.tagList=l.map(m=>({value:m.tagId,label:m.tagName})),s.tag.tagSelected=s.tagSlugs?.[0]??"",t.debug("è¯»å–å·²æœ‰åˆ«åæ ‡ç­¾ =>",{tagSlugs:ne(s.tagSlugs)}))};return st(async()=>{try{await n()}catch(l){t.error("åˆ«åæ ‡ç­¾åŠ è½½å¤±è´¥",l)}finally{s.isInit=!0}}),(l,c)=>{const r=Ht,m=it,w=at,d=Ce;return s.isInit?(_(),$("div",Sg,[f(d,{label:"æ ‡ç­¾"},{default:y(()=>[f(w,{modelValue:s.tag.tagSelected,"onUpdate:modelValue":c[0]||(c[0]=g=>s.tag.tagSelected=g),placeholder:"è¯·é€‰æ‹©","no-data-text":"æš‚æ— æ•°æ®",class:"m-2",size:"default",onChange:i},{default:y(()=>[(_(!0),$(ke,null,Ie(s.tag.tagList,g=>(_(),S(m,{key:g.value,label:g.label,value:g.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),c[1]||(c[1]=C("div",{class:"form-item-bottom"},null,-1))])):(_(),S(r,{key:0,class:"placeholder",rows:1,animated:""}))}}}),Eg=ge(Cg,[["__scopeId","data-v-fd952806"]]);var ot=(p=>(p[p.YAML=0]="YAML",p[p.MD_CONTENT=1]="MD_CONTENT",p[p.YAML_MD_CONTENT=2]="YAML_MD_CONTENT",p[p.HTML_CONTENT=3]="HTML_CONTENT",p))(ot||{});const Ag={key:1,class:"source-mode"},Ig={class:"source-opt"},Ug={key:2,id:"yaml-edit-content"},xg={key:3,id:"yaml-detail-content"},Mg={id:"yaml-read-mode-tip"},Dg=J({__name:"SourceMode",props:{modelValue:{type:Object,default:{}},pageId:{type:String,default:""},apiType:{type:String,default:""},cfg:{type:Object,default:{}}},emits:["emitSyncPost","edmtSyncToSiyuan"],async setup(p,{emit:e}){let t,o;const s=L("source-mode"),{t:a}=Z(),{handlePicgo:i}=Xo(),n=p,l=re({isLoading:!1,stype:ot.MD_CONTENT,contentReadonlyMode:!0,readonlyMode:T.isEmptyString(n.apiType),syncStatus:"info",syncMessage:"æœªä¿®æ”¹",pageId:n.pageId,apiType:n.apiType,cfg:n.cfg,yamlAdaptor:{},yamlFormatObj:{},siyuanPost:n.modelValue,yamlContent:"",isSaved:!0}),c=e,r=P=>{switch(l.stype=P,P){case ot.YAML:l.contentReadonlyMode=!1,v(l.yamlFormatObj.formatter);break;case ot.MD_CONTENT:l.contentReadonlyMode=!0,v(l.yamlFormatObj.mdContent);break;case ot.YAML_MD_CONTENT:l.contentReadonlyMode=!0,v(l.yamlFormatObj.mdFullContent);break;case ot.HTML_CONTENT:l.contentReadonlyMode=!0,v(l.yamlFormatObj.htmlContent);break}},m=P=>{if(P.preventDefault(),P.target.select(),Ot.isInBrowser)try{Ot.copyToClipboardInBrowser(l.yamlContent),X.success(a("main.copy.success"))}catch(E){s.error(a("main.copy.failure"),E),X.error(a("main.copy.failure")+"=>"+E)}},w=P=>{s.debug("ä»…åœ¨å¸¸è§„å‘å¸ƒä½¿ç”¨"),l.isSaved=!1,l.syncStatus="info",l.syncMessage="å·²ä¿®æ”¹"},d=()=>{l.yamlFormatObj.formatter=l.yamlContent,l.yamlFormatObj.mdFullContent=ie.addYamlToMd(l.yamlFormatObj.formatter,l.yamlFormatObj.mdContent),s.debug("val =>",l.yamlContent);try{const P=ie.yaml2Obj(l.yamlFormatObj.formatter);l.yamlFormatObj.yamlObj=P,l.siyuanPost=l.yamlAdaptor.convertToAttr(l.siyuanPost,l.yamlFormatObj,l.cfg),s.debug("å‡†å¤‡emit =>",{post:ne(l.siyuanPost)}),l.siyuanPost.yamlType=Jt.Yaml_custom_hand,c("emitSyncPost",l.siyuanPost),c("edmtSyncToSiyuan"),l.syncStatus="success",l.syncMessage="YAMLå·²è§£æžæˆåŠŸå¹¶åŒæ­¥ã€‚åŒæ­¥æ—¶é—´ =>"+Ae.formatIsoToZh(new Date().toISOString(),!0),l.isSaved=!0}catch(P){l.syncStatus="error",l.syncMessage="YAMLè§£æžå¤±è´¥ï¼ŒYAMLå°†ä¸å¯ç”¨ï¼Œé”™è¯¯å¦‚ä¸‹ =>"+P,s.error("YAMLè§£æžå¤±è´¥",P)}},g=P=>{P.preventDefault()},v=async P=>{l.yamlContent=P},h=async P=>{let k=new Ze;switch(P.yamlType){case Jt.Yaml_custom_auto:{const E=l.apiType;k=l.yamlAdaptor.convertToYaml(P,void 0,l.cfg),s.debug("å¸¸è§„å‘å¸ƒï¼Œè‡ªåŠ¨ç”Ÿæˆå¯¹åº”å¹³å°çš„YAML, =>",E);break}case Jt.Yaml_custom_hand:{const E=new Ze,M=await ie.yaml2ObjAsync(P.yaml);E.yamlObj=M,k=l.yamlAdaptor.convertToYaml(P,E,l.cfg),s.debug("å¸¸è§„å‘å¸ƒï¼Œä¿®æ”¹è¿‡YAML");break}default:{const E=Ri.toYamlObj(l.siyuanPost);k.formatter=ie.obj2Yaml(E),k.mdContent=P.markdown,k.mdFullContent=ie.addYamlToMd(k.formatter,k.mdContent),k.htmlContent=P.html,s.debug("æœªæ‰¾åˆ°YAMLé€‚é…å™¨ï¼Œå°†ç”Ÿæˆå…¬å…±çš„YAML");break}}l.yamlFormatObj=k,r(l.stype),s.info("ç¼–è¾‘æ¨¡å¼åˆ° YAML çš„åŒæ­¥å·²å®Œæˆ")},b=async()=>{l.isLoading=!0;try{const P=l.siyuanPost,k=l.pageId,E=await i(k,P.markdown);P.markdown=E,l.yamlAdaptor=l.readonlyMode?null:await be.getYamlAdaptor(l.apiType,l.cfg),l.readonlyMode=l.yamlAdaptor===null,l.readonlyMode||(l.stype=ot.YAML),await h(P),s.debug(`init Page in source mode, readonlyMode: ${l.readonlyMode} =>`,{siyuanPost:ne(l.siyuanPost)})}catch(P){X.error(P.message),s.error(a("main.opt.failure")+"=>",P)}finally{l.isLoading=!1}};return[t,o]=ve(()=>b()),await t,o(),(P,k)=>{const E=Ht,M=Ce,H=Ne,B=Ue;return l.isLoading?(_(),S(E,{key:0,class:"placeholder",rows:5,animated:""})):(_(),$("div",Ag,[l.isSaved?F("",!0):(_(),S(M,{key:0,class:"un-saved-tip"},{default:y(()=>[k[6]||(k[6]=V(" æ£€æµ‹åˆ°æœ‰æœªä¿å­˜çš„æ›´æ”¹ï¼Œæ˜¯å¦ä¿å­˜ï¼Ÿ",-1)),C("a",{onClick:d},"é©¬ä¸Šä¿å­˜")]),_:1})),l.readonlyMode?F("",!0):(_(),S(M,{key:1},{default:y(()=>[f(H,{closable:!1,title:l.syncMessage,class:"top-yaml-tip",type:l.syncStatus},null,8,["title","type"])]),_:1})),C("div",Ig,[f(M,null,{default:y(()=>[C("a",{class:as({current:l.stype===u(ot).YAML}),onClick:k[0]||(k[0]=D=>r(u(ot).YAML))},R(u(a)("yaml.show.type.yaml")),3),C("a",{class:as({current:l.stype===u(ot).MD_CONTENT,middle:!0}),onClick:k[1]||(k[1]=D=>r(u(ot).MD_CONTENT))},R(u(a)("yaml.show.type.md")),3),C("a",{class:as({current:l.stype===u(ot).YAML_MD_CONTENT,middle:!0}),onClick:k[2]||(k[2]=D=>r(u(ot).YAML_MD_CONTENT))},R(u(a)("yaml.show.type.yamlmd")),3),C("a",{class:as({current:l.stype===u(ot).HTML_CONTENT}),onClick:k[3]||(k[3]=D=>r(u(ot).HTML_CONTENT))},R(u(a)("yaml.show.type.html")),3)]),_:1})]),!l.contentReadonlyMode&&!l.readonlyMode?(_(),$("div",Ug,[f(M,null,{default:y(()=>[f(B,{modelValue:l.yamlContent,"onUpdate:modelValue":k[4]||(k[4]=D=>l.yamlContent=D),autosize:{minRows:4,maxRows:16},type:"textarea",onInput:w},null,8,["modelValue"])]),_:1})])):(_(),$("div",xg,[f(M,null,{default:y(()=>[f(B,{id:"yaml-detail-preview",modelValue:l.yamlContent,"onUpdate:modelValue":k[5]||(k[5]=D=>l.yamlContent=D),autosize:{minRows:4,maxRows:16},readonly:"",type:"textarea",class:"readonly-textarea",onClick:m,onContextmenu:g},null,8,["modelValue"])]),_:1})])),C("div",Mg,[f(M,null,{default:y(()=>[l.readonlyMode?(_(),S(H,{key:0,class:"top-yaml-tip",closable:!1,title:u(a)("main.read.mode.tip1"),type:"error"},null,8,["title"])):F("",!0)]),_:1})])]))}}}),ml=ge(Dg,[["__scopeId","data-v-4f84daf5"]]),Og={class:"form-edit-mode"},hl=J({__name:"EditModeSelect",props:{editType:{type:Number,default:Fe.EditMode_simple}},emits:["emitSyncEditMode"],setup(p,{emit:e}){const{t}=Z(),o=p,s=re({etype:o.editType});Ke(()=>o.editType,n=>{s.etype=n});const a=e,i=n=>{s.etype=n,a("emitSyncEditMode",n)};return(n,l)=>{const c=Se,r=gr,m=Ce;return _(),$("div",Og,[f(m,{label:u(t)("main.publish.editmode")},{default:y(()=>[f(r,null,{default:y(()=>[f(c,{type:s.etype===u(Fe).EditMode_simple?"primary":"default",onClick:l[0]||(l[0]=w=>i(u(Fe).EditMode_simple))},{default:y(()=>[V(R(u(t)("main.publish.editmode.simple")),1)]),_:1},8,["type"]),f(c,{type:s.etype===u(Fe).EditMode_complex?"primary":"default",onClick:l[1]||(l[1]=w=>i(u(Fe).EditMode_complex))},{default:y(()=>[V(R(u(t)("main.publish.editmode.complex")),1)]),_:1},8,["type"]),f(c,{type:s.etype===u(Fe).EditMode_source?"primary":"default",onClick:l[2]||(l[2]=w=>i(u(Fe).EditMode_source))},{default:y(()=>[V(R(u(t)("main.publish.editmode.source")),1)]),_:1},8,["type"])]),_:1})]),_:1},8,["label"])])}}}),$g={class:"form-publish-time"},fl=J({__name:"PublishTime",props:{modelValue:{type:Object,default:{}}},emits:["emitSyncPublishTime"],setup(p,{emit:e}){const{t}=Z(),o=p,s=re({dateCreatedString:Ae.formatIsoToZh(o.modelValue?.dateCreated?.toISOString(),!0),dateUpdatedString:Ae.formatIsoToZh((o.modelValue?.dateUpdated??new Date).toISOString(),!0)}),a=e,i=()=>{const n=Ae.convertStringToDate(s.dateCreatedString),l=Ae.convertStringToDate(s.dateUpdatedString);a("emitSyncPublishTime",n,l)};return(n,l)=>{const c=dr,r=Ce;return _(),$("div",$g,[f(r,{label:u(t)("main.create.time")},{default:y(()=>[f(c,{modelValue:s.dateCreatedString,"onUpdate:modelValue":l[0]||(l[0]=m=>s.dateCreatedString=m),placeholder:u(t)("main.create.time.placeholder"),format:"YYYY-MM-DD HH:mm:ss",type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",onChange:i},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),f(r,{label:u(t)("main.update.time")},{default:y(()=>[f(c,{modelValue:s.dateUpdatedString,"onUpdate:modelValue":l[1]||(l[1]=m=>s.dateUpdatedString=m),placeholder:u(t)("main.update.time.placeholder"),format:"YYYY-MM-DD HH:mm:ss",type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",onChange:i},null,8,["modelValue","placeholder"])]),_:1},8,["label"])])}}}),Vg={key:0,class:"tree-single-cateslugs"},Ng=J({__name:"TreeSingleKnowledgeSpace",props:{knowledgeSpaceConfig:{type:Object,default:{}},cateSlugs:{type:Array,default:[]}},emits:["emitSyncTreeSingleCateSlugs"],setup(p,{emit:e}){const t=L("tree-single-cateslugs"),{t:o}=Z(),s=p,a=re({knowledgeSpaceConfig:s.knowledgeSpaceConfig,cateSlugs:s.cateSlugs,path:{customPath:"",cacheData:[],customProps:{label:"label",children:"children",isLeaf:"isLeaf"}}}),i=e,n=async(c,r)=>{if(c.isLeaf)return r([]);const m=a.knowledgeSpaceConfig.cfg,w=await be.getAdaptor(a.knowledgeSpaceConfig.apiType,m);let d,g=c.data.value||"";g===""&&a.path.customPath!==""?d="":(g===""&&(g=""),d=g);const v=await w.getCategoryTreeNodes(d);r(v)},l=c=>{if(t.debug("onSelectChange=>",c),c.isLeaf){X.error("æ‚¨å½“å‰é€‰æ‹©çš„æ˜¯é¡µé¢ï¼Œè¯·æ³¨æ„ï¼Œé¡µé¢å¿…é¡»å‘å¸ƒåœ¨ç›®å½•ä¸‹");return}const r=c.value,m=[];m.push(r),i("emitSyncTreeSingleCateSlugs",m)};return st(()=>{const c=a.cateSlugs?.[0]??a.knowledgeSpaceConfig?.cfg?.blogid;a.path.customPath=c,a.path.customPath.includes(Mt)&&(a.knowledgeSpaceConfig.readonlyMode=!0,a.knowledgeSpaceConfig.cfg.placeholder.knowledgeSpaceReadonlyModeTip="å½“å‰ä¸ºè‡ªåŠ¨æ˜ å°„ç›®å½•æ¨¡å¼ï¼Œå°†æ ¹æ®ç¬”è®°å±‚çº§è‡ªåŠ¨ç”Ÿæˆç›®å½•ðŸ˜„"),t.debug("init tree data, cateSlugs =>",{cateSlugs:ne(a.cateSlugs)})}),(c,r)=>{const m=Wo,w=Ce,d=Ne;return a.knowledgeSpaceConfig.cateEnabled?(_(),$("div",Vg,[f(w,{label:u(o)("main.publish.github.choose.path")},{default:y(()=>[f(m,{modelValue:a.path.customPath,"onUpdate:modelValue":r[0]||(r[0]=g=>a.path.customPath=g),lazy:"",load:n,props:a.path.customProps,"check-strictly":!0,"empty-text":u(o)("main.data.empty"),"no-data-text":u(o)("main.data.empty"),placeholder:u(o)("main.opt.select"),disabled:a.knowledgeSpaceConfig.readonlyMode,onNodeClick:l},null,8,["modelValue","props","empty-text","no-data-text","placeholder","disabled"])]),_:1},8,["label"]),a.knowledgeSpaceConfig.readonlyMode?(_(),S(w,{key:0},{default:y(()=>[f(d,{closable:!1,title:a.knowledgeSpaceConfig.cfg?.placeholder?.knowledgeSpaceReadonlyModeTip,class:"form-item-tip",type:"warning"},null,8,["title"])]),_:1})):F("",!0),r[1]||(r[1]=C("div",{class:"form-item-bottom"},null,-1))])):F("",!0)}}}),Hg=ge(Ng,[["__scopeId","data-v-a5622168"]]),Lg={key:1,class:"single-knowledge-space"},Rg=J({__name:"SingleKnowledgeSpace",props:{knowledgeSpaceConfig:{type:Object,default:{}},cateSlugs:{type:Array,default:[]}},emits:["emitSyncSingleCateSlugs"],setup(p,{emit:e}){const t=L("single-knowledge-space"),{t:o}=Z(),s=p,a=Y(null),i=re({knowledgeSpaceConfig:s.knowledgeSpaceConfig,cateSlugs:s.cateSlugs,cate:{categorySelected:"",categoryList:[]},ksKeyword:"",isCateLoading:!1,isInit:!1}),n=e,l=Ko(()=>i?.knowledgeSpaceConfig?.cfg?.knowledgeSpaceTitle??o("main.cat")),c=w=>{const d=w;t.debug("value=>",d),t.debug("label=>",d);const g=[];g.push(d),i.cateSlugs=g,t.debug("cateSlugs=>",i.cateSlugs),n("emitSyncSingleCateSlugs",g)},r=async()=>{try{i.isCateLoading=!0,t.debug("reload categories for single category woth search"),i.cate.categoryList=[],i.cate.categorySelected=void 0,await m(!1),a.value.visible=!0}catch(w){t.error("çŸ¥è¯†ç©ºé—´åŠ è½½å¤±è´¥",w)}finally{i.isCateLoading=!1,i.isInit=!0}},m=async w=>{let d=[];const g=i.knowledgeSpaceConfig.cfg;d=await(await be.getAdaptor(i.knowledgeSpaceConfig.apiType,g)).getCategories(i.ksKeyword),t.debug("getCategories for single category",d),d.length>0&&(i.cate.categoryList=d.map(h=>({value:h.categoryId,label:h.categoryName})),w&&(i.cate.categorySelected=i.cateSlugs?.[0]??g.blogid??"",t.debug("è¯»å–å·²æœ‰çŸ¥è¯†ç©ºé—´ =>",{cateSlugs:ne(i.cateSlugs)})))};return st(async()=>{try{i.isCateLoading=!0,await m(!0),i?.cate?.categorySelected?.toString().includes(Mt)&&(i.knowledgeSpaceConfig.readonlyMode=!0,i.knowledgeSpaceConfig.readonlyModeTip="å½“å‰ä¸ºè‡ªåŠ¨æ˜ å°„ç›®å½•æ¨¡å¼ï¼Œå°†æ ¹æ®ç¬”è®°å±‚çº§è‡ªåŠ¨ç”Ÿæˆç›®å½•ðŸ˜„")}catch(w){t.error("çŸ¥è¯†ç©ºé—´åŠ è½½å¤±è´¥",w)}finally{i.isCateLoading=!1,i.isInit=!0}}),(w,d)=>{const g=Ht,v=Ue,h=Ce,b=it,P=at,k=Ne;return i.isInit?(_(),$("div",Lg,[!i.knowledgeSpaceConfig.readonlyMode&&i.knowledgeSpaceConfig?.cfg?.cateSearchEnabled?(_(),S(h,{key:0,class:"cate-input",label:"æœç´¢å…³é”®è¯"},{default:y(()=>[f(v,{modelValue:i.ksKeyword,"onUpdate:modelValue":d[0]||(d[0]=E=>i.ksKeyword=E),placeholder:"è¯·è¾“å…¥["+l.value+"]æœç´¢å…³é”®è¯ï¼Œè¾“å…¥å®ŒæˆåŽè¯·æŒ‰Enteré”®æˆ–è€…ç§»èµ°å…‰æ ‡",onChange:r},null,8,["modelValue","placeholder"])]),_:1})):F("",!0),f(h,{label:l.value},{default:y(()=>[f(P,{modelValue:i.cate.categorySelected,"onUpdate:modelValue":d[1]||(d[1]=E=>i.cate.categorySelected=E),placeholder:"è¯·é€‰æ‹©","no-data-text":"æš‚æ— æ•°æ®",class:"m-2",size:"default",onChange:c,disabled:i.knowledgeSpaceConfig.readonlyMode,loading:i.isCateLoading,"loading-text":"åŠ è½½ä¸­...",ref_key:"singleCateSelect",ref:a},{default:y(()=>[(_(!0),$(ke,null,Ie(i.cate.categoryList,E=>(_(),S(b,{key:E.value,label:E.label,value:E.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled","loading"])]),_:1},8,["label"]),i.knowledgeSpaceConfig.readonlyMode?(_(),S(h,{key:1},{default:y(()=>[f(k,{closable:!1,title:i.knowledgeSpaceConfig.readonlyModeTip,class:"form-item-tip",type:"warning"},null,8,["title"])]),_:1})):F("",!0),d[2]||(d[2]=C("div",{class:"form-item-bottom"},null,-1))])):(_(),S(g,{key:0,class:"placeholder",rows:1,animated:""}))}}}),Gg=ge(Rg,[["__scopeId","data-v-d0a83d99"]]),Bg={key:0},jg={key:1},Kg={key:2},zg=J({__name:"PublishKnowledgeSpace",props:{knowledgeSpaceType:{type:String,default:Q.CategoryType_None},knowledgeSpaceConfig:{type:Object,default:{}},cateSlugs:{type:Array,default:[]}},emits:["emitSyncCateSlugs"],setup(p,{emit:e}){const t=L("publish-categories"),o=p,s=re({knowledgeSpaceType:o.knowledgeSpaceType,knowledgeSpaceConfig:o.knowledgeSpaceConfig,cateSlugs:o.cateSlugs}),a=e,i=n=>{t.debug("sync single cateSlugs =>",{cateSlugs:ne(n)}),a("emitSyncCateSlugs",n)};return(n,l)=>{const c=Gg,r=Hg;return s.knowledgeSpaceType===u(Q).CategoryType_Single?(_(),$("div",Bg,[f(c,{"knowledge-space-config":s.knowledgeSpaceConfig,"onUpdate:knowledgeSpaceConfig":l[0]||(l[0]=m=>s.knowledgeSpaceConfig=m),"cate-slugs":s.cateSlugs,"onUpdate:cateSlugs":l[1]||(l[1]=m=>s.cateSlugs=m),onEmitSyncSingleCateSlugs:i},null,8,["knowledge-space-config","cate-slugs"])])):s.knowledgeSpaceType===u(Q).CategoryType_Tree_Single?(_(),$("div",jg,[f(r,{"knowledge-space-config":s.knowledgeSpaceConfig,"onUpdate:knowledgeSpaceConfig":l[2]||(l[2]=m=>s.knowledgeSpaceConfig=m),"cate-slugs":s.cateSlugs,"onUpdate:cateSlugs":l[3]||(l[3]=m=>s.cateSlugs=m),onEmitSyncTreeSingleCateSlugs:i},null,8,["knowledge-space-config","cate-slugs"])])):(_(),$("div",Kg))}}}),Jg={class:"form-post-title"},yl=J({__name:"PublishTitle",props:{useAi:{type:Boolean,default:!1},modelValue:{type:String,default:""},md:{type:String,default:""},html:{type:String,default:""}},emits:["emitSyncPublishTitle"],setup(p,{emit:e}){const t=L("publish-title"),{t:o}=Z(),s=p,a=re({postTitle:s.modelValue,isLoading:!1,useAi:s.useAi,md:s.md,html:s.html});Ke(()=>s.useAi,c=>{a.useAi=c}),Ke(()=>s.modelValue,c=>{a.postTitle=c}),Ke(()=>s.md,c=>{a.md=c}),Ke(()=>s.html,c=>{a.html=c});const i=e,n=()=>{i("emitSyncPublishTitle",a.postTitle)},l=async()=>{try{a.isLoading=!0;const c=go.titlePrompt.content,{chat:r,getChatInput:m}=Bt(),w=await r(c,{name:"title",systemMessage:m(a?.md,a.html)});if(T.isEmptyString(w)){X.error("è¯·æ±‚é”™è¯¯ï¼Œè¯·åœ¨åå¥½è®¾ç½®é…ç½®è¯·æ±‚åœ°å€å’ŒChatGPT keyï¼");return}const d=te.safeParse(w,{});if(T.isEmptyString(d?.title))throw new Error("æ–‡æ¡£ä¿¡æ¯é‡å¤ªå°‘ï¼Œæœªèƒ½æŠ½å–æœ‰æ•ˆä¿¡æ¯");a.postTitle=d.title,t.info("ä½¿ç”¨AIæ™ºèƒ½ç”Ÿæˆçš„æ ‡é¢˜ç»“æžœ =>",{inputWord:c,chatText:w}),i("emitSyncPublishTitle",a.postTitle),X.success("ä½¿ç”¨äººå·¥æ™ºèƒ½æå–æ ‡é¢˜æˆåŠŸ")}catch(c){t.error(o("main.opt.failure")+"=>",c),X.error(o("main.opt.failure")+"=>"+c)}finally{a.isLoading=!1}};return(c,r)=>{const m=Ue,w=Ce,d=Se;return _(),$("div",Jg,[f(w,{label:u(o)("main.title")},{default:y(()=>[f(m,{modelValue:a.postTitle,"onUpdate:modelValue":r[0]||(r[0]=g=>a.postTitle=g),onInput:n},null,8,["modelValue"])]),_:1},8,["label"]),a.useAi?(_(),S(w,{key:0},{default:y(()=>[f(d,{size:"small",loading:a.isLoading,type:"primary",onClick:l},{default:y(()=>[V(R(a.isLoading?u(o)("main.opt.loading"):u(o)("main.auto.fetch.title")),1)]),_:1},8,["loading"])]),_:1})):F("",!0)])}}}),Wg={key:1,id:"batch-publish-index"},Fg={class:"publish-form"},qg={key:1,class:"normal-mode"},Yg={key:2,class:"complex-mode"},Xg=["href","title"],Qg=J({__name:"SinglePublishDoPublish",setup(p){const e=L("single-publish-do-publish"),{t}=Z(),o=tt(),{query:s}=tt(),{kernelApi:a}=Ge(),{doSinglePublish:i,doSingleDelete:n,initPublishMethods:l,doForceSingleDelete:c}=ro(),r=kt(),{getPublishCfg:m}=lo(),{getReadOnlyPublishPreferenceSetting:w}=Tt(),d=Re.systemCfg.map(q=>q.platformKey),g=re(o.params),v=g.key,h=g.id,b=re({isInit:!1,method:s.method,isPublishLoading:!1,isDeleteLoading:!1,errMsg:"",siyuanPost:{},platformPost:{},mergedPost:{},publishCfg:{},tagConfig:{},categoryConfig:{},knowledgeSpaceConfig:{},postPreviewUrl:"",useAi:!1,editType:Fe.EditMode_simple,pref:w(),actionEnable:!0}),P=async()=>{try{b.isPublishLoading=!0,b.actionEnable=!1,Ve.value=!1,b.errMsg="",e.info("ä¿å­˜åˆ°ç³»ç»Ÿå¹³å°å¼€å§‹");for(const K of d){const Le=await m(K),Et=Pe(b.mergedPost);await i(K,h,Le,Et)}e.info("ä¿å­˜åˆ°ç³»ç»Ÿå¹³å°ç»“æŸ"),e.info("å•ä¸ªå¸¸è§„å‘å¸ƒå¼€å§‹"),b.mergedPost.editMode=b.editType;const q=await i(v,h,b.publishCfg,b.mergedPost);e.info("normal publish processResult =>",q),e.info("å•ä¸ªå¸¸è§„å‘å¸ƒç»“æŸ"),q.status?b.method===lt.METHOD_ADD?X.success("æ–‡ç« å‘å¸ƒæˆåŠŸï¼å¦‚éœ€ç¼–è¾‘è¯·é‡æ–°æ‰“å¼€"):(b.actionEnable=!0,X.success("æ–‡ç« æ›´æ–°æˆåŠŸï¼")):(b.actionEnable=!0,e.error(q.errMsg),b.errMsg=q.errMsg,X.error(q.errMsg))}catch(q){e.error(t("main.opt.failure")+"=>",q),b.errMsg=q.toString(),X.error(q.toString())}finally{b.isPublishLoading=!1,Ve.value=!0}},k=async()=>{const q=G(),K=x();vt.confirm(`ç¡®è®¤è¦åˆ é™¤ [${q} - ${K}] ä¸‹çš„è¿™ç¯‡æ–‡ç« å—ï¼Œæ­¤å¹³å°çš„æ–‡ç« æ•°æ®å°†æ°¸ä¹…åˆ é™¤ ï¼Ÿ`,"æ¸©é¦¨æç¤º",{type:"error",icon:ze(zs),confirmButtonText:t("main.opt.ok"),cancelButtonText:t("main.opt.cancel")}).then(async()=>{await E()}).catch(()=>{})},E=async()=>{try{b.isDeleteLoading=!0,b.actionEnable=!1,b.errMsg="";const q=await n(v,h,b.publishCfg);if(q.status){const K=G(),Le=x();X.success(`[${K} - ${Le}] æ–‡ç« åˆ é™¤æˆåŠŸ`),setTimeout(()=>{b.method=lt.METHOD_ADD,window.location.href=Ot.setUrlParameter(window.location.href,"method",b.method),window.location.reload()},200)}else b.actionEnable=!0,e.error(q.errMsg),b.errMsg=q.errMsg,X.error(q.errMsg)}catch(q){e.error(t("main.opt.failure")+"=>",q),b.errMsg=q.toString(),X.error(q.toString())}finally{b.isDeleteLoading=!1}},M=async()=>{try{b.errMsg="",await c(v,h,b.publishCfg);const q=G(),K=x();X.success(`[${q} - ${K}] æ–‡ç« ä¿¡æ¯å·²å¼ºåˆ¶åˆ é™¤`),setTimeout(()=>{b.method=lt.METHOD_ADD,window.location.href=Ot.setUrlParameter(window.location.href,"method",b.method),window.location.reload()},200)}catch(q){b.errMsg=q.message,X.error(q.message)}finally{b.isDeleteLoading=!1}},H=async()=>{await B(),await D(),X.success("å±žæ€§å·²ç»æˆåŠŸåŒæ­¥åˆ°æ€æº")},B=async()=>{const q={[rt.Sys_memo]:b.mergedPost.shortDesc,[rt.Sys_tags]:b.mergedPost.mt_keywords,[rt.Custom_categories]:b.mergedPost?.categories?.join(",")??[]};await a.setBlockAttrs(h,q),e.debug("ä¿å­˜å†…ç½®å¹³å°å±žæ€§",q)},D=async()=>{const q=b.mergedPost.yaml,K=Bs(v);await a.setSingleBlockAttr(h,K,q),e.debug("ä¿å­˜å½“å‰å¹³å°å±žæ€§",{yaml:ne(q)})},G=()=>b.publishCfg?.dynCfg?.platformName||"",x=()=>{const q=b.publishCfg?.cfg;let K=q?.blogName||"";if(q?.knowledgeSpaceEnabled&&b.mergedPost?.cate_slugs?.length>0){let Le;b.mergedPost?.categories?.length>0?Le=b.mergedPost?.categories[0]:Le="",K=Le??""}return K},ee=Ko(()=>{const q=G(),K=x();let Le="å½“å‰æ“ä½œçš„å¹³å°ä¸º - ";const Et=q||v;return Le+=Nt.longPlatformName(Et,11),K&&(Le+=" - "+K),Le}),I=async q=>{b.editType=q,e.debug("syncEditMode in single publish")},N=q=>{b.mergedPost.title=q,e.debug("syncPublishTitle in single publish")},oe=q=>{b.mergedPost.shortDesc=q,b.mergedPost.mt_text_more=q,b.mergedPost.mt_excerpt=q,e.debug("syncDesc in single publish")},j=q=>{b.mergedPost.mt_keywords=q?.join(","),e.debug("syncTags in single publish")},O=q=>{b.mergedPost.tags_slugs=q?.join(","),e.debug("syncTagSlugs in single publish")},he=q=>{b.mergedPost.categories=q,e.debug("syncCates in single publish")},$e=q=>{b.mergedPost.cate_slugs=q,e.debug("syncCateSlugs in single publish")},De=(q,K)=>{b.mergedPost.dateCreated=q,b.mergedPost.dateUpdated=K,e.debug("syncPublishTime in single publish")},qe=(q,K)=>{b.mergedPost.post_status=q,b.mergedPost.wp_password=K,e.debug("syncPublishStatus in single publish")},ye=q=>{b.mergedPost=q,e.debug("syncPost in single publish")},dt=()=>{const q="/publish/singlePublish";e.info("will go to =>",q);const K={path:q,query:{id:h}};r.push(K)},We=async()=>{try{const{mergedPost:q,postPreviewUrl:K}=await l.doInitSinglePage(v,h,b.method,b.publishCfg);b.mergedPost=q,b.postPreviewUrl=K}catch(q){const K=t("main.opt.failure")+"=>"+q;throw e.error(t("main.opt.failure")+"=>",q),await a.pushErrMsg({msg:K,timeout:7e3}),q}},le=()=>{let q=!1,K=0;for(;!q&&K<3;)try{Bt(),q=!0}catch(Le){e.error(`${t("main.opt.failure")} => ${Le}`),K++}return e.info(`ç¬¬${K}æ¬¡å°è¯•å°±æ£€æµ‹AIçŠ¶æ€: ${q}`),q},Ve=Y(!1),{loadingTime:vs}=co(Ve);return st(async()=>{e.info("èŽ·å–åˆ°çš„IDä¸º=>",h);try{b.publishCfg=await m(v),await We(),b.mergedPost=await l.assignInitAttrs(b.mergedPost,h,b.publishCfg);const q=b.publishCfg.cfg;b.tagConfig={apiType:v,cfg:q},b.categoryConfig={cateEnabled:q.cateEnabled,readonlyMode:b.method===lt.METHOD_EDIT&&!q.allowCateChange,readonlyModeTip:q?.placeholder?.cateReadonlyModeTip,apiType:v,cfg:q},b.knowledgeSpaceConfig={cateEnabled:q.knowledgeSpaceEnabled,readonlyMode:b.method===lt.METHOD_EDIT&&!q.allowKnowledgeSpaceChange,readonlyModeTip:q?.placeholder?.knowledgeSpaceReadonlyModeTip,apiType:v,cfg:q},e.debug("single publish inited mergedPost =>",ne(b.mergedPost)),b.useAi=le(),b.editType=Fe.EditMode_simple}catch(q){const K=t("main.opt.failure")+"=>"+q;e.error(t("main.opt.failure")+"=>",q),await a.pushErrMsg({msg:K,timeout:7e3})}finally{b.isInit=!0,Ve.value=!0}}),(q,K)=>{const Le=Ht,Et=Qs,ut=Ne,Ps=ml,W=Eg,ae=Fo,Ee=Ue,Oe=Ce,bt=ul,Ye=dl,At=vg,Kt=ag,wt=Se,Ts=nt,ks=An,Zt=En;return _(),S(He,{title:"å¸¸è§„å‘å¸ƒ","has-back-emit":!0,onBackEmit:dt},{default:y(()=>[b.isInit?(_(),$("div",Wg,[f(Et,{"loading-time":u(vs)},null,8,["loading-time"]),f(ut,{class:"top-tip",title:ee.value,type:"info",closable:!1},null,8,["title"]),b.useAi?(_(),S(ut,{key:0,class:"top-tip",title:u(t)("category.ai.enabled"),type:"success",closable:!0},null,8,["title"])):F("",!0),u(T).isEmptyString(b.errMsg)?F("",!0):(_(),S(ut,{key:1,class:"top-tip",title:b.errMsg,type:"error",closable:!0},null,8,["title"])),f(Zt,null,{default:y(()=>[f(ks,null,{default:y(()=>[C("div",Fg,[f(Ts,{"label-width":"100px"},{default:y(()=>[f(hl,{"edit-type":b.editType,"onUpdate:editType":K[0]||(K[0]=z=>b.editType=z),onEmitSyncEditMode:I},null,8,["edit-type"]),b.editType===u(Fe).EditMode_source?(_(),S(Ps,{key:0,modelValue:b.mergedPost,"onUpdate:modelValue":K[1]||(K[1]=z=>b.mergedPost=z),"api-type":u(v),"page-id":u(h),cfg:b.publishCfg.cfg,onEmitSyncPost:ye,onEdmtSyncToSiyuan:H},null,8,["modelValue","api-type","page-id","cfg"])):(_(),$("div",qg,[f(yl,{"use-ai":b.useAi,"onUpdate:useAi":K[2]||(K[2]=z=>b.useAi=z),modelValue:b.mergedPost.title,"onUpdate:modelValue":K[3]||(K[3]=z=>b.mergedPost.title=z),md:b.mergedPost.markdown,"onUpdate:md":K[4]||(K[4]=z=>b.mergedPost.markdown=z),html:b.mergedPost.html,"onUpdate:html":K[5]||(K[5]=z=>b.mergedPost.html=z),onEmitSyncPublishTitle:N},null,8,["use-ai","modelValue","md","html"]),b.publishCfg.cfg?.knowledgeSpaceEnabled?(_(),S(zg,{key:0,"knowledge-space-type":b.publishCfg.cfg.knowledgeSpaceType,"onUpdate:knowledgeSpaceType":K[6]||(K[6]=z=>b.publishCfg.cfg.knowledgeSpaceType=z),"knowledge-space-config":b.knowledgeSpaceConfig,"onUpdate:knowledgeSpaceConfig":K[7]||(K[7]=z=>b.knowledgeSpaceConfig=z),"cate-slugs":b.mergedPost.cate_slugs,"onUpdate:cateSlugs":K[8]||(K[8]=z=>b.mergedPost.cate_slugs=z),onEmitSyncCateSlugs:$e},null,8,["knowledge-space-type","knowledge-space-config","cate-slugs"])):F("",!0),b.publishCfg.cfg?.tagSlugEnabled?(_(),S(W,{key:1,cfg:b.publishCfg.cfg,"onUpdate:cfg":K[9]||(K[9]=z=>b.publishCfg.cfg=z),"api-type":u(v),"onUpdate:apiType":K[10]||(K[10]=z=>hs(v)?v.value=z:null),"tag-slugs":b.mergedPost.tags_slugs,"onUpdate:tagSlugs":K[11]||(K[11]=z=>b.mergedPost.tags_slugs=z),onEmitSyncTagSlugs:O},null,8,["cfg","api-type","tag-slugs"])):F("",!0),f(ae,{"border-style":"dashed"}),b.editType===u(Fe).EditMode_complex?(_(),$("div",Yg,[f(Oe,{label:u(t)("main.slug")},{default:y(()=>[f(Ee,{modelValue:b.mergedPost.wp_slug,"onUpdate:modelValue":K[12]||(K[12]=z=>b.mergedPost.wp_slug=z),disabled:b.pref?.allowChangeSlug!==!0},null,8,["modelValue","disabled"])]),_:1},8,["label"]),f(bt,{"use-ai":b.useAi,"onUpdate:useAi":K[13]||(K[13]=z=>b.useAi=z),"page-id":u(h),"onUpdate:pageId":K[14]||(K[14]=z=>hs(h)?h.value=z:null),desc:b.mergedPost.shortDesc,"onUpdate:desc":K[15]||(K[15]=z=>b.mergedPost.shortDesc=z),md:b.mergedPost.markdown,"onUpdate:md":K[16]||(K[16]=z=>b.mergedPost.markdown=z),html:b.mergedPost.html,"onUpdate:html":K[17]||(K[17]=z=>b.mergedPost.html=z),onEmitSyncDesc:oe},null,8,["use-ai","page-id","desc","md","html"]),b.publishCfg.cfg.tagEnabled?(_(),S(Ye,{key:0,"use-ai":b.useAi,"onUpdate:useAi":K[18]||(K[18]=z=>b.useAi=z),"page-id":u(h),"onUpdate:pageId":K[19]||(K[19]=z=>hs(h)?h.value=z:null),tags:b.mergedPost.mt_keywords,"onUpdate:tags":K[20]||(K[20]=z=>b.mergedPost.mt_keywords=z),md:b.mergedPost.markdown,"onUpdate:md":K[21]||(K[21]=z=>b.mergedPost.markdown=z),html:b.mergedPost.html,"onUpdate:html":K[22]||(K[22]=z=>b.mergedPost.html=z),"tag-config":b.tagConfig,"onUpdate:tagConfig":K[23]||(K[23]=z=>b.tagConfig=z),onEmitSyncTags:j},null,8,["use-ai","page-id","tags","md","html","tag-config"])):F("",!0),b.publishCfg.cfg.cateEnabled?(_(),S(At,{key:1,"use-ai":b.useAi,"onUpdate:useAi":K[24]||(K[24]=z=>b.useAi=z),"category-type":b.publishCfg.cfg.categoryType,"onUpdate:categoryType":K[25]||(K[25]=z=>b.publishCfg.cfg.categoryType=z),"category-config":b.categoryConfig,"onUpdate:categoryConfig":K[26]||(K[26]=z=>b.categoryConfig=z),categories:b.mergedPost.categories,"onUpdate:categories":K[27]||(K[27]=z=>b.mergedPost.categories=z),md:b.mergedPost.markdown,"onUpdate:md":K[28]||(K[28]=z=>b.mergedPost.markdown=z),html:b.mergedPost.html,"onUpdate:html":K[29]||(K[29]=z=>b.mergedPost.html=z),onEmitSyncCates:he},null,8,["use-ai","category-type","category-config","categories","md","html"])):F("",!0),b.publishCfg.dynCfg.platformType===u(me).Metaweblog||b.publishCfg.dynCfg.platformType===u(me).Wordpress?(_(),S(Kt,{key:2,modelValue:b.mergedPost,"onUpdate:modelValue":K[30]||(K[30]=z=>b.mergedPost=z),onEmitSyncPublishStatus:qe},null,8,["modelValue"])):F("",!0),b.publishCfg.dynCfg.platformType!==u(me).Metaweblog&&b.publishCfg.dynCfg.platformType!==u(me).Wordpress?(_(),S(fl,{key:3,modelValue:b.mergedPost,"onUpdate:modelValue":K[31]||(K[31]=z=>b.mergedPost=z),onEmitSyncPublishTime:De},null,8,["modelValue"])):F("",!0),f(ae,{"border-style":"dashed"})])):F("",!0)])),f(Oe,{"label-width":"100px",class:"form-action"},{default:y(()=>[f(wt,{type:"primary",loading:b.isPublishLoading,onClick:P,disabled:!b.actionEnable},{default:y(()=>[V(R(b.method===u(lt).METHOD_ADD?u(t)("main.publish"):u(t)("main.update")),1)]),_:1},8,["loading","disabled"]),b.method===u(lt).METHOD_EDIT?(_(),S(wt,{key:0,type:"danger",loading:b.isDeleteLoading,onClick:k,disabled:!b.actionEnable,class:"btn-rm-action"},{default:y(()=>[V(R(u(t)("main.cancel")),1)]),_:1},8,["loading","disabled"])):F("",!0),b.method===u(lt).METHOD_EDIT?(_(),S(wt,{key:1,type:"danger",onClick:M,disabled:!b.actionEnable,class:"btn-rm-action"},{default:y(()=>[V(R(u(t)("main.force.cancel")),1)]),_:1},8,["disabled"])):F("",!0),f(wt,{type:"warning",onClick:H,disabled:!b.actionEnable&&b.editType!==u(Fe).EditMode_source},{default:y(()=>[...K[32]||(K[32]=[V(" åŒæ­¥ä¿®æ”¹åˆ°æ€æºç¬”è®° ",-1)])]),_:1},8,["disabled"])]),_:1}),f(Oe,null,{default:y(()=>[f(wt,{type:b.method===u(lt).METHOD_EDIT?"success":"danger",text:"",disabled:""},{default:y(()=>[V(R(b.method===u(lt).METHOD_EDIT?u(t)("main.publish.status.published"):u(t)("main.publish.status.unpublish")),1)]),_:1},8,["type"]),b.method===u(lt).METHOD_EDIT?(_(),$("a",{key:0,href:b.postPreviewUrl,title:b.postPreviewUrl,target:"_blank"},R(u(t)("main.publish.see.preview")),9,Xg)):F("",!0)]),_:1})]),_:1})])]),_:1})]),_:1})])):(_(),S(Le,{key:0,class:"placeholder",rows:5,animated:""}))]),_:1})}}}),Zg=ge(Qg,[["__scopeId","data-v-5cb42f0a"]]),ed={class:"form-tag-cates"},td={key:0},sd=J({__name:"CommonCategories",props:{useAi:{type:Boolean,default:!1},cates:{type:Array,default:[]},md:{type:String,default:""},html:{type:String,default:""}},emits:["emitSyncCates"],setup(p,{emit:e}){const t=L("common-categories"),{t:o}=Z(),s=p,a=Y(),i=re({isLoading:!1,useAi:s.useAi,cate:{inputValue:"",dynamicCates:s.cates.length==0?[]:s.cates,inputVisible:!1},recommCates:[],md:s.md,html:s.html});Ke(()=>s.useAi,c=>{i.useAi=c}),Ke(()=>s.html,c=>{i.html=c});const n=e,l={handleTagClose:c=>{i.cate.dynamicCates.splice(i.cate.dynamicCates.indexOf(c),1),n("emitSyncCates",i.cate.dynamicCates)},tagShowInput:()=>{i.cate.inputVisible=!0,Hi(()=>{a.value.input.focus()})},handleTagInputConfirm:()=>{i.cate.inputValue&&(i.cate.dynamicCates.push(i.cate.inputValue),n("emitSyncCates",i.cate.dynamicCates)),i.cate.inputVisible=!1,i.cate.inputValue=""},fetchCate:async()=>{try{i.isLoading=!0;const c=go.categoryPrompt.content,{chat:r,getChatInput:m}=Bt(),w=await r(c,{name:"categories",systemMessage:m(i?.md,i.html)});if(T.isEmptyString(w)){X.error("è¯·æ±‚é”™è¯¯ï¼Œè¯·åœ¨åå¥½è®¾ç½®é…ç½®è¯·æ±‚åœ°å€å’ŒChatGPT keyï¼");return}const d=te.safeParse(w,{});if(!d?.categories||d?.categories.length==0)throw new Error("æ–‡æ¡£ä¿¡æ¯é‡å¤ªå°‘ï¼Œæœªèƒ½æŠ½å–æœ‰æ•ˆä¿¡æ¯");i.recommCates=d.categories,t.info("ä½¿ç”¨AIæ™ºèƒ½ç”Ÿæˆçš„åˆ†ç±»ç»“æžœ =>",{inputWord:c,chatText:w})}catch(c){t.error(o("main.opt.failure")+"=>",c),X.error(o("main.opt.failure")+"=>"+c)}finally{i.isLoading=!1}}};return(c,r)=>{const m=zi,w=Ue,d=Se,g=Ce,v=Ne;return _(),$("div",ed,[f(g,{label:u(o)("main.commonn.cate.title")},{default:y(()=>[(_(!0),$(ke,null,Ie(i.cate.dynamicCates,h=>(_(),S(m,{key:h,"disable-transitions":!1,class:"mx-1 pub-tag",closable:"",onClose:b=>l.handleTagClose(h)},{default:y(()=>[V(R(h),1)]),_:2},1032,["onClose"]))),128)),i.cate.inputVisible?(_(),S(w,{key:0,ref_key:"tagRefInput",ref:a,modelValue:i.cate.inputValue,"onUpdate:modelValue":r[0]||(r[0]=h=>i.cate.inputValue=h),class:"ml-1 w-20 pub-tag-input",size:"small",onBlur:l.handleTagInputConfirm,onKeyup:bn(l.handleTagInputConfirm,["enter"])},null,8,["modelValue","onBlur","onKeyup"])):(_(),S(d,{key:1,class:"button-new-tag ml-1 el-tag",size:"small",onClick:l.tagShowInput},{default:y(()=>[V(R(u(o)("main.cate.new")),1)]),_:1},8,["onClick"]))]),_:1},8,["label"]),i.useAi?(_(),$("div",td,[i.recommCates.length>0?(_(),S(g,{key:0,class:"recomm-show"},{default:y(()=>[r[1]||(r[1]=V(" æŽ¨èçš„åˆ†ç±»ï¼š ",-1)),(_(!0),$(ke,null,Ie(i.recommCates,h=>(_(),S(m,{class:"ml-2 recomm-cate",type:"success"},{default:y(()=>[V(R(h),1)]),_:2},1024))),256))]),_:1})):F("",!0),f(g,{class:"cat-action"},{default:y(()=>[f(d,{size:"small",loading:i.isLoading,type:"primary",onClick:l.fetchCate},{default:y(()=>[V(R(i.isLoading?u(o)("main.opt.loading"):u(o)("main.auto.fetch.cate")),1)]),_:1},8,["loading","onClick"])]),_:1}),f(g,null,{default:y(()=>[f(v,{closable:!1,title:u(o)("category.ai.hand"),class:"form-item-tip",type:"warning"},null,8,["title"])]),_:1})])):F("",!0),f(g,null,{default:y(()=>[f(v,{closable:!1,title:u(o)("category.batch.not.supported"),class:"form-item-tip",type:"warning"},null,8,["title"])]),_:1}),r[2]||(r[2]=C("div",{class:"form-item-bottom"},null,-1))])}}}),od=ge(sd,[["__scopeId","data-v-d3c2349b"]]),ad={},id={class:"publish-tips"};function nd(p,e){const t=Ne;return _(),$("div",id,[f(t,{closable:!1,title:"å¤šå¹³å°æ–‡ç« åˆ†å‘ã€‚å…¶ä¸­æ€æºç¬”è®°ä¸ºå†…ç½®å¹³å°ï¼Œè¿™é‡Œçš„ä¿®æ”¹å‘å¸ƒåŽï¼Œä¹Ÿä¼šåŒæ­¥æ›´æ–°æ€æºç¬”è®°",class:"top-tip",type:"info"})])}const ld=ge(ad,[["render",nd],["__scopeId","data-v-b916c4b4"]]),rd={class:"syp-distri-platform-container"},cd=["onClick"],pd=["innerHTML"],gd=["innerHTML"],dd=["innerHTML"],ud=J({__name:"PublishPlatform",props:{id:{type:String,default:""}},emits:["emitSyncDynList"],setup(p,{emit:e}){const t=L("publish-platform"),o=p,{getSetting:s}=pe(),a=Re.systemCfg.map(c=>c.platformKey),i=re({dynamicConfigArray:[],selectedKeys:[].concat(a)}),n=e;n&&(t.info("selectedKeys=>",i.selectedKeys),n("emitSyncDynList",i.selectedKeys));const l=c=>{i.selectedKeys.includes(c)?i.selectedKeys=i.selectedKeys?.filter(r=>r!==c)??[]:i.selectedKeys.push(c),n&&(t.info("selectedKeys=>",i.selectedKeys),n("emitSyncDynList",i.selectedKeys))};return st(async()=>{const c=await s(),m=te.safeParse(c[Me],{}).totalCfg?.filter(d=>d.isEnabled===!0&&d.isAuth===!0);i.dynamicConfigArray=m||[];const w=c[o.id]??{};i.dynamicConfigArray.forEach(d=>{const g=d.platformKey,v=_e(g);if(!T.isEmptyString(v)){const h=w[v]??"";T.isEmptyString(h)||l(g)}})}),(c,r)=>{const m=qo,w=Gi;return _(),$("div",null,[r[0]||(r[0]=C("p",null,"è¯·é€‰æ‹©è¦å‘å¸ƒçš„å¹³å°ï¼š",-1)),C("div",rd,[(_(!0),$(ke,null,Ie(i.dynamicConfigArray,d=>(_(),$("a",{class:"distri-item",onClick:g=>l(d.platformKey)},[f(w,{content:u(Nt).longPlatformName(d.platformName,20),placement:"bottom"},{default:y(()=>[f(m,{class:"platform-icon"},{default:y(()=>[C("span",{innerHTML:d.platformIcon},null,8,pd)]),_:2},1024)]),_:2},1032,["content"]),i.selectedKeys.includes(d.platformKey)?(_(),$("span",{key:0,class:"icon-yes",innerHTML:u(we).iconOTYes},null,8,gd)):(_(),$("span",{key:1,class:"icon-no",innerHTML:u(we).iconOTNo},null,8,dd))],8,cd))),256))])])}}}),md=ge(ud,[["__scopeId","data-v-d79e297d"]]);var ms=(p=>(p.Override="Override",p.Merge="Merge",p))(ms||{}),hd={};const fd={id:"batch-publish-index"},yd={class:"error-total-msg"},bd=["onClick"],wd={key:0,class:"success-result success-tips"},_d={class:"platform"},vd=["href"],Pd={class:"publish-form"},Td={key:2,class:"normal-mode"},kd={class:"distri-type"},Sd={key:0,class:"complex-mode"},Cd=J({__name:"BatchPublishIndex",props:{id:{type:String,default:""}},setup(p){const e=L("publisher-index"),t=p,{t:o}=Z(),{doSinglePublish:s,doSingleDelete:a,doForceSingleDelete:i,initPublishMethods:n}=ro(),{blogApi:l}=Ge(),{getPublishCfg:c}=lo(),{kernelApi:r}=Ge(),{getReadOnlyPublishPreferenceSetting:m}=Tt(),w=Re.systemCfg.map(j=>j.platformKey),d=T.isEmptyString(t.id)?hd.VITE_DEV_PAGE_ID:t.id,g=re({isInit:!1,isPublishLoading:!1,isDeleteLoading:!1,showProcessResult:!1,errCount:0,successBatchResults:[],failBatchResults:[],siyuanPost:{},publishCfg:{},categoryConfig:{},useAi:!1,dynList:[],editType:Fe.EditMode_simple,pref:m(),distriPattern:ms.Merge,actionEnable:!0}),v=async()=>{try{if(g.isPublishLoading=!0,N.value=!1,g.dynList.length===0)throw new Error("å¿…é¡»é€‰æ‹©ä¸€ä¸ªåˆ†å‘å¹³å°");g.errCount=0,g.failBatchResults=[],g.successBatchResults=[];const j=Pe(g.siyuanPost);for(const O of g.dynList){let he;const $e=await c(O);g.publishCfg=$e,w.includes(O)?(e.info(`å¼€å§‹å‘å¸ƒ [${O}] ç³»ç»Ÿå†…ç½®å¹³å°`),he=j):(e.info(`å¼€å§‹å‘å¸ƒ [${O}] è‡ªå®šä¹‰å¹³å°`),he=await n.assignInitAttrs(j,d,g.publishCfg),g.distriPattern===ms.Override?(he=n.doOverideBatchPost(j,he),e.debug("æ‰¹é‡åˆ†å‘æ¨¡å¼æ–‡ç« å·²è¦†ç›–",{siyuanPost:ne(j),mergedPost:ne(he)})):(he=n.doMergeBatchPost(j,he),e.debug("æ‰¹é‡åˆ†å‘æ¨¡å¼æ–‡ç« å·²åˆå¹¶",{siyuanPost:ne(j),mergedPost:ne(he)})));const De=await s(O,d,g.publishCfg,he);De.status?g.successBatchResults.push(De):(g.failBatchResults.push(De),g.errCount++)}g.actionEnable=!1,g.showProcessResult=!0,g.errCount===0?X.success("å¤šå¹³å°æ–‡ç« åˆ†å‘æˆåŠŸ"):X.error(`å¤šå¹³å°æ–‡ç« åˆ†å‘å¤±è´¥ï¼Œå¤±è´¥ä¸ªæ•°ï¼š${g.errCount}`)}catch(j){const O=o("main.opt.failure")+"=>"+j;e.error(o("main.opt.failure")+"=>",j),await r.pushErrMsg({msg:O,timeout:7e3})}finally{g.isPublishLoading=!1,N.value=!0}},h=async()=>{vt.confirm(`ç¡®è®¤è¦åˆ é™¤å¹³å° ${g.dynList.join("ã€")} ä¸‹çš„è¿™ç¯‡æ–‡ç« å—ï¼Œæ­¤å¹³å°æ–‡ç« æ•°æ®ä¹Ÿå°†æ°¸ä¹…åˆ é™¤ [æ³¨æ„ï¼šç³»ç»Ÿå†…ç½®å¹³å°ä¼šå¿½ç•¥ï¼Œä¸åšåˆ é™¤] ï¼Ÿ`,"æ¸©é¦¨æç¤º",{type:"error",icon:ze(zs),confirmButtonText:o("main.opt.ok"),cancelButtonText:o("main.opt.cancel")}).then(async()=>{await b()}).catch(()=>{})},b=async()=>{try{if(g.isDeleteLoading=!0,g.dynList.length===0)throw new Error("å¿…é¡»é€‰æ‹©ä¸€ä¸ªåˆ†å‘å¹³å°");g.errCount=0,g.failBatchResults=[],g.successBatchResults=[];for(const j of g.dynList){if(w.includes(j)){e.info(`[${j}] ç³»ç»Ÿå†…ç½®å¹³å°ï¼Œä¸å¯åˆ é™¤ï¼Œè·³è¿‡`);continue}const O=await c(j);g.publishCfg=O;const he=await a(j,d,O);he.status||(g.failBatchResults.push(he),g.errCount++)}g.actionEnable=!1,g.showProcessResult=!0,g.errCount===0?X.success("å¤šå¹³å°æ–‡ç« åˆ é™¤æˆåŠŸ"):X.error(`å¤šå¹³å°æ–‡ç« åˆ é™¤å¤±è´¥ï¼Œå¤±è´¥ä¸ªæ•°ï¼š${g.errCount}`)}catch(j){const O=o("main.opt.failure")+"=>"+j;e.error(o("main.opt.failure")+"=>",j),await r.pushErrMsg({msg:O,timeout:7e3})}finally{g.isDeleteLoading=!1}},P=async(j,O,he)=>{try{await i(j,O,he)}catch($e){X.error($e.message)}finally{g.isDeleteLoading=!1}},k=async()=>{const j={[rt.Sys_memo]:g.siyuanPost.shortDesc,[rt.Sys_tags]:g.siyuanPost.mt_keywords,[rt.Custom_categories]:g.siyuanPost.categories.join(",")};await r.setBlockAttrs(d,j),e.info("å†…ç½®å¹³å°ï¼Œä¿å­˜å±žæ€§",j),X.success("å±žæ€§å·²ç»æˆåŠŸåŒæ­¥åˆ°æ€æº")},E=j=>{g.siyuanPost.title=j,e.debug("syncPublishTitle in batch publish")},M=async j=>{g.editType=j,e.debug("syncEditMode in batch publish")},H=j=>{g.dynList=j,e.debug("syncDynList in batch publish")},B=j=>{g.siyuanPost.shortDesc=j,g.siyuanPost.mt_text_more=j,g.siyuanPost.mt_excerpt=j,e.debug("syncDesc in batch publish")},D=j=>{g.siyuanPost.mt_keywords=j?.join(","),e.debug("syncTags in batch publish")},G=j=>{g.siyuanPost.categories=j,e.debug("syncCates in batch publish")},x=(j,O)=>{g.siyuanPost.dateCreated=j,g.siyuanPost.dateUpdated=O,e.debug("syncPublishTime in batch publish")},ee=()=>{Ot.reloadPage()},I=()=>{let j=!1,O=0;for(;!j&&O<3;)try{Bt(),j=!0}catch(he){e.error(`${o("main.opt.failure")} => ${he}`),O++}return e.info(`ç¬¬${O}æ¬¡å°è¯•å°±æ£€æµ‹AIçŠ¶æ€: ${j}`),j},N=Y(!1),{loadingTime:oe}=co(N);return st(async()=>{g.publishCfg=await c();const j=await l.getPost(d);g.siyuanPost=await n.assignInitSlug(j,d,g.publishCfg),e.debug("batch inited siyuanPost =>",ne(g.siyuanPost)),g.useAi=I(),g.editType=Fe.EditMode_simple,g.isInit=!0,N.value=!0}),(j,O)=>{const he=Ht,$e=Qs,De=Ne,qe=ml,ye=Xs,dt=Ys,We=Ce,le=Fo,Ve=Ue,vs=ul,q=dl,K=od,Le=Se,Et=nt,ut=An,Ps=En;return _(),$("div",fd,[f(Ps,null,{default:y(()=>[g.isInit?(_(),S(ut,{key:1},{default:y(()=>[f($e,{"loading-time":u(oe)},null,8,["loading-time"]),f(ld),g.showProcessResult?(_(),$("div",{key:0,class:as(g.errCount>0?"batch-result fail-tips":"batch-result success-tips")},[C("div",yd,[V(" é”™è¯¯å¹³å°ä¸ªæ•° ["+R(g.errCount)+"] ï¼Œé€‰æ‹©çš„æ€»å¹³å°æ•° ["+R(g.dynList.length)+"] ã€‚ ",1),C("a",{class:"refresh-page",onClick:ee},"åˆ·æ–°é¡µé¢")]),(_(!0),$(ke,null,Ie(g.failBatchResults,W=>(_(),$("div",null,[V(" ["+R(W.key)+"] "+R(u(T).isEmptyString(W.name)?"":`[${W.name}]`)+" "+R(W.errMsg)+" ",1),C("a",{href:"javascript:void(0)",onClick:ae=>P(W.key,t.id,g.publishCfg)},"å¼ºåˆ¶è§£é™¤å…³è”",8,bd)]))),256)),g.successBatchResults.length>0?(_(),$("div",wd,[O[24]||(O[24]=V(" å·²åˆ†å‘æˆåŠŸçš„ç»“æžœå¦‚ä¸‹ï¼š ",-1)),(_(!0),$(ke,null,Ie(g.successBatchResults,W=>(_(),$("p",null,[C("span",_d,"["+R(W.key)+"] "+R(u(T).isEmptyString(W.name)?"":`[${W.name}]`),1),O[23]||(O[23]=V(" ï¼Œ ",-1)),C("a",{href:W.previewUrl,target:"_blank"},"æŸ¥çœ‹æ–‡ç« ",8,vd)]))),256))])):F("",!0)],2)):F("",!0),C("div",Pd,[f(Et,{"label-width":"100px"},{default:y(()=>[g.useAi?(_(),S(De,{key:0,class:"top-tip",title:u(o)("category.ai.enabled"),type:"success",closable:!0},null,8,["title"])):F("",!0),f(hl,{"edit-type":g.editType,"onUpdate:editType":O[0]||(O[0]=W=>g.editType=W),onEmitSyncEditMode:M},null,8,["edit-type"]),g.editType===u(Fe).EditMode_source?(_(),S(qe,{key:1,modelValue:g.siyuanPost,"onUpdate:modelValue":O[1]||(O[1]=W=>g.siyuanPost=W),"page-id":u(d)},null,8,["modelValue","page-id"])):(_(),$("div",Td,[f(yl,{"use-ai":g.useAi,"onUpdate:useAi":O[2]||(O[2]=W=>g.useAi=W),modelValue:g.siyuanPost.title,"onUpdate:modelValue":O[3]||(O[3]=W=>g.siyuanPost.title=W),onEmitSyncPublishTitle:E,md:g.siyuanPost.markdown,"onUpdate:md":O[4]||(O[4]=W=>g.siyuanPost.markdown=W),html:g.siyuanPost.html,"onUpdate:html":O[5]||(O[5]=W=>g.siyuanPost.html=W)},null,8,["use-ai","modelValue","md","html"]),C("div",kd,[f(We,{label:"åˆ†å‘æ¨¡å¼"},{default:y(()=>[f(dt,{modelValue:g.distriPattern,"onUpdate:modelValue":O[6]||(O[6]=W=>g.distriPattern=W),class:"ml-4 distri-type-check"},{default:y(()=>[f(ye,{value:u(ms).Override,size:"large"},{default:y(()=>[...O[25]||(O[25]=[V("è¦†ç›–",-1)])]),_:1},8,["value"]),f(ye,{value:u(ms).Merge,size:"large"},{default:y(()=>[...O[26]||(O[26]=[V("åˆå¹¶",-1)])]),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:1}),f(We,{class:"distri-tip"},{default:y(()=>[g.distriPattern===u(ms).Override?(_(),S(De,{key:0,closable:!1,title:u(o)("distri.type.overide.warn"),class:"distri-tip-alert",type:"error"},null,8,["title"])):(_(),S(De,{key:1,closable:!1,title:u(o)("distri.type.merge.warn"),class:"distri-tip-alert",type:"warning"},null,8,["title"]))]),_:1})]),f(le,{"border-style":"dashed"}),g.editType===u(Fe).EditMode_complex?(_(),$("div",Sd,[f(We,{label:u(o)("main.slug")},{default:y(()=>[f(Ve,{modelValue:g.siyuanPost.wp_slug,"onUpdate:modelValue":O[7]||(O[7]=W=>g.siyuanPost.wp_slug=W),disabled:g.pref?.allowChangeSlug!==!0},null,8,["modelValue","disabled"])]),_:1},8,["label"]),f(vs,{"use-ai":g.useAi,"onUpdate:useAi":O[8]||(O[8]=W=>g.useAi=W),"page-id":u(d),"onUpdate:pageId":O[9]||(O[9]=W=>hs(d)?d.value=W:null),desc:g.siyuanPost.shortDesc,"onUpdate:desc":O[10]||(O[10]=W=>g.siyuanPost.shortDesc=W),md:g.siyuanPost.markdown,"onUpdate:md":O[11]||(O[11]=W=>g.siyuanPost.markdown=W),html:g.siyuanPost.html,"onUpdate:html":O[12]||(O[12]=W=>g.siyuanPost.html=W),onEmitSyncDesc:B},null,8,["use-ai","page-id","desc","md","html"]),f(q,{"use-ai":g.useAi,"onUpdate:useAi":O[13]||(O[13]=W=>g.useAi=W),"page-id":u(d),"onUpdate:pageId":O[14]||(O[14]=W=>hs(d)?d.value=W:null),tags:g.siyuanPost.mt_keywords,"onUpdate:tags":O[15]||(O[15]=W=>g.siyuanPost.mt_keywords=W),md:g.siyuanPost.markdown,"onUpdate:md":O[16]||(O[16]=W=>g.siyuanPost.markdown=W),html:g.siyuanPost.html,"onUpdate:html":O[17]||(O[17]=W=>g.siyuanPost.html=W),onEmitSyncTags:D},null,8,["use-ai","page-id","tags","md","html"]),f(K,{"use-ai":g.useAi,"onUpdate:useAi":O[18]||(O[18]=W=>g.useAi=W),cates:g.siyuanPost.categories,"onUpdate:cates":O[19]||(O[19]=W=>g.siyuanPost.categories=W),onEmitSyncCates:G,md:g.siyuanPost.markdown,"onUpdate:md":O[20]||(O[20]=W=>g.siyuanPost.markdown=W),html:g.siyuanPost.html,"onUpdate:html":O[21]||(O[21]=W=>g.siyuanPost.html=W)},null,8,["use-ai","cates","md","html"]),f(fl,{modelValue:g.siyuanPost,"onUpdate:modelValue":O[22]||(O[22]=W=>g.siyuanPost=W),onEmitSyncPublishTime:x},null,8,["modelValue"]),f(le,{"border-style":"dashed"})])):F("",!0)])),f(md,{id:t.id,onEmitSyncDynList:H},null,8,["id"]),f(le,{"border-style":"dashed"}),f(We,{"label-width":"100px",class:"form-action"},{default:y(()=>[f(Le,{type:"primary",loading:g.isPublishLoading,onClick:v,disabled:!g.actionEnable},{default:y(()=>[V(R(u(o)("main.publish.start")),1)]),_:1},8,["loading","disabled"]),f(Le,{type:"danger",loading:g.isDeleteLoading,onClick:h,disabled:!g.actionEnable,class:"btn-rm-action"},{default:y(()=>[V(R(u(o)("main.publish.remove")),1)]),_:1},8,["loading","disabled"]),f(Le,{type:"warning",onClick:k,disabled:!g.actionEnable},{default:y(()=>[...O[27]||(O[27]=[V(" åŒæ­¥ä¿®æ”¹åˆ°æ€æºç¬”è®° ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})])]),_:1})):(_(),S(he,{key:0,class:"placeholder",rows:12,animated:"",style:{padding:"40px 12px"}}))]),_:1})])}}}),Ed=ge(Cd,[["__scopeId","data-v-9d97022a"]]),Ad=J({__name:"BatchPublish",setup(p){const{query:e}=tt(),t=e.id??po();return(o,s)=>(_(),S(Ed,{id:u(t)},null,8,["id"]))}}),Id={class:"prompt-actions"},Ud={key:1},xd={key:0},Md={class:"chat-output"},Dd="å½“å‰ä¸Šä¸‹æ–‡",Od=J({__name:"AiChat",setup(p){const e=L("chatgpt-ai");Z();const{query:t}=tt(),{blogApi:o}=Ge(),s=t.id??po(),a=re({prompts:(()=>{const v=JSON.parse(localStorage.getItem("prompts")||"[]"),h=[{key:"sys-1",value:"è¯·ä¸ºå½“å‰ä¸Šä¸‹æ–‡æ‰“æ ‡ç­¾ã€‚è¦æ±‚æŠ½å–5ä¸ªå…³é”®è¯ï¼Œæ¯ä¸ªå…³é”®è¯ä¸èƒ½è¶…è¿‡5ä¸ªå­—ç¬¦ï¼Œå…³é”®è¯ä¹‹é—´ç”¨é€—å·éš”å¼€",isSys:!1},{key:"sys-2",value:"è¯·ç”Ÿæˆå½“å‰ä¸Šä¸‹æ–‡çš„æ‘˜è¦ã€‚è¦æ±‚ä¸è¶…è¿‡255ä¸ªå­—",isSys:!1},{key:"sys-3",value:"è¯·å¯¹å½“å‰ä¸Šä¸‹æ–‡è¿›è¡Œæ™ºèƒ½åˆ†ç±»ã€‚è¦æ±‚æŠ½å–5ä¸ªåˆ†ç±»ã€‚æ¯ä¸ªåˆ†ç±»ä¸èƒ½è¶…è¿‡5ä¸ªå­—ç¬¦",isSys:!1},{key:"sys-4",value:"å¸®å¿™å†™ä¸€ç¯‡èˆ”ç‹—æ—¥è®°ã€‚è¦æ±‚100å­—ä»¥å†…",isSys:!1}],b=[...v];return h.forEach(P=>{b.some(k=>k.key===P.key)||b.push(P)}),b})(),newPrompt:{key:"",value:""},showNewPromptInput:!1,showPromptManagement:!1,editingIndex:-1,selectedPrompt:"",inputText:"",chatOutput:"",isLoading:!1,showPage:!T.isEmptyString(s),usePage:!T.isEmptyString(s),siyuanPost:{}}),i=()=>{a.showNewPromptInput=!a.showNewPromptInput},n=()=>{if(!a.newPrompt.value.trim()){X.error("Prompt ä¸èƒ½ä¸ºç©º");return}a.newPrompt.key=Pn(),a.prompts.push({...a.newPrompt,isSys:!1}),localStorage.setItem("prompts",JSON.stringify(a.prompts)),a.newPrompt={key:"",value:""},a.showNewPromptInput=!1,a.showPromptManagement=!1,X.success("Prompt å·²æ·»åŠ ")},l=v=>{a.prompts.splice(v,1),localStorage.setItem("prompts",JSON.stringify(a.prompts)),X.success("Prompt å·²åˆ é™¤")},c=v=>{a.editingIndex=v},r=(v,h)=>{if(!h.trim()){X.error("Prompt ä¸èƒ½ä¸ºç©º");return}a.prompts[v].value=h,localStorage.setItem("prompts",JSON.stringify(a.prompts)),a.editingIndex=-1,X.success("Prompt å·²æ›´æ–°")},m=v=>{v&&(v.includes(Dd)?a.usePage=!0:a.usePage=!1,a.inputText=v)},w=async()=>{if(a.inputText.trim()===""){X.error("è¯·è¾“å…¥æ–‡æœ¬");return}a.isLoading=!0;try{const{chat:v,getChatInput:h}=Bt(),b=a.inputText;let P="";if(a.usePage?P=await v(b,{name:"system",systemMessage:h(a.siyuanPost.markdown,a.siyuanPost.html)}):P=await v(b),T.isEmptyString(P)){X.error("è¯·æ±‚é”™è¯¯ï¼Œè¯·åœ¨åå¥½è®¾ç½®é…ç½®è¯·æ±‚åœ°å€å’Œ ChatGPT keyï¼");return}a.chatOutput=`> ${a.inputText}
${P}

`+a.chatOutput}catch(v){e.error("å‘é€æ¶ˆæ¯å¤±è´¥",v),X.error("å‘é€æ¶ˆæ¯å¤±è´¥ï¼š"+v)}finally{a.isLoading=!1}},d=()=>{a.inputText="",a.chatOutput=""},g=()=>{a.showPromptManagement=!a.showPromptManagement};return st(async()=>{if(a.showPage){const v=await o.getPost(s);a.siyuanPost=v}}),(v,h)=>{const b=Se,P=Ue,k=Ce,E=nt,M=Un,H=In,B=Fs,D=Ne,G=cs,x=it,ee=at,I=He;return _(),S(I,{title:"AIèŠå¤©"},{default:y(()=>[Li(f(B,{class:"prompt-management"},{default:y(()=>[C("div",Id,[f(b,{type:"primary",onClick:i},{default:y(()=>[...h[4]||(h[4]=[V("æ–°å¢ž Prompt",-1)])]),_:1})]),a.showNewPromptInput?(_(),S(E,{key:0,class:"new-prompt-form"},{default:y(()=>[f(k,null,{default:y(()=>[f(P,{autosize:{minRows:2,maxRows:4},type:"textarea",modelValue:a.newPrompt.value,"onUpdate:modelValue":h[0]||(h[0]=N=>a.newPrompt.value=N),placeholder:"è¾“å…¥æ–°çš„ Promptï¼Œæ³¨æ„ï¼šå‡å¦‚ prompt åŒ…å« ã€Œå½“å‰ä¸Šä¸‹æ–‡ã€ è¿™ä¸ªæ–‡æœ¬ï¼Œä¼šè‡ªåŠ¨ä½¿ç”¨å½“å‰æ–‡æ¡£æ­£æ–‡ä½œä¸ºä¸Šä¸‹æ–‡è¿›è¡Œæé—®"},null,8,["modelValue"])]),_:1}),f(k,null,{default:y(()=>[f(b,{type:"primary",onClick:n,class:"save-button"},{default:y(()=>[...h[5]||(h[5]=[V("ä¿å­˜",-1)])]),_:1})]),_:1})]),_:1})):F("",!0),a.prompts.length?(_(),S(H,{key:1,data:a.prompts,border:"",style:{width:"100%"},class:"prompt-table"},{default:y(()=>[f(M,{label:"Prompt å†…å®¹",prop:"value",align:"left"},{default:y(N=>[a.editingIndex===N.$index?(_(),S(P,{key:0,modelValue:N.row.value,"onUpdate:modelValue":oe=>N.row.value=oe,placeholder:"ç¼–è¾‘ Prompt",disabled:N.row.isSys},null,8,["modelValue","onUpdate:modelValue","disabled"])):(_(),$("span",Ud,R(N.row.value),1))]),_:1}),f(M,{label:"æ“ä½œ",align:"center",width:"160"},{default:y(N=>[!N.row.isSys&&a.editingIndex!==N.$index?(_(),S(b,{key:0,size:"small",type:"primary",onClick:oe=>c(N.$index)},{default:y(()=>[...h[6]||(h[6]=[V(" ç¼–è¾‘ ",-1)])]),_:1},8,["onClick"])):F("",!0),a.editingIndex===N.$index?(_(),S(b,{key:1,size:"small",type:"primary",onClick:oe=>r(N.$index,N.row.value)},{default:y(()=>[...h[7]||(h[7]=[V(" ä¿å­˜ ",-1)])]),_:1},8,["onClick"])):F("",!0),N.row.isSys?F("",!0):(_(),S(b,{key:2,size:"small",type:"danger",onClick:oe=>l(N.$index)},{default:y(()=>[...h[8]||(h[8]=[V(" åˆ é™¤ ",-1)])]),_:1},8,["onClick"]))]),_:1})]),_:1},8,["data"])):F("",!0)]),_:1},512),[[wn,a.showPromptManagement]]),a.usePage&&a.showPage&&!u(T).isEmptyString(a.siyuanPost.markdown)?(_(),S(D,{key:0,closable:!1,title:`å½“å‰ä¸ºä¸Šä¸‹æ–‡æ¨¡å¼ï¼Œæ–‡æ¡£ä¸Šä¸‹æ–‡ä¸ºã€Š${a.siyuanPost.title}ã€‹`,class:"top-tip",type:"success"},null,8,["title"])):(_(),S(D,{key:1,closable:!1,title:"å½“å‰ä¸ºè‡ªç”±èŠå¤©æ¨¡å¼",class:"top-tip",type:"info"})),f(E,{class:"chatgpt-form"},{default:y(()=>[f(k,null,{default:y(()=>[f(P,{modelValue:a.inputText,"onUpdate:modelValue":h[1]||(h[1]=N=>a.inputText=N),autosize:{minRows:4,maxRows:16},type:"textarea",class:"chat-input",placeholder:"è¯·è¾“å…¥æ–‡æœ¬..."},null,8,["modelValue"])]),_:1}),f(k,null,{default:y(()=>[a.showPage&&a.siyuanPost.markdown?(_(),$("div",xd,[f(G,{modelValue:a.usePage,"onUpdate:modelValue":h[2]||(h[2]=N=>a.usePage=N),class:"use-context"},null,8,["modelValue"]),h[9]||(h[9]=V(" Â  ä½¿ç”¨å½“å‰æ–‡æ¡£ä½œä¸ºä¸Šä¸‹æ–‡ ",-1))])):F("",!0)]),_:1}),f(k,null,{default:y(()=>[a.prompts.length?(_(),S(ee,{key:0,modelValue:a.selectedPrompt,"onUpdate:modelValue":h[3]||(h[3]=N=>a.selectedPrompt=N),placeholder:"é€‰æ‹©ä¸€ä¸ª Prompt",onChange:m,class:"props-select"},{default:y(()=>[(_(!0),$(ke,null,Ie(a.prompts,N=>(_(),S(x,{key:N.key,label:N.value,value:N.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):F("",!0)]),_:1}),f(k,null,{default:y(()=>[f(b,{type:"primary",onClick:w,loading:a.isLoading},{default:y(()=>[...h[10]||(h[10]=[V("å‘é€æ¶ˆæ¯",-1)])]),_:1},8,["loading"]),f(b,{type:"danger",onClick:d},{default:y(()=>[...h[11]||(h[11]=[V("æ¸…å±",-1)])]),_:1}),f(b,{type:"warning",onClick:g},{default:y(()=>[...h[12]||(h[12]=[V("æ˜¾ç¤º/éšè— Prompt ç®¡ç†",-1)])]),_:1})]),_:1}),f(k,null,{default:y(()=>[C("div",Md,[C("pre",null,R(a.chatOutput),1)])]),_:1})]),_:1})]),_:1})}}}),$d=ge(Od,[["__scopeId","data-v-83665764"]]),Vd={id:"test-list",class:"test-list-container"},Nd=J({__name:"Test",setup(p){const e=kt(),t=[{title:"æ€æºç¬”è®°æµ‹è¯•",path:"/test/siyuan"},{title:"åšå®¢å›­æµ‹è¯•",path:"/test/cnblogs"},{title:"WordPressæµ‹è¯•",path:"/test/wordpress"},{title:"Typechoæµ‹è¯•",path:"/test/typecho"},{title:"è¯­é›€æµ‹è¯•",path:"/test/yuque"},{title:"çŸ¥ä¹Žæµ‹è¯•",path:"/test/zhihu"},{title:"CSDNæµ‹è¯•",path:"/test/csdn"},{title:"Picgoæµ‹è¯•",path:"/test/picgo"},{title:"å…¶ä»–æµ‹è¯•",path:"/test/other"},{title:"ChatGPTæµ‹è¯•",path:"/test/chat"}],o=async s=>{await e.push({path:s.path,query:{showBack:"true"}})};return(s,a)=>{const i=Se,n=He;return _(),S(n,{title:"ç»„ä»¶æµ‹è¯•"},{default:y(()=>[C("div",Vd,[(_(),$(ke,null,Ie(t,l=>f(i,{onClick:c=>o(l),type:"primary",size:"large",class:"test-button"},{default:y(()=>[V(R(l.title),1)]),_:2},1032,["onClick"])),64))])]),_:1})}}}),Hd=ge(Nd,[["__scopeId","data-v-c16ff9e5"]]),Ld={id:"siyuan-test"},Rd={class:"method-list"},Gd={class:"item"},Bd={class:"item"},jd={class:"item"},Kd={key:0,class:"item"},zd={class:"item"},Jd={class:"item"},fa="getUsersBlogs",ya="getRecentPostsCount",ba="getRecentPosts",wa="newPost",_a="getPost",va="editPost",Pa="deletePost",Ta="getCategories",ka="getPreviewUrl",Sa="newMediaObject",Wd=J({__name:"SiyuanTest",setup(p){const e=L("siyuan-test"),{t}=Z(),o=Y("{}"),s=Y(!1),a=Y(null),i=Y(""),n=Y(!1),l=Y("getUsersBlogs"),c=re({options:[{value:fa,label:"èŽ·å–åšå®¢ä¿¡æ¯"},{value:ya,label:"èŽ·å–æœ€æ–°æ–‡ç« æ•°ç›®"},{value:ba,label:"èŽ·å–æœ€æ–°æ–‡ç« åˆ—è¡¨"},{value:wa,label:"å‘å¸ƒæ–‡ç« "},{value:_a,label:"èŽ·å–æ–‡ç« è¯¦æƒ…"},{value:va,label:"ç¼–è¾‘æ–‡ç« "},{value:Pa,label:"åˆ é™¤æ–‡ç« "},{value:Ta,label:"èŽ·å–åˆ†ç±»åˆ—è¡¨"},{value:ka,label:"èŽ·å–æ–‡ç« é¢„è§ˆåœ°å€"},{value:Sa,label:"ä¸Šä¼ èµ„æºæ–‡ä»¶"}]}),r=d=>{switch(s.value=!1,d){case fa:{o.value="{}";break}case ya:{o.value="{}";break}case ba:{o.value=JSON.stringify({numOfPosts:10});break}case wa:{o.value=JSON.stringify({title:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•æ ‡é¢˜",description:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•å†…å®¹",mt_keywords:"æ ‡ç­¾1,æ ‡ç­¾2",categories:["åˆ†ç±»1","åˆ†ç±»2"]});break}case _a:{o.value=JSON.stringify({postid:"20230526221603-3mgotyw"});break}case va:{o.value=JSON.stringify({postid:"20230527202519-k09a4gx",post:{title:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•æ ‡é¢˜2",description:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•å†…å®¹2",mt_keywords:"æ ‡ç­¾1,æ ‡ç­¾2",categories:["åˆ†ç±»1","åˆ†ç±»2"]}});break}case Pa:{o.value=JSON.stringify({postid:"20230528192554-mlcxbe8"});break}case Ta:{o.value="{}";break}case ka:{o.value=JSON.stringify({postid:"20230528192554-mlcxbe8"});break}case Sa:{o.value="{}",s.value=!0;break}default:{o.value="{}";break}}},m=async d=>{const g=d.target;g.files&&g.files[0]&&(a.value=g.files[0])},w=async()=>{n.value=!0,i.value="",i.value="siyuan requesting...";try{const d=new ue;switch(e.info("appInstance=>",d),l.value){case fa:{const g=new mt("http://127.0.0.1:6806",""),v=new _t(g),b=await A.blogApi(d,v).getUsersBlogs();i.value=JSON.stringify(b),e.info("siyuan users blogs=>",b);break}case ya:{const g=new mt("http://127.0.0.1:6806",""),v=new _t(g),b=await A.blogApi(d,v).getRecentPostsCount();i.value=JSON.stringify(b),e.info("siyuan recent post count=>",b);break}case ba:{const g=new mt("http://127.0.0.1:6806",""),v=new _t(g),h=A.blogApi(d,v),b=JSON.parse(o.value),P=await h.getRecentPosts(b.numOfPosts);i.value=JSON.stringify(P),e.info("siyuan recent post=>",P);break}case wa:{const g=new mt("http://127.0.0.1:6806","");g.notebook="20230506132031-qbtyjdk";const v=new _t(g),h=A.blogApi(d,v),b=JSON.parse(o.value);let P=new Be;P={...P,...b};const k=await h.newPost(P);i.value=JSON.stringify(k);break}case _a:{const g=new mt("http://127.0.0.1:6806",""),v=new _t(g),h=A.blogApi(d,v),P=JSON.parse(o.value).postid,k=await h.getPost(P);i.value=JSON.stringify(k),e.info("siyuan post=>",k);break}case va:{const g=new mt("http://127.0.0.1:6806","");g.notebook="20230506132031-qbtyjdk";const v=new _t(g),h=A.blogApi(d,v),b=JSON.parse(o.value),P=b.postid;let k=new Be;k={...k,...b.post};const E=await h.editPost(P,k);i.value=JSON.stringify(E);break}case Pa:{const g=new mt("http://127.0.0.1:6806","");g.notebook="20230506132031-qbtyjdk";const v=new _t(g),h=A.blogApi(d,v),P=JSON.parse(o.value).postid,k=await h.deletePost(P);i.value=JSON.stringify(k);break}case Ta:{const g=new mt("http://127.0.0.1:6806",""),v=new _t(g),b=await A.blogApi(d,v).getCategories();i.value=JSON.stringify(b),e.info("siyuan categories=>",b);break}case ka:{const g=new mt("http://127.0.0.1:6806",""),v=new _t(g),h=A.blogApi(d,v),P=JSON.parse(o.value).postid,k=await h.getPreviewUrl(P);i.value=JSON.stringify(k),e.info("siyuan preview url=>",k);break}case Sa:{const g=new mt("http://127.0.0.1:6806",""),v=new _t(g),h=A.blogApi(d,v),b=a.value,P=await ys(b),k=new rs(b.name,b.type,P);e.info("mediaObject=>",k);const E=await h.newMediaObject(k,async()=>{const M=new FormData,H=new Blob([k.bits]);return M.append("file[]",H,k.name),M.append("assetsDirPath","/assets/"),await new vn(g).uploadAsset(M)});i.value=JSON.stringify(E),e.info("siyuan new mediaObject result=>",E);break}default:break}n.value=!1}catch(d){i.value=d,e.error(t("main.opt.failure")+"=>",d),n.value=!1}};return(d,g)=>{const v=it,h=at,b=Se,P=Ue,k=He;return _(),S(k,{title:"siyuanæµ‹è¯•"},{default:y(()=>[C("div",Ld,[C("div",Rd,[f(h,{modelValue:l.value,"onUpdate:modelValue":g[0]||(g[0]=E=>l.value=E),class:"m-2",placeholder:"è¯·é€‰æ‹©æ–¹æ³•åç§°",onChange:r},{default:y(()=>[(_(!0),$(ke,null,Ie(c.options,E=>(_(),S(v,{key:E.value,label:E.label,value:E.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),C("div",Gd,[f(b,{type:"primary",loading:n.value,onClick:w},{default:y(()=>[...g[3]||(g[3]=[V("å¼€å§‹æµ‹è¯•siyuan",-1)])]),_:1},8,["loading"])]),C("div",Bd,[f(b,null,{default:y(()=>[...g[4]||(g[4]=[V("å…¥å‚",-1)])]),_:1})]),C("div",jd,[f(P,{modelValue:o.value,"onUpdate:modelValue":g[1]||(g[1]=E=>o.value=E),type:"textarea",rows:5},null,8,["modelValue"])]),s.value?(_(),$("div",Kd,[C("input",{type:"file",onChange:m},null,32)])):F("",!0),C("div",zd,[f(b,null,{default:y(()=>[...g[5]||(g[5]=[V("ç»“æžœ",-1)])]),_:1})]),C("div",Jd,[f(P,{modelValue:i.value,"onUpdate:modelValue":g[2]||(g[2]=E=>i.value=E),type:"textarea",rows:10,placeholder:"æ—¥å¿—ä¿¡æ¯"},null,8,["modelValue"])])])]),_:1})}}}),Fd=ge(Wd,[["__scopeId","data-v-a11ee9c3"]]),qd={id:"cnblogs-test"},Yd={class:"method-list"},Xd={class:"item"},Qd={class:"item"},Zd={class:"item"},eu={key:0,class:"item"},tu={class:"item"},su={class:"item"},Ca="getUsersBlogs",Ea="getRecentPostsCount",Aa="getRecentPosts",Ia="newPost",Ua="getPost",xa="editPost",Ma="deletePost",Da="getCategories",Oa="getPreviewUrl",$a="newMediaObject",ou=J({__name:"CnblogsTest",setup(p){const e=L("cnblogs-test"),{t}=Z(),o=Y("{}"),s=Y(!1),a=Y(null),i=Y(""),n=Y(!1),l=Y("getUsersBlogs"),c=re({options:[{value:Ca,label:"èŽ·å–åšå®¢ä¿¡æ¯"},{value:Ea,label:"èŽ·å–æœ€æ–°æ–‡ç« æ•°ç›®"},{value:Aa,label:"èŽ·å–æœ€æ–°æ–‡ç« åˆ—è¡¨"},{value:Ia,label:"å‘å¸ƒæ–‡ç« "},{value:Ua,label:"èŽ·å–æ–‡ç« è¯¦æƒ…"},{value:xa,label:"ç¼–è¾‘æ–‡ç« "},{value:Ma,label:"åˆ é™¤æ–‡ç« "},{value:Da,label:"èŽ·å–åˆ†ç±»åˆ—è¡¨"},{value:Oa,label:"èŽ·å–æ–‡ç« é¢„è§ˆåœ°å€"},{value:$a,label:"ä¸Šä¼ èµ„æºæ–‡ä»¶"}]}),r=d=>{switch(s.value=!1,d){case Ca:{o.value="{}";break}case Ea:{o.value="{}";break}case Aa:{o.value=JSON.stringify({numOfPosts:10});break}case Ia:{o.value=JSON.stringify({title:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•æ ‡é¢˜",description:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•å†…å®¹",mt_keywords:"æ ‡ç­¾1,æ ‡ç­¾2",categories:["åˆ†ç±»1","åˆ†ç±»2"]});break}case Ua:{o.value=JSON.stringify({postid:"17593464"});break}case xa:{o.value=JSON.stringify({postid:"17593464",post:{title:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•æ ‡é¢˜2",description:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•å†…å®¹2",mt_keywords:"æ ‡ç­¾1,æ ‡ç­¾2",categories:["åˆ†ç±»1","åˆ†ç±»2"]}});break}case Ma:{o.value=JSON.stringify({postid:"17593463"});break}case Da:{o.value="{}";break}case Oa:{o.value=JSON.stringify({postid:"17243968"});break}case $a:{o.value="{}",s.value=!0;break}default:{o.value="{}";break}}},m=async d=>{const g=d.target;g.files&&g.files[0]&&(a.value=g.files[0])},w=async()=>{n.value=!0,i.value="",i.value="cnblogs requesting...";try{const d=new ue;switch(e.info("appInstance=>",d),l.value){case Ca:{const v=await be.getAdaptor("metaweblog_Cnblogs"),h=A.blogApi(d,v);e.info("cnblogsApi=>",h);const b=await h.getUsersBlogs();i.value=JSON.stringify(b),e.info("cnblogs users blogs=>",b);break}case Ea:{const v=await be.getAdaptor("metaweblog_Cnblogs"),h=A.blogApi(d,v);e.info("cnblogsApi=>",h);const b=await h.getRecentPostsCount();i.value=JSON.stringify(b),e.info("cnblogs getRecentPostsCount=>",b);break}case Aa:{const v=await be.getAdaptor("metaweblog_Cnblogs"),h=A.blogApi(d,v);e.info("cnblogsApi=>",h);const b=await h.getRecentPosts(10);i.value=JSON.stringify(b),e.info("cnblogs getRecentPosts=>",b);break}case Ia:{const g=JSON.parse(o.value);let v=new Be;v={...v,...g};const b=await be.getAdaptor("metaweblog_Cnblogs"),k=await A.blogApi(d,b).newPost(v);i.value=JSON.stringify(k),e.info("cnblogs newPost=>",k);break}case Ua:{const v=await be.getAdaptor("metaweblog_Cnblogs"),h=A.blogApi(d,v);e.info("cnblogsApi=>",h);const P=JSON.parse(o.value).postid,k=await h.getPost(P);i.value=JSON.stringify(k),e.info("cnblogs getPost=>",k);break}case xa:{const v=await be.getAdaptor("metaweblog_Cnblogs"),h=A.blogApi(d,v);e.info("cnblogsApi=>",h);const b=JSON.parse(o.value),P=b.postid;let k=new Be;k={...k,...b.post};const E=await h.editPost(P,k);i.value=JSON.stringify(E);break}case Ma:{const v=await be.getAdaptor("metaweblog_Cnblogs"),h=A.blogApi(d,v);e.info("cnblogsApi=>",h);const P=JSON.parse(o.value).postid,k=await h.deletePost(P);i.value=JSON.stringify(k);break}case Da:{const v=await be.getAdaptor("metaweblog_Cnblogs"),h=A.blogApi(d,v);e.info("cnblogsApi=>",h);const b=await h.getCategories();i.value=JSON.stringify(b),e.info("cnblogs getCategories=>",b);break}case Oa:{const v=await be.getAdaptor("metaweblog_Cnblogs"),h=A.blogApi(d,v);e.info("cnblogsApi=>",h);const P=JSON.parse(o.value).postid,k=await h.getPreviewUrl(P);i.value=JSON.stringify(k),e.info("cnblogs getPreviewUrl=>",k);break}case $a:{const v=await be.getAdaptor("metaweblog_Cnblogs"),h=A.blogApi(d,v);e.info("cnblogsApi=>",h);const P=await Yi("https://static-rs-terwer.oss-cn-beijing.aliyuncs.com/test/image-20230812091531-hibwr1g.png"),k=P.imageBase64;e.debug("imageBase64=>",{imageBase64:k});const E=Qo(k);e.debug("bits=>",E);const M=new rs(P.imageName,P.mimeType,E);e.info("mediaObject=>",M);const H=await h.newMediaObject(M);i.value=JSON.stringify(H),e.info("cnblogs new mediaObject result=>",H);break}default:break}n.value=!1}catch(d){i.value=d,e.error(t("main.opt.failure")+"=>",d),n.value=!1}};return(d,g)=>{const v=it,h=at,b=Se,P=Ue,k=He;return _(),S(k,{title:"åšå®¢å›­æµ‹è¯•"},{default:y(()=>[C("div",qd,[C("div",Yd,[f(h,{modelValue:l.value,"onUpdate:modelValue":g[0]||(g[0]=E=>l.value=E),class:"m-2",placeholder:"è¯·é€‰æ‹©æ–¹æ³•åç§°",onChange:r},{default:y(()=>[(_(!0),$(ke,null,Ie(c.options,E=>(_(),S(v,{key:E.value,label:E.label,value:E.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),C("div",Xd,[f(b,{type:"primary",loading:n.value,onClick:w},{default:y(()=>[...g[3]||(g[3]=[V("å¼€å§‹æµ‹è¯•cnblogs",-1)])]),_:1},8,["loading"])]),C("div",Qd,[f(b,null,{default:y(()=>[...g[4]||(g[4]=[V("å…¥å‚",-1)])]),_:1})]),C("div",Zd,[f(P,{modelValue:o.value,"onUpdate:modelValue":g[1]||(g[1]=E=>o.value=E),type:"textarea",rows:5},null,8,["modelValue"])]),s.value?(_(),$("div",eu,[C("input",{type:"file",onChange:m},null,32)])):F("",!0),C("div",tu,[f(b,null,{default:y(()=>[...g[5]||(g[5]=[V("ç»“æžœ",-1)])]),_:1})]),C("div",su,[f(P,{modelValue:i.value,"onUpdate:modelValue":g[2]||(g[2]=E=>i.value=E),type:"textarea",rows:10,placeholder:"æ—¥å¿—ä¿¡æ¯"},null,8,["modelValue"])])])]),_:1})}}}),au=ge(ou,[["__scopeId","data-v-879c636b"]]),iu={id:"wordpress-test"},nu={class:"method-list"},lu={class:"item"},ru={class:"item"},cu={class:"item"},pu={key:0,class:"item"},gu={class:"item"},du={class:"item"},Va="getUsersBlogs",Na="getRecentPostsCount",Ha="getRecentPosts",La="newPost",Ra="getPost",Ga="editPost",Ba="deletePost",ja="getCategories",Ka="getPreviewUrl",za="newMediaObject",uu=J({__name:"WordpressTest",setup(p){const e=L("wordpress-test"),{t}=Z(),o=Y("{}"),s=Y(!1),a=Y(null),i=Y(""),n=Y(!1),l=Y("getUsersBlogs"),c=re({options:[{value:Va,label:"èŽ·å–åšå®¢ä¿¡æ¯"},{value:Na,label:"èŽ·å–æœ€æ–°æ–‡ç« æ•°ç›®"},{value:Ha,label:"èŽ·å–æœ€æ–°æ–‡ç« åˆ—è¡¨"},{value:La,label:"å‘å¸ƒæ–‡ç« "},{value:Ra,label:"èŽ·å–æ–‡ç« è¯¦æƒ…"},{value:Ga,label:"ç¼–è¾‘æ–‡ç« "},{value:Ba,label:"åˆ é™¤æ–‡ç« "},{value:ja,label:"èŽ·å–åˆ†ç±»åˆ—è¡¨"},{value:Ka,label:"èŽ·å–æ–‡ç« é¢„è§ˆåœ°å€"},{value:za,label:"ä¸Šä¼ èµ„æºæ–‡ä»¶"}]}),r=d=>{switch(s.value=!1,d){case Va:{o.value="{}";break}case Na:{o.value="{}";break}case Ha:{o.value=JSON.stringify({numOfPosts:10});break}case La:{o.value=JSON.stringify({title:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•æ ‡é¢˜",description:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•å†…å®¹",mt_keywords:"æ ‡ç­¾1,æ ‡ç­¾2",categories:["åˆ†ç±»1","åˆ†ç±»2"]});break}case Ra:{o.value=JSON.stringify({postid:"20230526221603-3mgotyw"});break}case Ga:{o.value=JSON.stringify({postid:"20230527202519-k09a4gx",post:{title:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•æ ‡é¢˜2",description:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•å†…å®¹2",mt_keywords:"æ ‡ç­¾1,æ ‡ç­¾2",categories:["åˆ†ç±»1","åˆ†ç±»2"]}});break}case Ba:{o.value=JSON.stringify({postid:"20230528192554-mlcxbe8"});break}case ja:{o.value="{}";break}case Ka:{o.value=JSON.stringify({postid:"20230528192554-mlcxbe8"});break}case za:{o.value="{}",s.value=!0;break}default:{o.value="{}";break}}},m=async d=>{const g=d.target;g.files&&g.files[0]&&(a.value=g.files[0])},w=async()=>{n.value=!0,i.value="",i.value="wordpress requesting...";try{const d=new ue;switch(e.info("appInstance=>",d),l.value){case Va:{const v=await be.getAdaptor("wordpress_Wordpress"),b=await A.blogApi(d,v).getUsersBlogs();i.value=JSON.stringify(b),e.info("wordpress users blogs=>",b);break}case Na:break;case Ha:{const v=await be.getAdaptor("wordpress_Wordpress"),b=await A.blogApi(d,v).getRecentPosts(10);i.value=JSON.stringify(b),e.info("wordpress recent post=>",b);break}case La:break;case Ra:break;case Ga:break;case Ba:break;case ja:break;case Ka:break;case za:{const g="wordpress_Wordpress",v=a.value,h=await ys(v),b=new rs(v.name,v.type,h);e.info("mediaObject=>",b);const P={name:b.name,type:b.type,bits:b.bits,overwrite:!0},k=await be.getAdaptor(g),M=await A.blogApi(d,k).newMediaObject(P);i.value=JSON.stringify(M),e.info("wordpress new mediaObject result=>",M);break}default:break}n.value=!1}catch(d){i.value=d,e.error(t("main.opt.failure")+"=>",d),n.value=!1}};return(d,g)=>{const v=it,h=at,b=Se,P=Ue,k=He;return _(),S(k,{title:"WordPressæµ‹è¯•"},{default:y(()=>[C("div",iu,[C("div",nu,[f(h,{modelValue:l.value,"onUpdate:modelValue":g[0]||(g[0]=E=>l.value=E),class:"m-2",placeholder:"è¯·é€‰æ‹©æ–¹æ³•åç§°",onChange:r},{default:y(()=>[(_(!0),$(ke,null,Ie(c.options,E=>(_(),S(v,{key:E.value,label:E.label,value:E.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),C("div",lu,[f(b,{type:"primary",loading:n.value,onClick:w},{default:y(()=>[...g[3]||(g[3]=[V("å¼€å§‹æµ‹è¯•wordpress",-1)])]),_:1},8,["loading"])]),C("div",ru,[f(b,null,{default:y(()=>[...g[4]||(g[4]=[V("å…¥å‚",-1)])]),_:1})]),C("div",cu,[f(P,{modelValue:o.value,"onUpdate:modelValue":g[1]||(g[1]=E=>o.value=E),type:"textarea",rows:5},null,8,["modelValue"])]),s.value?(_(),$("div",pu,[C("input",{type:"file",onChange:m},null,32)])):F("",!0),C("div",gu,[f(b,null,{default:y(()=>[...g[5]||(g[5]=[V("ç»“æžœ",-1)])]),_:1})]),C("div",du,[f(P,{modelValue:i.value,"onUpdate:modelValue":g[2]||(g[2]=E=>i.value=E),type:"textarea",rows:10,placeholder:"æ—¥å¿—ä¿¡æ¯"},null,8,["modelValue"])])])]),_:1})}}}),mu=ge(uu,[["__scopeId","data-v-bf91e280"]]),hu={id:"typecho-test"},fu={class:"method-list"},yu={class:"item"},bu={class:"item"},wu={class:"item"},_u={key:0,class:"item"},vu={class:"item"},Pu={class:"item"},Ja="getUsersBlogs",Wa="getRecentPostsCount",Fa="getRecentPosts",qa="newPost",Ya="getPost",Xa="editPost",Qa="deletePost",Za="getCategories",ei="getPreviewUrl",ti="newMediaObject",Tu=J({__name:"TypechoTest",setup(p){const e=L("typecho-test"),t=Y("{}"),o=Y(!1),s=Y(null),a=Y(""),i=Y(!1),n=Y("getUsersBlogs"),l=re({options:[{value:Ja,label:"èŽ·å–åšå®¢ä¿¡æ¯"},{value:Wa,label:"èŽ·å–æœ€æ–°æ–‡ç« æ•°ç›®"},{value:Fa,label:"èŽ·å–æœ€æ–°æ–‡ç« åˆ—è¡¨"},{value:qa,label:"å‘å¸ƒæ–‡ç« "},{value:Ya,label:"èŽ·å–æ–‡ç« è¯¦æƒ…"},{value:Xa,label:"ç¼–è¾‘æ–‡ç« "},{value:Qa,label:"åˆ é™¤æ–‡ç« "},{value:Za,label:"èŽ·å–åˆ†ç±»åˆ—è¡¨"},{value:ei,label:"èŽ·å–æ–‡ç« é¢„è§ˆåœ°å€"},{value:ti,label:"ä¸Šä¼ èµ„æºæ–‡ä»¶"}]}),c=w=>{switch(o.value=!1,w){case Ja:{t.value="{}";break}case Wa:{t.value="{}";break}case Fa:{t.value=JSON.stringify({numOfPosts:10});break}case qa:{t.value=JSON.stringify({title:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•æ ‡é¢˜",description:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•å†…å®¹",mt_keywords:"æ ‡ç­¾1,æ ‡ç­¾2",categories:["åˆ†ç±»1","åˆ†ç±»2"]});break}case Ya:{t.value=JSON.stringify({postid:"20230526221603-3mgotyw"});break}case Xa:{t.value=JSON.stringify({postid:"20230527202519-k09a4gx",post:{title:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•æ ‡é¢˜2",description:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•å†…å®¹2",mt_keywords:"æ ‡ç­¾1,æ ‡ç­¾2",categories:["åˆ†ç±»1","åˆ†ç±»2"]}});break}case Qa:{t.value=JSON.stringify({postid:"20230528192554-mlcxbe8"});break}case Za:{t.value="{}";break}case ei:{t.value=JSON.stringify({postid:"20230528192554-mlcxbe8"});break}case ti:{t.value="{}",o.value=!0;break}default:{t.value="{}";break}}},r=async w=>{const d=w.target;d.files&&d.files[0]&&(s.value=d.files[0])},m=async()=>{i.value=!0,a.value="",a.value="typecho requesting...";try{const w=new ue;switch(e.info("appInstance=>",w),n.value){case Ja:{const g=await be.getAdaptor("metaweblog_Typecho"),h=await A.blogApi(w,g).getUsersBlogs();a.value=JSON.stringify(h),e.info("typecho users blogs=>",h);break}case Wa:break;case Fa:break;case qa:break;case Ya:break;case Xa:break;case Qa:break;case Za:break;case ei:break;case ti:{const g=await be.getAdaptor("metaweblog_Typecho"),v="https://static-rs-terwer.oss-cn-beijing.aliyuncs.com/test/image-20230812091531-hibwr1g.png",h=v.substring(v.lastIndexOf("/")+1),P=(await Yi(v)).imageBase64;e.debug("imageBase64=>",{imageBase64:P});const k=Qo(P);e.debug("bits=>",k);const E=new rs(h,"image/png",k);e.info("mediaObject=>",E);const M=A.blogApi(w,g);e.info("typechoApi=>",M);const H=await M.newMediaObject(E);a.value=JSON.stringify(H),e.info("typecho new mediaObject result=>",H);break}default:break}i.value=!1}catch(w){a.value=w,e.error(w),i.value=!1}};return(w,d)=>{const g=it,v=at,h=Se,b=Ue,P=He;return _(),S(P,{title:"Typechoæµ‹è¯•"},{default:y(()=>[C("div",hu,[C("div",fu,[f(v,{modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=k=>n.value=k),class:"m-2",placeholder:"è¯·é€‰æ‹©æ–¹æ³•åç§°",onChange:c},{default:y(()=>[(_(!0),$(ke,null,Ie(l.options,k=>(_(),S(g,{key:k.value,label:k.label,value:k.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),C("div",yu,[f(h,{type:"primary",loading:i.value,onClick:m},{default:y(()=>[...d[3]||(d[3]=[V("å¼€å§‹æµ‹è¯•typecho",-1)])]),_:1},8,["loading"])]),C("div",bu,[f(h,null,{default:y(()=>[...d[4]||(d[4]=[V("å…¥å‚",-1)])]),_:1})]),C("div",wu,[f(b,{modelValue:t.value,"onUpdate:modelValue":d[1]||(d[1]=k=>t.value=k),type:"textarea",rows:5},null,8,["modelValue"])]),o.value?(_(),$("div",_u,[C("input",{type:"file",onChange:r},null,32)])):F("",!0),C("div",vu,[f(h,null,{default:y(()=>[...d[5]||(d[5]=[V("ç»“æžœ",-1)])]),_:1})]),C("div",Pu,[f(b,{modelValue:a.value,"onUpdate:modelValue":d[2]||(d[2]=k=>a.value=k),type:"textarea",rows:10,placeholder:"æ—¥å¿—ä¿¡æ¯"},null,8,["modelValue"])])])]),_:1})}}}),ku=ge(Tu,[["__scopeId","data-v-80b7676b"]]),Su={id:"yuque-test"},Cu={class:"method-list"},Eu={class:"item"},Au={class:"item"},Iu={class:"item"},Uu={key:0,class:"item"},xu={class:"item"},Mu={class:"item"},si="getUsersBlogs",oi="getRecentPostsCount",ai="getRecentPosts",ii="newPost",ni="getPost",li="editPost",ri="deletePost",ci="getCategories",pi="getPreviewUrl",gi="newMediaObject",Du=J({__name:"YuqueTest",setup(p){const e=L("yuque-test"),{t}=Z(),o=Y("{}"),s=Y(!1),a=Y(null),i=Y(""),n=Y(!1),l=Y("getUsersBlogs"),c=re({options:[{value:si,label:"èŽ·å–åšå®¢ä¿¡æ¯"},{value:oi,label:"èŽ·å–æœ€æ–°æ–‡ç« æ•°ç›®"},{value:ai,label:"èŽ·å–æœ€æ–°æ–‡ç« åˆ—è¡¨"},{value:ii,label:"å‘å¸ƒæ–‡ç« "},{value:ni,label:"èŽ·å–æ–‡ç« è¯¦æƒ…"},{value:li,label:"ç¼–è¾‘æ–‡ç« "},{value:ri,label:"åˆ é™¤æ–‡ç« "},{value:ci,label:"èŽ·å–åˆ†ç±»åˆ—è¡¨"},{value:pi,label:"èŽ·å–æ–‡ç« é¢„è§ˆåœ°å€"},{value:gi,label:"ä¸Šä¼ èµ„æºæ–‡ä»¶"}]}),r=d=>{switch(s.value=!1,d){case si:{o.value="{}";break}case oi:{o.value="{}";break}case ai:{o.value=JSON.stringify({numOfPosts:10});break}case ii:{o.value=JSON.stringify({title:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•æ ‡é¢˜",description:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•å†…å®¹",mt_keywords:"æ ‡ç­¾1,æ ‡ç­¾2",categories:["åˆ†ç±»1","åˆ†ç±»2"]});break}case ni:{o.value=JSON.stringify({postid:"20230526221603-3mgotyw"});break}case li:{o.value=JSON.stringify({postid:"20230527202519-k09a4gx",post:{title:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•æ ‡é¢˜2",description:"è‡ªåŠ¨å‘å¸ƒçš„æµ‹è¯•å†…å®¹2",mt_keywords:"æ ‡ç­¾1,æ ‡ç­¾2",categories:["åˆ†ç±»1","åˆ†ç±»2"]}});break}case ri:{o.value=JSON.stringify({postid:"20230528192554-mlcxbe8"});break}case ci:{o.value="{}";break}case pi:{o.value=JSON.stringify({postid:"20230528192554-mlcxbe8"});break}case gi:{o.value="{}",s.value=!0;break}default:{o.value="{}";break}}},m=async d=>{const g=d.target;g.files&&g.files[0]&&(a.value=g.files[0])},w=async()=>{n.value=!0,i.value="",i.value="yuque requesting...";try{const d=new ue;switch(e.info("appInstance=>",d),l.value){case si:{const v=await be.getAdaptor("common_Yuque"),b=await A.blogApi(d,v).getUsersBlogs();i.value=JSON.stringify(b),e.info("yuque users blogs=>",b);break}case oi:break;case ai:break;case ii:break;case ni:break;case li:break;case ri:break;case ci:break;case pi:break;case gi:{const g=a.value,v=await ys(g),h=new rs(g.name,g.type,v);e.info("mediaObject=>",h);const b={name:h.name,type:h.type,bits:h.bits,overwrite:!0},P="http://127.0.0.1:3000/xmlrpc.php",E=await new Cn(P,"",{}).methodCall("metaWeblog.newMediaObject",["","terwer","123456",b]);i.value=JSON.stringify(E),e.info("yuque new mediaObject result=>",E);break}default:break}n.value=!1}catch(d){i.value=d,e.error(t("main.opt.failure")+"=>",d),n.value=!1}};return(d,g)=>{const v=it,h=at,b=Se,P=Ue,k=He;return _(),S(k,{title:"è¯­é›€æµ‹è¯•"},{default:y(()=>[C("div",Su,[C("div",Cu,[f(h,{modelValue:l.value,"onUpdate:modelValue":g[0]||(g[0]=E=>l.value=E),class:"m-2",placeholder:"è¯·é€‰æ‹©æ–¹æ³•åç§°",onChange:r},{default:y(()=>[(_(!0),$(ke,null,Ie(c.options,E=>(_(),S(v,{key:E.value,label:E.label,value:E.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),C("div",Eu,[f(b,{type:"primary",loading:n.value,onClick:w},{default:y(()=>[...g[3]||(g[3]=[V("å¼€å§‹æµ‹è¯•yuque",-1)])]),_:1},8,["loading"])]),C("div",Au,[f(b,null,{default:y(()=>[...g[4]||(g[4]=[V("å…¥å‚",-1)])]),_:1})]),C("div",Iu,[f(P,{modelValue:o.value,"onUpdate:modelValue":g[1]||(g[1]=E=>o.value=E),type:"textarea",rows:5},null,8,["modelValue"])]),s.value?(_(),$("div",Uu,[C("input",{type:"file",onChange:m},null,32)])):F("",!0),C("div",xu,[f(b,null,{default:y(()=>[...g[5]||(g[5]=[V("ç»“æžœ",-1)])]),_:1})]),C("div",Mu,[f(P,{modelValue:i.value,"onUpdate:modelValue":g[2]||(g[2]=E=>i.value=E),type:"textarea",rows:10,placeholder:"æ—¥å¿—ä¿¡æ¯"},null,8,["modelValue"])])])]),_:1})}}}),Ou=ge(Du,[["__scopeId","data-v-e3a3d265"]]),$u={id:"zhihu-test"},Vu={class:"method-list"},Nu={class:"item"},Hu={class:"item"},Lu={class:"item"},Ru={key:0,class:"item"},Gu={class:"item"},Bu={class:"item"},di="getMetaData",ju=J({__name:"ZhihuTest",setup(p){const e=L("zhihu-test"),{t}=Z(),o=Y("{}"),s=Y(!1),a=Y(null),i=Y(""),n=Y(!1),l=Y("getMetaData"),c=re({options:[{value:di,label:"èŽ·å–å…ƒæ•°æ®ä¿¡æ¯"}]}),r=d=>{switch(s.value=!1,d){case di:{o.value="{}";break}default:{o.value="{}";break}}},m=async d=>{const g=d.target;g.files&&g.files[0]&&(a.value=g.files[0])},w=async()=>{n.value=!0,i.value="",i.value="zhihu requesting...";try{const d=new ue;switch(e.info("appInstance=>",d),l.value){case di:{const v=await be.getAdaptor("custom_Zhihu"),b=await A.webApi(d,v).getMetaData();i.value=JSON.stringify(b),e.info("zhihu meta data=>",b);break}default:break}n.value=!1}catch(d){i.value=d,e.error(t("main.opt.failure")+"=>",d),n.value=!1}};return(d,g)=>{const v=it,h=at,b=Se,P=Ue,k=He;return _(),S(k,{title:"çŸ¥ä¹Žæµ‹è¯•"},{default:y(()=>[C("div",$u,[C("div",Vu,[f(h,{modelValue:l.value,"onUpdate:modelValue":g[0]||(g[0]=E=>l.value=E),class:"m-2",placeholder:"è¯·é€‰æ‹©æ–¹æ³•åç§°",onChange:r},{default:y(()=>[(_(!0),$(ke,null,Ie(c.options,E=>(_(),S(v,{key:E.value,label:E.label,value:E.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),C("div",Nu,[f(b,{type:"primary",loading:n.value,onClick:w},{default:y(()=>[...g[3]||(g[3]=[V("å¼€å§‹æµ‹è¯•zhihu",-1)])]),_:1},8,["loading"])]),C("div",Hu,[f(b,null,{default:y(()=>[...g[4]||(g[4]=[V("å…¥å‚",-1)])]),_:1})]),C("div",Lu,[f(P,{modelValue:o.value,"onUpdate:modelValue":g[1]||(g[1]=E=>o.value=E),type:"textarea",rows:5},null,8,["modelValue"])]),s.value?(_(),$("div",Ru,[C("input",{type:"file",onChange:m},null,32)])):F("",!0),C("div",Gu,[f(b,null,{default:y(()=>[...g[5]||(g[5]=[V("ç»“æžœ",-1)])]),_:1})]),C("div",Bu,[f(P,{modelValue:i.value,"onUpdate:modelValue":g[2]||(g[2]=E=>i.value=E),type:"textarea",rows:10,placeholder:"æ—¥å¿—ä¿¡æ¯"},null,8,["modelValue"])])])]),_:1})}}}),Ku=ge(ju,[["__scopeId","data-v-cd1829ec"]]),zu={id:"csdn-test"},Ju={class:"method-list"},Wu={class:"item"},Fu={class:"item"},qu={class:"item"},Yu={key:0,class:"item"},Xu={class:"item"},Qu={class:"item"},ui="getMetaData",mi="getUsersBlogs",Zu=J({__name:"CsdnTest",setup(p){const e=L("csdn-test"),{t}=Z(),o=Y("{}"),s=Y(!1),a=Y(null),i=Y(""),n=Y(!1),l=Y("getMetaData"),c=re({options:[{value:ui,label:"èŽ·å–å…ƒæ•°æ®ä¿¡æ¯"},{value:mi,label:"èŽ·å–åšå®¢ä¿¡æ¯"}]}),r=d=>{switch(s.value=!1,d){case ui:{o.value="{}";break}case mi:{o.value="{}";break}default:{o.value="{}";break}}},m=async d=>{const g=d.target;g.files&&g.files[0]&&(a.value=g.files[0])},w=async()=>{n.value=!0,i.value="",i.value="csdn requesting...";try{const d=new ue;switch(e.info("appInstance=>",d),l.value){case ui:{const v=await be.getAdaptor("custom_Csdn"),b=await A.webApi(d,v).getMetaData();i.value=JSON.stringify(b),e.info("csdn meta data=>",b);break}case mi:{const v=await be.getAdaptor("custom_Csdn"),b=await A.webApi(d,v).getUsersBlogs();i.value=JSON.stringify(b),e.info("csdn users blogs=>",b);break}default:break}n.value=!1}catch(d){i.value=d,e.error(t("main.opt.failure")+"=>",d),n.value=!1}};return(d,g)=>{const v=it,h=at,b=Se,P=Ue,k=He;return _(),S(k,{title:"CSDNæµ‹è¯•"},{default:y(()=>[C("div",zu,[C("div",Ju,[f(h,{modelValue:l.value,"onUpdate:modelValue":g[0]||(g[0]=E=>l.value=E),class:"m-2",placeholder:"è¯·é€‰æ‹©æ–¹æ³•åç§°",onChange:r},{default:y(()=>[(_(!0),$(ke,null,Ie(c.options,E=>(_(),S(v,{key:E.value,label:E.label,value:E.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),C("div",Wu,[f(b,{type:"primary",loading:n.value,onClick:w},{default:y(()=>[...g[3]||(g[3]=[V("å¼€å§‹æµ‹è¯•csdn",-1)])]),_:1},8,["loading"])]),C("div",Fu,[f(b,null,{default:y(()=>[...g[4]||(g[4]=[V("å…¥å‚",-1)])]),_:1})]),C("div",qu,[f(P,{modelValue:o.value,"onUpdate:modelValue":g[1]||(g[1]=E=>o.value=E),type:"textarea",rows:5},null,8,["modelValue"])]),s.value?(_(),$("div",Yu,[C("input",{type:"file",onChange:m},null,32)])):F("",!0),C("div",Xu,[f(b,null,{default:y(()=>[...g[5]||(g[5]=[V("ç»“æžœ",-1)])]),_:1})]),C("div",Qu,[f(P,{modelValue:i.value,"onUpdate:modelValue":g[2]||(g[2]=E=>i.value=E),type:"textarea",rows:10,placeholder:"æ—¥å¿—ä¿¡æ¯"},null,8,["modelValue"])])])]),_:1})}}}),em=ge(Zu,[["__scopeId","data-v-be2bd288"]]),tm={id:"picgo-test"},sm=J({__name:"PicgoTest",props:{pageId:{type:String,default:""}},setup(p){const e=L("picgo-test"),{handlePicgo:t}=Xo(),{query:o}=tt(),s=o.id??po(),a=p,i=async()=>{const n=T.isEmptyString(a.pageId)?s:a.pageId,l=await t(n);e.debug("å›¾ç‰‡å¤„ç†å®Œæ¯•, md =>",l)};return(n,l)=>{const c=Se,r=He;return _(),S(r,{title:"Picgoæµ‹è¯•"},{default:y(()=>[C("div",tm,[f(c,{onClick:i},{default:y(()=>[...l[0]||(l[0]=[V("æµ‹è¯•",-1)])]),_:1})])]),_:1})}}}),om=ge(sm,[["__scopeId","data-v-fb483c41"]]),am={id:"other-test"},im=`

â€‹â€‹![image](https://img1.terwer.space/api/public/202308142037187.png)â€‹â€‹

dfgvdfgfd

åœ°æ–¹GVå‘çš„

â€‹![image](https://img1.terwer.space/api/public/202308142036226.png)â€‹

â€

â€‹![](https://img1.terwer.space/202308142041443.png)â€‹
`,nm=J({__name:"OtherTest",setup(p){const e=re({content:im}),t=()=>{const o=e.content,s=Dn.markdownToNotion(o);console.log("notionObject =>",s)};return(o,s)=>{const a=Ue,i=Ce,n=Se,l=nt,c=He;return _(),S(c,{title:"å…¶ä»–æµ‹è¯•"},{default:y(()=>[C("div",am,[f(l,null,{default:y(()=>[f(i,null,{default:y(()=>[f(a,{modelValue:e.content,"onUpdate:modelValue":s[0]||(s[0]=r=>e.content=r),style:{width:"75%","margin-right":"16px"},type:"textarea",rows:10},null,8,["modelValue"])]),_:1}),f(i,null,{default:y(()=>[f(n,{onClick:t},{default:y(()=>[...s[1]||(s[1]=[V("æµ‹è¯•Notion",-1)])]),_:1})]),_:1})]),_:1})])]),_:1})}}}),lm=ge(nm,[["__scopeId","data-v-c91f7153"]]),rm={class:"chat-output"},cm=J({__name:"ChatgptTest",setup(p){const e=L("chatgpt-test"),{t}=Z(),o=Y(""),s=Y(""),a=re({isLoading:!1}),i=async()=>{if(o.value.trim()===""){X.error("è¯·è¾“å…¥æ–‡æœ¬");return}a.isLoading=!0;try{const{chat:l}=Bt(),c=await l(o.value);if(T.isEmptyString(c)){X.error("è¯·æ±‚é”™è¯¯ï¼Œè¯·åœ¨åº•éƒ¨åå¥½è®¾ç½®ä¿®æ”¹è¯·æ±‚åœ°å€å’ŒChatGPT keyï¼");return}s.value+=`> ${o.value}
${c}

`,o.value=""}catch(l){e.error(t("main.opt.failure")+"=>",l),X.error(t("main.opt.failure")+"=>"+l)}finally{a.isLoading=!1}},n=()=>{s.value=""};return(l,c)=>{const r=Ue,m=Ce,w=Se,d=nt,g=He;return _(),S(g,{title:"AIèŠå¤©"},{default:y(()=>[f(d,{class:"chatgpt-form"},{default:y(()=>[f(m,null,{default:y(()=>[f(r,{modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=v=>o.value=v),autosize:{minRows:4,maxRows:16},type:"textarea",class:"chat-input",placeholder:"è¯·è¾“å…¥æ–‡æœ¬..."},null,8,["modelValue"])]),_:1}),f(m,null,{default:y(()=>[f(w,{type:"primary",onClick:i,loading:a.isLoading},{default:y(()=>[...c[1]||(c[1]=[V("å‘é€æ¶ˆæ¯",-1)])]),_:1},8,["loading"]),f(w,{type:"danger",onClick:n},{default:y(()=>[...c[2]||(c[2]=[V("æ¸…å±",-1)])]),_:1})]),_:1}),f(m,null,{default:y(()=>[C("div",rm,[C("pre",null,R(s.value),1)])]),_:1})]),_:1})]),_:1})}}}),pm=ge(cm,[["__scopeId","data-v-9202321f"]]),uo=()=>{const{t:p}=Z(),e=uc(p),t=[...Re.commonCfg,...Re.githubCfg,...Re.gitlabCfg,...Re.metaweblogCfg,...Re.wordpressCfg,...Re.customCfg,...Re.fsCfg];return{getPrePlatformKeys:()=>t.map(l=>l.platformKey),platformTypeList:e,getPlatformType:l=>e.find(c=>c.type===l),getAllPrePlatformList:()=>t,getPrePlatformList:l=>t.filter(c=>c.platformType===l),getPrePlatform:l=>t.find(c=>c.platformKey===l)}},gm=["src"],bl=J({__name:"DrawerBoxBridge",props:{src:{type:String,default:""}},setup(p){const{t:e}=Z();return(t,o)=>{const s=Ll("resize");return _(),$("div",null,[Li(C("iframe",{width:"100%",src:p.src,frameborder:"0"},null,8,gm),[[s,{loadText:u(e)("page.loading")}]])])}}}),dm={class:"platform-title"},um={class:"platform-desc"},mm={class:"text-desc"},hm={class:"icon-list"},fm={class:"platform-box"},ym={class:"el-icon"},bm=["innerHTML"],wm={key:0,class:"add-action"},_m=J({__name:"PlatformQuickAdd",props:{apiType:{type:String,default:""}},setup(p){const e=L("platform-quick-add"),t=p;Z(),kt();const o=tt(),{getPlatformType:s,getPrePlatformList:a,getAllPrePlatformList:i}=uo(),n=re(o.params),l=Y(t.apiType??n.type),c=Y(!1),r=Y(""),m=Y("");Ke(()=>t.apiType,b=>{l.value=b,h()});const w=re({platformGroup:{},pre:[]}),d=(b,P)=>{r.value=b,m.value=P,c.value=!0},g=(b,P)=>{const E=`${window.origin}${Wi}#${P}`;e.debug(`Publisher will go to ${E}`),d(b,E)},v=b=>{const P=b?.platformType??"",k=b?.platformKey??"",E=b?.subPlatformType??"",M=`/setting/platform/add/${P}?showBack=trye&key=${k}&sub=${E}`,H=Nt.longPlatformName(b?.platformName??b?.platformType??"");g(`æ·»åŠ  ${H} å¹³å°`,M)},h=()=>{l.value==="all"?(w.platformGroup={type:"all",title:"å…¨éƒ¨",img:"",description:"å…¨éƒ¨å¹³å°åˆ—è¡¨"},w.pre=i()):(w.platformGroup=s(l.value),w.pre=a(l.value))};return st(()=>{h()}),(b,P)=>{const k=Ne,E=qs,M=Se,H=Fs,B=Ji;return _(),$("div",null,[f(H,{class:"platform-add-card"},{default:y(()=>[C("div",dm,R(l.value==="all"?"å…¨éƒ¨":w.platformGroup?.title??l.value),1),C("div",um,[C("div",mm,R(w.platformGroup?.description??""),1),C("p",null,[f(k,{class:"desc-tip",type:"info",title:"ç‚¹å‡»å›¾æ ‡å¿«é€Ÿæ·»åŠ ï¼Œæˆ–è€…ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®è‡ªå®šä¹‰æ·»åŠ "})])]),C("div",hm,[C("div",fm,[(_(!0),$(ke,null,Ie(w.pre,D=>(_(),S(E,{class:"define-item",onClick:G=>v(D),title:D.platformName},{default:y(()=>[C("i",ym,[C("span",{innerHTML:D?.platformIcon},null,8,bm)]),V(" "+R(u(Nt).shortPlatformName(D.platformName,6)),1)]),_:2},1032,["onClick","title"]))),256))])]),l.value!=="all"?(_(),$("div",wm,[f(M,{type:"primary",size:"large",onClick:P[0]||(P[0]=D=>v({platformType:l.value}))},{default:y(()=>[V(" æ·»åŠ è‡ªå®šä¹‰ "+R(w.platformGroup?.title??l.value)+" å¯¹æŽ¥ ",1)]),_:1})])):F("",!0)]),_:1}),f(B,{modelValue:c.value,"onUpdate:modelValue":P[1]||(P[1]=D=>c.value=D),size:"85%",title:r.value,direction:"rtl","destroy-on-close":!0},{default:y(()=>[f(bl,{src:m.value},null,8,["src"])]),_:1},8,["modelValue","title"])])}}}),wl=ge(_m,[["__scopeId","data-v-f8d23f70"]]),vm=J({__name:"PublishPlatformStore",setup(p){const e=L("publish-platform-import"),{getSetting:t}=pe(),{platformTypeList:o}=uo(),s=Y("all"),a=re({setting:{},dynamicConfigArray:[],platformTypeList:o}),i=l=>{s.value=l},n=async()=>{a.setting=await t(),e.debug("get setting from platform setting",a.setting);const l=te.safeParse(a.setting[Me],{});a.dynamicConfigArray=l?.totalCfg||[],e.debug("store dynamic init page=>",a.dynamicConfigArray)};return st(async()=>{await n()}),(l,c)=>{const r=ur,m=Ys,w=wl;return _(),$("div",null,[(_(),S(m,{modelValue:s.value,"onUpdate:modelValue":c[1]||(c[1]=d=>s.value=d),style:{"margin-bottom":"30px"},key:s.value},{default:y(()=>[f(r,{key:"all",value:"all",onClick:c[0]||(c[0]=d=>i("all"))},{default:y(()=>[...c[2]||(c[2]=[V("å…¨éƒ¨",-1)])]),_:1}),(_(!0),$(ke,null,Ie(u(o),d=>(_(),S(r,{key:d.type,value:d.type,onClick:g=>i(d.type)},{default:y(()=>[V(R(d.title),1)]),_:2},1032,["value","onClick"]))),128))]),_:1},8,["modelValue"])),f(w,{"api-type":s.value},null,8,["api-type"])])}}}),Pm={class:"flex flex-wrap gap-4 import-select"},Tm={class:"log-message-box"},km={class:"import-panel"},Sm={class:"import-panel"},Cm=J({__name:"PublishPlatformImport",setup(p){const e=L("publish-platform-import"),{t}=Z(),{getSetting:o,updateSetting:s,deleteKey:a}=pe(),{platformTypeList:i,getPrePlatformList:n,getAllPrePlatformList:l}=uo(),c=Y(!1),r=Y(""),m=Y(!1),w=Y(""),d=re({setting:{},dynamicConfigArray:[],isImportLoading:!1,showLogMessage:!1,logMessage:"",customImport:{path:[],datas:[]}}),g=(B,D)=>{const G=Ae.formatIsoToZh(new Date().toISOString(),!0);d.logMessage+=`[${G}] ${B} ${D}
`},v=B=>{let D=0;for(const G of B){const x=G.platformKey;if(Vn(d.dynamicConfigArray,x)){g(x,`${x} å·²ç»å­˜åœ¨ï¼Œå¿½ç•¥å¯¼å…¥`);continue}const ee=Pe(G);d.dynamicConfigArray.push(ee),g(x,"å·²åŠ å…¥å¯¼å…¥åˆ—è¡¨"),d.setting[x]={},g(x,"å·²å¯¼å…¥å¹¶åˆå§‹åŒ–æˆåŠŸ"),D++}return D},h=()=>{vt.confirm("ç¡®è®¤è¦å¯¼å…¥å…¨éƒ¨å†…ç½®å¹³å°å—ï¼Ÿ","æ¸©é¦¨æç¤º",{type:"warning",icon:ze(zs),confirmButtonText:t("main.opt.ok"),cancelButtonText:t("main.opt.cancel")}).then(async()=>{await b()}).catch(()=>{})},b=async()=>{d.showLogMessage=!0,d.isImportLoading=!0,d.logMessage="";let B=0;if(B+=v(Re.commonCfg),B+=v(Re.githubCfg),B+=v(Re.gitlabCfg),B+=v(Re.metaweblogCfg),B+=v(Re.wordpressCfg),B+=v(Re.customCfg),B+=v(Re.fsCfg),d.isImportLoading=!1,B>0){const D=ft(d.dynamicConfigArray);d.setting[Me]=D,await s(d.setting),await H(),d.logMessage+="å…¨éƒ¨å¯¼å…¥æˆåŠŸå¹¶ä¿å­˜",X.success("å…¨éƒ¨å¯¼å…¥æˆåŠŸå¹¶ä¿å­˜")}else d.logMessage+="æœªå‘çŽ°æ–°å¹³å°ï¼Œå¿½ç•¥å¯¼å…¥",X.warning("æœªå‘çŽ°æ–°å¹³å°ï¼Œå¿½ç•¥å¯¼å…¥")},P=()=>{c.value=!0,r.value="è‡ªå®šä¹‰å¯¼å…¥"},k=()=>{m.value=!0,w.value="ä»Žã€ŒæŒ‚ä»¶ç‰ˆã€ v0.8.1 å¯¼å…¥"},E=async(B,D)=>{if(B.isLeaf)return D([]);let G,x=B.data.value||"";if(x===""&&d.customImport.path.length==0?G="":(x===""&&(x=""),G=x),T.isEmptyString(G)){const ee=[];i.forEach(I=>{const N={value:I.type,label:I.title,isLeaf:!1};ee.push(N)}),D(ee)}else{const ee=[];n(G).forEach(N=>{if(N.platformType===G){const oe={value:N.platformKey,label:N.platformName,isLeaf:!0};ee.push(oe)}d.dynamicConfigArray.some(oe=>oe.platformKey===N.platformKey)&&d.customImport.path.push(N.platformKey)}),D(ee)}},M=async()=>{const B=d.customImport.path;if(B.length===0){d.logMessage+="æœªé€‰æ‹©å¹³å°ï¼Œå¿½ç•¥å¯¼å…¥",X.warning("æœªé€‰æ‹©å¹³å°ï¼Œå¿½ç•¥å¯¼å…¥");return}const D=[];l().forEach(ee=>{B.includes(ee.platformKey)&&D.push(ee)}),d.showLogMessage=!0,d.isImportLoading=!0,d.logMessage="";let x=0;if(x+=v(D),d.isImportLoading=!1,x>0){const ee=ft(d.dynamicConfigArray);d.setting[Me]=ee,await s(d.setting),await H(),d.logMessage+="é€‰æ‹©çš„è‡ªå®šä¹‰å¹³å°å·²æˆåŠŸå¯¼å…¥å¹¶ä¿å­˜",X.success("é€‰æ‹©çš„è‡ªå®šä¹‰å¹³å°å·²æˆåŠŸå¯¼å…¥å¹¶ä¿å­˜")}else d.logMessage+="æœªå‘çŽ°æ–°å¹³å°ï¼Œå¿½ç•¥å¯¼å…¥",X.warning("æœªå‘çŽ°æ–°å¹³å°ï¼Œå¿½ç•¥å¯¼å…¥")},H=async()=>{d.setting=await o(),e.debug("get setting from platform setting",d.setting);const B=te.safeParse(d.setting[Me],{});d.dynamicConfigArray=B?.totalCfg||[],e.debug("import dynamic init page=>",d.dynamicConfigArray)};return st(async()=>{await H()}),(B,D)=>{const G=Fs,x=Ue,ee=Wo,I=Ce,N=Se,oe=nt,j=Ji,O=Ne;return _(),$("div",Pm,[f(G,{shadow:"always",class:"select-item",onClick:h},{default:y(()=>[...D[4]||(D[4]=[V(" ä¸€é”®å…¨éƒ¨å¯¼å…¥",-1)])]),_:1}),f(G,{shadow:"hover",class:"select-item",onClick:P},{default:y(()=>[...D[5]||(D[5]=[V("è‡ªå®šä¹‰å¯¼å…¥",-1)])]),_:1}),f(G,{shadow:"hover",class:"select-item",onClick:k},{default:y(()=>[...D[6]||(D[6]=[V(" ä»Žæ—§ç‰ˆ v0.8.1 ç‰ˆæœ¬ã€Œæ€æºç¬”è®°æŒ‚ä»¶ã€å¯¼å…¥ ",-1)])]),_:1}),C("div",Tm,[d.showLogMessage?(_(),S(x,{key:0,modelValue:d.logMessage,"onUpdate:modelValue":D[0]||(D[0]=he=>d.logMessage=he),type:"textarea",rows:10,placeholder:"æ—¥å¿—ä¿¡æ¯"},null,8,["modelValue"])):F("",!0)]),f(j,{modelValue:c.value,"onUpdate:modelValue":D[2]||(D[2]=he=>c.value=he),size:"85%",title:r.value,direction:"rtl","destroy-on-close":!0},{default:y(()=>[C("div",km,[f(oe,null,{default:y(()=>[f(I,null,{default:y(()=>[f(ee,{modelValue:d.customImport.path,"onUpdate:modelValue":D[1]||(D[1]=he=>d.customImport.path=he),"show-checkbox":"",lazy:"",multiple:"","check-on-click-node":"","default-expand-all":"",load:E,"empty-text":u(t)("main.data.empty"),"no-data-text":u(t)("main.data.empty"),placeholder:u(t)("main.opt.select")},null,8,["modelValue","empty-text","no-data-text","placeholder"])]),_:1}),f(I,null,{default:y(()=>[f(N,{onClick:M,type:"primary"},{default:y(()=>[...D[7]||(D[7]=[V("å¼€å§‹å¯¼å…¥",-1)])]),_:1})]),_:1})]),_:1})])]),_:1},8,["modelValue","title"]),f(j,{modelValue:m.value,"onUpdate:modelValue":D[3]||(D[3]=he=>m.value=he),size:"85%",title:w.value,direction:"rtl","destroy-on-close":!0},{default:y(()=>[C("div",Sm,[f(O,{closable:!1,title:u(t)("import.v081.warn"),class:"form-item-tip",type:"warning"},null,8,["title"])])]),_:1},8,["modelValue","title"])])}}}),Em=ge(Cm,[["__scopeId","data-v-c1d28b7d"]]),Am=["href"],Im=["href"],Um=J({__name:"CookieSetting",props:{apiType:"",setting:{},dynCfg:{},settingCfg:{}},emits:["emitHideDlg"],setup(p,{emit:e}){const t=L("cookie-setting"),o=p,s=e,{t:a}=Z(),{updateSetting:i}=pe(),n=Y(),l=re({key:o.apiType,settingData:o.setting,dynCfgData:o.dynCfg,settingCfgData:o.settingCfg}),c=re({}),r=async m=>{if(!(!m||!await m.validate((d,g)=>{d?t.debug("æ ¡éªŒæˆåŠŸ"):t.error(a("main.opt.failure"),g)}))){if(T.isEmptyString(l.key)){X.error("å¹³å°keyä¸èƒ½ä¸ºç©ºï¼Œè¯·æŽ’æŸ¥ã€‚å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»ä½œè€…");return}l.settingData[l.key]=l.settingCfgData,await i(l.settingData),s&&s("emitHideDlg"),X.success(a("main.opt.success"))}};return(m,w)=>{const d=Ne,g=Ce,v=Ue,h=Se,b=nt;return _(),$("div",null,[f(b,{class:"add-form",ref_key:"formRef",ref:n,"label-width":"100px",model:l.settingCfgData,rules:c},{default:y(()=>[f(d,{class:"top-tip",title:"æ£€æµ‹åˆ°å½“å‰ä¸ºæµè§ˆå™¨é¡µé¢æˆ–è€…å—å¹³å°æŠ€æœ¯é™åˆ¶ï¼Œæ— æ³•èŽ·å–Cookieï¼Œè¯·æ‰‹åŠ¨ç²˜è´´å¹³å°Cookieã€‚æœ¬æ’ä»¶æ‰¿è¯ºï¼Œæ‰€æœ‰æ•°æ®ä»…åœ¨æ‚¨çš„æœ¬åœ°å­˜å‚¨ï¼Œæˆ‘ä»¬ä¸ä¼šä¸Šä¼ æˆ–è€…åˆ†äº«ä½ çš„ä»»ä½•æ•°æ®ï¼Œè¯·æ”¾å¿ƒä½¿ç”¨ã€‚å¦‚æœ‰ç–‘é—®è¯·æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ã€‚",type:"error",closable:!1}),f(g,null,{default:y(()=>[w[2]||(w[2]=V(" ç‰¹åˆ«æç¤ºï¼šå—å¹³å°é™åˆ¶ï¼Œå½“å‰æ— æ³•è‡ªåŠ¨èŽ·å–cookieï¼Œè¯·åœ¨Chromeæµè§ˆå™¨æ‰‹åŠ¨æ‰“å¼€ Â  ",-1)),C("a",{href:u(Wt).cookieLimitTipsAuth[l.dynCfgData.subPlatformType],target:"_blank"},R(u(Wt).cookieLimitTipsAuth[l.dynCfgData.subPlatformType]),9,Am),w[3]||(w[3]=V(" Â å¹¶ç™»å½•ï¼Œç„¶åŽä½¿ç”¨å¼€å‘è€…å·¥å…·æ‰¾åˆ°cookieï¼Œæœ€åŽå¤åˆ¶ç²˜è´´åˆ°ä¸‹æ–¹æ–‡æœ¬æ¡†ï¼Œå¯å‚è€ƒ ",-1)),C("a",{href:u(Wt).cookieLimitTipsImg[l.dynCfgData.subPlatformType],target:"_blank"},"æ­¤å›¾ç‰‡",8,Im),w[4]||(w[4]=V(" çš„æŒ‡å¼•ã€‚ ",-1))]),_:1}),f(g,{label:"å¹³å°Cookie"},{default:y(()=>[f(v,{modelValue:l.settingCfgData.password,"onUpdate:modelValue":w[0]||(w[0]=P=>l.settingCfgData.password=P),style:{width:"75%","margin-right":"16px"},placeholder:"è¯·ç›´æŽ¥ç²˜è´´å¹³å°cookieï¼Œä¸ºäº†æ‚¨çš„éšç§å®‰å…¨ï¼Œè¯·å‹¿æ³„éœ²cookieç»™ä»»ä½•äºº",type:"textarea",rows:10},null,8,["modelValue"])]),_:1}),f(g,null,{default:y(()=>[f(h,{type:"primary",onClick:w[1]||(w[1]=P=>r(n.value))},{default:y(()=>[V(R(u(a)("setting.blog.save")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])])}}}),xm=ge(Um,[["__scopeId","data-v-79999dc1"]]),Mm={key:0},Dm={key:1},Om={class:"publish-right-setting"},$m={class:"platform-item"},Vm=["innerHTML"],Nm={class:"item-right"},Hm={class:"text"},Lm=["title"],Rm=["onClick"],Gm=["innerHTML"],Bm={class:"actions"},jm=J({__name:"PublishPlatformSettingList",setup(p){const e=L("publish-platform-setting-list"),{t}=Z(),o=kt(),{getSetting:s,updateSetting:a,deleteKey:i}=pe(),{getPrePlatformKeys:n}=uo(),{isInSiyuanOrSiyuanNewWin:l,isInChromeExtension:c}=pt(),r=re({setting:{},dynamicConfigArray:[],newPlatformCount:0,newPlatformTip:"",webAuthLoadingMap:{},cookieSettingFormVisible:!1,dlgCookieTitle:"",dlgKey:"",dlgDynCfg:{},dlgSettingCfg:{}}),m=I=>{o.push({path:`/setting/platform/update/${I.platformKey}`,query:{showBack:"true"}})},w=async I=>{r.dynamicConfigArray=os(r.dynamicConfigArray,I.platformKey,I);const N=ft(r.dynamicConfigArray);r.setting[Me]=N,await a(r.setting)},d=async I=>{const N=I.platformKey;await o.push({path:`/setting/platform/single/${N}`,query:{showBack:"true"}})},g=I=>{vt.confirm(`ç¡®è®¤è¦åˆ é™¤ã€${I.platformName}ã€‘å—ï¼Œæ‰€æœ‰ä¸Žæ­¤å¹³å°ç›¸å…³çš„é…ç½®éƒ½å°†æ°¸ä¹…åˆ é™¤ï¼Ÿ`,"æ¸©é¦¨æç¤º",{type:"error",icon:ze(zs),confirmButtonText:t("main.opt.ok"),cancelButtonText:t("main.opt.cancel")}).then(async()=>{r.dynamicConfigArray=gc(r.dynamicConfigArray,I.platformKey);const N=ft(r.dynamicConfigArray);r.setting[Me]=N,delete r.setting[I.platformKey],i(I.platformKey),await a(r.setting),await ee(),X.success(t("main.opt.success"))}).catch(()=>{})},v=async I=>{I.cookieLimit?await P(I):l()?await h(I):c()?b(I):await P(I)},h=async I=>{vt.confirm(`å°†æ‰“å¼€ [${I.platformName}] ç™»å½•æŽˆæƒé¡µé¢ï¼Œæ‚¨éœ€è¦åœ¨æ–°é¡µé¢å®Œæˆç™»å½•ï¼Œç„¶åŽç‚¹å‡»éªŒè¯æŸ¥çœ‹æŽˆæƒç»“æžœï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ`,"ç½‘é¡µæŽˆæƒ",{type:"warning",icon:ze(Zi),confirmButtonText:t("main.opt.ok"),cancelButtonText:t("main.opt.cancel")}).then(async()=>{if(I.isAuth){I.isAuth=!1,r.dynamicConfigArray=os(r.dynamicConfigArray,I.platformKey,I);const N=ft(r.dynamicConfigArray);r.setting[Me]=N,await a(r.setting),e.info("å·²æŽˆæƒï¼Œå°†æ¸…ç©ºçŠ¶æ€ï¼Œå¹¶é‡æ–°è¿›è¡ŒæŽˆæƒï¼ŒæŽˆæƒå®Œæˆéœ€è¦é‡æ–°éªŒè¯")}else e.info("æœªæŽˆæƒï¼Œå‡†å¤‡å¼€å§‹æŽˆæƒ");ha(I.authUrl)}).catch(()=>{})},b=I=>{vt.confirm(`å°†æ‰“å¼€ [${I.platformName}] ç™»å½•æŽˆæƒé¡µé¢ï¼Œæ‚¨éœ€è¦åœ¨æ–°é¡µé¢å®Œæˆç™»å½•ï¼Œç„¶åŽç‚¹å‡»éªŒè¯æŸ¥çœ‹æŽˆæƒç»“æžœï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ`,"ç½‘é¡µæŽˆæƒ",{type:"warning",icon:ze(Zi),confirmButtonText:t("main.opt.ok"),cancelButtonText:t("main.opt.cancel")}).then(async()=>{if(I.isAuth){I.isAuth=!1,r.dynamicConfigArray=os(r.dynamicConfigArray,I.platformKey,I);const N=ft(r.dynamicConfigArray);r.setting[Me]=N,await a(r.setting),e.info("å·²æŽˆæƒï¼Œå°†æ¸…ç©ºçŠ¶æ€ï¼Œå¹¶é‡æ–°è¿›è¡ŒæŽˆæƒï¼ŒæŽˆæƒå®Œæˆéœ€è¦é‡æ–°éªŒè¯")}else e.info("æœªæŽˆæƒï¼Œå‡†å¤‡å¼€å§‹æŽˆæƒ");window.open(I.authUrl)}).catch(()=>{})},P=async I=>{await k(I)},k=async I=>{if(I.isAuth){I.isAuth=!1,r.dynamicConfigArray=os(r.dynamicConfigArray,I.platformKey,I);const j=ft(r.dynamicConfigArray);r.setting[Me]=j,await a(r.setting),e.info("å·²æŽˆæƒï¼Œå°†æ¸…ç©ºçŠ¶æ€ï¼Œå¹¶é‡æ–°è¿›è¡ŒæŽˆæƒï¼ŒæŽˆæƒå®Œæˆéœ€è¦é‡æ–°éªŒè¯")}else e.info("æœªæŽˆæƒï¼Œå‡†å¤‡å¼€å§‹æŽˆæƒ");const N=te.safeParse(r.setting[I.platformKey],{}),oe=await be.getCfg(I.platformKey,N);r.dlgKey=I.platformKey,r.dlgDynCfg=I,r.dlgSettingCfg=oe,r.dlgCookieTitle=`${I.platformName} Cookie è®¾ç½®`,r.cookieSettingFormVisible=!0},E=async I=>{I.cookieLimit?await D(I):l()?M(I):c()?await B(I):await D(I)},M=I=>{const N=async(j,O)=>{X.info("éªŒè¯ä¸­ï¼Œè¯·å…³æ³¨çŠ¶æ€ï¼Œæ²¡æœ‰æŽˆæƒè¡¨ç¤ºä¸å¯ç”¨ï¼Œå·²æŽˆæƒè¡¨ç¤ºè¯¥å¹³å°å¯æ­£å¸¸ä½¿ç”¨..."),e.debug("get cookie result=>",O),r.webAuthLoadingMap[j.platformKey]=!0;const he=new ue,$e=await be.getCfg(j.platformKey),De=await be.getAdaptor(j.platformKey,$e),qe=A.webApi(he,De);try{const dt=O?await qe.buildCookie(O):"",We=$e;We.password=dt,r.setting[j.platformKey]=We,await a(r.setting),qe.updateCfg(We);const le=await qe.getMetaData();if(e.debug("get meta data=>",le),le.flag){j.isAuth=!0;const Ve=te.safeParse(r.setting[j.platformKey],{});Ve.metadata=le,r.setting[j.platformKey]=Ve,await a(r.setting),e.info("å·²æ›´æ–°æœ€æ–°çš„metadata"),X.success("éªŒè¯æˆåŠŸï¼Œè¯¥å¹³å°å¯æ­£å¸¸ä½¿ç”¨")}else j.isAuth=!1,X.error("éªŒè¯å¤±è´¥ï¼Œè¯¥å¹³å°å°†ä¸å¯ç”¨")}catch(dt){j.isAuth=!1;const We=t("main.opt.failure")+"=>"+dt;e.error(t("main.opt.failure")+"=>",dt);const le=j.logoutUrl??$e.logoutUrl;if(T.isEmptyString(le))X.error(We);else{const Ve=We+"ï¼Œæ˜¯å¦éœ€è¦é€€å‡ºç™»å½•ï¼Ÿæ³¨æ„ï¼šï¼ï¼ï¼æœ¬çª—å£åªè´Ÿè´£é€€å‡ºï¼Œç™»å½•ä¿¡æ¯å¡«å†™æ— æ•ˆï¼ï¼ï¼ï¼Œéœ€è¦ç¨åŽé‡æ–°ç‚¹å‡»æŽˆæƒæ“ä½œç™»å½•ï¼Ÿ";H(Ve,le)}}r.dynamicConfigArray=os(r.dynamicConfigArray,j.platformKey,j);const ye=ft(r.dynamicConfigArray);r.setting[Me]=ye,await a(r.setting),r.webAuthLoadingMap[j.platformKey]=!1},oe=()=>{};ha(I.authUrl,I,N,oe)},H=(I,N)=>{vt.confirm(I,"æ¸©é¦¨æç¤º",{type:"error",icon:ze(Ni),confirmButtonText:t("main.opt.ok"),cancelButtonText:t("main.opt.cancel")}).then(async()=>{ha(N)}).catch(()=>{})},B=async I=>{r.webAuthLoadingMap[I.platformKey]=!0;try{const oe=new ue,j=await be.getCfg(I.platformKey),O=await be.getAdaptor(I.platformKey,j),$e=await A.webApi(oe,O).getMetaData();if($e.flag){I.isAuth=!0;const De=j;De.metadata=$e,r.setting[I.platformKey]=De,await a(r.setting),e.info("å·²æ›´æ–°æœ€æ–°çš„metadata"),X.success("éªŒè¯æˆåŠŸï¼Œè¯¥å¹³å°å¯æ­£å¸¸ä½¿ç”¨")}else I.isAuth=!1,X.error("éªŒè¯å¤±è´¥ï¼Œè¯¥å¹³å°å°†ä¸å¯ç”¨")}catch(oe){I.isAuth=!1,X.error(t("main.opt.failure")+"=>"+oe+"ï¼Œå¦‚æžœæ˜¯ç™»å½•è¿‡æœŸï¼Œè¯·åœ¨å·¦ä¾§ç‚¹å‡»ã€ŒæŽˆæƒã€ä¿®æ”¹æ–°çš„ cookie æˆ–è€…å‚è€ƒ https://siyuan.wiki/s/20230810132040-nn4q7vs FAQ4 è§£å†³"),e.error(t("main.opt.failure")+"=>",oe)}r.dynamicConfigArray=os(r.dynamicConfigArray,I.platformKey,I);const N=ft(r.dynamicConfigArray);r.setting[Me]=N,await a(r.setting),r.webAuthLoadingMap[I.platformKey]=!1},D=async I=>{await B(I)},G=()=>{r.cookieSettingFormVisible=!1},x=async I=>{for(const N of I)Wt.cookieWhiteList.includes(N.subPlatformType.toString())&&(N.cookieLimit=!1),Wt.cookieLimit.includes(N.subPlatformType.toString())&&(N.cookieLimit=!0);return I},ee=async()=>{r.setting=await s(),e.debug("get setting from platform setting",r.setting);const I=te.safeParse(r.setting[Me],{});r.dynamicConfigArray=I?.totalCfg||[],r.dynamicConfigArray=await x(r.dynamicConfigArray),e.debug("dynamic init page=>",r.dynamicConfigArray);const N=[],oe=n(),j=r.dynamicConfigArray.map(O=>O.platformKey);r.newPlatformCount=0;for(const O of oe)j.includes(O)||(r.newPlatformCount++,N.push(O));r.newPlatformCount>0&&(r.newPlatformTip=t("platform.new.platform").replace("[count]",r.newPlatformCount).replace("[platform]",N.join(", ")))};return st(async()=>{await ee()}),(I,N)=>{const oe=Ne,j=qo,O=qs,he=Ki,$e=cs,De=Se,qe=ji,ye=Bi,dt=xm,We=mr;return _(),$("div",null,[r.dynamicConfigArray.length===0?(_(),$("div",Mm,[f(oe,{class:"no-tip",type:"error",title:u(t)("platform.must.select.one")},null,8,["title"])])):(_(),$("div",Dm,[C("div",Om,[f(ye,{gutter:20,class:"platform-list"},{default:y(()=>[(_(!0),$(ke,null,Ie(r.dynamicConfigArray,le=>(_(),S(qe,{key:le.platformKey,span:11,class:"platform-item-box"},{default:y(()=>[C("div",$m,[f(j,{class:"item-left-icon"},{default:y(()=>[C("span",{class:"item-icon",innerHTML:le.platformIcon},null,8,Vm)]),_:2},1024),C("div",Nm,[C("div",Hm,[f(he,{value:le.isAuth?"å·²æŽˆæƒ":le.authMode===u(de).API?"è®¾ç½®æ— æ•ˆ":"æ²¡æœ‰æŽˆæƒ",class:"badge-item",type:le.isAuth?"success":"danger"},{default:y(()=>[C("span",{title:le.platformName},R(u(Nt).longPlatformName(le.platformName,11)),9,Lm),C("span",{class:"name-edit",onClick:Ve=>m(le)},[f(j,null,{default:y(()=>[C("span",{innerHTML:u(we).iconIFEdit},null,8,Gm)]),_:1})],8,Rm),f(O,{type:le.authMode===u(de).API?"primary":"info",class:"auth-mode-text"},{default:y(()=>[V(R(le.authMode===u(de).API?"APIæŽˆæƒ":"ç½‘é¡µæŽˆæƒ"),1)]),_:2},1032,["type"])]),_:2},1032,["value","type"])]),C("div",Bm,[f($e,{modelValue:le.isEnabled,"onUpdate:modelValue":Ve=>le.isEnabled=Ve,"inline-prompt":"",size:"small",class:"action-btn action-switch","active-text":"å·²å¯ç”¨","inactive-text":"æœªå¯ç”¨",onChange:Ve=>w(le)},null,8,["modelValue","onUpdate:modelValue","onChange"]),le.isEnabled&&le.authMode===u(de).API?(_(),S(O,{key:0,class:"action-btn action-setting",onClick:Ve=>d(le)},{default:y(()=>[f(j,null,{default:y(()=>[f(u(ta))]),_:1}),N[5]||(N[5]=V(" è®¾ç½® ",-1))]),_:1},8,["onClick"])):F("",!0),le.isEnabled&&le.authMode===u(de).WEBSITE&&le.isAuth?(_(),S(O,{key:1,class:"action-btn action-setting",onClick:Ve=>d(le)},{default:y(()=>[f(j,null,{default:y(()=>[f(u(ta))]),_:1}),N[6]||(N[6]=V(" è®¾ç½® ",-1))]),_:1},8,["onClick"])):F("",!0),le.isEnabled&&le.authMode===u(de).WEBSITE?(_(),S(O,{key:2,class:"action-btn action-web-setting",onClick:Ve=>v(le)},{default:y(()=>[f(j,null,{default:y(()=>[f(u(ta))]),_:1}),V(" "+R(le.isAuth?"å†æ¬¡æŽˆæƒ":"æŽˆæƒ"),1)]),_:2},1032,["onClick"])):F("",!0),le.isEnabled&&le.authMode===u(de).WEBSITE&&!le.isAuth?(_(),S(De,{key:3,class:"action-btn action-web-auth",onClick:Ve=>E(le),size:"small",loading:r.webAuthLoadingMap[le.platformKey]===!0},{default:y(()=>[f(j,null,{default:y(()=>[f(u(Rl))]),_:1}),N[7]||(N[7]=V(" éªŒè¯ ",-1))]),_:1},8,["onClick","loading"])):F("",!0),le.isEnabled?F("",!0):(_(),S(O,{key:4,class:"action-btn action-del",onClick:Ve=>g(le)},{default:y(()=>[f(j,null,{default:y(()=>[f(u(zs))]),_:1}),N[8]||(N[8]=V(" åˆ é™¤ ",-1))]),_:1},8,["onClick"]))])])])]),_:2},1024))),128))]),_:1}),r.newPlatformCount>0?(_(),S(ye,{key:0},{default:y(()=>[f(oe,{type:"error",title:r.newPlatformTip},null,8,["title"])]),_:1})):F("",!0)]),f(We,{modelValue:r.cookieSettingFormVisible,"onUpdate:modelValue":N[4]||(N[4]=le=>r.cookieSettingFormVisible=le),title:r.dlgCookieTitle},{default:y(()=>[f(dt,{"api-type":r.dlgKey,"onUpdate:apiType":N[0]||(N[0]=le=>r.dlgKey=le),setting:r.setting,"onUpdate:setting":N[1]||(N[1]=le=>r.setting=le),"setting-cfg":r.dlgSettingCfg,"onUpdate:settingCfg":N[2]||(N[2]=le=>r.dlgSettingCfg=le),"dyn-cfg":r.dlgDynCfg,"onUpdate:dynCfg":N[3]||(N[3]=le=>r.dlgDynCfg=le),onEmitHideDlg:G},null,8,["api-type","setting","setting-cfg","dyn-cfg"])]),_:1},8,["modelValue","title"])]))])}}}),Km=ge(jm,[["__scopeId","data-v-d389d720"]]),zm={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Jm(p,e){return _(),$("svg",zm,[...e[0]||(e[0]=[C("path",{fill:"currentColor",d:"M9 19v-2h12v2zm0-6v-2h12v2zm0-6V5h12v2zM5 20q-.825 0-1.412-.587T3 18t.588-1.412T5 16t1.413.588T7 18t-.587 1.413T5 20m0-6q-.825 0-1.412-.587T3 12t.588-1.412T5 10t1.413.588T7 12t-.587 1.413T5 14m0-6q-.825 0-1.412-.587T3 6t.588-1.412T5 4t1.413.588T7 6t-.587 1.413T5 8"},null,-1)])])}const Wm=ze({name:"material-symbols-format-list-bulleted",render:Jm}),Fm={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function qm(p,e){return _(),$("svg",Fm,[...e[0]||(e[0]=[C("path",{fill:"currentColor",d:"m14 12l-4-4v3H2v2h8v3m10 2V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3h2V6h12v12H6v-3H4v3a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2"},null,-1)])])}const Ym=ze({name:"mdi-import",render:qm}),Xm={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Qm(p,e){return _(),$("svg",Xm,[...e[0]||(e[0]=[C("path",{fill:"currentColor",d:"M20.506 10.896v7.989q0 .69-.463 1.153t-1.152.462H5.12q-.69 0-1.153-.462t-.462-1.153v-8.027q-.633-.467-.926-1.225t-.013-1.617l.973-3.208q.2-.612.645-.96Q4.63 3.5 5.286 3.5h13.4q.655 0 1.098.326q.442.326.648.943l1.011 3.246q.281.86-.012 1.631t-.926 1.25m-6.3-.396q.963 0 1.438-.54q.475-.539.4-1.114L15.38 4.5h-2.873v4.2q0 .737.504 1.268q.504.532 1.196.532m-4.5 0q.806 0 1.303-.532t.497-1.268V4.5H8.633l-.666 4.423q-.061.466.407 1.021t1.332.556m-4.45 0q.661 0 1.124-.45t.576-1.123L7.583 4.5H5.287q-.327 0-.52.144t-.288.433l-.923 3.158q-.246.788.21 1.527t1.49.738m13.5 0q.898 0 1.434-.7q.537-.7.266-1.565l-.973-3.196q-.096-.289-.289-.414t-.519-.125h-2.246l.627 4.427q.113.673.576 1.123t1.124.45"},null,-1)])])}const Zm=ze({name:"material-symbols-light-storefront",render:Qm}),eh={class:"right-setting-tips"},th={class:"el-alert el-alert--warning is-light",role:"alert"},sh={class:"el-alert__content"},oh={class:"el-alert__title"},ah=J({__name:"PublishSettingTips",setup(p){const{t:e}=Z();return(t,o)=>(_(),$("div",eh,[C("div",th,[C("div",sh,[C("div",oh,[C("div",null,R(u(e)("setting.platform.right.tips0")),1),C("div",null,R(u(e)("setting.platform.right.tips1")),1),C("div",null,R(u(e)("setting.platform.right.tips2")),1),C("div",null,R(u(e)("setting.platform.right.tips3")),1),C("div",null,R(u(e)("setting.platform.right.tips4")),1)])])]),o[0]||(o[0]=Gl('<h2 data-v-e9c5e996>FAQ:</h2><div class="setting-help" data-v-e9c5e996> ä¸ä¼šé…ç½®ï¼Œæˆ–è€…é…ç½®é‡åˆ°é—®é¢˜ï¼Ÿ è¯·åŠ QQç¾¤ <span style="font-weight:bold;color:red;" data-v-e9c5e996><a href="https://qm.qq.com/cgi-bin/qm/qr?k=fYrA79XDvtr4JuEgez-dmj1h3tOef8pg&amp;jump_from=webapi&amp;authKey=DC+XcjkoTH762jxvkSgpt7V97QFETnaLVTZIWhd8PdZoX+MNSr+LsprWFYYELXu8" target="_blank" data-v-e9c5e996> 722632752 </a></span> è®¨è®ºã€‚ </div><div class="setting-help" data-v-e9c5e996> éœ€è¦è¯¦ç»†çš„é…ç½®æŒ‡å¯¼ï¼Ÿè¯·æŸ¥çœ‹åœ¨çº¿æ–‡æ¡£ <a href="https://siyuan.wiki/s/20230810132040-nn4q7vs" target="_blank" data-v-e9c5e996>å¹³å°é…ç½®æŒ‡å—</a></div><div class="tips-form" data-v-e9c5e996> æˆ‘æƒ³è¦çš„å¹³å°è¿™é‡Œæ²¡æœ‰ï¼Ÿ<a href="https://terwergreen.feishu.cn/share/base/form/shrcnGRdThUiqnhBg15xgclMM0c" target="_blank" data-v-e9c5e996> ç‚¹å‡»è¿™é‡Œæäº¤å‘å¸ƒå·¥å…·å¹³å°é€‚é…è·Ÿè¸ªè¡¨ </a></div><div class="tips-form" data-v-e9c5e996> æˆ‘è¿˜æœ‰å…¶ä»–é—®é¢˜æˆ–è€…æƒ³ç§ä¸‹æ²Ÿé€šä½œè€…ï¼Ÿ<a href="mailto:youweics@163.com" data-v-e9c5e996> ç›´æŽ¥å‘é‚®ä»¶åˆ°ï¼šyouweics@163.com </a></div>',5))]))}}),ih=ge(ah,[["__scopeId","data-v-e9c5e996"]]),nh={class:"publish-setting-body"},lh={class:"el-icon"},rh={class:"el-icon"},ch={class:"el-icon"},ph=J({__name:"PublishSetting",setup(p){const{t:e}=Z(),t=Y("publish");return(o,s)=>{const a=Km,i=Mn,n=Em,l=vm,c=xn,r=He;return _(),S(r,{title:u(e)("service.tab.publish.setting")},{default:y(()=>[C("div",nh,[(_(),S(c,{modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=m=>t.value=m),class:"setting-tabs",key:t.value},{default:y(()=>[f(i,{name:"publish"},{label:y(()=>[C("span",null,[C("i",lh,[f(u(Wm))]),V(" "+R(u(e)("service.tab.publish.setting")),1)])]),default:y(()=>[f(a)]),_:1}),f(i,{name:"import"},{label:y(()=>[C("span",null,[C("i",rh,[f(u(Ym))]),V(" "+R(u(e)("setting.platform.import")),1)])]),default:y(()=>[f(n)]),_:1}),f(i,{name:"store"},{label:y(()=>[C("span",null,[C("i",ch,[f(u(Zm))]),V(" "+R(u(e)("setting.platform.store")),1)])]),default:y(()=>[f(l)]),_:1})]),_:1},8,["modelValue"])),f(ih)])]),_:1},8,["title"])}}}),_l=ge(ph,[["__scopeId","data-v-b20420d5"]]),gh=J({__name:"SetIndex",setup(p){return(e,t)=>(_(),S(_l))}}),dh=J({__name:"Setting",setup(p){return(e,t)=>(_(),S(gh))}}),uh={key:0},mh=["innerHTML"],hh={key:0},fh=J({__name:"PlatformAddForm",setup(p){const e=L("platform-add-form"),{t}=Z(),o=kt(),s=tt(),{query:a}=tt(),{getPlatformType:i,getPrePlatform:n}=uo(),{getSetting:l,updateSetting:c,checkKeyExists:r}=pe(),m=re(s.params),w=m.type,d=Y(),g=re({setting:{},ptype:w,subtype:void 0,subtypeOptions:[],isPre:!1,dynCfg:new Rs(w,Gs(w,void 0),"None-1"),dynamicConfigArray:[]}),v=re({platformName:[{required:!0,message:()=>t("form.validate.name.required")}],authMode:[{required:!0,message:()=>t("form.validate.name.required")}],platformIcon:[{required:!0,message:()=>t("form.validate.name.required")}]}),h=M=>{if(!g.subtype)return X.error("è¯·é€‰æ‹©å­å¹³å°ç±»åž‹"),!1;const H=g.dynCfg.platformKey;return r(H)?(X.error(t("dynamic.platform.opt.key.exist")),!1):!0},b=async M=>{if(!M||!h()||!await M.validate((G,x)=>{G?e.debug("æ ¡éªŒæˆåŠŸ"):e.error(t("main.opt.failure"),x)}))return;const B=g.dynCfg;g.dynamicConfigArray.push(B);const D=ft(g.dynamicConfigArray);g.setting[Me]=D,g.setting[B.platformKey]={},await c(g.setting),X.success(t("main.opt.success")),await o.push({path:"/setting/publish"})},P=async()=>{await k(g.ptype,g.subtype)},k=async(M,H)=>{const B=a.key;g.setting=await l();const D=te.safeParse(g.setting[Me],{});if(g.dynamicConfigArray=D?.totalCfg||[],!g.ptype){X.error("å¹³å°ç±»åž‹ä¸èƒ½ä¸ºç©º");return}const G=i(g.ptype);let x=T.isEmptyString(G.img)?we.iconEPPlus:`<img src="${G.img}" alt="platform-icon" class="img-platform-icon" style="width: 32px;height: 32px;"/>`;const ee=!T.isEmptyString(B),I=!T.isEmptyString(H);if(ee&&I)if(g.subtype=H,Vn(g.dynamicConfigArray,B)){const oe=n(B);x=oe.platformIcon;const j=Gs(M,H),O=new Rs(M,j,j,H,x);O.authMode=oe.authMode,O.authUrl=oe.authUrl??"",O.domain=oe.domain??"",g.dynCfg=O,e.debug("pkey already exists, initialize the new one")}else{const oe=n(B);g.dynCfg=oe,g.isPre=!0,e.debug("Initialized via pkey")}else if(I){g.subtype=H;const N=Gs(M,H);g.dynCfg=new Rs(M,N,N,H,x),e.debug("Initialized by subtype")}else{g.subtypeOptions=pc(M);const N=Gs(M,H);g.dynCfg=new Rs(M,N,N,H,x),e.debug("Initialize by selecting a subtype")}};return(async()=>{const M=m.type,H=a.sub;await k(M,H)})(),(M,H)=>{const B=Ne,D=it,G=at,x=Ce,ee=Ue,I=qo,N=cs,oe=Se,j=nt;return _(),S(He,{title:"æ–°å¢žè‡ªå®šä¹‰å¹³å° - "+u(w)},{default:y(()=>[f(j,{class:"add-form",ref_key:"formRef",ref:d,"label-width":"100px",model:g.dynCfg,rules:v},{default:y(()=>[g.isPre?(_(),S(B,{key:0,class:"top-tip",title:"å½“å‰ä¸ºåˆæ¬¡æ·»åŠ ï¼Œå°†å¯¼å…¥è¯¥å¹³å°çš„é¢„å®šä¹‰æ¨¡æ¿ï¼›å¦‚æžœå†æ¬¡æ·»åŠ ï¼Œå°†ç”Ÿæˆå¯ä¿®æ”¹çš„æ–°å®žä¾‹",type:"error",closable:!1})):F("",!0),f(B,{class:"top-tip",title:"å½“å‰å¹³å°ç±»åž‹ä¸º=>"+u(w),type:"info",closable:!1},null,8,["title"]),g.subtypeOptions.length>0?(_(),S(x,{key:1,label:"å­å¹³å°ç±»åž‹"},{default:y(()=>[f(G,{modelValue:g.subtype,"onUpdate:modelValue":H[0]||(H[0]=O=>g.subtype=O),class:"m-2",placeholder:"è¯·é€‰æ‹©",onChange:P},{default:y(()=>[(_(!0),$(ke,null,Ie(g.subtypeOptions,O=>(_(),S(D,{key:O,label:O,value:O},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):(_(),S(B,{key:2,class:"top-tip",title:"å­å¹³å°ç±»åž‹ä¸º=>"+g.subtype,type:"info",closable:!1},null,8,["title"])),f(x,{label:u(t)("dynamic.platform.key"),prop:"platformKey"},{default:y(()=>[V(R(g.dynCfg.platformKey),1)]),_:1},8,["label"]),f(x,{label:"å¹³å°åç§°",prop:"platformName"},{default:y(()=>[g.isPre?(_(),$("span",uh,R(g.dynCfg.platformName),1)):(_(),S(ee,{key:1,modelValue:g.dynCfg.platformName,"onUpdate:modelValue":H[1]||(H[1]=O=>g.dynCfg.platformName=O)},null,8,["modelValue"]))]),_:1}),f(x,{label:"å¹³å°å›¾æ ‡",prop:"platformIcon",class:"cfg-icon"},{default:y(()=>[g.isPre?F("",!0):(_(),S(ee,{key:0,modelValue:g.dynCfg.platformIcon,"onUpdate:modelValue":H[2]||(H[2]=O=>g.dynCfg.platformIcon=O),style:{width:"75%","margin-right":"16px"},placeholder:"ç›´æŽ¥ç²˜è´´svgä»£ç æˆ–è€…imgæ ‡ç­¾ä»£ç ",type:"textarea",rows:10},null,8,["modelValue"])),f(I,null,{default:y(()=>[C("span",{innerHTML:g.dynCfg.platformIcon},null,8,mh)]),_:1})]),_:1}),f(x,{label:"æŽˆæƒæ–¹å¼",prop:"authMode"},{default:y(()=>[g.isPre?(_(),$("span",hh,R(g.dynCfg.authMode===u(de).API?"APIæŽˆæƒ":"ç½‘é¡µæŽˆæƒ"),1)):(_(),S(G,{key:1,modelValue:g.dynCfg.authMode,"onUpdate:modelValue":H[3]||(H[3]=O=>g.dynCfg.authMode=O),placeholder:"è¯·é€‰æ‹©",disabled:!0},{default:y(()=>[f(D,{value:u(de).API,label:"APIæŽˆæƒ"},null,8,["value"]),f(D,{value:u(de).WEBSITE,label:"ç½‘é¡µæŽˆæƒ"},null,8,["value"])]),_:1},8,["modelValue"]))]),_:1}),g.dynCfg.authMode===u(de).WEBSITE?(_(),S(x,{key:3,label:"ç™»å½•åœ°å€",prop:"authUrl",required:""},{default:y(()=>[f(ee,{modelValue:g.dynCfg.authUrl,"onUpdate:modelValue":H[4]||(H[4]=O=>g.dynCfg.authUrl=O),placeholder:"è¯·è¾“å…¥è¯¥å¹³å°çš„ç½‘é¡µç™»å½•åœ°å€"},null,8,["modelValue"])]),_:1})):F("",!0),g.dynCfg.authMode===u(de).WEBSITE?(_(),S(x,{key:4,label:"ä¸»åŸŸå",prop:"domain",required:""},{default:y(()=>[f(ee,{modelValue:g.dynCfg.domain,"onUpdate:modelValue":H[5]||(H[5]=O=>g.dynCfg.domain=O),placeholder:"è¯·è¾“å…¥è¯¥å¹³å°çš„ä¸»åŸŸå"},null,8,["modelValue"])]),_:1})):F("",!0),f(x,{label:"æ˜¯å¦å¯ç”¨"},{default:y(()=>[f(N,{modelValue:g.dynCfg.isEnabled,"onUpdate:modelValue":H[6]||(H[6]=O=>g.dynCfg.isEnabled=O)},null,8,["modelValue"])]),_:1}),f(x,null,{default:y(()=>[f(oe,{type:"primary",onClick:H[7]||(H[7]=O=>b(d.value))},{default:y(()=>[V(R(u(t)("dynamic.platform.opt.add")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])}}}),yh=ge(fh,[["__scopeId","data-v-7e780b54"]]),bh=["innerHTML"],wh=J({__name:"PlatformUpdateForm",setup(p){const e=L("platform-update-form"),{t}=Z(),o=kt(),s=tt(),{getSetting:a,updateSetting:i}=pe(),l=re(s.params).key,c=Y(),r=re({key:l,dynCfg:new Rs(me.Common,Gs(me.Common,void 0),"None-1"),setting:{},dynamicConfigArray:[]}),m=re({platformName:[{required:!0,message:()=>t("form.validate.name.required")}],authMode:[{required:!0,message:()=>t("form.validate.name.required")}],platformIcon:[{required:!0,message:()=>t("form.validate.name.required")}]}),w=async v=>{if(!v||!await v.validate((k,E)=>{k?e.debug("æ ¡éªŒæˆåŠŸ"):e.error(t("main.opt.failure"),E)}))return;const b=r.dynCfg;os(r.dynamicConfigArray,l,b);const P=ft(r.dynamicConfigArray);r.setting[Me]=P,await i(r.setting),X.success(t("main.opt.success")),await o.push({path:"/setting/publish"})},d=async v=>{r.setting=await a();const h=te.safeParse(r.setting[Me],{});r.dynamicConfigArray=h?.totalCfg||[],r.dynCfg=Zs(r.dynamicConfigArray,v)};return(async()=>{await d(r.key)})(),(v,h)=>{const b=Ne,P=Ce,k=Ue,E=qo,M=it,H=at,B=cs,D=Se,G=nt;return _(),S(He,{title:"ä¿®æ”¹å¹³å°å®šä¹‰ - "+u(l)},{default:y(()=>[f(G,{class:"update-form",ref_key:"formRef",ref:c,"label-width":"100px",model:r.dynCfg,rules:m},{default:y(()=>[f(b,{class:"top-tip",title:"å½“å‰å¹³å°ç±»åž‹ä¸º=>"+r.dynCfg.platformKey,type:"info",closable:!1},null,8,["title"]),f(b,{class:"top-tip",title:"å­å¹³å°ç±»åž‹ä¸º=>"+r.dynCfg.subPlatformType,type:"info",closable:!1},null,8,["title"]),f(b,{class:"top-tip",title:"æ³¨æ„ï¼šä¸ºäº†ä¿ç•™é…ç½®ä¿¡æ¯çš„å®Œæ•´æ€§ï¼Œç¼–è¾‘å¹³å°æ—¶æŽˆæƒæ–¹å¼ä¸å¯ä¿®æ”¹ï¼Œå¦‚éœ€åˆ‡æ¢ï¼Œè¯·æ–°å»ºæ–°çš„å®žä¾‹",type:"warning",closable:!1}),f(P,{label:u(t)("dynamic.platform.key"),prop:"platformKey"},{default:y(()=>[V(R(r.dynCfg.platformKey),1)]),_:1},8,["label"]),f(P,{label:"å¹³å°åç§°",prop:"platformName"},{default:y(()=>[f(k,{modelValue:r.dynCfg.platformName,"onUpdate:modelValue":h[0]||(h[0]=x=>r.dynCfg.platformName=x)},null,8,["modelValue"])]),_:1}),f(P,{label:"å¹³å°å›¾æ ‡",prop:"platformIcon",class:"cfg-icon"},{default:y(()=>[f(k,{modelValue:r.dynCfg.platformIcon,"onUpdate:modelValue":h[1]||(h[1]=x=>r.dynCfg.platformIcon=x),style:{width:"75%","margin-right":"16px"},placeholder:"ç›´æŽ¥ç²˜è´´svgä»£ç æˆ–è€…imgæ ‡ç­¾ä»£ç ",type:"textarea",rows:10},null,8,["modelValue"]),f(E,null,{default:y(()=>[C("span",{innerHTML:r.dynCfg.platformIcon},null,8,bh)]),_:1})]),_:1}),f(P,{label:"æŽˆæƒæ–¹å¼",prop:"authMode"},{default:y(()=>[f(H,{modelValue:r.dynCfg.authMode,"onUpdate:modelValue":h[2]||(h[2]=x=>r.dynCfg.authMode=x),placeholder:"è¯·é€‰æ‹©",disabled:!0},{default:y(()=>[f(M,{value:u(de).API,label:"APIæŽˆæƒ"},null,8,["value"]),f(M,{value:u(de).WEBSITE,label:"ç½‘é¡µæŽˆæƒ"},null,8,["value"])]),_:1},8,["modelValue"])]),_:1}),r.dynCfg.authMode===u(de).WEBSITE?(_(),S(P,{key:0,label:"ç™»å½•åœ°å€",prop:"authUrl",required:""},{default:y(()=>[f(k,{modelValue:r.dynCfg.authUrl,"onUpdate:modelValue":h[3]||(h[3]=x=>r.dynCfg.authUrl=x),placeholder:"è¯·è¾“å…¥è¯¥å¹³å°çš„ç½‘é¡µç™»å½•åœ°å€"},null,8,["modelValue"])]),_:1})):F("",!0),r.dynCfg.authMode===u(de).WEBSITE?(_(),S(P,{key:1,label:"ä¸»åŸŸå",prop:"domain",required:""},{default:y(()=>[f(k,{modelValue:r.dynCfg.domain,"onUpdate:modelValue":h[4]||(h[4]=x=>r.dynCfg.domain=x),placeholder:"è¯·è¾“å…¥è¯¥å¹³å°çš„ä¸»åŸŸå"},null,8,["modelValue"])]),_:1})):F("",!0),f(P,{label:"æ˜¯å¦å¯ç”¨"},{default:y(()=>[f(B,{modelValue:r.dynCfg.isEnabled,"onUpdate:modelValue":h[5]||(h[5]=x=>r.dynCfg.isEnabled=x)},null,8,["modelValue"])]),_:1}),f(P,null,{default:y(()=>[f(D,{type:"primary",onClick:h[6]||(h[6]=x=>w(c.value))},{default:y(()=>[V(R(u(t)("dynamic.platform.opt.add")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])}}}),_h=ge(wh,[["__scopeId","data-v-a68cd7c8"]]),vh=["href"],Ph=["href"],Th={target:"_blank",href:"https://gitee.com/terwer/siyuan-plugin-publisher#%E6%8D%90%E8%B5%A0"},kh=J({__name:"CommonBlogSetting",props:{apiType:{type:String,default:""},cfg:{type:Object,default:null}},emits:["onHomeChange","onApiUrlChange","onUsernameChange"],setup(p,{emit:e}){const t=L("commonblog-setting"),o=new ue,{t:s}=Z(),{getSetting:a,updateSetting:i}=pe(),{getPicbedServiceType:n,checkPicgoInstalled:l}=Xo(),{isInSiyuanOrSiyuanNewWin:c}=pt(),r=p,m=e,w=G=>{m&&m("onHomeChange",G,h.cfg)},d=G=>{m&&m("onUsernameChange",G,h.cfg)},g=Y(!1),v=Y(null),h=re({cfg:{},ksKeyword:"",isCateLoading:!1,kwSpaces:[],settingTips:"",dynCfg:{},setting:{},dynamicConfigArray:[],isInit:!1,proxy:{useMiddleware:!1,useCorsAnywhere:!1,useSiyuanProxy:!1}});Ke(()=>h.cfg.blogid,(G,x)=>{G!==x&&(b(G),t.debug("Watch logic triggered:",G))},{immediate:!0});const b=G=>{const x=s("setting.blog.platform.support.common")+r.apiType+" ";let ee=h.cfg.blogName;if(r.cfg?.knowledgeSpaceEnabled){const I=h.kwSpaces.find(N=>N.value===G);console.log(I),ee=I?I.label:h.cfg.blogid??h.cfg.blogName,h.cfg.blogName=ee}h.settingTips=x+ee},P=async()=>{g.value=!0;let G;const x=await be.getAdaptor(r.apiType,h.cfg),ee=A.blogApi(o,x);try{await ee.checkAuth();try{await k(ee),h.cfg.apiStatus=!0}catch(I){h.cfg.apiStatus=!1,G=I.toString()}t.info("======æ ¡éªŒæ­£å¸¸ç»“æŸ======")}catch(I){if(typeof I=="boolean"){if(I===!0)try{await k(ee),h.cfg.apiStatus=!0}catch(N){h.cfg.apiStatus=!1,G=N.toString()}else h.cfg.apiStatus=!1,G="æ ¡éªŒå¤±è´¥ï¼Œè¯·æ£€æŸ¥å¹³å°é…ç½®";t.info("======æ ¡éªŒä¿®æ­£ç»“æŸ======")}else h.cfg.apiStatus=!1,G=I.toString(),t.error(s("main.opt.failure")+"=>",I)}if(h.cfg.apiStatus)X.success(s("main.opt.success"));else{const I=s("setting.blog.vali.error")+`=>${G.toString()}`;t.error(I),X.error(I)}h.dynCfg&&(h.dynCfg.isAuth=h.cfg.apiStatus),await E(!0),g.value=!1,t.debug("Commonblogé€šç”¨SettingéªŒè¯å®Œæ¯•")},k=async G=>{const x=await G.getUsersBlogs(h.ksKeyword);if(x&&x.length>0){h.kwSpaces.length==0&&x.forEach(I=>{const N={label:I.blogName,value:I.blogid};h.kwSpaces.push(N)});const ee=x[0];h.cfg.blogid=ee.blogid,h.cfg.blogName=ee.blogName;for(const I in ee.metadataMap)h.cfg[I]=ee.metadataMap[I]}},E=async G=>{t.debug("prepare to store cfg=>",{cfg:ne(h.cfg)}),t.debug("Commonblogé€šç”¨Settingä¿å­˜é…ç½®"),h.setting[r.apiType]=h.cfg;const x=ft(h.dynamicConfigArray);h.setting[Me]=x,await i(h.setting),G!==!0&&X.success(s("main.opt.success"))},M=async G=>{try{const x=await be.getAdaptor(r.apiType,h.cfg);t.debug("commonblogApiAdaptor=>",x);const I=await A.blogApi(o,x).getUsersBlogs(G);I&&I.length>0&&(I.forEach(N=>{const oe={label:N.blogName,value:N.blogid};h.kwSpaces.push(oe)}),b(h.cfg.blogid),t.debug("å·²å¼ºåˆ¶åˆ·æ–°"))}catch(x){t.error(s("main.opt.failure"),x)}},H=async()=>{try{h.isCateLoading=!0,t.debug("reload categories for single category woth search"),h.kwSpaces=[],h.cfg.blogid=void 0,r.cfg?.knowledgeSpaceEnabled&&await M(h.ksKeyword),v.value.visible=!0}catch(G){t.error("çŸ¥è¯†ç©ºé—´åŠ è½½å¤±è´¥",G)}finally{h.isCateLoading=!1,h.isInit=!0}},B=async()=>{await l()||(X.error(s("publisher.picbed.picgo.not.install")),h.cfg.picbedService=Je.None)},D=async()=>{h.setting=await a();const G=te.safeParse(h.setting[Me],{});h.dynamicConfigArray=G?.totalCfg||[],h.dynCfg=Zs(h.dynamicConfigArray,r.apiType),t.debug("Commonblogé€šç”¨Settingé…ç½®åˆå§‹åŒ–");let x=r.cfg;if(se.isEmptyObject(x)){const ee=h.setting[r.apiType];x=te.safeParse(ee,{})}x?(t.debug("get setting conf=>",x),h.cfg=x,r.cfg?.knowledgeSpaceEnabled&&await M(h.ksKeyword)):X.error("Read init config error, your config may not work")};return st(async()=>{await D();const{isUseSiyuanProxy:G}=Yo(h.cfg.middlewareUrl,h.cfg.corsAnywhereUrl);h.proxy.useSiyuanProxy=G,h.proxy.useCorsAnywhere=!T.isEmptyString(h.cfg.corsAnywhereUrl),h.proxy.useMiddleware=!T.isEmptyString(h.cfg.middlewareUrl),h.cfg.picbedService=await n(h.cfg),h.isInit=!0}),(G,x)=>{const ee=Ht,I=Ne,N=Ue,oe=Ce,j=Xs,O=Ys,he=it,$e=at,De=Se,qe=nt;return h.isInit?(_(),S(qe,{key:1,"label-width":"120px"},{default:y(()=>[f(I,{closable:!1,title:h.settingTips,class:"top-tip",type:"info"},null,8,["title"]),r.cfg?.knowledgeSpaceEnabled?(_(),S(I,{key:0,closable:!1,title:u(s)("knowledgeSpaceEnabled.Tips").replace(/\[knowledge-space-title\]/g,r.cfg?.knowledgeSpaceTitle),class:"top-tip",type:"info"},null,8,["title"])):F("",!0),Pt(G.$slots,"header",{cfg:h.cfg},void 0,!0),r.cfg?.homeEnabled!=!1?(_(),S(oe,{key:1,label:u(s)("setting.common.home")},{default:y(()=>[f(N,{modelValue:h.cfg.home,"onUpdate:modelValue":x[0]||(x[0]=ye=>h.cfg.home=ye),placeholder:r.cfg?.placeholder.homePlaceholder,onInput:w},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):F("",!0),r.cfg?.apiUrlEnabled!=!1?(_(),S(oe,{key:2,label:u(s)("setting.common.apiurl")},{default:y(()=>[f(N,{modelValue:h.cfg.apiUrl,"onUpdate:modelValue":x[1]||(x[1]=ye=>h.cfg.apiUrl=ye),placeholder:r.cfg?.placeholder.apiUrlPlaceholder},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):F("",!0),r.cfg.usernameEnabled?(_(),S(oe,{key:3,label:h.cfg.usernameLabel??u(s)("setting.common.username")},{default:y(()=>[f(N,{modelValue:h.cfg.username,"onUpdate:modelValue":x[2]||(x[2]=ye=>h.cfg.username=ye),placeholder:r.cfg?.placeholder.usernamePlaceholder,onInput:d},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):F("",!0),h.cfg.passwordType===u(xe).PasswordType_Password?(_(),S(oe,{key:4,label:h.cfg.passwordLabel??u(s)("setting.common.password"),required:""},{default:y(()=>[f(N,{type:"password",modelValue:h.cfg.password,"onUpdate:modelValue":x[3]||(x[3]=ye=>h.cfg.password=ye),"show-password":"",placeholder:r.cfg.placeholder.passwordPlaceholder},null,8,["modelValue","placeholder"]),h.cfg.showTokenTip?(_(),$("a",{key:0,href:h.cfg.tokenSettingUrl,target:"_blank"},R(u(s)("setting.common.username.gen"))+"ï¼š"+R(h.cfg.tokenSettingUrl),9,vh)):F("",!0)]),_:1},8,["label"])):h.cfg.passwordType===u(xe).PasswordType_Token?(_(),S(oe,{key:5,label:h.cfg.passwordLabel??u(s)("setting.common.token"),required:""},{default:y(()=>[f(N,{type:"password",modelValue:h.cfg.password,"onUpdate:modelValue":x[4]||(x[4]=ye=>h.cfg.password=ye),"show-password":"",placeholder:r.cfg.placeholder.passwordPlaceholder},null,8,["modelValue","placeholder"]),h.cfg.showTokenTip?(_(),$("a",{key:0,href:h.cfg.tokenSettingUrl,target:"_blank"},R(u(s)("setting.common.token.gen"))+"ï¼š"+R(h.cfg.tokenSettingUrl),9,Ph)):F("",!0)]),_:1},8,["label"])):h.cfg.passwordType===u(xe).PasswordType_Cookie?(_(),S(oe,{key:6,label:h.cfg.passwordLabel??"å¹³å°Cookie",required:""},{default:y(()=>[f(N,{modelValue:h.cfg.password,"onUpdate:modelValue":x[5]||(x[5]=ye=>h.cfg.password=ye),style:{width:"75%","margin-right":"16px"},placeholder:"è¯·ç›´æŽ¥ç²˜è´´å¹³å°cookieï¼Œä¸ºäº†æ‚¨çš„éšç§å®‰å…¨ï¼Œè¯·å‹¿æ³„éœ²cookieç»™ä»»ä½•äºº",type:"textarea",rows:10,disabled:!0},null,8,["modelValue"]),f(I,{closable:!1,title:"æ­¤å¤„æ•°æ®ä¸ºç½‘é¡µæŽˆæƒè‡ªåŠ¨ç”Ÿæˆï¼Œä»…åœ¨æ‚¨æœ¬åœ°æµè§ˆå™¨å­˜å‚¨ï¼Œä¸æ”¯æŒä¿®æ”¹ã€‚ä¸ºäº†æ‚¨çš„å®‰å…¨ï¼Œè¯·å‹¿æ³„éœ²æ­¤å¤„ä¿¡æ¯ç»™ä»»ä½•äººã€‚",class:"inline-tip",type:"error"})]),_:1},8,["label"])):F("",!0),Pt(G.$slots,"main",{cfg:h.cfg},void 0,!0),r.cfg?.previewUrlEnabled!=!1?(_(),S(oe,{key:7,label:u(s)("setting.blog.previewUrl")},{default:y(()=>[f(N,{modelValue:h.cfg.previewUrl,"onUpdate:modelValue":x[6]||(x[6]=ye=>h.cfg.previewUrl=ye),placeholder:r.cfg?.placeholder.previewUrlPlaceholder,disabled:!r.cfg.allowPreviewUrlChange},null,8,["modelValue","placeholder","disabled"])]),_:1},8,["label"])):F("",!0),f(oe,{label:u(s)("setting.blog.pageType")},{default:y(()=>[f(O,{modelValue:h.cfg.pageType,"onUpdate:modelValue":x[7]||(x[7]=ye=>h.cfg.pageType=ye),class:"ml-4"},{default:y(()=>[f(j,{value:u(ce).Markdown,size:"large"},{default:y(()=>[...x[13]||(x[13]=[V("Markdown",-1)])]),_:1},8,["value"]),f(j,{value:u(ce).Html,size:"large"},{default:y(()=>[...x[14]||(x[14]=[V("HTML",-1)])]),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),r.cfg?.cateSearchEnabled?(_(),S(oe,{key:8,class:"cate-input",label:"æœç´¢å…³é”®è¯"},{default:y(()=>[f(N,{modelValue:h.ksKeyword,"onUpdate:modelValue":x[8]||(x[8]=ye=>h.ksKeyword=ye),placeholder:"è¯·è¾“å…¥["+r.cfg?.knowledgeSpaceTitle+"]æœç´¢å…³é”®è¯ï¼Œè¾“å…¥å®ŒæˆåŽè¯·æŒ‰Enteré”®æˆ–è€…ç§»èµ°å…‰æ ‡",onChange:H},null,8,["modelValue","placeholder"])]),_:1})):F("",!0),r.cfg?.knowledgeSpaceEnabled?(_(),S(oe,{key:9,label:r.cfg?.knowledgeSpaceTitle},{default:y(()=>[f($e,{modelValue:h.cfg.blogid,"onUpdate:modelValue":x[9]||(x[9]=ye=>h.cfg.blogid=ye),class:"m-2",placeholder:u(s)("main.opt.select"),"no-data-text":u(s)("main.data.empty"),loading:h.isCateLoading,"loading-text":"åŠ è½½ä¸­...",ref_key:"singleCateSelect",ref:v},{default:y(()=>[(_(!0),$(ke,null,Ie(h.kwSpaces,ye=>(_(),S(he,{key:ye.value,label:ye.label,value:ye.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","no-data-text","loading"])]),_:1},8,["label"])):F("",!0),f(oe,{label:u(s)("publisher.picbed.service")},{default:y(()=>[f(O,{modelValue:h.cfg.picbedService,"onUpdate:modelValue":x[10]||(x[10]=ye=>h.cfg.picbedService=ye),class:"ml-4"},{default:y(()=>[f(j,{value:u(Je).None,size:"large"},{default:y(()=>[V(R(u(s)("publisher.picbed.none")),1)]),_:1},8,["value"]),h.cfg.picgoPicbedSupported?(_(),S(j,{key:0,value:u(Je).PicGo,size:"large",onClick:B},{default:y(()=>[V(R(u(s)("publisher.picbed.picgo"))+" ",1),C("sup",null,R(u(s)("publisher.picbed.recom1")),1)]),_:1},8,["value"])):F("",!0),h.cfg.bundledPicbedSupported?(_(),S(j,{key:1,value:u(Je).Bundled,size:"large"},{default:y(()=>[V(R(u(s)("publisher.picbed.bundled"))+" ",1),C("sup",null,R(u(s)("publisher.picbed.recom2")),1)]),_:1},8,["value"])):F("",!0)]),_:1},8,["modelValue"])]),_:1},8,["label"]),!h.proxy.useSiyuanProxy&&!u(c)()&&!h.proxy.useCorsAnywhere?(_(),S(oe,{key:10,label:u(s)("setting.blog.middlewareUrl")},{default:y(()=>[f(N,{modelValue:h.cfg.middlewareUrl,"onUpdate:modelValue":x[11]||(x[11]=ye=>h.cfg.middlewareUrl=ye),placeholder:u(s)("setting.blog.middlewareUrl.tip")},null,8,["modelValue","placeholder"]),f(I,{closable:!1,title:u(s)("setting.blog.middlewareUrl.my.tip"),class:"top-tip",type:"info"},null,8,["title"])]),_:1},8,["label"])):F("",!0),!h.proxy.useSiyuanProxy&&!u(c)()?(_(),S(oe,{key:11,label:u(s)("setting.blog.middlewareUrl.new")},{default:y(()=>[f(N,{modelValue:h.cfg.corsAnywhereUrl,"onUpdate:modelValue":x[12]||(x[12]=ye=>h.cfg.corsAnywhereUrl=ye),placeholder:u(s)("setting.blog.corsAnywhereUrl.tip")},null,8,["modelValue","placeholder"]),f(I,{closable:!1,title:u(s)("setting.blog.middlewareUrl.my.new.tip"),class:"top-tip",type:"warning"},null,8,["title"])]),_:1},8,["label"])):F("",!0),!h.proxy.useSiyuanProxy&&!u(c)()?(_(),S(oe,{key:12},{default:y(()=>[f(I,{closable:!1,title:u(s)("setting.blog.middlewareUrl.my.warn.tip"),class:"top-tip",type:"error"},null,8,["title"]),f(I,{closable:!1,title:u(s)("setting.blog.middlewareUrl.my.fee.tip"),class:"top-tip",type:"error"},null,8,["title"]),C("a",Th,R(u(s)("setting.blog.middlewareUrl.my.coffee")),1)]),_:1})):F("",!0),f(oe,null,{default:y(()=>[f(De,{type:"primary",loading:g.value,onClick:P},{default:y(()=>[V(R(g.value?u(s)("setting.blog.vali.ing"):u(s)("setting.blog.vali")),1)]),_:1},8,["loading"]),h.cfg.apiStatus?F("",!0):(_(),S(I,{key:0,title:u(s)("setting.blog.vali.tip.metaweblog"),type:"warning",closable:!1},null,8,["title"])),h.cfg.apiStatus?(_(),S(I,{key:1,title:u(s)("setting.blog.vali.ok.metaweblog"),type:"success",closable:!1},null,8,["title"])):F("",!0)]),_:1}),f(oe,null,{default:y(()=>[f(De,{type:"primary",onClick:E},{default:y(()=>[V(R(u(s)("setting.blog.save")),1)]),_:1}),f(De,null,{default:y(()=>[V(R(u(s)("setting.blog.cancel")),1)]),_:1})]),_:1}),Pt(G.$slots,"footer",{cfg:h.cfg},void 0,!0)]),_:3})):(_(),S(ee,{key:0,class:"placeholder",rows:5,animated:""}))}}}),jt=ge(kh,[["__scopeId","data-v-00dcc145"]]),ds=J({__name:"CustomWebSetting",props:{apiType:{type:String,default:""},cfg:{type:Object,default:null}},setup(p){const e=p;return(t,o)=>{const s=jt;return _(),S(s,{"api-type":e.apiType,cfg:e.cfg},null,8,["api-type","cfg"])}}});class Sh extends Xt{}const Ch=J({__name:"JuejinSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>Ii(o.apiType)),e=await e,t(),e),i=a,n=new Sh;return n.homePlaceholder=s("setting.juejin.home.tip"),n.apiUrlPlaceholder=s("setting.juejin.apiUrl.tip"),n.passwordPlaceholder=s("setting.juejin.password.tip"),n.previewUrlPlaceholder=s("setting.juejin.previewUrl.tip"),i.placeholder=n,(l,c)=>(_(),S(ds,{"api-type":o.apiType,cfg:u(i)},null,8,["api-type","cfg"]))}});class Eh extends Xt{}const Ah=J({__name:"JianshuSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>Ai(o.apiType)),e=await e,t(),e),i=a,n=new Eh;return n.homePlaceholder=s("setting.jianshu.home.tip"),n.apiUrlPlaceholder=s("setting.jianshu.apiUrl.tip"),n.passwordPlaceholder=s("setting.jianshu.password.tip"),n.previewUrlPlaceholder=s("setting.jianshu.previewUrl.tip"),i.placeholder=n,(l,c)=>(_(),S(ds,{"api-type":o.apiType,cfg:u(i)},null,8,["api-type","cfg"]))}});class Ih extends Xt{}const Uh=J({__name:"WechatSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>Ei(o.apiType)),e=await e,t(),e),i=a,n=new Ih;return n.homePlaceholder=s("setting.wechat.home.tip"),n.apiUrlPlaceholder=s("setting.wechat.apiUrl.tip"),n.passwordPlaceholder=s("setting.wechat.password.tip"),n.previewUrlPlaceholder=s("setting.wechat.previewUrl.tip"),i.placeholder=n,(l,c)=>(_(),S(ds,{"api-type":o.apiType,cfg:u(i)},null,8,["api-type","cfg"]))}});class xh extends Xt{}const Mh=J({__name:"CsdnSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>Ci(o.apiType)),e=await e,t(),e),i=a,n=new xh;return n.homePlaceholder=s("setting.csdn.home.tip"),n.apiUrlPlaceholder=s("setting.csdn.apiUrl.tip"),n.passwordPlaceholder=s("setting.csdn.password.tip"),n.previewUrlPlaceholder=s("setting.csdn.previewUrl.tip"),i.placeholder=n,(l,c)=>(_(),S(ds,{"api-type":o.apiType,cfg:u(i)},null,8,["api-type","cfg"]))}}),Dh=J({__name:"ZhihuSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>Ti(o.apiType)),e=await e,t(),e),i=a,n=new Kn;return n.homePlaceholder=s("setting.zhihu.home.tip"),n.apiUrlPlaceholder=s("setting.zhihu.apiUrl.tip"),n.usernamePlaceholder=s("setting.zhihu.username.tip"),n.passwordPlaceholder=s("setting.zhihu.password.tip"),n.previewUrlPlaceholder=s("setting.zhihu.previewUrl.tip"),i.placeholder=n,(l,c)=>(_(),S(ds,{"api-type":o.apiType,cfg:u(i)},null,8,["api-type","cfg"]))}}),_s=J({__name:"MetaweblogSetting",props:{apiType:{type:String,default:""},cfg:{type:Object,default:null}},setup(p){const e=p;return(t,o)=>{const s=jt;return _(),S(s,{"api-type":e.apiType,cfg:e.cfg},null,8,["api-type","cfg"])}}});class Oh extends ps{}const $h=J({__name:"WordpressSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,s=(c,r)=>{const{home:m,apiUrl:w}=Gn.parseHomeAndUrl(c);r.home=m,r.apiUrl=w,T.isEmptyString(r.home)&&(r.apiUrl="")},{t:a}=Z(),{cfg:i}=([e,t]=ve(()=>_i(o.apiType)),e=await e,t(),e),n=i,l=new Oh;return l.homePlaceholder=a("setting.wordpress.home.tip"),l.usernamePlaceholder=a("setting.wordpress.username.tip"),l.passwordPlaceholder=a("setting.wordpress.password.tip"),l.apiUrlPlaceholder=a("setting.wordpress.apiUrl.tip"),l.previewUrlPlaceholder=a("setting.wordpress.previewUrl.tip"),n.placeholder=l,(c,r)=>(_(),S(_s,{"api-type":o.apiType,cfg:u(n),onOnHomeChange:s},null,8,["api-type","cfg"]))}});class Vh extends ps{}const Nh=J({__name:"JvueSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>Mi(o.apiType)),e=await e,t(),e),i=a,n=new Vh;return n.homePlaceholder=s("setting.jvue.home.tip"),n.usernamePlaceholder=s("setting.jvue.username.tip"),n.passwordPlaceholder=s("setting.jvue.password.tip"),n.apiUrlPlaceholder=s("setting.jvue.apiUrl.tip"),n.previewUrlPlaceholder=s("setting.jvue.previewUrl.tip"),i.placeholder=n,(l,c)=>(_(),S(_s,{"api-type":o.apiType,cfg:u(i)},null,8,["api-type","cfg"]))}});class Hh extends ps{}const Lh=J({__name:"TypechoSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,s=(c,r)=>{const{home:m,apiUrl:w}=jn.parseHomeAndUrl(c);r.home=m,r.apiUrl=w,T.isEmptyString(r.home)&&(r.apiUrl="")},{t:a}=Z(),{cfg:i}=([e,t]=ve(()=>vi(o.apiType)),e=await e,t(),e),n=i,l=new Hh;return l.homePlaceholder=a("setting.typecho.home.tip"),l.usernamePlaceholder=a("setting.typecho.username.tip"),l.passwordPlaceholder=a("setting.typecho.password.tip"),l.apiUrlPlaceholder=a("setting.typecho.apiUrl.tip"),l.previewUrlPlaceholder=a("setting.typecho.previewUrl.tip"),n.placeholder=l,(c,r)=>(_(),S(_s,{"api-type":o.apiType,cfg:u(n),onOnHomeChange:s},null,8,["api-type","cfg"]))}});class Rh extends ps{}const Gh=J({__name:"CnblogsSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>wi(o.apiType)),e=await e,t(),e),i=a,n=new Rh;return n.homePlaceholder=s("setting.cnblogs.home.tip"),n.usernamePlaceholder=s("setting.cnblogs.username.tip"),n.passwordPlaceholder=s("setting.cnblogs.password.tip"),n.apiUrlPlaceholder=s("setting.cnblogs.apiUrl.tip"),n.previewUrlPlaceholder=s("setting.cnblogs.previewUrl.tip"),i.placeholder=n,(l,c)=>(_(),S(_s,{"api-type":o.apiType,cfg:u(i)},null,8,["api-type","cfg"]))}}),Bh=J({__name:"OthermetaSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>ki(o.apiType)),e=await e,t(),e),i=a,n=new ps;return n.homePlaceholder=s("setting.metaweblog.home.tip"),n.usernamePlaceholder=s("setting.metaweblog.username.tip"),n.passwordPlaceholder=s("setting.metaweblog.password.tip"),n.apiUrlPlaceholder=s("setting.metaweblog.apiUrl.tip"),n.previewUrlPlaceholder=s("setting.metaweblog.previewUrl.tip"),i.placeholder=n,(l,c)=>(_(),S(_s,{"api-type":o.apiType,cfg:u(i)},null,8,["api-type","cfg"]))}}),jh={key:0},Kh=J({__name:"CommonGithubSetting",props:{apiType:{type:String,default:""},cfg:{type:Object,default:null}},setup(p){const e=L("common-blog-setting"),t=p,{t:o}=Z(),s=re({showAdvancedConfig:!1,advanceBtnText:"æ˜¾ç¤ºæ›´å¤šé…ç½®"}),a=()=>{s.showAdvancedConfig?(s.showAdvancedConfig=!s.showAdvancedConfig,s.advanceBtnText="æ˜¾ç¤ºæ›´å¤šé…ç½®"):(s.showAdvancedConfig=!s.showAdvancedConfig,s.advanceBtnText="éšè—æ›´å¤šé…ç½®")},i=n=>{n.blogid=n.defaultPath,e.debug("sync defaultPath to blogid",{cfg:ne(n)})};return(n,l)=>{const c=Ue,r=Ce,m=cs,w=jt;return _(),S(w,{"api-type":t.apiType,cfg:t.cfg},{header:y(d=>[Pt(n.$slots,"header",{cfg:d.cfg},void 0,!0)]),main:y(d=>[f(r,{label:u(o)("setting.blog.type.github.repo")},{default:y(()=>[f(c,{modelValue:d.cfg.githubRepo,"onUpdate:modelValue":g=>d.cfg.githubRepo=g,placeholder:u(o)("setting.blog.type.github.repo.tip")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"]),f(r,{label:u(o)("setting.blog.yamlLinkEnabled")},{default:y(()=>[f(m,{modelValue:d.cfg.yamlLinkEnabled,"onUpdate:modelValue":g=>d.cfg.yamlLinkEnabled=g},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"]),f(r,{label:u(o)("setting.blog.type.github.default.branch")},{default:y(()=>[f(c,{modelValue:d.cfg.githubBranch,"onUpdate:modelValue":g=>d.cfg.githubBranch=g,placeholder:u(o)("setting.blog.type.github.default.branch.tip")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"]),f(r,{label:u(o)("setting.blog.type.github.default.path")},{default:y(()=>[f(c,{modelValue:d.cfg.defaultPath,"onUpdate:modelValue":g=>d.cfg.defaultPath=g,onInput:g=>i(d.cfg),placeholder:u(o)("setting.blog.type.github.default.path.tip")},null,8,["modelValue","onUpdate:modelValue","onInput","placeholder"])]),_:2},1032,["label"]),f(r,{label:u(o)("setting.blog.mdFilenameRule")},{default:y(()=>[f(c,{modelValue:d.cfg.mdFilenameRule,"onUpdate:modelValue":g=>d.cfg.mdFilenameRule=g,placeholder:u(o)("setting.blog.mdFilenameRule.tip")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"]),f(r,{label:u(o)("setting.blog.previewPostUrl")},{default:y(()=>[f(c,{modelValue:d.cfg.previewPostUrl,"onUpdate:modelValue":g=>d.cfg.previewPostUrl=g,placeholder:u(o)("setting.blog.previewPostUrl.tip")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"]),f(r,null,{default:y(()=>[C("a",{href:"javascript:;",onClick:a},R(s.advanceBtnText),1)]),_:1}),s.showAdvancedConfig?(_(),$("div",jh,[f(r,{label:u(o)("setting.blog.type.github.msg")},{default:y(()=>[f(c,{modelValue:d.cfg.defaultMsg,"onUpdate:modelValue":g=>d.cfg.defaultMsg=g,placeholder:u(o)("setting.blog.type.github.msg.tip")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"]),f(r,{label:u(o)("setting.blog.type.github.author")},{default:y(()=>[f(c,{modelValue:d.cfg.author,"onUpdate:modelValue":g=>d.cfg.author=g,placeholder:u(o)("setting.blog.type.github.author")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"]),f(r,{label:u(o)("setting.blog.type.github.email")},{default:y(()=>[f(c,{modelValue:d.cfg.email,"onUpdate:modelValue":g=>d.cfg.email=g,placeholder:u(o)("setting.blog.type.github.email.tip")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"]),f(r,{label:u(o)("setting.blog.type.github.site")},{default:y(()=>[f(c,{modelValue:d.cfg.site,"onUpdate:modelValue":g=>d.cfg.site=g,placeholder:u(o)("setting.blog.type.github.site.tip")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"])])):F("",!0),f(r,{label:u(o)("setting.blog.type.github.dyn.yaml")},{default:y(()=>[f(c,{autosize:{minRows:4,maxRows:16},type:"textarea",modelValue:d.cfg.dynYamlCfg,"onUpdate:modelValue":g=>d.cfg.dynYamlCfg=g,placeholder:u(o)("setting.blog.type.github.dyn.yaml.tip")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"]),d.cfg.picbedService===u(Je).Bundled?(_(),S(r,{key:1,label:u(o)("setting.blog.type.github.images.path")},{default:y(()=>[f(c,{modelValue:d.cfg.imageStorePath,"onUpdate:modelValue":g=>d.cfg.imageStorePath=g,placeholder:u(o)("setting.blog.type.github.images.path.tip")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"])):F("",!0),d.cfg.picbedService===u(Je).Bundled?(_(),S(r,{key:2,label:u(o)("setting.blog.type.github.image.link.path")},{default:y(()=>[f(c,{modelValue:d.cfg.imageLinkPath,"onUpdate:modelValue":g=>d.cfg.imageLinkPath=g,placeholder:u(o)("setting.blog.type.github.mage.link.path.tip")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"])):F("",!0),Pt(n.$slots,"main",{cfg:d.cfg},void 0,!0)]),footer:y(d=>[Pt(n.$slots,"footer",{cfg:d.cfg},void 0,!0)]),_:3},8,["api-type","cfg"])}}}),gt=ge(Kh,[["__scopeId","data-v-a77c4095"]]);class us extends Lt{}class vl extends us{}class zh extends vl{}const Jh=J({__name:"GitlabvitepressSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>No(o.apiType)),e=await e,t(),e),i=a,n=new zh;n.homePlaceholder=s("setting.blog.gitlab.url.tip"),n.usernamePlaceholder=s("setting.blog.type.gitlab.user.tip"),n.passwordPlaceholder=s("setting.blog.type.gitlab.token.tip"),n.apiUrlPlaceholder=s("setting.blog.gitlab.apiurl.tip"),n.previewUrlPlaceholder=s("setting.blog.gitlab.previewUrl.tip"),i.placeholder=n;const l=(c,r)=>{T.isEmptyString(r.home)?r.apiUrl="":(r.apiUrl=r.home,r.tokenSettingUrl=T.pathJoin(r.home,yt.TOKEN_SETTING_URL))};return(c,r)=>{const m=gt;return _(),S(m,{"api-type":o.apiType,cfg:u(i),onOnHomeChange:l},{header:y(w=>[...r[0]||(r[0]=[])]),main:y(w=>[...r[1]||(r[1]=[])]),footer:y(w=>[...r[2]||(r[2]=[])]),_:1},8,["api-type","cfg"])}}});class Pl extends us{}class Tl extends Pl{}const Wh=J({__name:"Gitlabvuepress2Setting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>Vo(o.apiType)),e=await e,t(),e),i=a,n=new Tl;n.homePlaceholder=s("setting.blog.gitlab.url.tip"),n.usernamePlaceholder=s("setting.blog.type.gitlab.user.tip"),n.passwordPlaceholder=s("setting.blog.type.gitlab.token.tip"),n.apiUrlPlaceholder=s("setting.blog.gitlab.apiurl.tip"),n.previewUrlPlaceholder=s("setting.blog.gitlab.previewUrl.tip"),i.placeholder=n;const l=(c,r)=>{T.isEmptyString(r.home)?r.apiUrl="":(r.apiUrl=r.home,r.tokenSettingUrl=T.pathJoin(r.home,yt.TOKEN_SETTING_URL))};return(c,r)=>{const m=gt;return _(),S(m,{"api-type":o.apiType,cfg:u(i),onOnHomeChange:l},{header:y(w=>[...r[0]||(r[0]=[])]),main:y(w=>[...r[1]||(r[1]=[])]),footer:y(w=>[...r[2]||(r[2]=[])]),_:1},8,["api-type","cfg"])}}}),Fh=J({__name:"GitlabvuepressSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>Do(o.apiType)),e=await e,t(),e),i=a,n=new Tl;n.homePlaceholder=s("setting.blog.gitlab.url.tip"),n.usernamePlaceholder=s("setting.blog.type.gitlab.user.tip"),n.passwordPlaceholder=s("setting.blog.type.gitlab.token.tip"),n.apiUrlPlaceholder=s("setting.blog.gitlab.apiurl.tip"),n.previewUrlPlaceholder=s("setting.blog.gitlab.previewUrl.tip"),i.placeholder=n;const l=(r,m)=>{T.isEmptyString(m.home)?m.apiUrl="":(m.apiUrl=m.home,m.tokenSettingUrl=T.pathJoin(m.home,yt.TOKEN_SETTING_URL)),T.isEmptyString(m.home)||T.isEmptyString(m.username)?m.site="":m.site=T.pathJoin(m.home,"/"+m.username)},c=(r,m)=>{T.isEmptyString(m.home)||T.isEmptyString(m.username)?m.site="":m.site=T.pathJoin(m.home,"/"+m.username)};return(r,m)=>{const w=gt;return _(),S(w,{"api-type":o.apiType,cfg:u(i),onOnHomeChange:l,onOnUsernameChange:c},{header:y(d=>[...m[0]||(m[0]=[])]),main:y(d=>[...m[1]||(m[1]=[])]),footer:y(d=>[...m[2]||(m[2]=[])]),_:1},8,["api-type","cfg"])}}});class kl extends us{}class qh extends kl{}const Yh=J({__name:"GitlabjekyllSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>Uo(o.apiType)),e=await e,t(),e),i=a,n=new qh;n.homePlaceholder=s("setting.blog.gitlab.url.tip"),n.usernamePlaceholder=s("setting.blog.type.gitlab.user.tip"),n.passwordPlaceholder=s("setting.blog.type.gitlab.token.tip"),n.apiUrlPlaceholder=s("setting.blog.gitlab.apiurl.tip"),n.previewUrlPlaceholder=s("setting.blog.gitlab.previewUrl.tip"),i.placeholder=n;const l=(c,r)=>{T.isEmptyString(r.home)?r.apiUrl="":(r.apiUrl=r.home,r.tokenSettingUrl=T.pathJoin(r.home,yt.TOKEN_SETTING_URL))};return(c,r)=>{const m=gt;return _(),S(m,{"api-type":o.apiType,cfg:u(i),onOnHomeChange:l},{header:y(w=>[...r[0]||(r[0]=[])]),main:y(w=>[...r[1]||(r[1]=[])]),footer:y(w=>[...r[2]||(r[2]=[])]),_:1},8,["api-type","cfg"])}}});class Sl extends us{}class Xh extends Sl{}const Qh=J({__name:"GitlabhugoSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>Ao(o.apiType)),e=await e,t(),e),i=a,n=new Xh;n.homePlaceholder=s("setting.blog.gitlab.url.tip"),n.usernamePlaceholder=s("setting.blog.type.gitlab.user.tip"),n.passwordPlaceholder=s("setting.blog.type.gitlab.token.tip"),n.apiUrlPlaceholder=s("setting.blog.gitlab.apiurl.tip"),n.previewUrlPlaceholder=s("setting.blog.gitlab.previewUrl.tip"),i.placeholder=n;const l=(c,r)=>{T.isEmptyString(r.home)?r.apiUrl="":(r.apiUrl=r.home,r.tokenSettingUrl=T.pathJoin(r.home,yt.TOKEN_SETTING_URL))};return(c,r)=>{const m=gt;return _(),S(m,{"api-type":o.apiType,cfg:u(i),onOnHomeChange:l},{header:y(w=>[...r[0]||(r[0]=[])]),main:y(w=>[...r[1]||(r[1]=[])]),footer:y(w=>[...r[2]||(r[2]=[])]),_:1},8,["api-type","cfg"])}}});class Cl extends us{}class Zh extends Cl{}const ef=J({__name:"GitlabhexoSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>Co(o.apiType)),e=await e,t(),e),i=a,n=new Zh;n.homePlaceholder=s("setting.blog.gitlab.url.tip"),n.usernamePlaceholder=s("setting.blog.type.gitlab.user.tip"),n.passwordPlaceholder=s("setting.blog.type.gitlab.token.tip"),n.apiUrlPlaceholder=s("setting.blog.gitlab.apiurl.tip"),n.previewUrlPlaceholder=s("setting.blog.gitlab.previewUrl.tip"),i.placeholder=n;const l=(c,r)=>{T.isEmptyString(r.home)?r.apiUrl="":(r.apiUrl=r.home,r.tokenSettingUrl=T.pathJoin(r.home,yt.TOKEN_SETTING_URL))};return(c,r)=>{const m=gt;return _(),S(m,{"api-type":o.apiType,cfg:u(i),onOnHomeChange:l},{header:y(w=>[...r[0]||(r[0]=[])]),main:y(w=>[...r[1]||(r[1]=[])]),footer:y(w=>[...r[2]||(r[2]=[])]),_:1},8,["api-type","cfg"])}}}),tf=J({__name:"VitepressSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>$o(o.apiType)),e=await e,t(),e),i=a,n=new vl;return n.homePlaceholder=s("setting.blog.github.url.tip"),n.usernamePlaceholder=s("setting.blog.type.github.user.tip"),n.passwordPlaceholder=s("setting.blog.type.github.token.tip"),n.apiUrlPlaceholder=s("setting.blog.github.apiurl.tip"),n.previewUrlPlaceholder=s("setting.blog.previewUrl.tip"),i.placeholder=n,(l,c)=>{const r=gt;return _(),S(r,{"api-type":o.apiType,cfg:u(i)},{header:y(m=>[...c[0]||(c[0]=[])]),main:y(m=>[...c[1]||(c[1]=[])]),footer:y(m=>[...c[2]||(c[2]=[])]),_:1},8,["api-type","cfg"])}}});class sf extends us{}const of=J({__name:"Vuepress2Setting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>Oo(o.apiType)),e=await e,t(),e),i=a,n=new sf;return n.homePlaceholder=s("setting.blog.github.url.tip"),n.usernamePlaceholder=s("setting.blog.type.github.user.tip"),n.passwordPlaceholder=s("setting.blog.type.github.token.tip"),n.apiUrlPlaceholder=s("setting.blog.github.apiurl.tip"),n.previewUrlPlaceholder=s("setting.blog.previewUrl.tip"),i.placeholder=n,(l,c)=>{const r=gt;return _(),S(r,{"api-type":o.apiType,cfg:u(i)},{header:y(m=>[...c[0]||(c[0]=[])]),main:y(m=>[...c[1]||(c[1]=[])]),footer:y(m=>[...c[2]||(c[2]=[])]),_:1},8,["api-type","cfg"])}}}),af=J({__name:"VuepressSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>Mo(o.apiType)),e=await e,t(),e),i=a,n=new Pl;n.homePlaceholder=s("setting.blog.github.url.tip"),n.usernamePlaceholder=s("setting.blog.type.github.user.tip"),n.passwordPlaceholder=s("setting.blog.type.github.token.tip"),n.apiUrlPlaceholder=s("setting.blog.github.apiurl.tip"),n.previewUrlPlaceholder=s("setting.blog.previewUrl.tip"),i.placeholder=n;const l=(r,m)=>{T.isEmptyString(m.home)||T.isEmptyString(m.username)?m.site="":m.site=T.pathJoin(m.home,"/"+m.username)},c=(r,m)=>{T.isEmptyString(m.home)||T.isEmptyString(m.username)?m.site="":m.site=T.pathJoin(m.home,"/"+m.username)};return(r,m)=>{const w=gt;return _(),S(w,{"api-type":o.apiType,cfg:u(i),onOnHomeChange:l,onOnUsernameChange:c},{header:y(d=>[...m[0]||(m[0]=[])]),main:y(d=>[...m[1]||(m[1]=[])]),footer:y(d=>[...m[2]||(m[2]=[])]),_:1},8,["api-type","cfg"])}}}),nf=J({__name:"JekyllSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>Io(o.apiType)),e=await e,t(),e),i=a,n=new kl;return n.homePlaceholder=s("setting.blog.github.url.tip"),n.usernamePlaceholder=s("setting.blog.type.github.user.tip"),n.passwordPlaceholder=s("setting.blog.type.github.token.tip"),n.apiUrlPlaceholder=s("setting.blog.github.apiurl.tip"),n.previewUrlPlaceholder=s("setting.blog.previewUrl.tip"),i.placeholder=n,(l,c)=>{const r=gt;return _(),S(r,{"api-type":o.apiType,cfg:u(i)},{header:y(m=>[...c[0]||(c[0]=[])]),main:y(m=>[...c[1]||(c[1]=[])]),footer:y(m=>[...c[2]||(c[2]=[])]),_:1},8,["api-type","cfg"])}}}),lf=J({__name:"HugoSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>Eo(o.apiType)),e=await e,t(),e),i=a,n=new Sl;return n.homePlaceholder=s("setting.blog.github.url.tip"),n.usernamePlaceholder=s("setting.blog.type.github.user.tip"),n.passwordPlaceholder=s("setting.blog.type.github.token.tip"),n.apiUrlPlaceholder=s("setting.blog.github.apiurl.tip"),n.previewUrlPlaceholder=s("setting.blog.previewUrl.tip"),i.placeholder=n,(l,c)=>{const r=gt;return _(),S(r,{"api-type":o.apiType,cfg:u(i)},{header:y(m=>[...c[0]||(c[0]=[])]),main:y(m=>[...c[1]||(c[1]=[])]),footer:y(m=>[...c[2]||(c[2]=[])]),_:1},8,["api-type","cfg"])}}}),rf=J({__name:"HexoSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>So(o.apiType)),e=await e,t(),e),i=a,n=new Cl;return n.homePlaceholder=s("setting.blog.github.url.tip"),n.usernamePlaceholder=s("setting.blog.type.github.user.tip"),n.passwordPlaceholder=s("setting.blog.type.github.token.tip"),n.apiUrlPlaceholder=s("setting.blog.github.apiurl.tip"),n.previewUrlPlaceholder=s("setting.blog.previewUrl.tip"),i.placeholder=n,(l,c)=>{const r=gt;return _(),S(r,{"api-type":o.apiType,cfg:u(i)},{header:y(m=>[...c[0]||(c[0]=[])]),main:y(m=>[...c[1]||(c[1]=[])]),footer:y(m=>[...c[2]||(c[2]=[])]),_:1},8,["api-type","cfg"])}}});class cf extends Lt{}const pf=J({__name:"HaloSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>Ui(o.apiType)),e=await e,t(),e),i=a,n=new cf;n.homePlaceholder=s("setting.halo.home.tip"),n.usernamePlaceholder=s("setting.halo.username.tip"),n.passwordPlaceholder=s("setting.halo.password.tip"),n.apiUrlPlaceholder=s("setting.halo.apiUrl.tip"),n.previewUrlPlaceholder=s("setting.halo.previewUrl.tip"),i.placeholder=n;const l=(c,r)=>{T.isEmptyString(r.home)?r.apiUrl="":r.apiUrl=r.home};return(c,r)=>{const m=Ne;return _(),S(jt,{"api-type":o.apiType,cfg:u(i),onOnHomeChange:l},{header:y(w=>[f(m,{title:u(s)("setting.platform.halo.v29.only"),type:"error",class:"form-item-tip",closable:!1},null,8,["title"])]),_:1},8,["api-type","cfg"])}}}),gf=ge(pf,[["__scopeId","data-v-7cc095ef"]]);class df extends Lt{}const uf=J({__name:"NotionSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>Si(o.apiType)),e=await e,t(),e),i=a,n=new df;return n.homePlaceholder=s("setting.notion.home.tip"),n.passwordPlaceholder=s("setting.notion.password.tip"),n.apiUrlPlaceholder=s("setting.notion.apiurl.tip"),n.previewUrlPlaceholder=s("setting.notion.previewUrl.tip"),i.placeholder=n,(l,c)=>(_(),S(jt,{"api-type":o.apiType,cfg:u(i)},null,8,["api-type","cfg"]))}});class mf extends Lt{}const hf=J({__name:"YuqueSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>Pi(o.apiType)),e=await e,t(),e),i=a,n=new mf;return n.homePlaceholder=s("setting.yuque.home.tip"),n.usernamePlaceholder=s("setting.yuque.username.tip"),n.passwordPlaceholder=s("setting.yuque.password.tip"),n.apiUrlPlaceholder=s("setting.yuque.apiurl.tip"),n.previewUrlPlaceholder=s("setting.yuque.previewUrl.tip"),i.placeholder=n,(l,c)=>(_(),S(jt,{"api-type":o.apiType,cfg:u(i)},null,8,["api-type","cfg"]))}});class ff extends Lt{}const yf=J({__name:"TelegraphSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>xi(o.apiType)),e=await e,t(),e),i=a;i.usernameLabel=s("setting.telegraph.username.label"),i.passwordLabel=s("setting.telegraph.password.label");const n=new ff;n.homePlaceholder=s("setting.telegraph.home.tip"),n.usernamePlaceholder=s("setting.telegraph.username.tip"),n.passwordPlaceholder=s("setting.telegraph.password.tip"),n.apiUrlPlaceholder=s("setting.telegraph.apiurl.tip"),n.previewUrlPlaceholder=s("setting.telegraph.previewUrl.tip"),i.placeholder=n;const l=c=>{c.password="",c.accessToken="",c.saveHash=""};return(c,r)=>{const m=Xs,w=Ys,d=Ce,g=Ue,v=cs;return _(),S(jt,{"api-type":o.apiType,cfg:u(i)},{header:y(h=>[f(d,{label:"ç™»å½•æ¨¡å¼",required:""},{default:y(()=>[f(w,{modelValue:h.cfg.postType,"onUpdate:modelValue":b=>h.cfg.postType=b,class:"ml-4",onChange:()=>{l(h.cfg)}},{default:y(()=>[f(m,{value:u(ls).ANONYMOUS,size:"large"},{default:y(()=>[V(R(u(s)("setting.telegraph.login.anonymous")),1)]),_:1},8,["value"]),f(m,{value:u(ls).LOGIN_USER,size:"large"},{default:y(()=>[V(R(u(s)("setting.telegraph.login.user")),1)]),_:1},8,["value"])]),_:1},8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024)]),main:y(h=>[h.cfg.postType===u(ls).LOGIN_USER?(_(),S(d,{key:0,label:"Access Token",required:""},{default:y(()=>[f(g,{modelValue:h.cfg.accessToken,"onUpdate:modelValue":b=>h.cfg.accessToken=b,placeholder:u(s)("setting.telegraph.accessToken.tip"),type:"password","show-password":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024)):F("",!0),f(d,{label:"Hash",required:""},{default:y(()=>[f(g,{modelValue:h.cfg.saveHash,"onUpdate:modelValue":b=>h.cfg.saveHash=b,placeholder:u(s)("setting.telegraph.saveHash.tip"),type:"password","show-password":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),f(d,{label:"åˆ·æ–°æŽˆæƒ"},{default:y(()=>[f(v,{modelValue:h.cfg.forceReAuth,"onUpdate:modelValue":b=>h.cfg.forceReAuth=b,placeholder:u(s)("setting.telegraph.forceReAuth.tip")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024)]),footer:y(h=>[...r[0]||(r[0]=[])]),_:1},8,["api-type","cfg"])}}});class bf extends Lt{}const wf=J({__name:"ConfluenceSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>Bo(o.apiType)),e=await e,t(),e),i=a,n=new bf;n.homePlaceholder=s("setting.confluence.home.tip"),n.passwordPlaceholder=s("setting.confluence.password.tip"),n.apiUrlPlaceholder=s("setting.confluence.apiurl.tip"),n.previewUrlPlaceholder=s("setting.confluence.previewUrl.tip"),n.parentPageIdPlaceholder=s("setting.confluence.parentPageId.tip"),i.placeholder=n;const l=i.placeholder.parentPageIdPlaceholder,c=Y([]),r=Y(!1),m=(d,g)=>{T.isEmptyString(g.home)?g.apiUrl="":(g.apiUrl=g.home,g.tokenSettingUrl=T.pathJoin(g.home,gl.TOKEN_SETTING_URL))},w=async()=>{if(!i.blogid){c.value=[];return}r.value=!0;try{const{blogApi:d}=await Bo(o.apiType,i),v=await d.getPagesBySpace(i.blogid);c.value=v.map(h=>({label:`${h.title} (${h.id})`,value:h.id}))}catch(d){console.error("Failed to load Confluence parent pages",d),c.value=[]}finally{r.value=!1}};return[e,t]=ve(()=>w()),await e,t(),Ke(()=>i.blogid,async(d,g)=>{d!==g&&(i.parentPageId="",await w())}),(d,g)=>{const v=it,h=at,b=Ce;return _(),S(jt,{"api-type":o.apiType,cfg:u(i),onOnHomeChange:m},{main:y(P=>[f(b,{label:u(s)("setting.confluence.parentPageId.label")},{default:y(()=>[f(h,{modelValue:P.cfg.parentPageId,"onUpdate:modelValue":k=>P.cfg.parentPageId=k,placeholder:u(l),clearable:"",filterable:"",loading:r.value,onFocus:w,onChange:k=>P.cfg.parentPageId=k},{default:y(()=>[(_(!0),$(ke,null,Ie(c.value,k=>(_(),S(v,{key:k.value,label:k.label,value:k.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","placeholder","loading","onChange"])]),_:2},1032,["label"])]),_:1},8,["api-type","cfg"])}}}),_f=ge(wf,[["__scopeId","data-v-87a6a25b"]]);class vf{static logger=L("wordpress-dot-com-utils");static parseHomeAndUrl(e){this.logger.debug(`Parsing Home address: ${e}`);let t="";return e.endsWith("/xmlrpc.php")?(t=e,e=e.replace("/xmlrpc.php","")):(e=e.replace(/\/$/,""),t=`${e}/xmlrpc.php`),this.logger.debug(`Parse result: home=${e}, apiUrl=${t}`),{home:e,apiUrl:t}}}class Pf extends ps{}const Tf=J({__name:"WordpressdotcomSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,s=(c,r)=>{const{home:m,apiUrl:w}=vf.parseHomeAndUrl(c);r.home=m,r.apiUrl=w,T.isEmptyString(r.home)&&(r.apiUrl="")},{t:a}=Z(),{cfg:i}=([e,t]=ve(()=>Di(o.apiType)),e=await e,t(),e),n=i,l=new Pf;return l.homePlaceholder=a("setting.wordpressdotcom.home.tip"),l.usernamePlaceholder=a("setting.wordpressdotcom.username.tip"),l.passwordPlaceholder=a("setting.wordpressdotcom.password.tip"),l.apiUrlPlaceholder=a("setting.wordpressdotcom.apiUrl.tip"),l.previewUrlPlaceholder=a("setting.wordpressdotcom.previewUrl.tip"),n.placeholder=l,(c,r)=>(_(),S(_s,{"api-type":o.apiType,cfg:u(n),onOnHomeChange:s},null,8,["api-type","cfg"]))}});class kf extends Xt{}const Sf=J({__name:"HalowebSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>Oi(o.apiType)),e=await e,t(),e),i=a,n=new kf;return n.homePlaceholder=s("setting.haloweb.home.tip"),n.apiUrlPlaceholder=s("setting.haloweb.apiUrl.tip"),n.passwordPlaceholder=s("setting.haloweb.password.tip"),n.previewUrlPlaceholder=s("setting.haloweb.previewUrl.tip"),i.placeholder=n,(l,c)=>(_(),S(ds,{"api-type":o.apiType,cfg:u(i)},null,8,["api-type","cfg"]))}});class Cf extends Xt{}const Ef=J({__name:"BilibiliSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>$i(o.apiType)),e=await e,t(),e),i=a,n=new Cf;return n.homePlaceholder=s("setting.bilibili.home.tip"),n.apiUrlPlaceholder=s("setting.bilibili.apiUrl.tip"),n.passwordPlaceholder=s("setting.bilibili.password.tip"),n.previewUrlPlaceholder=s("setting.bilibili.previewUrl.tip"),i.placeholder=n,(l,c)=>{const r=ds;return _(),S(r,{"api-type":o.apiType,cfg:u(i)},null,8,["api-type","cfg"])}}});class Af extends us{}const If=J({__name:"QuartzSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>xo(o.apiType)),e=await e,t(),e),i=a,n=new Af;return n.homePlaceholder=s("setting.blog.github.url.tip"),n.usernamePlaceholder=s("setting.blog.type.github.user.tip"),n.passwordPlaceholder=s("setting.blog.type.github.token.tip"),n.apiUrlPlaceholder=s("setting.blog.github.apiurl.tip"),n.previewUrlPlaceholder=s("setting.blog.previewUrl.tip"),i.placeholder=n,(l,c)=>{const r=gt;return _(),S(r,{"api-type":o.apiType,cfg:u(i)},{header:y(m=>[...c[0]||(c[0]=[])]),main:y(m=>[...c[1]||(c[1]=[])]),footer:y(m=>[...c[2]||(c[2]=[])]),_:1},8,["api-type","cfg"])}}});class Uf extends Lt{}const xf={class:"yaml-type-radio-group"},Mf=J({__name:"LocalSystemSetting",props:{apiType:{type:String,default:""}},async setup(p){let e,t;const o=p,{t:s}=Z(),{cfg:a}=([e,t]=ve(()=>Lo(o.apiType)),e=await e,t(),e),i=a,n=new Uf;return i.placeholder=n,(l,c)=>{const r=Ue,m=Ce,w=Xs;return _(),S(jt,{"api-type":o.apiType,cfg:u(i)},{header:y(d=>[Pt(l.$slots,"header",{cfg:d.cfg},void 0,!0)]),main:y(d=>[f(m,{label:u(s)("setting.blog.type.fs.store.path")},{default:y(()=>[f(r,{modelValue:d.cfg.storePath,"onUpdate:modelValue":g=>d.cfg.storePath=g,placeholder:u(s)("setting.blog.type.fs.store.path.tip")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"]),f(m,{label:u(s)("setting.blog.type.fs.media.path")},{default:y(()=>[f(r,{modelValue:d.cfg.imageStorePath,"onUpdate:modelValue":g=>d.cfg.imageStorePath=g,placeholder:u(s)("setting.blog.type.fs.media.path.tip")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"]),f(m,{label:u(s)("setting.blog.type.fs.yaml.type")},{default:y(()=>[C("div",xf,[f(w,{modelValue:d.cfg.fsYamlType,"onUpdate:modelValue":g=>d.cfg.fsYamlType=g,label:u(Te).Default,size:"default"},{default:y(()=>[V(R(u(s)("setting.blog.type.fs.yaml.type.default")),1)]),_:1},8,["modelValue","onUpdate:modelValue","label"]),f(w,{modelValue:d.cfg.fsYamlType,"onUpdate:modelValue":g=>d.cfg.fsYamlType=g,label:u(Te).Hexo,size:"default"},{default:y(()=>[V(R(u(s)("setting.blog.type.fs.yaml.type.hexo")),1)]),_:1},8,["modelValue","onUpdate:modelValue","label"]),f(w,{modelValue:d.cfg.fsYamlType,"onUpdate:modelValue":g=>d.cfg.fsYamlType=g,label:u(Te).Hugo,size:"default"},{default:y(()=>[V(R(u(s)("setting.blog.type.fs.yaml.type.hugo")),1)]),_:1},8,["modelValue","onUpdate:modelValue","label"]),f(w,{modelValue:d.cfg.fsYamlType,"onUpdate:modelValue":g=>d.cfg.fsYamlType=g,label:u(Te).Jekyll,size:"default"},{default:y(()=>[V(R(u(s)("setting.blog.type.fs.yaml.type.jekyll")),1)]),_:1},8,["modelValue","onUpdate:modelValue","label"]),f(w,{modelValue:d.cfg.fsYamlType,"onUpdate:modelValue":g=>d.cfg.fsYamlType=g,label:u(Te).Vuepress,size:"default"},{default:y(()=>[V(R(u(s)("setting.blog.type.fs.yaml.type.vuepress")),1)]),_:1},8,["modelValue","onUpdate:modelValue","label"]),f(w,{modelValue:d.cfg.fsYamlType,"onUpdate:modelValue":g=>d.cfg.fsYamlType=g,label:u(Te).Vuepress2,size:"default"},{default:y(()=>[V(R(u(s)("setting.blog.type.fs.yaml.type.vuepress2")),1)]),_:1},8,["modelValue","onUpdate:modelValue","label"]),f(w,{modelValue:d.cfg.fsYamlType,"onUpdate:modelValue":g=>d.cfg.fsYamlType=g,label:u(Te).Vitepress,size:"default"},{default:y(()=>[V(R(u(s)("setting.blog.type.fs.yaml.type.vitepress")),1)]),_:1},8,["modelValue","onUpdate:modelValue","label"]),f(w,{modelValue:d.cfg.fsYamlType,"onUpdate:modelValue":g=>d.cfg.fsYamlType=g,label:u(Te).Quartz,size:"default"},{default:y(()=>[V(R(u(s)("setting.blog.type.fs.yaml.type.quartz")),1)]),_:1},8,["modelValue","onUpdate:modelValue","label"])])]),_:2},1032,["label"])]),footer:y(d=>[Pt(l.$slots,"footer",{cfg:d.cfg},void 0,!0)]),_:3},8,["api-type","cfg"])}}}),Df=ge(Mf,[["__scopeId","data-v-0448292a"]]),Of={key:32},$f=J({__name:"SingleSettingIndex",setup(p){const{t:e}=Z(),t=tt(),s=re(t.params).key,a=Po(s),i=ct.isSiyuanElectron();return(n,l)=>{const c=hf,r=uf,m=gf,w=rf,d=lf,g=nf,v=af,h=of,b=tf,P=ef,k=Qh,E=Yh,M=Fh,H=Wh,B=Jh,D=Bh,G=Gh,x=Lh,ee=Nh,I=$h,N=Dh,oe=Mh,j=Uh,O=Ah,he=Ch,$e=Ne;return _(),S(He,{title:u(e)("setting.entry.title")+u(s),"help-key":u(a)},{default:y(()=>[u(a)===u(U).Common_Yuque?(_(),S(c,{key:0,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Common_Notion?(_(),S(r,{key:1,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Common_Halo?(_(),S(m,{key:2,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Common_Telegraph?(_(),S(yf,{key:3,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Common_Confluence?(_(),S(_f,{key:4,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Github_Hexo?(_(),S(w,{key:5,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Github_Hugo?(_(),S(d,{key:6,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Github_Jekyll?(_(),S(g,{key:7,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Github_Quartz?(_(),S(If,{key:8,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Github_Vuepress?(_(),S(v,{key:9,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Github_Vuepress2?(_(),S(h,{key:10,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Github_Vitepress?(_(),S(b,{key:11,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Gitlab_Hexo?(_(),S(P,{key:12,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Gitlab_Hugo?(_(),S(k,{key:13,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Gitlab_Jekyll?(_(),S(E,{key:14,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Gitlab_Vuepress?(_(),S(M,{key:15,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Gitlab_Vuepress2?(_(),S(H,{key:16,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Gitlab_Vitepress?(_(),S(B,{key:17,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Metaweblog_Metaweblog?(_(),S(D,{key:18,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Metaweblog_Cnblogs?(_(),S(G,{key:19,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Metaweblog_Typecho?(_(),S(x,{key:20,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Metaweblog_Jvue?(_(),S(ee,{key:21,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Wordpress_Wordpress?(_(),S(I,{key:22,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Wordpress_Wordpressdotcom?(_(),S(Tf,{key:23,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Custom_Zhihu?(_(),S(N,{key:24,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Custom_CSDN?(_(),S(oe,{key:25,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Custom_Wechat?(_(),S(j,{key:26,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Custom_Jianshu?(_(),S(O,{key:27,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Custom_Juejin?(_(),S(he,{key:28,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Custom_Bilibili?(_(),S(Ef,{key:29,"api-type":u(s)},null,8,["api-type"])):u(a)===u(U).Custom_Haloweb?(_(),S(Sf,{key:30,"api-type":u(s)},null,8,["api-type"])):u(i)&&u(a)===u(U).Fs_LocalSystem?(_(),S(Df,{key:31,"api-type":u(s)},null,8,["api-type"])):(_(),$("span",Of,[f($e,{closable:!1,title:u(e)("setting.entry.not.supported"),class:"top-tip",type:"error"},null,8,["title"])]))]),_:1},8,["title","help-key"])}}}),Vf=ge($f,[["__scopeId","data-v-d1d0eb39"]]),Nf={key:0},Hf={key:0},Lf={key:1},Rf=J({__name:"PostBind",setup(p){const e=L("post-bind"),{t}=Z(),{query:o}=tt(),{getPublishCfg:s}=lo(),{updateSetting:a}=pe(),{kernelApi:i}=Ge(),n=Y(),l=re({}),c=re({}),r=re({pageId:"",siyuanPost:{},dynamicConfigArray:[],postIdMap:{}}),m=Y(`å°†å¯¹æ–‡æ¡£ã€Œ${r.pageId}ã€è¿›è¡Œä¿®å¤`);Ke(()=>r.pageId,g=>{m.value=`å°†å¯¹æ–‡æ¡£ã€Œ${g}ã€è¿›è¡Œä¿®å¤`});const w=async g=>{if(T.isEmptyString(r.pageId)){X.error("");return}try{const h=(await s()).setting,b=se.getProperty(h,r.pageId,{});r.dynamicConfigArray=r.dynamicConfigArray.map(P=>{const k=r.postIdMap[P.platformKey],M=se.getProperty(h,P.platformKey,{})?.posidKey;return!T.isEmptyString(M)&&!T.isEmptyString(r.pageId)&&(b[M]=k),P}),h[r.pageId]=b,e.debug("prepare to save setting =>",{setting:ne(h)}),await a(h),X.success(t("main.opt.success"))}catch(v){e.error(t("main.opt.failure")+"=>",v),X.error(t("main.opt.failure")+"=>"+v)}},d=()=>{X.warning(t("import.v081.warn"))};return st(async()=>{const g=A.emptyOrDefault(o.id,po()),v=await Ln(g);if(r.pageId=v,!T.isEmptyString(r.pageId)){r.siyuanPost=await i.getBlockByID(r.pageId);const k=A.emptyOrDefault(r.siyuanPost?.content,r.pageId);m.value=`å°†å¯¹æ–‡æ¡£ã€Œ${k}ã€è¿›è¡Œä¿®å¤`}const h=await s(),b=h.setting;r.dynamicConfigArray=h.dynamicConfigArray;const P=se.getProperty(b,r.pageId,{});r.dynamicConfigArray.forEach(k=>{let E="";const H=se.getProperty(b,k.platformKey,{})?.posidKey;!T.isEmptyString(H)&&!T.isEmptyString(r.pageId)&&(E=se.getProperty(P,H)),r.postIdMap[k.platformKey]=E})}),(g,v)=>{const h=Ne,b=Ue,P=Ce,k=Fo,E=Se,M=nt;return _(),$("div",null,[f(h,{class:"top-tip",title:u(t)("post.bind.auto.tips"),type:"error",closable:!1},null,8,["title"]),f(P,null,{default:y(()=>[f(b,{modelValue:r.pageId,"onUpdate:modelValue":v[0]||(v[0]=H=>r.pageId=H),placeholder:"è¯·è¾“å…¥éœ€è¦ä¿®å¤çš„æ–‡æ¡£æ ¹ ID"},null,8,["modelValue"])]),_:1}),f(k,{"border-style":"dashed"}),u(T).isEmptyString(r.pageId)?(_(),$("div",Nf,[f(h,{class:"top-tip",title:u(t)("post.bind.auto.error"),type:"warning",closable:!1},null,8,["title"])])):(_(),S(M,{key:1,"label-width":"85px",class:"post-bind-form",ref_key:"ruleFormRef",ref:n,model:l,rules:c,"status-icon":""},{default:y(()=>[f(h,{class:"top-tip",title:m.value,type:"warning",closable:!1},null,8,["title"]),r.dynamicConfigArray.length>0?(_(),$("div",Hf,[(_(!0),$(ke,null,Ie(r.dynamicConfigArray,(H,B)=>Li((_(),S(P,{key:B,label:H.platformName},{default:y(()=>[f(b,{modelValue:r.postIdMap[H.platformKey],"onUpdate:modelValue":D=>r.postIdMap[H.platformKey]=D},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"])),[[wn,H.isEnabled&&H.isEnabled]])),128))])):(_(),$("div",Lf,[f(h,{class:"top-tip",title:u(t)("post.bind.auto.empty"),type:"info",closable:!1},null,8,["title"])])),f(P,null,{default:y(()=>[f(E,{type:"primary",onClick:v[1]||(v[1]=H=>w(n.value))},{default:y(()=>[V(R(u(t)("post.bind.conf.save")),1)]),_:1}),f(E,{type:"warning",onClick:d},{default:y(()=>[V(R(u(t)("post.bind.conf.v081")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"]))])}}}),Gf=ge(Rf,[["__scopeId","data-v-cd7023bf"]]),Bf={class:"locale-changer"},jf=J({__name:"ChangeLocal",async setup(p){let e,t;const o=L("change-local"),{getSetting:s,updateSetting:a}=pe(),{t:i,locale:n}=Z(),l=[{value:"zh_CN",label:"ç®€ä½“ä¸­æ–‡"},{value:"en_US",label:"English"}],c=([e,t]=ve(()=>s()),e=await e,t(),e),r=async m=>{n.value=m,c.lang=m,await a(c),o.info("lang changed to",m)};return Ws(()=>{c?.lang&&(n.value=c?.lang)}),(m,w)=>{const d=it,g=at,v=Ce,h=nt;return _(),$("div",Bf,[f(h,{"label-width":"85px"},{default:y(()=>[f(v,{label:u(i)("lang.choose")},{default:y(()=>[f(g,{modelValue:u(n),"onUpdate:modelValue":w[0]||(w[0]=b=>hs(n)?n.value=b:null),placeholder:u(i)("lang.choose.placeholder"),onChange:r},{default:y(()=>[(_(),$(ke,null,Ie(l,(b,P)=>f(d,{key:P,label:b.label,value:b.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})])}}}),El=J({__name:"SiyuanSetting",setup(p){const{t:e}=Z(),{getSiyuanSetting:t}=qi(),o=t();return(s,a)=>{const i=Ue,n=Ce,l=nt;return _(),S(l,{"label-width":"125px",class:"siyuan-setting-form"},{default:y(()=>[f(n,{label:u(e)("setting.blog.siyuan.apiurl"),prop:"apiUrl"},{default:y(()=>[f(i,{modelValue:u(o).apiUrl,"onUpdate:modelValue":a[0]||(a[0]=c=>u(o).apiUrl=c),autocomplete:"off",placeholder:u(e)("setting.blog.siyuan.apiurl.tip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),f(n,{label:u(e)("setting.blog.siyuan.password"),prop:"pwd"},{default:y(()=>[f(i,{modelValue:u(o).password,"onUpdate:modelValue":a[1]||(a[1]=c=>u(o).password=c),type:"password",autocomplete:"off",placeholder:u(e)("setting.blog.siyuan.password.tip"),"show-password":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})}}}),Kf=J({__name:"AiSetting",setup(p){const{t:e}=Z(),{getPublishPreferenceSetting:t}=Tt(),o=t();return(s,a)=>{const i=Ue,n=Ce,l=Ne,c=nt;return _(),S(c,{"label-width":"135px",class:"ai-setting-form"},{default:y(()=>[f(n,{label:u(e)("pref.setting.aicode")},{default:y(()=>[f(i,{modelValue:u(o).experimentalAICode,"onUpdate:modelValue":a[0]||(a[0]=r=>u(o).experimentalAICode=r),type:"password",autocomplete:"off",placeholder:u(e)("pref.setting.aicode.tip"),disabled:u(o).experimentalUseSiyuanNoteAIConfig},null,8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),f(n,{label:u(e)("pref.setting.ai.baseurl")},{default:y(()=>[f(i,{modelValue:u(o).experimentalAIBaseUrl,"onUpdate:modelValue":a[1]||(a[1]=r=>u(o).experimentalAIBaseUrl=r),autocomplete:"off",placeholder:u(e)("pref.setting.ai.baseurl.tip"),disabled:u(o).experimentalUseSiyuanNoteAIConfig},null,8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),f(n,{label:u(e)("pref.setting.ai.proxy.url")},{default:y(()=>[f(i,{modelValue:u(o).experimentalAIProxyUrl,"onUpdate:modelValue":a[2]||(a[2]=r=>u(o).experimentalAIProxyUrl=r),autocomplete:"off",placeholder:u(e)("pref.setting.ai.proxy.url.tip"),disabled:u(o).experimentalUseSiyuanNoteAIConfig},null,8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),u(o).experimentalUseSiyuanNoteAIConfig?(_(),S(n,{key:0},{default:y(()=>[f(l,{closable:!1,title:u(e)("config.ai.use.siyuan"),class:"form-item-tip",type:"warning"},null,8,["title"])]),_:1})):F("",!0),a[3]||(a[3]=C("div",{class:"form-item-bottom"},null,-1))]),_:1})}}}),zf=ge(Kf,[["__scopeId","data-v-8f19859b"]]),Jf={key:0},Wf=J({__name:"PreferenceSetting",setup(p){const e=L("preference-setting"),{t}=Z(),{getPublishPreferenceSetting:o}=Tt(),{isInSiyuanWin:s,isInSiyuanWidget:a}=pt(),i=o(),n=s()||a()&&T.isEmptyString(Hn()),l=()=>c(),c=async()=>{const r=i.value;if(e.debug(`val=>${r.allowChangeSlug}`),r.allowChangeSlug!==!0){const m=await vt.confirm(t("preference.setting.allowChangeSlug.tips"),{type:"error",icon:ze(Bl),confirmButtonText:t("main.opt.ok"),cancelButtonText:t("main.opt.cancel")});return e.debug("confirm result=>",m),m==="confirm"}return!0};return(r,m)=>{const w=cs,d=Ce,g=Fo,v=nt;return _(),S(v,{inline:"","label-width":"125px",class:"publish-preference-setting-form"},{default:y(()=>[f(d,{label:u(t)("preference.setting.fixTitle")},{default:y(()=>[f(w,{modelValue:u(i).fixTitle,"onUpdate:modelValue":m[0]||(m[0]=h=>u(i).fixTitle=h)},null,8,["modelValue"])]),_:1},8,["label"]),f(d,{label:u(t)("preference.setting.keepTitle")},{default:y(()=>[f(w,{modelValue:u(i).keepTitle,"onUpdate:modelValue":m[1]||(m[1]=h=>u(i).keepTitle=h)},null,8,["modelValue"])]),_:1},8,["label"]),f(d,{label:u(t)("preference.setting.removeH1")},{default:y(()=>[f(w,{modelValue:u(i).removeFirstH1,"onUpdate:modelValue":m[2]||(m[2]=h=>u(i).removeFirstH1=h)},null,8,["modelValue"])]),_:1},8,["label"]),f(d,{label:u(t)("preference.setting.removeWidgetTag")},{default:y(()=>[f(w,{modelValue:u(i).removeMdWidgetTag,"onUpdate:modelValue":m[3]||(m[3]=h=>u(i).removeMdWidgetTag=h)},null,8,["modelValue"])]),_:1},8,["label"]),u(n)?(_(),$("div",Jf,[f(g,{"border-style":"dashed",class:"psd"}),f(d,{label:u(t)("preference.setting.showDocQuickMenu")},{default:y(()=>[f(w,{modelValue:u(i).showDocQuickMenu,"onUpdate:modelValue":m[4]||(m[4]=h=>u(i).showDocQuickMenu=h)},null,8,["modelValue"])]),_:1},8,["label"]),f(d,{label:u(t)("preference.setting.showQuickMenu")},{default:y(()=>[f(w,{modelValue:u(i).showQuickMenu,"onUpdate:modelValue":m[5]||(m[5]=h=>u(i).showQuickMenu=h)},null,8,["modelValue"])]),_:1},8,["label"]),f(d,{label:u(t)("preference.setting.showSingleMenu")},{default:y(()=>[f(w,{modelValue:u(i).showSingleMenu,"onUpdate:modelValue":m[6]||(m[6]=h=>u(i).showSingleMenu=h)},null,8,["modelValue"])]),_:1},8,["label"]),f(d,{label:u(t)("preference.setting.showBatchMenu")},{default:y(()=>[f(w,{modelValue:u(i).showBatchMenu,"onUpdate:modelValue":m[7]||(m[7]=h=>u(i).showBatchMenu=h)},null,8,["modelValue"])]),_:1},8,["label"]),f(g,{"border-style":"dashed",class:"psd"}),f(d,{label:u(t)("preference.setting.showAIMenu")},{default:y(()=>[f(w,{modelValue:u(i).showAIMenu,"onUpdate:modelValue":m[8]||(m[8]=h=>u(i).showAIMenu=h)},null,8,["modelValue"])]),_:1},8,["label"]),f(d,{label:u(t)("preference.setting.showExtendMenu")},{default:y(()=>[f(w,{modelValue:u(i).showExtendMenu,"onUpdate:modelValue":m[9]||(m[9]=h=>u(i).showExtendMenu=h)},null,8,["modelValue"])]),_:1},8,["label"]),f(d,{label:u(t)("preference.setting.showArticleManageMenu")},{default:y(()=>[f(w,{modelValue:u(i).showArticleManageMenu,"onUpdate:modelValue":m[10]||(m[10]=h=>u(i).showArticleManageMenu=h)},null,8,["modelValue"])]),_:1},8,["label"]),f(d,{label:u(t)("preference.setting.ignoreBlockRef")},{default:y(()=>[f(w,{modelValue:u(i).ignoreBlockRef,"onUpdate:modelValue":m[11]||(m[11]=h=>u(i).ignoreBlockRef=h)},null,8,["modelValue"])]),_:1},8,["label"]),f(g,{"border-style":"dashed",class:"psd"}),f(d,{label:u(t)("preference.setting.allowChangeSlug")},{default:y(()=>[f(w,{modelValue:u(i).allowChangeSlug,"onUpdate:modelValue":m[12]||(m[12]=h=>u(i).allowChangeSlug=h),"before-change":l},null,8,["modelValue"])]),_:1},8,["label"])])):F("",!0)]),_:1})}}}),Ff=ge(Wf,[["__scopeId","data-v-7695f977"]]),qf=J({__name:"GeneralSetting",setup(p){const{t:e}=Z();return(t,o)=>{const s=Mn,a=zf,i=El,n=jf,l=Gf,c=xn,r=He;return _(),S(r,{title:u(e)("service.tab.change.local")},{default:y(()=>[f(c,{"tab-position":"left",class:"general-setting-box"},{default:y(()=>[f(s,{label:u(e)("service.tab.change.local")},{default:y(()=>[f(Ff)]),_:1},8,["label"]),f(s,{label:u(e)("sys.config.ai")},{default:y(()=>[f(a)]),_:1},8,["label"]),f(s,{label:u(e)("siyuan.config.setting")},{default:y(()=>[f(i)]),_:1},8,["label"]),f(s,{label:u(e)("lang.choose")},{default:y(()=>[f(n)]),_:1},8,["label"]),f(s,{label:u(e)("service.tab.post.bind")},{default:y(()=>[f(l)]),_:1},8,["label"])]),_:1})]),_:1},8,["title"])}}}),Yf=ge(qf,[["__scopeId","data-v-52ea28ed"]]),Xf=""+new URL("assets/icon.png",import.meta.url).href,Qf={id:"about-box"},Zf={class:"notice"},e1={class:"title"},t1={class:"param slogan"},s1={class:"param"},o1=["href"],a1={class:"third-libs"},i1={class:"lib-container"},n1={class:"lib-item"},l1={key:0,class:"lib-item"},r1=J({__name:"About",setup(p){const{t:e}=Z(),t=re({v:$n,deps:Object.entries(Mr).slice(0,24)});return(o,s)=>{const a=He;return _(),S(a,{title:"å…³äºŽä½œè€…"},{default:y(()=>[C("div",Qf,[s[5]||(s[5]=C("div",{class:"logo"},[C("img",{src:Xf,alt:"logo"})],-1)),C("div",Zf,[C("p",e1,"å‘å¸ƒå·¥å…· v"+R(t.v),1),C("div",t1,[C("span",null,R(u(e)("slogan.make.written.fun")),1)]),s[3]||(s[3]=C("div",{class:"space"},null,-1)),C("div",s1,[s[0]||(s[0]=V("Created by ",-1)),C("a",{href:u(Er),target:"_blank"},"terwer",8,o1)]),s[4]||(s[4]=C("div",{class:"space"},null,-1)),C("div",a1,[s[2]||(s[2]=C("div",{class:"lib-title"},"Thanks for third party libraries:",-1)),C("div",i1,[(_(!0),$(ke,null,Ie(t.deps,i=>(_(),$("div",n1,R(i),1))),256)),t.deps.length>=24?(_(),$("div",l1,[...s[1]||(s[1]=[C("a",{target:"_blank",href:"https://github.com/terwer/siyuan-plugin-publisher/blob/main/package.json#L54"},"more... ",-1)])])):F("",!0)])])])])]),_:1})}}}),c1=ge(r1,[["__scopeId","data-v-ed0503d4"]]),p1={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function g1(p,e){return _(),$("svg",p1,[...e[0]||(e[0]=[C("path",{fill:"currentColor",d:"M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h6l2 2h8q.825 0 1.413.588T22 8v10q0 .825-.587 1.413T20 20zm7-3h2v-4.2l1.6 1.6L16 13l-4-4l-4 4l1.4 1.4l1.6-1.6z"},null,-1)])])}const d1=ze({name:"material-symbols-drive-folder-upload",render:g1}),u1={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"};function m1(p,e){return _(),$("svg",u1,[...e[0]||(e[0]=[C("path",{fill:"currentColor",d:"M160 96a96 96 0 1 1 192 0a96 96 0 1 1-192 0m80 152v264l-48.4-24.2c-20.9-10.4-43.5-17-66.8-19.3l-96-9.6C12.5 457.2 0 443.5 0 427V224c0-17.7 14.3-32 32-32h30.3c63.6 0 125.6 19.6 177.7 56m32 264V248c52.1-36.4 114.1-56 177.7-56H480c17.7 0 32 14.3 32 32v203c0 16.4-12.5 30.2-28.8 31.8l-96 9.6c-23.2 2.3-45.9 8.9-66.8 19.3z"},null,-1)])])}const h1=ze({name:"fa6-solid-book-open-reader",render:m1}),f1={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function y1(p,e){return _(),$("svg",f1,[...e[0]||(e[0]=[C("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h8v2H5v14h14v-8h2v8q0 .825-.587 1.413T19 21zm1-4h12l-3.75-5l-3 4L9 13zm11-8V7h-2V5h2V3h2v2h2v2h-2v2z"},null,-1)])])}const b1=ze({name:"material-symbols-add-photo-alternate-outline",render:y1}),w1={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function _1(p,e){return _(),$("svg",w1,[...e[0]||(e[0]=[C("path",{fill:"currentColor",d:"m2.45 10.575l4.2-4.2q.35-.35.825-.5t.975-.05l1.3.275Q8.4 7.7 7.625 9t-1.5 3.15zm5.125 2.275q.575-1.8 1.563-3.4t2.387-3q2.2-2.2 5.025-3.287t5.275-.663q.425 2.45-.65 5.275T17.9 12.8q-1.375 1.375-3 2.388t-3.425 1.587zm6.9-3q.575.575 1.413.575T17.3 9.85t.575-1.412t-.575-1.413t-1.412-.575t-1.413.575t-.575 1.413t.575 1.412m-.7 12.025l-1.6-3.675q1.85-.725 3.163-1.5t2.912-2.125l.25 1.3q.1.5-.05.988t-.5.837zM4.05 16.05q.875-.875 2.125-.888t2.125.863t.875 2.125t-.875 2.125q-.625.625-2.087 1.075t-4.038.8q.35-2.575.8-4.025T4.05 16.05"},null,-1)])])}const v1=ze({name:"material-symbols-rocket-launch",render:_1}),P1={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function T1(p,e){return _(),$("svg",P1,[...e[0]||(e[0]=[C("path",{fill:"currentColor",d:"M18 11h-8V9h8m2-5v12H8V4zm0-2H8c-1.1 0-2 .9-2 2v12a2 2 0 0 0 2 2h12c1.11 0 2-.89 2-2V4a2 2 0 0 0-2-2M4 6H2v14a2 2 0 0 0 2 2h14v-2H4z"},null,-1)])])}const k1=ze({name:"mdi-minus-box-multiple-outline",render:T1});class fn{static async preCheckPicgoPlugin(){const{kernelApi:e}=Ge();return await yi(e,"/data/plugins/siyuan-plugin-picgo/plugin.json","text")}static async preCheckBlogPlugin(){const{kernelApi:e}=Ge();return await yi(e,"/data/plugins/siyuan-blog/plugin.json","text")}}const S1={class:"admin-box"},C1={id:"post-list"},E1={class:"search-btn"},A1={class:"value"},I1={key:0,class:"data-empty-box"},U1={key:1,class:"data-box"},x1={m:"4",style:{"padding-left":"10px"},class:"tb-extend"},M1={m:"t-0 b-2"},D1={m:"t-0 b-2"},O1={m:"t-0 b-2"},$1={m:"t-0 b-2"},V1={m:"t-0 b-2"},N1={m:"t-0 b-2"},H1={key:0},L1=["onClick"],R1={class:"el-icon"},G1=["innerHTML"],B1={key:1},j1={key:0,class:"yaml-count-sign"},hi=8,K1=J({__name:"Admin",setup(p){const{t:e}=Z(),{kernelApi:t,blogApi:o}=Ge(),{isInSiyuanWidget:s,isInSiyuanOrSiyuanNewWin:a}=pt(),i=kt(),{getReadOnlyPublishPreferenceSetting:n}=Tt(),{getReadOnlySiyuanSetting:l}=qi(),{getSetting:c}=pe(),r=L("admin"),m=Y(!1),w=Y("prev,pager,next"),d=Y(""),g=Y([]),v=Y(!1),h=[],b=Y(0),P=Y(0),k=Y(1),E=Y(!1),M=Y(!1),H=Y([]),B=l(),D=Y(!1),G=Y(""),x=Y(""),ee=(W,ae)=>{const Ee=W?g.value.filter(I(W)):g.value;ae(Ee)},I=W=>ae=>ae.value.toLowerCase().indexOf(W.toLowerCase())===0,N=W=>{},oe=()=>{ut()},j=W=>{ut()},O=async W=>{k.value=W,await ut()},he=async W=>{k.value=W,await ut()},$e=async W=>{k.value=W,await ut()},De=(W,ae)=>{G.value=W,x.value=ae,D.value=!0},qe=(W,ae)=>{const Oe=`${window.origin}${Wi}#${ae}`;r.debug(`Publisher will go to ${Oe}`),De(W,Oe)},ye=(W,ae)=>{const Ee=`${B.value.apiUrl}/plugins/siyuan-blog/app/#${ae}`;r.debug(`Blog will go to ${Ee}`),De(W,Ee)},dt=(W,ae)=>{const Ee=`${B.value.apiUrl}/plugins/siyuan-plugin-picgo/#${ae}`;r.debug(`Picgo will go to ${Ee}`),De(W,Ee)},We=W=>{const ae=`${B.value.apiUrl}/plugins/siyuan-plugin-picgo/#${W}`;r.debug(`Picgo will go to ${ae}`),window.open(ae)},le=(W,ae)=>{const Ee=ae.postid;qe("æžé€Ÿå‘å¸ƒ",`/publish/quickSelect?id=${Ee}`)},Ve=(W,ae)=>{const Ee=ae.postid;qe("å•ä¸ªå‘å¸ƒ",`/publish/singlePublish?id=${Ee}`)},vs=async(W,ae)=>{const Ee=ae.postid;qe("å¸¸è§„å‘å¸ƒ",`/publish/singlePublish/doPublish/${W}/${Ee}?method=edit`)},q=(W,ae)=>{const Ee=ae.postid;qe("æ‰¹é‡å‘å¸ƒ",`/publish/batchPublish?id=${Ee}`)},K=(W,ae)=>{const Ee=window,Oe=ae.postid;if(!ae.isShared){X.warning(e("message.publish.notShared")),Ee.event.stopPropagation();return}ye("æ–‡ç« é¢„è§ˆ",`/post/${Oe}`)},Le=(W,ae)=>{const Ee=ae.postid;a()?dt("å›¾åºŠ",`/?pageId=${Ee}`):We(`/?pageId=${Ee}`)},Et=async(W,ae,Ee)=>{},ut=async()=>{m.value=!0;let W=1,ae=[],Ee=!1;try{const Oe=await Ln();if(s()&&!T.isEmptyString(Oe))if(W=await t.getSubdocCount(Oe,v.value),W>1&&(Ee=!0),Ee){const bt=await t.getSubdocs(Oe,k.value-1,hi,d.value,v.value);for(let Ye=0;Ye<bt.length;Ye++){const Kt=bt[Ye].root_id,wt=await o.getPost(Kt);ae.push(wt)}r.info("æŒ‚ä»¶æ¨¡å¼ï¼Œæœ‰å­æ–‡æ¡£ï¼Œå±•ç¤ºå­æ–‡æ¡£")}else r.info("æŒ‚ä»¶æ¨¡å¼ï¼Œæ²¡æœ‰å­æ–‡æ¡£ï¼Œç›´æŽ¥æ˜¾ç¤ºå‘å¸ƒé¡µé¢"),await i.push({path:"/publish/singlePublish",query:{id:Oe}});else W=await o.getRecentPostsCount(d.value,v.value),ae=await o.getRecentPosts(hi,k.value-1,d.value,v.value),r.info("æ— æ³•èŽ·å–é¡µé¢IDï¼Œå¯èƒ½æ˜¯æµè§ˆå™¨çŽ¯å¢ƒæˆ–è€…æµè§ˆå™¨æ’ä»¶å±•ç¤ºæ–‡æ¡£åˆ—è¡¨");r.debug("postList=>",ae),P.value=W,h.splice(0,h.length);for(let bt=0;bt<ae.length;bt++){const Ye=ae[bt];let At=Ye.title;n().value.fixTitle&&(At=Dt.removeTitleNumber(At).replace(/\.md/g,""));const wt=T.getByLength(At,Ar,!1),Ts=ko.mdToHtml(Ye.description),ks=Ye?.shortDesc,Zt=te.safeParse(Ye.attrs,{}),z=Zt["custom-publish-status"]==="publish",es=Zt["custom-expires"]&&Zt["custom-expires"]-Date.now()<0,ts=await t.getBlockAttrs(Ye.postid),mo={},Qi={};for(let ho in ts){if(!ho.startsWith("custom-")||!ho.endsWith("-yaml"))continue;const ea=ho.replace("-yaml","").replace("custom-","").replace("-","_");mo[ea]=ts[ho],Qi[ea]=Zs(H.value,ea)}const Al={postid:Ye.postid,title:At,shortTitle:wt,dateCreated:Ae.formatIsoToZhDate(Ye.dateCreated.toISOString(),!0),mt_keywords:Ye.mt_keywords,description:A.emptyOrDefault(Ts,"æš‚æ— å†…å®¹"),shortDesc:A.emptyOrDefault(ks,"æš‚æ— å†…å®¹"),isShared:z&&!es,yamlCount:Object.keys(mo).length,yamlAttrs:mo,dynCfgs:Qi};h.push(Al)}}catch(Oe){r.error(e("main.opt.failure")+"=>",Oe),X.error(e("main.opt.failure")+"=>"+Oe)}finally{m.value=!1}b.value++},Ps=async()=>{E.value=await fn.preCheckPicgoPlugin(),M.value=await fn.preCheckBlogPlugin();const W=await c(),ae=te.safeParse(W[Me],{});H.value=ae?.totalCfg||[],await ut(),r.debug("Post init page=>",h)};return Ws(async()=>{await Ps()}),(W,ae)=>{const Ee=hr,Oe=Se,bt=fr,Ye=Ht,At=qs,Kt=Un,wt=Gi,Ts=In,ks=yr,Zt=Ji;return _(),$("div",S1,[C("div",C1,[C("div",E1,[f(Ee,{class:"s-input",modelValue:d.value,"onUpdate:modelValue":ae[0]||(ae[0]=z=>d.value=z),"fetch-suggestions":ee,"popper-class":"my-autocomplete",placeholder:"è¯·è¾“å…¥å…³é”®å­—",onChange:oe,onSelect:N},{default:y(({item:z})=>[C("div",A1,R(z.value),1)]),_:1},8,["modelValue"]),f(Oe,{class:"s-btn",type:"primary",onClick:oe},{default:y(()=>[...ae[3]||(ae[3]=[V("æœç´¢",-1)])]),_:1}),f(bt,{class:"s-filter-item s-filter-published",size:"large",modelValue:v.value,"onUpdate:modelValue":ae[1]||(ae[1]=z=>v.value=z),onChange:j},{default:y(()=>[...ae[4]||(ae[4]=[V("å·²å‘å¸ƒ ",-1)])]),_:1},8,["modelValue"])]),m.value?(_(),$("div",I1,[f(Ye,{loading:m.value,rows:5,animated:""},null,8,["loading"])])):(_(),$("div",U1,[(_(),S(Ts,{class:"tb-data",data:h,key:b.value,border:"",stripe:"","highlight-current-row":"","empty-text":"ç¬”è®°æ•°æ®ä¸ºç©ºæˆ–è€…æ€æºç¬”è®°æœªå¯åŠ¨ï¼",onRowClick:Et,style:{width:"100%","min-width":"600px"}},{default:y(()=>[f(Kt,{type:"expand"},{default:y(z=>[C("div",x1,[C("p",M1,"ID: "+R(z.row.postid),1),C("p",D1,"å‘å¸ƒæ—¶é—´: "+R(z.row.dateCreated),1),C("p",O1,"æ ‡é¢˜: "+R(z.row.title),1),C("p",$1," æ ‡ç­¾: "+R(z.row.mt_keywords===""?"æš‚æ— æ ‡ç­¾":z.row.mt_keywords),1),C("p",V1,"æ‘˜è¦: "+R(z.row.shortDesc),1),C("p",N1,[ae[5]||(ae[5]=V(" å¹³å°: ",-1)),z.row.yamlCount>0?(_(),$("span",H1,[(_(!0),$(ke,null,Ie(z.row.yamlAttrs,(es,ts)=>(_(),$("span",{key:ts,class:"box-item"},[C("a",{onClick:mo=>vs(ts.toString(),z.row)},[f(At,null,{default:y(()=>[C("i",R1,[C("span",{innerHTML:z.row.dynCfgs[ts]?.platformIcon??u(we).iconOTRemove},null,8,G1)]),V(" "+R(z.row.dynCfgs[ts]?.platformName??"[å·²åˆ é™¤]"),1)]),_:2},1024)],8,L1)]))),128))])):(_(),$("span",B1,"æš‚æ— å¹³å°"))])])]),_:1}),f(Kt,{prop:"title"},{header:y(()=>[...ae[6]||(ae[6]=[C("div",{style:{"text-align":"center"}},"æ ‡é¢˜",-1)])]),default:y(z=>[f(wt,{content:z.row.yamlCount>0?"æ–‡ç« å·²å‘å¸ƒåˆ°ï¼š"+Object.keys(z.row.yamlAttrs).toString():"å°šæœªå‘å¸ƒ",class:"box-item",effect:"light",placement:"right","popper-class":"publish-menu-tooltip"},{default:y(()=>[C("span",null,R(z.row.title),1)]),_:2},1032,["content"]),z.row.yamlCount>0?(_(),$("sup",j1,R(z.row.yamlCount),1)):F("",!0)]),_:1}),f(Kt,{align:"center",width:"420"},{header:y(()=>[...ae[7]||(ae[7]=[C("div",{style:{"text-align":"center"}},"æ“ä½œ",-1)])]),default:y(z=>[f(Oe,{size:"small",onClick:es=>le(z.$index,z.row)},{default:y(()=>[f(u(v1)),ae[8]||(ae[8]=V(" Â é—ªå‘ ",-1))]),_:1},8,["onClick"]),f(Oe,{size:"small",onClick:es=>Ve(z.$index,z.row)},{default:y(()=>[f(u(d1)),ae[9]||(ae[9]=V(" Â å•å‘ ",-1))]),_:1},8,["onClick"]),f(Oe,{size:"small",onClick:es=>q(z.$index,z.row)},{default:y(()=>[f(u(k1)),ae[10]||(ae[10]=V(" Â æ‰¹å‘ ",-1))]),_:1},8,["onClick"]),M.value&&z.row.isShared?(_(),S(Oe,{key:0,size:"small",onClick:es=>K(z.$index,z.row)},{default:y(()=>[f(u(h1)),ae[11]||(ae[11]=V(" Â æŸ¥çœ‹ ",-1))]),_:1},8,["onClick"])):F("",!0),E.value?(_(),S(Oe,{key:1,size:"small",onClick:es=>Le(z.$index,z.row)},{default:y(()=>[f(u(b1)),ae[12]||(ae[12]=V(" Â å›¾åºŠ ",-1))]),_:1},8,["onClick"])):F("",!0)]),_:1})]),_:1})),f(ks,{small:"",background:"",layout:w.value,total:P.value,class:"mt-4","page-size":hi,onPrevClick:O,onNextClick:he,"current-page":k.value,onCurrentChange:$e},null,8,["layout","total","current-page"])]))]),f(Zt,{modelValue:D.value,"onUpdate:modelValue":ae[2]||(ae[2]=z=>D.value=z),size:"85%",title:G.value,direction:"rtl","destroy-on-close":!0},{default:y(()=>[f(bl,{src:x.value},null,8,["src"])]),_:1},8,["modelValue","title"])])}}}),z1=ge(K1,[["__scopeId","data-v-37aac0cd"]]),J1={key:1},W1={class:"platform-title"},F1={class:"platform-desc"},q1={class:"one-key-preview"},Y1={class:"icon-list"},X1={class:"el-icon"},Q1=["innerHTML"],Z1=J({__name:"QuickPublishSelectPlatform",props:{id:{type:String,default:""}},setup(p){const e=L("quick-publish-select-platform"),t=new ue,{getPostPreviewUrl:o}=ro(),{kernelApi:s}=Ge(),{getReadOnlyPublishPreferenceSetting:a}=Tt(),i=p,{t:n}=Z(),{query:l}=tt(),c=kt(),{getSetting:r}=pe(),m=re({isInit:!1,pageId:T.isEmptyString(l.id)?i.id:l.id,enabledConfigArray:[],postInfo:{},postMeta:{},unpublishCount:0}),w=Y(""),d=(E,M)=>{E.stopPropagation();const H=`/workers/quickPublish/${M}/${m.pageId}`;e.info("will go to =>",H);const B={path:H,query:{showBack:"true"}};c.push(B)},g=E=>{const M=_e(E),H=se.getProperty(m.postMeta,M);return!T.isEmptyString(H)},v=async(E,M)=>{if(E.stopPropagation(),!g(M)){m.unpublishCount++;return}const B=await be.getCfg(M),D=await be.getAdaptor(M,B),G=A.blogApi(t,D),x=await o(G,m.pageId,B);window.open(x)},h=async E=>{vt.confirm("å°†åœ¨é»˜è®¤æµè§ˆå™¨æ‰“å¼€æ‰€æœ‰å·²å‘å¸ƒå¹³å°çš„æ–‡ç« é¢„è§ˆé¡µé¢ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ","æ¸©é¦¨æç¤º",{type:"error",icon:ze(Ni),confirmButtonText:n("main.opt.ok"),cancelButtonText:n("main.opt.cancel")}).then(async()=>{for(const M of m.enabledConfigArray)await v(E,M.platformKey);(m.enabledConfigArray.length===0||m.unpublishCount===m.enabledConfigArray.length)&&(m.unpublishCount=0,X.error("æ–‡ç« æœªå‘å¸ƒè¿‡ï¼Œè¯·è‡³å°‘å‘å¸ƒåˆ°ä¸€ä¸ªå¹³å°ï¼"))}).catch(()=>{})},b=async()=>{const E=await r(),H=te.safeParse(E[Me],{})?.totalCfg||[];if(m.enabledConfigArray=H.filter(D=>D.isEnabled&&D.isAuth),m.postMeta=se.getProperty(E,m.pageId,{}),m.postInfo=await s.getBlockByID(m.pageId),a().value.fixTitle){const D=Dt.removeTitleNumber(m.postInfo.content).replace(/\.md/g,"");w.value=D}else w.value=m.postInfo.content},P=Y(!1),{loadingTime:k}=co(P);return Ws(async()=>{await b(),m.isInit=!0,P.value=!0}),(E,M)=>{const H=Qs,B=Ht,D=Ne,G=Se,x=qs,ee=Ki,I=Fs,N=ji,oe=Bi,j=He;return _(),$(ke,null,[f(H,{"loading-time":u(k),style:{padding:"0 24px"}},null,8,["loading-time"]),m.isInit?(_(),$("div",J1,[f(j,{title:"æ–‡ç« æžé€Ÿå‘å¸ƒ"},{default:y(()=>[C("div",W1,R(w.value),1),C("div",F1,[C("p",null,[f(D,{class:"desc-tip",type:"error",title:"ç‚¹å‡»å›¾æ ‡å³å¯æžé€Ÿå‘å¸ƒæˆ–è€…æ›´æ–° ðŸš€ã€‚"})])]),C("div",q1,[f(G,{type:"primary",size:"small",onClick:h},{default:y(()=>[...M[0]||(M[0]=[V("ä¸€é”®é¢„è§ˆ",-1)])]),_:1})]),f(oe,{gutter:20,class:"row-box"},{default:y(()=>[(_(!0),$(ke,null,Ie(m.enabledConfigArray,O=>(_(),S(N,{span:8,sm:12,xs:12,md:12,lg:8,xl:8,title:O.platformName,class:"platform-select-card"},{default:y(()=>[f(I,{class:"card-item"},{default:y(()=>[C("div",Y1,[f(ee,{type:g(O.platformKey)?"success":"danger",value:g(O.platformKey)?"é¢„è§ˆ":"æœªå‘å¸ƒ",class:as(g(O.platformKey)?"item published-item":"item"),onClick:Ks(he=>v(he,O.platformKey),["stop"])},{default:y(()=>[f(x,{class:"define-item",onClick:Ks(he=>d(he,O.platformKey),["stop"])},{default:y(()=>[C("i",X1,[C("span",{innerHTML:O?.platformIcon},null,8,Q1)]),V(" "+R(u(Nt).longPlatformName(O?.platformName,11)),1)]),_:2},1032,["onClick"])]),_:2},1032,["type","value","class","onClick"])])]),_:2},1024)]),_:2},1032,["title"]))),256))]),_:1})]),_:1})])):(_(),S(B,{key:0,class:"placeholder platform-skt",rows:12,animated:""}))],64)}}}),ey=ge(Z1,[["__scopeId","data-v-4e2a2009"]]),ty=[{path:"/publish/quickSelect",component:ey},{path:"/workers/quickPublish/:key/:id",component:zp},{path:"/publish/singlePublish",component:og},{path:"/publish/singlePublish/doPublish/:key/:id",component:Zg},{path:"/",component:z1},{path:"/publish/batchPublish",component:Ad},{path:"/ai/chat",component:$d},{path:"/test",component:Hd},{path:"/test/siyuan",component:Fd},{path:"/test/cnblogs",component:au},{path:"/test/wordpress",component:mu},{path:"/test/typecho",component:ku},{path:"/test/yuque",component:Ou},{path:"/test/zhihu",component:Ku},{path:"/test/csdn",component:em},{path:"/test/picgo",component:om},{path:"/test/other",component:lm},{path:"/test/chat",component:pm},{path:"/setting",component:dh},{path:"/setting/publish",component:_l},{path:"/setting/platform/quickadd/:type",component:wl},{path:"/setting/platform/add/:type",component:yh},{path:"/setting/platform/update/:key",component:_h},{name:"setting-platform-single",path:"/setting/platform/single/:key",component:Vf},{path:"/setting/general",component:Yf},{path:"/setting/siyuan",component:El},{path:"/about",component:c1}],sy=()=>er({history:tr(),routes:ty}),oy={"lang.choose":"è¯­è¨€é€‰æ‹©","lang.choose.placeholder":"è¯·é€‰æ‹©è¯­è¨€","theme.mode.choose":"åˆ‡æ¢æ¨¡å¼","theme.mode.dark":"æš—é»‘æ¨¡å¼","theme.mode.light":"æµ…è‰²æ¨¡å¼","service.tab.manage":"æ–‡ç« ç®¡ç†","service.tab.publish.service":"å‘å¸ƒæœåŠ¡","service.tab.publish.setting":"å‘å¸ƒé…ç½®","service.tab.platform.setting":"å¹³å°é…ç½®","service.tab.post.bind":"æ–‡ç« ç»‘å®š","service.tab.service.switch":"æœåŠ¡å¼€å…³","service.tab.change.local":"åå¥½è®¾ç½®","main.publish.editmode":"ç¼–è¾‘æ¨¡å¼","main.publish.editmode.simple":"ç®€æ´æ¨¡å¼","main.publish.editmode.complex":"è¯¦ç»†æ¨¡å¼","main.publish.editmode.source":"æºç æ¨¡å¼","main.publish.vuepress.tip":"æŽ¨èVuepressçš„V1ç‰ˆæœ¬ï¼Œé…åˆ vuepress-theme-vdoing ä½¿ç”¨ï¼ŒåŽç»­bugä¹Ÿåªä¼šå¯¹V1å’Œæ­¤ä¸»é¢˜è¿›è¡Œæ›´æ–°","main.publish.github.error.tip":"é…ç½®é”™è¯¯æˆ–è€…apiä¸å¯ç”¨ï¼Œè¯·æ£€æŸ¥ã€‚è‹¥ä¿®æ”¹è¿‡é…ç½®ï¼Œè¯·åˆ·æ–°é¡µé¢","main.publish.github":"å‘å¸ƒé¡µé¢","main.publish.github.tip":"è‡ªåŠ¨å°†æ–‡ç« çš„markdownæ–‡æœ¬å‘å¸ƒåˆ°Vuepresså¯¹åº”çš„Githubä»“åº“ï¼ˆéœ€è¦å…ˆè¿›è¡Œç›¸å…³é…ç½®ï¼‰","main.publish.github.no.tip":"æ‚¨æœªå¼€å¯Github pageså‘å¸ƒï¼Œè¯·åˆ‡æ¢æºç æ¨¡å¼å¤åˆ¶YAMLä»¥åŠMarkdownæ–‡æœ¬","main.publish.github.choose.path":"å‘å¸ƒç›®å½•","main.publish.github.published.path":"å‘å¸ƒè·¯å¾„","main.publish.github.choose.path.use.default":"é»˜è®¤ç›®å½•","main.publish.github.choose.path.use.default.tip":"ä½¿ç”¨é»˜è®¤ç›®å½•ï¼Œåˆ™é»˜è®¤æ‰€æœ‰æ–‡ç« éƒ½å‘å¸ƒåœ¨é…ç½®å¥½çš„é»˜è®¤ç›®å½•ä¸‹ï¼ˆå¯åœ¨å‘å¸ƒé…ç½®è®¾ç½®ï¼‰ï¼Œæ— éœ€æ¯æ¬¡å‘å¸ƒçš„æ—¶å€™æ¥é€‰æ‹©ç›®å½•ï¼Œå½“å‰å¹³å°çš„é»˜è®¤ç›®å½•ä¸ºï¼š","main.publish.github.choose.title":"æ–‡ä»¶åç§°","main.publish.github.choose.title.tip":"Vuepress-theme-vdoingæ”¯æŒæ–‡ä»¶ååŠ ä¸Šåºå·æ¥æ ‡è¯†ï¼Œå¦‚æžœä½ ä¸æ¸…æ¥šæ­¤ç”¨æ³•ï¼Œè¯·ä¸è¦ä¿®æ”¹æ–‡ä»¶å","main.publish.github.failure":"å‘å¸ƒå¤±è´¥ï¼Œè¯·è‡ªè¡Œå¤åˆ¶å³ä¾§æ–‡æœ¬","main.publish.see.preview":"ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹æœ€æ–°æ–‡ç« ","main.publish.see.md.preview":"ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹MDæ–‡ä»¶","main.publish.see.real.preview":"ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹æœ€æ–°æ–‡ç« ","main.publish.to.wordpress":"å‘å¸ƒåˆ°Wordpress","main.title":"æ–‡ç« æ ‡é¢˜","main.slug":"æ–‡ç« åˆ«å","main.auto.fetch.slug":"è‡ªåŠ¨ç”Ÿæˆåˆ«å","main.use.google.translate":"ä½¿ç”¨Googleç¿»è¯‘API","main.use.hash":"åˆ«ååŽç¼€","main.use.hash.tip":"ä¸ä½¿ç”¨hashä¼šå±•ç¤ºæ›´æœ‰æ„ä¹‰çš„urlï¼Œä½†æ˜¯å¯èƒ½å¯¼è‡´æ–‡ç« åˆ«åé‡å¤ï¼ˆåŽæžœæ˜¯Vuepressä¼šBuildå¤±è´¥é™¤éžæ‰‹åŠ¨è§£å†³åˆ«åå”¯ä¸€é—®é¢˜ï¼‰ï¼Œè¯·çŸ¥æ‚‰ã€‚","main.force.refresh":"åˆ·æ–°åˆ«å","main.force.refresh.tip":"ä¸ºäº†é˜²æ­¢è¯¯æ“ä½œæ›´æ–°åˆ«åï¼Œåˆ«åä¸ä¸ºç©ºçš„æ—¶å€™é»˜è®¤ä¸ä¼šæ›´æ–°åˆ«åï¼Œå¦‚éœ€æ›´æ–°ï¼Œè¯·å‹¾é€‰åˆ·æ–°åˆ«åã€‚","main.desc":"æ–‡ç« æ‘˜è¦","main.auto.fetch.desc":"è‡ªåŠ¨æå–æ‘˜è¦","main.create.time":"å‘å¸ƒæ—¶é—´","main.update.time":"æ›´æ–°æ—¶é—´","main.create.time.placeholder":"è¯·é€‰æ‹©å‘å¸ƒæ—¶é—´","main.update.time.placeholder":"è¯·é€‰æ‹©æ›´æ–°æ—¶é—´","main.tag":"æ–‡ç« æ ‡ç­¾","main.tag.new":"æ–°æ ‡ç­¾","main.tag.select":"è¯·é€‰æ‹©æ ‡ç­¾","main.auto.fetch.tag":"è‡ªåŠ¨æå–æ ‡ç­¾","main.tag.auto.switch":"è‡ªåŠ¨æ ‡ç­¾","main.tag.auto.switch.no.tip":"è‡ªåŠ¨æ ‡ç­¾å·²å…³é—­ï¼Œå°†ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆæ ‡ç­¾","main.tag.empty":"æš‚æ— æ ‡ç­¾","main.tag.close":"æ”¶èµ·é€‰é¡¹","main.cat":"æ–‡ç« åˆ†ç±»","main.cat.empty":"æš‚æ— åˆ†ç±»","main.cat.select":"è¯·é€‰æ‹©åˆ†ç±»","main.yaml.formatter":"YAML Formatter","main.siyuan.to.yaml":"æ–‡ç« å±žæ€§è½¬YAML","main.yaml.to.siyuan":"YAMLè½¬æ–‡ç« å±žæ€§","main.save.attr.to.siyuan":"ä¿å­˜å±žæ€§åˆ°æ€æº","main.copy":"å¤åˆ¶","main.publish":"å‘å¸ƒ","main.publish.loading":"å‘å¸ƒä¸­...","main.loading":"åŠ è½½ä¸­...","main.update":"æ›´æ–°","main.cancel":"å–æ¶ˆ","main.publish.oneclick.attr":"ä¸€é”®ç”Ÿæˆå±žæ€§","main.publish.oneclick.attr.finish":"å±žæ€§å·²ç”Ÿæˆ","main.publish.status.unpublish":"æœªå‘å¸ƒ","main.publish.status.published":"å·²å‘å¸ƒ","main.publish.to.vuepress":"å‘å¸ƒåˆ°Vuepress","main.publish.to.hugo":"å‘å¸ƒåˆ°Hugo","main.publish.to.hexo":"å‘å¸ƒåˆ°Hexo","main.publish.to.jekyll":"å‘å¸ƒåˆ°Jekyll","main.publish.to.jvue":"å‘å¸ƒåˆ°JVue","main.publish.to.conf":"å‘å¸ƒåˆ°Confluence","main.publish.to.cnblogs":"å‘å¸ƒåˆ°åšå®¢å›­","main.publish.to.liandi":"å‘å¸ƒåˆ°é“¾æ»´","main.publish.to.yuque":"å‘å¸ƒåˆ°è¯­é›€","main.publish.to.kms":"å‘å¸ƒåˆ°KMS","main.opt.success":"æ“ä½œæˆåŠŸ","main.opt.failure":"æ“ä½œå¤±è´¥","main.copy.success":"å¤åˆ¶æˆåŠŸ","main.copy.failure":"å¤åˆ¶å¤±è´¥","main.opt.quick":"å¿«æ·æ“ä½œ","main.opt.status.publish":"æ–‡ç« å·²å‘å¸ƒ","main.opt.status.updated":"æ–‡ç« å·²æ›´æ–°","main.opt.status.cancel":"æ–‡ç« å‘å¸ƒå·²å–æ¶ˆ","main.opt.loading":"æ“ä½œä¸­...","main.opt.warning":"è­¦å‘Šä¿¡æ¯","main.opt.tip":"æ¸©é¦¨æç¤º","main.opt.ok":"ç¡®è®¤","main.opt.cancel":"å–æ¶ˆ","main.opt.select":"è¯·é€‰æ‹©","main.opt.warning.tip":"æ­¤æ“ä½œä¸å¯æ¢å¤ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ","setting.noneed":"æ— éœ€é…ç½®","setting.blog.setting":"è®¾ç½®","setting.blog.index":"åå¥½è®¾ç½®","setting.blog.type":"åšå®¢ç±»åž‹","setting.blog.type.placeholder":"è¯·é€‰æ‹©åšå®¢ç±»åž‹","setting.blog.type.wordpress.value":"Wordpress","setting.blog.type.wordpress.label":"Wordpress","setting.blog.type.metaweblog.value":"MetaweblogApi","setting.blog.type.metaweblog.label":"Metaweblog API","setting.blog.type.github.value":"Github","setting.blog.type.github.label":"Github","setting.blog.type.github.user":"Githubç”¨æˆ·å","setting.blog.type.github.user.tip":"Githubç”¨æˆ·åï¼Œä¾‹å¦‚ï¼šterwer","setting.blog.type.github.repo":"gitä»“åº“å","setting.blog.type.github.repo.tip":"gitä»“åº“åï¼Œä¾‹å¦‚ï¼šhexo-blog","setting.blog.type.github.token":"Githubä»¤ç‰Œ","setting.blog.type.github.token.tip":"Githubä»¤ç‰Œï¼Œä¾‹å¦‚ï¼šghp_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX","setting.blog.type.github.token.gen":"Github ä¸ªäººä»¤ç‰Œç”Ÿæˆåœ°å€","setting.blog.type.github.default.branch":"é»˜è®¤åˆ†æ”¯","setting.blog.type.github.default.branch.tip":"é»˜è®¤åˆ†æ”¯ï¼ˆæ—§ç‰ˆä»“åº“ä¸ºmasterï¼Œæ–°ç‰ˆä»“åº“é»˜è®¤ä¸ºmainï¼‰ï¼Œä¾‹å¦‚ï¼šmain","setting.blog.type.github.default.path":"å­˜å‚¨ç›®å½•","setting.blog.type.github.default.path.tip":"å­˜å‚¨ç›®å½•ä¾‹å¦‚ï¼šdocsï¼Œéƒ¨åˆ†å¹³å°å¯ä½¿ç”¨[auto]ä½œä¸ºç‰¹æ®Šå ä½ç¬¦ï¼Œä»£è¡¨è‡ªåŠ¨æ˜ å°„å±‚çº§ç›®å½•ï¼Œä¾‹å¦‚ï¼šdocs/[auto]","setting.blog.type.github.images.path":"å›¾ç‰‡å­˜å‚¨ç›®å½•","setting.blog.type.github.images.path.tip":"å›¾ç‰‡å­˜å‚¨ç›®å½•ï¼Œç›¸å¯¹äºŽä»“åº“æ ¹ç›®å½•ï¼Œç•™ç©ºåˆ™ä½¿ç”¨ç›¸å¯¹äºŽæ ¹ç›®å½•çš„ images ç›®å½•","setting.blog.type.github.image.link.path":"å›¾ç‰‡è®¿é—®é“¾æŽ¥","setting.blog.type.github.mage.link.path.tip":"å›¾ç‰‡è®¿é—®é“¾æŽ¥ï¼Œå–å†³äºŽå¯¹åº”å¹³å°ï¼Œè¯·å‚è€ƒå¯¹åº”å¹³å°çš„æ–‡æ¡£","setting.blog.type.github.msg":"æäº¤ä¿¡æ¯","setting.blog.type.github.msg.tip":"æäº¤ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼šauto published by siyuan-publish-publisher","setting.blog.type.github.author":"ä½œè€…","setting.blog.type.github.author.tip":"ä½œè€…ï¼Œä¾‹å¦‚ï¼šterwer","setting.blog.type.github.email":"é‚®ç®±","setting.blog.type.github.email.tip":"é‚®ç®±","setting.blog.type.github.site":"ä½œè€…ä¸»é¡µ","setting.blog.type.github.site.tip":"ä½œè€…ä¸»é¡µï¼Œå¦‚æžœä¸ºç©ºé»˜è®¤ä¸ºï¼š[GitHubåœ°å€]/[ç”¨æˆ·å]","setting.blog.type.github.dyn.yaml":"YAMLé¢„è®¾é…ç½®","setting.blog.type.github.dyn.yaml.tip":'YAMLé¢„è®¾é…ç½®ï¼Œå¦‚æžœæ‚¨ä¸äº†è§£æ˜¯å¹²ä»€ä¹ˆçš„è¯·ä¸è¦é…ç½®ï¼ŒJSONæ ¼å¼ï¼Œä¾‹å¦‚ï¼š{"sidebar": false}ã€‚è¿™ä¸ªé…ç½®ä¼šè¦†ç›–å½“å‰å¹³å°çš„é»˜è®¤é…ç½®ã€‚å¦‚æžœéœ€è¦ä½¿ç”¨é»˜è®¤çš„å°±ç•™ç©ºå³å¯ã€‚',"setting.blog.url":"åšå®¢ç½‘å€","setting.blog.github.url.tip":"Githubé¦–é¡µåœ°å€","setting.blog.username":"è´¦å·","setting.blog.password":"å¯†ç /Token","setting.blog.apiurl":"APIåœ°å€","setting.blog.github.apiurl.tip":"Github çš„ REST API åœ°å€ï¼Œé€šå¸¸æ˜¯ï¼šhttps://api.github.com","setting.blog.previewPostUrl":"æ–‡ç« é¢„è§ˆè§„åˆ™","setting.blog.previewPostUrl.tip":"é¢„è§ˆè§„åˆ™ï¼ˆå ä½ç¬¦ï¼š[yyyy] [MM] [dd] [postid]ï¼‰ï¼Œä¾‹å¦‚ï¼š/post/[postid].html æˆ–è€… /[cats]/[yyyy]/[mm]/[dd]/[postid].html","setting.blog.previewUrl":"é¢„è§ˆè§„åˆ™","setting.blog.previewUrl.tip":"å¦‚æžœä¸æ˜Žç™½åŽŸç†ï¼Œè¯·å‹¿ä¿®æ”¹æ­¤é€‰é¡¹ã€‚MDæ–‡ä»¶é¢„è§ˆè§„åˆ™ï¼ˆå ä½ç¬¦ï¼š[user] [repo] [branch] [docpath]ï¼‰ï¼Œé€šå¸¸æ˜¯ï¼š/[user]/[repo]/blob/[branch]/[docpath]","setting.blog.mdFilenameRule":"æ–‡ä»¶è§„åˆ™","setting.blog.mdFilenameRule.tip":"Markdownæ–‡ä»¶åè§„åˆ™(å ä½ç¬¦ï¼š[yyyy] [MM] [mm] [dd] [category] [cats] [tag] [tags] [slug] [filename])ï¼Œä¾‹å¦‚ï¼š[filename].mdã€[slug].mdã€[yyyy]-[mm]-[dd]-[slug].md","setting.blog.pageType":"å‘å¸ƒæ ¼å¼","setting.blog.validate":"éªŒè¯","setting.blog.save":"ä¿å­˜","setting.blog.vali":"éªŒè¯","setting.blog.vali.tip":"å¼ºçƒˆå»ºè®®ä¿å­˜ä¹‹å‰å…ˆéªŒè¯é…ç½®ä»¥ä¿è¯apiçš„å¯ç”¨æ€§ï¼ŒéªŒè¯è¿‡ç¨‹ä¸­å°†å‘é€ä¸€ç¯‡æµ‹è¯•æ–‡ç« ï¼Œæ‚¨å¯ä»¥ç¨åŽåœ¨å¹³å°æ‰‹åŠ¨åˆ é™¤å®ƒã€‚æ‚¨ä¹Ÿå¯ä»¥å…ˆä¿å­˜ï¼Œç¨åŽä¿®æ”¹ï¼Œä½†æ˜¯åœ¨éªŒè¯é€šè¿‡ä¹‹å‰è¯¥apiå°†ä¸å¯ä½¿ç”¨ã€‚","setting.blog.vali.tip.metaweblog":"é…ç½®é”™è¯¯æˆ–è€…apiä¸å¯ç”¨ï¼Œè¯·æ£€æŸ¥ã€‚è‹¥ä¿®æ”¹è¿‡é…ç½®ï¼Œè¯·åˆ·æ–°é¡µé¢","setting.blog.vali.ing":"éªŒè¯ä¸­...","setting.blog.vali.ok":"éªŒè¯é€šè¿‡ï¼Œä¸è¦å¿˜äº†ç‚¹å‡»ä¸‹æ–¹ä¿å­˜å“Ÿ(*^â–½^*)","setting.blog.vali.ok.metaweblog":"é…ç½®å·²ä¿å­˜å¹¶éªŒè¯é€šè¿‡","setting.blog.vali.error":"APIéªŒè¯å¤±è´¥ï¼Œè¯·æ£€æŸ¥é…ç½®","setting.blog.platform.support.github":"æ‚¨å½“å‰æ“ä½œçš„æ˜¯æ”¯æŒGithubçš„å¹³å°ï¼š","setting.blog.platform.support.metaweblog":"æ‚¨å½“å‰æ“ä½œçš„æ˜¯æ”¯æŒmetaweblogçš„å¹³å°ï¼š","setting.blog.cancel":"å–æ¶ˆ","setting.vuepress":"Vuepress","setting.hugo":"Hugo","setting.hexo":"Hexo","setting.jekyll":"Jekyll","setting.jvue":"JVue","setting.conf":"Confluence","setting.conf.tip":"å‘å¸ƒåˆ°Confluenceéœ€è¦é…åˆæˆ‘çš„å¦ä¸€ä¸ªé€‚é…å™¨é¡¹ç›®ä½¿ç”¨ï¼ˆå¼ºçƒˆæŽ¨èï¼‰ï¼Œè¯·å‚è€ƒï¼šhttps://github.com/terwer/node-metaweblog-api-adaptor","setting.cnblogs":"åšå®¢å›­","setting.wordpress":"Wordpress","setting.liandi":"é“¾æ»´","setting.yuque":"è¯­é›€","setting.kms":"KMS","setting.other1":"å…¶ä»–1","service.switch.vuepress":"Vuepress","service.switch.hugo":"Hugo","service.switch.hexo":"Hexo","service.switch.jekyll":"Jekyll","service.switch.jvue":"JVue","service.switch.conf":"Confluence","service.switch.cnblogs":"åšå®¢å›­","service.switch.wordpress":"Wordpress","service.switch.yuque":"è¯­é›€","service.switch.liandi":"é“¾æ»´","service.switch.wechat":"å¾®ä¿¡èŠå¤©","service.switch.wemp":"å¾®ä¿¡å…¬ä¼—å·","service.switch.zhihu":"çŸ¥ä¹Ž","service.switch.kms":"çŸ¥è¯†ä»“åº“","service.switch.must.select.one":"æ‚¨å¿…é¡»é€‰æ‹©ä¸€ä¸ªè‡³å°‘å¹³å°","post.bind.vuepress.slug":"Vuepressåˆ«å","post.bind.hugo.slug":"Hugoåˆ«å","post.bind.hexo.slug":"Hexoåˆ«å","post.bind.jekyll.slug":"Jekyllåˆ«å","post.bind.cnblogs.postid":"åšå®¢å›­åˆ«å","post.bind.jvue.postid":"JVueçš„ID","post.bind.conf.postid":"Confçš„ID","post.bind.wordpress.postid":"WPçš„ID","post.bind.liandi.postid":"é“¾æ»´çš„ID","post.bind.yuque.postid":"è¯­é›€çš„ID","post.bind.kms.postid":"KMSçš„ID","post.bind.conf.save":"ä¿å­˜","post.bind.conf.v081":"æ£€æµ‹ v0.8.1 å…ƒæ•°æ®å¹¶å¯¼å…¥","post.bind.auto.error":"æœªæ£€æµ‹åˆ°IDï¼Œè¯·æ‰‹åŠ¨è¾“å…¥æ–‡æ¡£æ ¹ ID ï¼Œç„¶åŽå†è¿›è¡Œä¿®å¤","post.bind.auto.empty":"è¯¥æ–‡æ¡£æœªå‘å¸ƒè¿‡ï¼Œæ— éœ€ä¿®å¤","post.bind.conf.cancel":"å–æ¶ˆ","form.validate.name.required":"è¯·è¾“å…¥åç§°","form.validate.name.length":"é•¿åº¦å¿…é¡»åœ¨0åˆ°1ä¹‹é—´","form.validate.github.auto.delete":"è‡ªåŠ¨åˆ é™¤","dynamic.platform.new":"å¹³å°ç®¡ç†","dynamic.platform.tip":"å¦‚æžœå†…ç½®çš„å‘å¸ƒæœåŠ¡æ— æ³•æ»¡è¶³æˆ–è€…éœ€è¦æ·»åŠ å¤šä¸ªå®žä¾‹ï¼Œæ‚¨å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ å—æ”¯æŒçš„å¹³å°ï¼Œç›®å‰æ”¯æŒé€šç”¨å¹³å°ï¼ˆZhihuã€è¯­é›€ã€CSDNç­‰ï¼‰ã€Githubï¼ˆHUGOã€HEXOã€Jekyllç­‰ï¼‰ã€metaweblog APIï¼ˆå¼€æºä¸­å›½ç­‰ï¼‰å’ŒWordpress API","dynamic.platform.type":"å¹³å°ç±»åž‹[å¿…é€‰]","dynamic.platform.subtype":"å­å¹³å°åç§°","dynamic.platform.type.metaweblog":"metaweblog API","dynamic.platform.type.wordpress":"Wordpress","dynamic.platform.type.github":"Github","dynamic.platform.type.common":"é€šç”¨å¹³å°","dynamic.platform.type.custom":"è‡ªå®šä¹‰","dynamic.platform.key":"å¹³å°key","dynamic.platform.key.tip":"å¹³å°å”¯ä¸€æ ‡è¯†ï¼Œä¸èƒ½é‡å¤ï¼Œä¾‹å¦‚ï¼šmyblog","dynamic.platform.name":"å¹³å°åç§°","dynamic.platform.name.tip":"å¹³å°åç§°ï¼Œä¾‹å¦‚ï¼šæˆ‘çš„åšå®¢","dynamic.platform.opt.add":"æäº¤","dynamic.platform.opt.noselect":"è¯·é€‰æ‹©å¹³å°ç±»åž‹","dynamic.platform.opt.key.exist":"å¹³å°keyå·²ç»å­˜åœ¨","dynamic.platform.opt.del.confirm":"åˆ é™¤æ­¤å¹³å°å°†ä¼šå½»åº•ç§»é™¤æ­¤å¹³å°ç›¸å…³é…ç½®ä¿¡æ¯ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ","dynamic.platform.opt.del.select":"åˆ é™¤","dynamic.platform.opt.item.select":"æœªé€‰æ‹©","dynamic.platform.opt.item.select.tip":"å½“å‰é€‰æ‹©çš„æ˜¯ï¼š","dynamic.platform.opt.item.no.select.tip":"è¯·é€‰æ‹©è¦åˆ é™¤çš„è¡Œ","setting.common.home":"å¹³å°é¦–é¡µ","setting.common.tip":"å¹³å°é¦–é¡µï¼Œç”¨äºŽé¢„è§ˆæ–‡ç« ï¼Œä¾‹å¦‚ï¼šhttps://terwer.space","setting.common.apiurl":"APIåœ°å€","setting.common.token":"é‰´æƒtoken","setting.common.token.gen":"Tokenç”Ÿæˆåœ°å€","setting.common.username":"ç”¨æˆ·å","setting.common.username.gen":"è®¿é—®ç­–ç•¥è®¾ç½®","setting.common.password":"å¯†ç ","setting.blog.platform.support.common":"æ‚¨å½“å‰æ“ä½œçš„å¹³å°æ˜¯ï¼š","platform.must.select.one":"å“‡å“¦ï¼Œç¦»ä½¿ç”¨å°±å·®ä¸€æ­¥å•¦ o(â•¥ï¹â•¥)o ï¼Œæ‚¨å¿…é¡»æ·»åŠ å¹¶å¯ç”¨è‡³å°‘ä¸€ä¸ªå¹³å°ã€‚å¯é€šè¿‡ã€Œå¹³å°å¯¼å…¥ã€èŽ·å–åŽ»æ’ä»¶é—ªå•†åº—è‡ªå®šä¹‰æ·»åŠ ã€‚","blog.list.toptip":"æ¸©é¦¨æç¤ºï¼šå•å‡»è¡¨æ ¼è¡Œå¯ä»¥è¿›å…¥æ–‡ç« è¯¦æƒ…é¡µï¼Œè¯¦æƒ…é¡µæœ‰å‘å¸ƒæŒ‰é’®å“¦! (ã€ƒ'â–½'ã€ƒ)","config.error.msg":"é…ç½®é”™è¯¯ï¼Œè¯·å‰å¾€å¯¹åº”å‘å¸ƒé…ç½®ä¿®æ”¹","config.platform.none":"æ²¡æœ‰å¯ç”¨çš„å‘å¸ƒå¹³å°ï¼Œè¯·å‰å¾€æœåŠ¡å¼€å…³å¼€å¯","post.delete.by.platform":"æ–‡ç« å·²è¢«å¹³å°è‡ªè¡Œåˆ é™¤ï¼Œè¯·ç‚¹å‡»å–æ¶ˆå¼ºåˆ¶è§£é™¤å…³è”","blog.top-data-tip":"æ¸©é¦¨æç¤ºï¼š1. 0.1.0+ ä»¥åŽï¼Œå¯é€šè¿‡ã€åå¥½è®¾ç½®->æ€æºè®¾ç½®ã€‘æ¥ä¿®æ”¹é»˜è®¤ä¼ºæœé…ç½®ï¼Œæ”¯æŒæœ¬åœ°å’Œè¿œç¨‹ï¼›å¦‚æžœæ˜¯è¿œç¨‹è¿˜éœ€è¦è®¾ç½®tokenï¼Œå¦‚æžœä½¿ç”¨æµè§ˆå™¨æ’ä»¶æˆ–è€…æŒ‚ä»¶ä¹‹å¤–çš„è®¿é—®æ–¹å¼è¿˜éœ€è¦è®¾ç½®è·¨åŸŸè¯·æ±‚ä»£ç†ã€‚ 2ã€å‡çº§æ–°ç‰ˆä¹‹å‰å¼ºçƒˆå»ºè®®å¯¼å‡ºé…ç½®ï¼Œé˜²æ­¢é…ç½®ä¸¢å¤±ã€‚ 3ã€å¦‚æžœå‡ºçŽ°æ–°ç‰ˆæœ¬ä¸å…¼å®¹çš„å¼‚å¸¸æƒ…å†µï¼Œå»ºè®®æ¸…ç©ºé…ç½®ã€‚æ­¤æ“ä½œä¸å¯æ¢å¤ï¼Œè¯·è°¨æ…Žæ“ä½œï¼","blog.top-data-tip.siyuan":"æ¸©é¦¨æç¤ºï¼š1ã€å½“å‰å¤„äºŽæŒ‚ä»¶æ¨¡å¼ï¼Œä»Ž 0.1.0 ç‰ˆæœ¬å¼€å§‹ï¼Œæ— éœ€åœ¨æ‰€æœ‰é¡µé¢å¼•ç”¨æŒ‚ä»¶äº†ï¼Œåªéœ€è¦åœ¨çˆ¶çº§é¡µé¢å¼•ç”¨ä¸€ä¸ªæŒ‚ä»¶å³å¯ã€‚å…·ä½“è§„åˆ™å¦‚ä¸‹ï¼š(1). å¦‚æžœæ£€æµ‹åˆ°æ²¡æœ‰å­æ–‡æ¡£ï¼Œä¼šå…¼å®¹ 0.0.3 ç‰ˆæœ¬ä»¥å‰çš„æ–¹å¼ï¼Œå±•ç¤ºå½“å‰æ–‡æ¡£çš„å‘å¸ƒé¡µé¢ã€‚ (2). å¦‚æžœæ£€æµ‹åˆ°æœ‰å­æ–‡æ¡£ï¼Œä¼šä»¥åˆ—è¡¨åŠ åˆ†é¡µçš„æ–¹å¼å±•ç¤ºæ‰€æœ‰å­æ–‡æ¡£åˆ—è¡¨ã€‚å¯å•ç‹¬é€‰æ‹©æŸä¸ªå­æ–‡æ¡£è¿›è¡Œå‘å¸ƒæ“ä½œã€‚ 2ã€å‡çº§æ–°ç‰ˆä¹‹å‰å¼ºçƒˆå»ºè®®å¯¼å‡ºé…ç½®ï¼Œé˜²æ­¢é…ç½®ä¸¢å¤±ã€‚ 3ã€å¦‚æžœå‡ºçŽ°æ–°ç‰ˆæœ¬ä¸å…¼å®¹çš„å¼‚å¸¸æƒ…å†µï¼Œå»ºè®®æ¸…ç©ºé…ç½®ã€‚æ­¤æ“ä½œä¸å¯æ¢å¤ï¼Œè¯·è°¨æ…Žæ“ä½œï¼","blog.newwin.open":"é¡µç­¾æ¨¡å¼","blog.change.siyuan.api":"æ€æºåœ°å€","setting.blog.siyuan.current.apiurl":"å½“å‰APIåœ°å€=>","setting.blog.middlewareUrl":"è·¨åŸŸè¯·æ±‚ä»£ç†","setting.blog.middlewareUrl.tip":"æŸäº›åœºæ™¯ä¸‹éœ€è¦ï¼ˆä¾‹å¦‚è‡ªéƒ¨ç½²æ¨¡å¼ï¼ŒNginxä¼ºæœç­‰ã€viteå¼€å‘çŽ¯å¢ƒä¼ºæœç­‰ï¼‰ï¼Œå…¶ä»–æƒ…å†µå¯å¿½ç•¥","setting.blog.middlewareUrl.my.tip":"éƒ¨åˆ†è·¨åŸŸåœºæ™¯å¯ç”¨ï¼ˆä¸æ”¯æŒç»•è¿‡æµè§ˆå™¨æ‹’ç»çš„ header ï¼Œä¾‹å¦‚ originã€referer ç­‰ï¼›è¯·æ±‚ä½“ä¸æ”¯æŒ FormData ç­‰äºŒè¿›åˆ¶æ ¼å¼ï¼Œä»…æ”¯æŒå­—ç¬¦ä¸²ï¼‰ï¼Œå‡ºäºŽæ€§èƒ½è€ƒè™‘ï¼Œå»ºè®®è‡ªå·±éƒ¨ç½²ä¸€ä»½ï¼Œè¯·ä½¿ç”¨ https://github.com/terwer/node-metaweblog-api-adaptor è¿›è¡Œéƒ¨ç½²ã€‚","setting.blog.middlewareUrl.my.fee.tip":"ðŸ¤ç”±äºŽå…±äº«ä»£ç†å ç”¨å·¨å¤§çš„æˆæœ¬ï¼Œæˆ–è€…å› ä¸ºä¸å¯æŠ—åŠ›åŽŸå› å¯èƒ½ä¼šå–æ¶ˆå…±äº«ï¼Œä¸ºäº†ä¿è¯æœåŠ¡å¯ç”¨æ€§ï¼Œå»ºè®®è‡ªå·±éƒ¨ç½²ä¸€ä»½ï¼Œæˆ–è€…è¯·ä½œè€…å–ä¸€æ¯å’–å•¡ï¼Œé¼“åŠ±æˆ‘ä»¬æŒç»­å…±äº«ðŸŒ¹ã€‚å‚è€ƒä¹‹å‰çš„å‰è¾ˆå¤§ä½¬å€’ä¸‹çš„æ•…äº‹ï¼šhttps://linux.do/t/topic/1051","setting.blog.middlewareUrl.my.coffee":"èµžåŠ©å’–å•¡â˜•ï¸","setting.conf.export":"å¯¼å‡ºé…ç½®","setting.conf.import":"å¯¼å…¥é…ç½®","setting.conf.transport":"å¯¼å…¥å¯¼å‡º","setting.conf.clear":"æ¸…ç©ºé…ç½®","page.no.id":"è¯·æ±‚éžæ³•ï¼ŒåŽŸå› ï¼špageIdèŽ·å–å¤±è´¥","yaml.show.type.yaml":"YAML","yaml.show.type.md":"MDæ­£æ–‡","yaml.show.type.yamlmd":"YAML+MDæ­£æ–‡","yaml.show.type.html":"HTMLæ­£æ–‡","main.read.mode":"åªè¯»æ¨¡å¼","main.edit.mode":"ç¼–è¾‘æ¨¡å¼","main.read.mode.tip1":"æ¸©é¦¨æç¤ºï¼šä¸ºäº†æ•°æ®ä¸€è‡´æ€§ï¼Œå¤šå¹³å°åˆ†å‘æˆ–è€…æœªæä¾›YAMLé€‚é…å™¨æ—¶æ— æ³•å¤„ç†å¹³å°å±žæ€§ï¼ŒYAMLå°†ä»…æ˜¾ç¤ºå…¬å…±å±žæ€§ä¸”åªèƒ½åªè¯»ã€‚","main.read.mode.tip2":"YAMLå¦‚æœ‰ä¿®æ”¹ï¼Œè¯·åŠ¡å¿…ç‚¹å‡»ä¿å­˜æŒ‰é’®ï¼Œå¦åˆ™ä¿®æ”¹å†…å®¹å°†ä¸¢å¤±ï¼","main.read.mode.tip3":"ä¸ºäº†æ ‡è¯†æ–‡ç« çš„å”¯ä¸€æ€§ï¼Œslugä¿®æ”¹å°†å¿½ç•¥ï¼Œå…¶ä»–å±žæ€§å¯åŒæ­¥ã€‚","main.read.mode.tip4":"å¦‚éœ€åˆ é™¤äº†å†…ç½®çš„YAMLå±žæ€§ï¼Œåˆ é™¤ä¹‹åŽè¯·åŠ¡å¿…å…ˆåŒæ­¥åˆ°æ€æºç¬”è®°ï¼Œå¦åˆ™åˆ‡æ¢æ¨¡å¼ä¼šè¿˜åŽŸã€‚","main.opt.onclick.confirm.tip":"æ­¤æ“ä½œé»˜è®¤å°†é‡æ–°ç”Ÿæˆé™¤åˆ«åä»¥å¤–çš„æ‰€æœ‰å±žæ€§ï¼Œå¦‚æžœåªæƒ³ä¿®æ”¹ä¸ªåˆ«å±žæ€§ï¼Œè¯·åœ¨è¯¦ç»†æ¨¡å¼ç‚¹å‡»å•ç‹¬çš„åŠŸèƒ½æŒ‰é’®è¿›è¡Œå¯¹åº”æ“ä½œï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ","main.cat.list.error":"åˆ†ç±»èŽ·å–å¤±è´¥","main.yaml.no.save":"æ‚¨ç¼–è¾‘è¿‡YAMLï¼Œç‚¹å‡»ç¡®è®¤å¯åŒæ­¥YAMLåˆ°å±žæ€§ï¼Œå–æ¶ˆå°†ä¸¢å¤±YAMLä¿®æ”¹ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ","setting.github.baseUrl":"Gitå¹³å°åœ°å€","setting.github.baseUrl.tip":"Gitå¹³å°åœ°å€ï¼Œç”¨äºŽMDæ–‡ä»¶é¢„è§ˆï¼Œé»˜è®¤æ˜¯ï¼šhttps://github.com","preference.setting.fixTitle":"åŽ»é™¤æ ‡é¢˜ç¼–å·","preference.setting.removeH1":"åŽ»é™¤æ­£æ–‡H1","preference.setting.removeH1.tip":"åˆ é™¤H1å¯èƒ½ä¼šè¯¯åˆ é™¤Markdowné‡Œé¢çš„#å¼€å¤´çš„æ³¨é‡Šï¼Œå¦‚éœ€å¼€å¯ï¼Œè¯·ä½¿ç”¨2ä¸ªä»¥ä¸Šçš„#æ³¨é‡Šï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ","preference.setting.newWin":"æ–°çª—å£æ“ä½œ","siyuan.browser.show.close.btn":"æ˜¾ç¤ºå…³é—­æŒ‰é’®","siyuan.browser.menu.quick.btn":"ä¸€é”®å¿«é€Ÿå‘å¸ƒ","siyuan.browser.menu.publish.btn":"æ–‡ç« å‘å¸ƒï¼ˆè‡ªåŠ¨æ£€æµ‹ï¼Œæœ‰å­æ–‡æ¡£->åˆ—è¡¨é¡µï¼›æ— å­æ–‡æ¡£->å‘å¸ƒé¡µï¼‰","siyuan.browser.menu.preview.btn":"æ–‡ç« é¢„è§ˆï¼ˆå½“å‰æ–‡ç« åªè¯»é¢„è§ˆï¼‰","siyuan.browser.menu.manage.btn":"æ–‡ç« ç®¡ç†ï¼ˆå…¨éƒ¨æ–‡ç« ç»Ÿä¸€ç®¡ç†ï¼‰","siyuan.browser.menu.anki.btn":"Ankiæ ‡è®°ï¼ˆé…åˆankisiyuanç”ŸæˆAnkiæ ‡è®°ï¼‰","siyuan.browser.menu.picture.btn":"PicGOå›¾åºŠï¼ˆæ”¯æŒå›¾åºŠé…ç½®ä¸Žå›¾ç‰‡ä¸Šä¼ ï¼‰","siyuan.browser.menu.setting.btn":"åå¥½è®¾ç½®ï¼ˆç³»ç»Ÿè®¾ç½®ç»Ÿä¸€å…¥å£ï¼‰","anki.siyuan.deck":"ç‰Œç»„","anki.siyuan.deck.new":"æ–°ç‰Œç»„","anki.siyuan.tag":"æ ‡ç­¾","anki.siyuan.tag.new":"æ–°æ ‡ç­¾","picgo.chrome.tip":"æ‚¨å½“å‰ä½¿ç”¨çš„æ˜¯æµè§ˆå™¨æ’ä»¶ï¼Œéœ€è¦ä»Žè¿™é‡Œä¸‹è½½é…ç½® PicGo å®¢æˆ·ç«¯ï¼šhttps://github.com/Molunerfinn/PicGo/releases","picgo.siyuan.tip":"æ‚¨å½“å‰ä½¿ç”¨çš„æ˜¯æ€æºç¬”è®°æŒ‚ä»¶ï¼ŒPicGOå·²å†…ç½®ï¼Œåªéœ€é…ç½®å³å¯","post.detail.button.copy.id":"å¤åˆ¶æœ¬æ–‡ID","post.detail.button.share.link":"å¤åˆ¶åˆ†äº«é“¾æŽ¥","post.detail.button.browser.open":"é»˜è®¤æµè§ˆå™¨æ‰“å¼€","post.detail.button.pic.manage":"å›¾ç‰‡ç®¡ç†","post.detail.button.anki.mark":"Ankiæ ‡è®°","post.detail.index.send.to.publish":"å‘å¸ƒåˆ°å…¶ä»–å¹³å°","post.detail.index.export.to.pdf":"å¯¼å‡ºä¸ºPDF","picgo.upload.status":"ä¸Šä¼ çŠ¶æ€","picgo.upload.select.pic":"é€‰æ‹©å›¾ç‰‡","picgo.upload.clipboard":"å‰ªè´´æ¿å›¾ç‰‡","picgo.upload.onclick":"ä¸€é”®ä¸Šä¼ æœ¬åœ°å›¾ç‰‡åˆ°å›¾åºŠ","picgo.download.onclick":"ä¸€é”®ä¸‹è½½è¿œç¨‹å›¾ç‰‡åˆ°æœ¬åœ°","picgo.download.local.to.bed":"ä¸Šä¼ æœ¬åœ°å›¾ç‰‡åˆ°å›¾åºŠ","picgo.download.bed.to.local":"ä¸‹è½½è¿œç¨‹å›¾ç‰‡åˆ°æœ¬åœ°","picgo.pic.preview":"å›¾ç‰‡é¢„è§ˆ","picgo.pic.setting":"å›¾åºŠè®¾ç½®","picgo.pic.setting.no.tip":"ç”±äºŽæ‚¨å½“å‰ä½¿ç”¨çš„æ˜¯æµè§ˆå™¨æ’ä»¶ï¼Œæ— æ³•ç›´æŽ¥é›†æˆ PicGo ï¼Œåªèƒ½é€šè¿‡ HTTP è¯·æ±‚é—´æŽ¥è°ƒç”¨æœ¬åœ° PicGo å®¢æˆ·ç«¯ä¸Šå›¾ç‰‡ï¼Œè¯·ç›´æŽ¥åœ¨æœ¬åœ° PicGo å®¢æˆ·ç«¯è¿›è¡Œè®¾ç½®ã€‚å¦‚éœ€ä½“éªŒæ›´åŠ å®Œæ•´çš„åŠŸèƒ½ï¼Œè¯·é€šè¿‡æ€æºç¬”è®°æŒ‚ä»¶ç‰ˆæŒ‚è½½èœå•æ‰“å¼€æ–°çª—å£çš„æ–¹å¼ä½¿ç”¨ã€‚è¯¦æƒ…è¯·å‚è€ƒï¼šhttps://docs.publish.terwer.space/post/the-pendant-mode-is-used-in-the-method-of-mounting-menu-169wrw.html","github.use.permalink":"æ°¸ä¹…é“¾æŽ¥","github.use.permalink.no.warn":"æ‚¨å·²å…³é—­æ°¸ä¹…é“¾æŽ¥ï¼Œformatterå°†ä¸ä¼šç”Ÿæˆæ ‡è®°ï¼Œè¿™åœ¨æŸäº›ç‰¹æ®Šåœºæ™¯ä¸‹å¯èƒ½æœ‰ç”¨ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹éœ€è¦å¼€å¯æ­¤é€‰é¡¹ï¼Œæ³¨æ„ï¼šç›®å‰ä»…ä»…åœ¨HUGOå¹³å°ç”Ÿæ•ˆï¼Œä¸»è¦æ˜¯é€‚é…Docsy","github.menu.title":"èœå•æ ‡é¢˜","github.menu.title.placeholder":"èœå•æ æ ‡é¢˜ï¼ˆHUGOå¹³å°ä¸“ç”¨ï¼Œä¸ºç©ºåˆ™ä¸æ˜¾ç¤ºåœ¨èœå•ï¼‰","github.weight":"æ˜¾ç¤ºæƒé‡","github.weight.placeholder":"æƒé‡ï¼ˆå†³å®šæ˜¾ç¤ºé¡ºåºï¼Œè¶Šå°æ˜¾ç¤ºè¶Šé å‰ï¼‰","github.use.date":"æ˜¾ç¤ºæ—¥æœŸ","github.use.date.no.warn":"æ‚¨å·²å…³é—­æ—¥æœŸæ˜¾ç¤ºï¼Œå°†ä¸ä¼šåœ¨formatterç”Ÿæˆdateå­—æ®µ","github.post.picgo.use":"ä½¿ç”¨å›¾åºŠ","github.post.picgo.use.tip":"å¯ç”¨æ­¤é€‰é¡¹ï¼Œå°†ä¼šè‡ªåŠ¨å°†æ­¤æ–‡æ¡£åŒ…å«çš„æ‰€æœ‰æœ¬åœ°å›¾ç‰‡ä¸Šä¼ è‡³è‡ªå®šä¹‰å›¾åºŠï¼ˆè¿œç¨‹å›¾ç‰‡ä¸ä¸Šä¼ ï¼‰ï¼Œè¯·ç¡®ä¿PicGOå›¾åºŠé…ç½®æ­£ç¡®","github.post.picgo.start.upload":"å›¾åºŠå·²å¼€å¯ï¼Œå³å°†ä¸Šä¼ æœ¬åœ°å›¾ç‰‡åˆ°å›¾åºŠ","github.post.picgo.picbed.error":"æ–‡æ¡£å¯èƒ½å·²ç»æˆåŠŸå‘å¸ƒï¼Œä½†æ˜¯å›¾ç‰‡ä¸Šä¼ å¤±è´¥æˆ–è€…å½“å‰åœºæ™¯ä¸æ”¯æŒå›¾ç‰‡ä¸Šä¼ ï¼Œè¯¦ç»†ä¿¡æ¯","setting.yuque.home.tip":"è¯­é›€å¹³å°é¦–é¡µï¼Œé€šå¸¸å›ºå®šæ˜¯ï¼šhttps://www.yuque.com/","setting.yuque.username.tip":"è¯­é›€å¹³å°ç”¨æˆ·åï¼Œæ³¨æ„æ˜¯ã€è´¦æˆ·è®¾ç½®ã€‘é‡Œé¢å›ºå®šè¿žæŽ¥é‡Œé¢çš„ç”¨æˆ·åï¼Œä¸æ˜¯ç”¨æˆ·æ˜µç§°å“¦(*^â–½^*)","setting.yuque.password.tip":"è¯­é›€å¹³å°çš„Tokenï¼Œè¯·æŒ‰ç…§é“¾æŽ¥ç‚¹å‡»èŽ·å–ï¼Œåªéœ€è¦å‹¾é€‰ã€è¯»å–ä½ çš„çŸ¥è¯†åº“ã€‘å’Œã€ä¿®æ”¹å’Œè¯»å–ä½ çš„æ–‡æ¡£ã€‘ä¸¤ä¸ªæƒé™å³å¯","setting.yuque.apiurl.tip":"è¯­é›€å¹³å°çš„APIåœ°å€ï¼Œé€šå¸¸å›ºå®šæ˜¯ï¼šhttps://www.yuque.com/api/v2","setting.yuque.previewUrl.tip":"è¯­é›€å¹³å°çš„æ–‡ç« é¢„è§ˆè§„åˆ™ï¼Œé€šå¸¸æ˜¯ï¼š/[notebook]/[postid]","setting.notion.home.tip":"Notionå¹³å°é¦–é¡µï¼Œé€šå¸¸å›ºå®šæ˜¯ï¼šhttps://www.notion.so/","setting.notion.password.tip":"Notionå¹³å°çš„Tokenï¼Œè¯·æŒ‰ç…§é“¾æŽ¥ç‚¹å‡»èŽ·å–ï¼Œéœ€è¦å‹¾é€‰ã€Read contentã€‘ã€ã€Update contentã€‘ã€ã€Insert contentã€‘ä¸‰ä¸ªæƒé™","setting.notion.apiurl.tip":"Notionå¹³å°çš„APIåœ°å€ï¼Œé€šå¸¸å›ºå®šæ˜¯ï¼šhttps://api.notion.com/v1","setting.notion.previewUrl.tip":"Notionå¹³å°çš„æ–‡ç« é¢„è§ˆè§„åˆ™ï¼Œé€šå¸¸æ˜¯ï¼š/[postid]","setting.confluence.home.tip":"Confluenceå¹³å°é¦–é¡µï¼Œä¾‹å¦‚ï¼šhttps://confluence.ocean-zhc.com.cn/wiki","setting.confluence.password.tip":"Confluenceå¹³å°çš„Personal Access Tokenï¼Œè¯·åœ¨ä¸ªäººè®¾ç½®ä¸­åˆ›å»ºï¼Œéœ€è¦æœ‰ç©ºé—´çš„è¯»å†™æƒé™","setting.confluence.apiurl.tip":"Confluenceå¹³å°çš„APIåœ°å€ï¼Œé€šå¸¸ä¸Žé¦–é¡µåœ°å€ç›¸åŒ","setting.confluence.previewUrl.tip":"Confluenceå¹³å°çš„æ–‡ç« é¢„è§ˆè§„åˆ™ï¼Œé€šå¸¸æ˜¯ï¼š/spaces/[spaceKey]/pages/[postid]","setting.confluence.parentPageId.label":"çˆ¶é¡µé¢ID","setting.confluence.parentPageId.tip":"å¯é€‰ï¼Œå¡«å†™åŽå°†åœ¨è¯¥çˆ¶é¡µé¢ä¸‹åˆ›å»ºæ–°é¡µé¢ï¼Œä¾‹å¦‚ 327683","setting.liandi.home.tip":"é“¾æ»´å¹³å°é¦–é¡µï¼Œé€šå¸¸å›ºå®šæ˜¯ï¼šhttps://ld246.com/","setting.liandi.username.tip":"é“¾æ»´å¹³å°ç”¨æˆ·åï¼Œæ³¨æ„æ˜¯ç‚¹å‡»ã€ä¸ªäººä¸»é¡µã€‘ä¹‹åŽURLä¸ŠmemberåŽé¢æ˜¾ç¤ºçš„ç”¨æˆ·åï¼Œä¸æ˜¯ç”¨æˆ·æ˜µç§°å“¦(*^â–½^*)","setting.liandi.password.tip":"é“¾æ»´å¹³å°çš„Tokenï¼Œè¯·æŒ‰ç…§é“¾æŽ¥ç‚¹å‡»èŽ·å–","setting.liandi.apiurl.tip":"é“¾æ»´å¹³å°çš„APIåœ°å€ï¼Œé€šå¸¸å›ºå®šæ˜¯ï¼šhttps://ld246.com/api/v2","setting.kms.home.tip":"KMSå¹³å°é¦–é¡µï¼Œä¾‹å¦‚ï¼šhttp://localhost:9564/kms16_release/kms/multidoc","setting.kms.username.tip":"KMSå¹³å°Restè´¦æˆ·ç”¨æˆ·åï¼Œè¯·æŒ‰ç…§é“¾æŽ¥æŒ‡ç¤ºåˆ›å»º","setting.kms.password.tip":"KMSå¹³å°Restè´¦æˆ·å¯†ç ï¼Œè¯·æŒ‰ç…§é“¾æŽ¥æŒ‡ç¤ºåˆ›å»º","setting.kms.apiurl.tip":"KMSå¹³å°çš„APIåœ°å€ï¼Œä¾‹å¦‚ï¼šhttp://localhost:9564/kms16_release/api/kms-multidoc/kmsMultidocKnowledgeRestService","siyuan.local.share.tip":"æ¸©é¦¨æç¤ºï¼šå¦‚æžœå‘çŽ°åˆ†äº«é“¾æŽ¥æˆ–è€…æµè§ˆå™¨æ‰“å¼€æ— æ³•æ˜¾ç¤ºæˆ–è€…ç½‘ç»œè¿žæŽ¥è¢«æ‹’ç»ï¼Œè¯·æŒ‰ç…§ä¸‹é¢æ“ä½œæŽ’æŸ¥ã€‚1ï¼šæ€æºç¬”è®°->è®¾ç½®->å…³äºŽ->æ‰“å¼€ç½‘ç»œä¼ºæœï¼›2ï¼šåœ¨æµè§ˆå™¨æ‰“å¼€ä¹‹åŽï¼Œç‚¹å‡»åº•éƒ¨æ€æºåœ°å€ï¼Œä¿®æ”¹å¯¹åº”åœ°å€ä¸ºå±€åŸŸç½‘ipåœ°å€ã€‚","setting.cnblogs.home.tip":"æ‚¨çš„åšå®¢å›­é¦–é¡µï¼Œé€šå¸¸æ˜¯ï¼šhttps://www.cnblogs.com/<æ‚¨çš„ç”¨æˆ·å>","setting.cnblogs.username.tip":"æ‚¨çš„åšå®¢å›­MetaWeblogç™»å½•åï¼Œå¯å‰å¾€æ‚¨çš„åšå®¢å›­åŽå°->è®¾ç½®æŸ¥çœ‹ï¼Œæ³¨æ„ï¼šæ˜¯ç™»å½•åï¼Œä¸æ˜¯ç”¨æˆ·æ˜µç§°å“¦(*^â–½^*)","setting.cnblogs.password.tip":"æ‚¨çš„åšå®¢å›­MetaWeblogè®¿é—®ä»¤ç‰Œï¼Œå¯å‰å¾€æ‚¨çš„åšå®¢å›­åŽå°->è®¾ç½®æŸ¥çœ‹","setting.cnblogs.apiUrl.tip":"æ‚¨çš„åšå®¢å›­MetaWeblogè®¿é—®åœ°å€ï¼Œå¯å‰å¾€æ‚¨çš„åšå®¢å›­åŽå°->è®¾ç½®æŸ¥çœ‹ï¼Œé€šå¸¸æ˜¯ï¼šhttps://rpc.cnblogs.com/metaweblog/<æ‚¨çš„ç”¨æˆ·å>","setting.cnblogs.previewUrl.tip":"åšå®¢å›­å¹³å°çš„æ–‡ç« é¢„è§ˆè§„åˆ™ï¼Œé€šå¸¸æ˜¯ï¼š/p/[postid].html","setting.wordpress.home.tip":"WordPressé¦–é¡µ","setting.wordpress.username.tip":"WordPressç™»å½•åï¼Œæ³¨æ„ï¼šæ˜¯ç™»å½•åï¼Œä¸æ˜¯ç”¨æˆ·æ˜µç§°å“¦(*^â–½^*)","setting.wordpress.password.tip":"WordPressç™»å½•å¯†ç ","setting.wordpress.apiUrl.tip":"WordPressçš„xmlrpcè¿œç¨‹å‘å¸ƒåœ°å€ï¼Œé€šå¸¸æ˜¯ï¼šhttps://<WordPressåšå®¢åœ°å€>/xmlrpc.php","setting.wordpress.previewUrl.tip":"WordPresså¹³å°çš„æ–‡ç« é¢„è§ˆè§„åˆ™ï¼Œé€šå¸¸æ˜¯ï¼š?p=[postid]","setting.wordpressdotcom.home.tip":"WordPress.com é¦–é¡µ","setting.wordpressdotcom.username.tip":"WordPress.com ç™»å½•åï¼Œæ³¨æ„ï¼šæ˜¯ç™»å½•åæˆ–è€…é‚®ç®±ï¼Œä¸æ˜¯ç”¨æˆ·æ˜µç§°å“¦(*^â–½^*)","setting.wordpressdotcom.password.tip":"WordPress.com ç™»å½•å¯†ç ","setting.wordpressdotcom.apiUrl.tip":"WordPress.com çš„xmlrpcè¿œç¨‹å‘å¸ƒåœ°å€ï¼Œé€šå¸¸æ˜¯ï¼šhttps://<WordPressç™»å½•å>.wordpress.com/xmlrpc.php","setting.wordpressdotcom.previewUrl.tip":"WordPress.com å¹³å°çš„æ–‡ç« é¢„è§ˆè§„åˆ™ï¼Œé€šå¸¸æ˜¯ï¼š?p=[postid]","setting.oschina.home.tip":"å¼€æºä¸­å›½é¦–é¡µï¼Œé€šå¸¸æ˜¯ï¼šhttps://my.oschina.net/<æ‚¨çš„ç”¨æˆ·å>","setting.oschina.username.tip":"å¼€æºä¸­å›½ç™»å½•åï¼Œå¯ä»¥è¾“å…¥ç™»å½•é‚®ç®±","setting.oschina.password.tip":"å¼€æºä¸­å›½ç™»å½•å¯†ç ","setting.oschina.apiUrl.tip":"å¼€æºä¸­å›½çš„xmlrpcè¿œç¨‹å‘å¸ƒåœ°å€ï¼Œé€šå¸¸å›ºå®šæ˜¯ï¼šhttps://www.oschina.net/action/xmlrpc","setting.oschina.previewUrl.tip":"å¼€æºä¸­å›½å¹³å°çš„æ–‡ç« é¢„è§ˆè§„åˆ™ï¼Œé€šå¸¸æ˜¯ï¼š/blog/[postid]","setting.typecho.home.tip":"Typechoå¹³å°çš„é¦–é¡µ","setting.typecho.username.tip":"Typechoå¹³å°ç™»å½•å","setting.typecho.password.tip":"Typechoå¹³å°å¯†ç ","setting.typecho.apiUrl.tip":"Typechoå¹³å°çš„xmlrpcè¿œç¨‹å‘å¸ƒåœ°å€ï¼Œé€šå¸¸å›ºå®šæ˜¯ï¼šhttps://<å¹³å°åœ°å€>/index.php/action/xmlrpc","setting.typecho.previewUrl.tip":"Typechoå¹³å°çš„æ–‡ç« é¢„è§ˆè§„åˆ™ï¼Œé€šå¸¸æ˜¯ï¼š/index.php/archives/[postid]","setting.metaweblog.home.tip":"Metaweblogå¹³å°çš„é¦–é¡µ","setting.metaweblog.username.tip":"Metaweblogå¹³å°ç™»å½•å","setting.metaweblog.password.tip":"Metaweblogå¹³å°å¯†ç ","setting.metaweblog.apiUrl.tip":"Metaweblogå¹³å°çš„xmlrpcè¿œç¨‹å‘å¸ƒåœ°å€","setting.metaweblog.previewUrl.tip":"Metaweblogå¹³å°çš„æ–‡ç« é¢„è§ˆè§„åˆ™ï¼Œ[postid]å¯ä½œæ–‡æ–‡ç« IDå ä½ç¬¦","setting.jvue.home.tip":"Jvueå¹³å°çš„é¦–é¡µï¼Œä¾‹å¦‚ï¼šhttp://localhost:3000","setting.jvue.username.tip":"Jvueå¹³å°ç™»å½•å","setting.jvue.password.tip":"Jvueå¹³å°å¯†ç ","setting.jvue.apiUrl.tip":"Jvueå¹³å°çš„xmlrpcè¿œç¨‹å‘å¸ƒåœ°å€ï¼Œé€šå¸¸å›ºå®šæ˜¯ï¼šhttps://<å¹³å°åœ°å€>/xmlrpcï¼Œä¾‹å¦‚ï¼šhttp://localhost:8008/xmlrpc","setting.jvue.previewUrl.tip":"Jvueå¹³å°çš„æ–‡ç« é¢„è§ˆè§„åˆ™ï¼Œé€šå¸¸æ˜¯ï¼š/post/[postid].html","setting.zhihu.home.tip":"çŸ¥ä¹Žä¸“æ é¦–é¡µåœ°å€ï¼Œé€šå¸¸å›ºå®š","setting.zhihu.username.tip":"çŸ¥ä¹Žç”¨æˆ·åï¼Œå¿…é¡»è®¾ç½®æ­£ç¡®ï¼Œå¦åˆ™æ— æ³•èŽ·å–ä¸“æ ","setting.zhihu.password.tip":"çŸ¥ä¹ŽCookieï¼Œè¯·å‹¿ä¿®æ”¹","setting.zhihu.apiUrl.tip":"é€šå¸¸å›ºå®šï¼Œè¯·å‹¿ä¿®æ”¹","setting.zhihu.previewUrl.tip":"çŸ¥ä¹Žå¹³å°æ–‡ç« é¢„è§ˆè§„åˆ™ï¼Œé€šå¸¸æ˜¯ï¼š/[postid]","setting.csdn.home.tip":"CSDNåšå®¢é¦–é¡µåœ°å€ï¼Œé€šå¸¸å›ºå®š","setting.csdn.password.tip":"CSDNçš„Cookieï¼Œè¯·å‹¿ä¿®æ”¹","setting.csdn.apiUrl.tip":"é€šå¸¸å›ºå®šï¼Œè¯·å‹¿ä¿®æ”¹","setting.csdn.previewUrl.tip":"CSDNå¹³å°æ–‡ç« é¢„è§ˆè§„åˆ™","setting.wechat.home.tip":"å¾®ä¿¡å…¬ä¼—å·é¦–é¡µåœ°å€ï¼Œé€šå¸¸å›ºå®š","setting.wechat.password.tip":"å¾®ä¿¡å…¬ä¼—å·çš„Cookieï¼Œè¯·å‹¿ä¿®æ”¹","setting.wechat.apiUrl.tip":"é€šå¸¸å›ºå®šï¼Œè¯·å‹¿ä¿®æ”¹","setting.wechat.previewUrl.tip":"å¾®ä¿¡å…¬ä¼—å·å¹³å°æ–‡ç« é¢„è§ˆè§„åˆ™","setting.jianshu.home.tip":"ç®€ä¹¦é¦–é¡µåœ°å€ï¼Œé€šå¸¸å›ºå®š","setting.jianshu.password.tip":"ç®€ä¹¦çš„Cookieï¼Œè¯·å‹¿ä¿®æ”¹","setting.jianshu.apiUrl.tip":"é€šå¸¸å›ºå®šï¼Œè¯·å‹¿ä¿®æ”¹","setting.jianshu.previewUrl.tip":"ç®€ä¹¦å¹³å°æ–‡ç« é¢„è§ˆè§„åˆ™","setting.juejin.home.tip":"æŽ˜é‡‘é¦–é¡µåœ°å€ï¼Œé€šå¸¸å›ºå®š","setting.juejin.password.tip":"æŽ˜é‡‘çš„Cookieï¼Œè¯·å‹¿ä¿®æ”¹","setting.juejin.apiUrl.tip":"é€šå¸¸å›ºå®šï¼Œè¯·å‹¿ä¿®æ”¹","setting.juejin.previewUrl.tip":"æŽ˜é‡‘å¹³å°æ–‡ç« é¢„è§ˆè§„åˆ™","setting.halo.home.tip":"Haloé¦–é¡µåœ°å€ï¼Œéœ€è¦åŒ…æ‹¬åŸŸåç«¯å£ï¼Œä¾‹å¦‚ï¼šhttp://localhost:8090","setting.halo.username.tip":"Haloåšå®¢ç™»å½•å","setting.halo.password.tip":"Haloåšå®¢ç™»å½•å¯†ç ","setting.halo.apiUrl.tip":"Haloåšå®¢APIåœ°å€ï¼Œä¸€èˆ¬ä¸ŽHaloé¦–é¡µç›¸åŒ","setting.halo.previewUrl.tip":"Haloåšå®¢æ–‡ç« é¢„è§ˆè§„åˆ™ï¼Œé»˜è®¤ /archives/{slug}ï¼Œå ä½ç¬¦æœ‰ {slug} {name} {year} {month} {day}ï¼Œå¯åœ¨ [halo-home-url]/console/settings?tab=routeRulesè®¾ç½®","setting.flowus.home.tip":"Flowusé¦–é¡µåœ°å€ï¼Œé€šå¸¸å›ºå®š","setting.flowus.password.tip":"Flowusçš„Cookieï¼Œè¯·å‹¿ä¿®æ”¹","setting.flowus.apiUrl.tip":"é€šå¸¸å›ºå®šï¼Œè¯·å‹¿ä¿®æ”¹","setting.flowus.previewUrl.tip":"Flowuså¹³å°æ–‡ç« é¢„è§ˆè§„åˆ™","setting.bilibili.home.tip":"å“”å“©å“”å“©ä¸“æ åœ°å€ï¼Œé€šå¸¸å›ºå®š","setting.bilibili.password.tip":"å“”å“©å“”å“©çš„Cookieï¼Œè¯·å‹¿ä¿®æ”¹","setting.bilibili.apiUrl.tip":"é€šå¸¸å›ºå®šï¼Œè¯·å‹¿ä¿®æ”¹","setting.bilibili.previewUrl.tip":"å“”å“©å“”å“©ä¸“æ æ–‡ç« é¢„è§ˆè§„åˆ™","setting.picgo.refer.to":"è¯¦æƒ…è¯·å‚è€ƒï¼š","setting.picgo.refer.to.online.doc":"PicGOé…ç½®åœ¨çº¿æ–‡æ¡£","setting.picgo.picbed":"å›¾åºŠè®¾ç½®","setting.picgo.picgo":"PicGOè®¾ç½®","main.opt.edit":"ç¼–è¾‘","main.opt.delete":"åˆ é™¤","setting.picgo.picgo.open.config.file":"æ‰“å¼€é…ç½®æ–‡ä»¶","setting.picgo.picgo.click.to.open":"ç‚¹å‡»æ‰“å¼€","setting.picgo.picgo.choose.showed.picbed":"è¯·é€‰æ‹©æ˜¾ç¤ºçš„å›¾åºŠ","setting.picgo.picbed.selected.tip":"å·²é€‰ä¸­","setting.picgo.picbed.unselected.tip":"æœªé€‰ä¸­","setting.picgo.picbed.set.default":"è®¾ä¸ºé»˜è®¤å›¾åºŠ","setting.picgo.picbed.current.selected.tip":"å·²é€‰ä¸­å›¾åºŠï¼š","setting.picgo.picbed.current.tip":"å½“å‰é»˜è®¤å›¾åºŠæ˜¯ï¼š","setting.picgo.picbed.uploader.config.name":"å›¾åºŠé…ç½®å","setting.picgo.picbed.uploader.config.name.placeholder":"è¯·è¾“å…¥é…ç½®åç§°","setting.picgo.config.name":"é…ç½®åç§°","setting.picgo.config.name.placeholder":"è¯·è¾“å…¥é…ç½®åç§°","setting.picgo.index.tip":"æ³¨æ„ï¼š1ã€æ­¤å¤„ä¸Šä¼ çš„å›¾ç‰‡ä¸ä¼šè‡ªåŠ¨æ’å…¥æ–‡æ¡£ä¸­ï¼Œè¯·æ‰‹åŠ¨ç‚¹å‡»æŒ‰é’®å¤åˆ¶é“¾æŽ¥ï¼Œç„¶åŽ Ctrl+V ç²˜è´´åˆ°æ–‡æ¡£ä¸­ã€‚2ã€å¯¹äºŽæ–‡æ¡£å½“ä¸­åŽŸæœ¬å·²ç»å­˜åœ¨çš„æœ¬åœ°å›¾ç‰‡ï¼Œç‚¹å‡»ä¸Šä¼ ä¹‹åŽä¸ä¼šç›´æŽ¥æ›¿æ¢åŽŸå§‹å›¾ç‰‡ï¼Œåªä¼šå­˜å‚¨æœ¬åœ°å›¾ç‰‡ä¸Žå›¾åºŠå›¾ç‰‡çš„æ˜ å°„ä¿¡æ¯ï¼Œéœ€è¦åœ¨å‘å¸ƒæ–‡ç« æ—¶æ‰‹åŠ¨å‹¾é€‰ã€ä½¿ç”¨å›¾åºŠã€‘æ‰ä¼šè¿›è¡Œä¸´æ—¶é“¾æŽ¥æ›¿æ¢ï¼Œè¯·çŸ¥æ‚‰ã€‚è¿™æ ·åšæ˜¯ä¸ºäº†ä¸ç ´åå…¶ä»–åœ°æ–¹å¯¹æ–‡æ¡£å›¾ç‰‡çš„å¤„ç†ã€‚å½“ç„¶ï¼Œæ‚¨ä¹Ÿå¯ä»¥æ‰‹åŠ¨å¤åˆ¶å›¾åºŠé“¾æŽ¥ï¼Œç„¶åŽåˆ é™¤åŽŸå›¾ç‰‡ï¼Œæ›¿æ¢ä¸ºå›¾åºŠå›¾ç‰‡ã€‚3ã€è¯¥å›¾ç‰‡åˆ—è¡¨ä»…å±•ç¤ºæ­¤æ–‡æ¡£åŒ…å«çš„å›¾ç‰‡ã€‚","setting.picgo.index.copy.link":"å¤åˆ¶é“¾æŽ¥","setting.picgo.setting.timestamp.rename":"æ—¶é—´æˆ³é‡å‘½å","setting.picgo.setting.close":"å…³","setting.picgo.setting.open":"å¼€","setting.picgo.setting.log.file":"æ—¥å¿—æ–‡ä»¶","setting.picgo.plugin":"æ’ä»¶è®¾ç½®","setting.picgo.plugin.list":"æ’ä»¶åˆ—è¡¨","setting.picgo.plugin.import.local":"å¯¼å…¥æœ¬åœ°æ’ä»¶","setting.picgo.plugin.install":"å®‰è£…","setting.picgo.plugin.installing":"å®‰è£…ä¸­","setting.picgo.plugin.installed":"å·²å®‰è£…","setting.picgo.plugin.doing.something":"è¿›è¡Œä¸­","setting.picgo.plugin.search.placeholder":"æœç´¢npmä¸Šçš„PicGoæ’ä»¶ï¼Œæˆ–è€…ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æŸ¥çœ‹ä¼˜ç§€æ’ä»¶åˆ—è¡¨ã€‚æŽ¨èï¼šwatermark-elecã€s3","setting.picgo.plugin.gui.not.implemented":"è¯¥æ’ä»¶æœªå¯¹å¯è§†åŒ–ç•Œé¢è¿›è¡Œä¼˜åŒ–, æ˜¯å¦ç»§ç»­å®‰è£…?","setting.picgo.setting.node.path":"Nodeå®‰è£…è·¯å¾„","setting.picgo.setting.node.path.tip":"è¯·è¾“å…¥Nodeå®‰è£…å®Œæ•´è·¯å¾„ï¼Œä¾‹å¦‚ï¼š/opt/node16/binï¼ŒNodeç‰ˆæœ¬>=16","setting.picgo.setting.node.registry":"NPMçš„registry","setting.picgo.setting.node.registry.tip":"å›½å†…æŽ¨èï¼šhttps://registry.npmmirror.com","setting.picgo.setting.node.proxy":"NPMä»£ç†","setting.picgo.setting.node.proxy.tip":"ä¸€èˆ¬å¯ç•™ç©ºï¼Œå¦‚æœ‰ç‰¹æ®Šéœ€æ±‚å¯è®¾ç½®è‡ªå®šä¹‰ä»£ç†","setting.picgo.setting.config.tip":"æ³¨æ„ï¼šæ¨ªçº¿ä»¥ä¸Šçš„å±žæ€§ä¼šæ”¹å˜ä¸Šä¼ å›¾ç‰‡çš„è¡Œä¸ºï¼Œé…ç½®å¯è‡ªåŠ¨ä¿å­˜ã€‚æ¨ªçº¿ä»¥ä¸‹çš„å±žæ€§ä»…ä»…åœ¨å®‰è£…æ’ä»¶æ—¶ç”¨åˆ°ï¼Œå¹¶ä¸”éœ€è¦ç‚¹å‡»ã€ç¡®è®¤ã€‘æŒ‰é’®æ‰èƒ½ä¿å­˜ã€‚","setting.picgo.plugin.install.success":"æ’ä»¶å·²ç»æˆåŠŸå®‰è£…ï¼Œè¯·æ¸…é™¤æœç´¢å…³é”®å­—åˆ·æ–°åˆ—è¡¨ã€‚ç‚¹å‡»æ’ä»¶å¯¹åº”ã€è®¾ç½®ã€‘å›¾æ ‡å¯æŸ¥çœ‹æ’ä»¶è¯¦æƒ…ï¼Œå¹¶å¯¹æ’ä»¶è¿›è¡Œè‡ªå®šä¹‰è®¾ç½®ã€‚å¦‚æžœæ˜¯å›¾åºŠæ‰©å±•ï¼Œè¯·å…³é—­é‡æ–°æ‰“å¼€ï¼Œç„¶åŽå¯ç”¨å›¾åºŠå¹¶è¿›è¡Œè®¾ç½®ã€‚","syp.about":"å…³äºŽä½œè€…","setting.picgo.plugin.uninstall":"å¸è½½æ’ä»¶","setting.picgo.plugin.uninstall.success":"æ’ä»¶å·²ç»æˆåŠŸå¸è½½ã€‚","setting.picgo.plugin.enable":"å¯ç”¨æ’ä»¶","setting.picgo.plugin.disable":"ç¦ç”¨æ’ä»¶","setting.picgo.plugin.update":"æ›´æ–°æ’ä»¶","setting.picgo.plugin.config.setting":"æ’ä»¶è®¾ç½®","setting.picgo.plugin.work":"å·²å…¼å®¹","setting.picgo.plugin.nowork":"ä¸å…¼å®¹","setting.picgo.plugin.nouse":"ä¸å¯ç”¨","setting.picgo.plugin.update.success":"æ›´æ–°æˆåŠŸ","setting.conf.import.syp":"å¯¼å…¥æŒ‚ä»¶é…ç½®","setting.conf.import.picgo":"å¯¼å…¥PicGOé…ç½®","setting.conf.export.syp":"å¯¼å‡ºæŒ‚ä»¶é…ç½®","setting.conf.export.picgo":"å¯¼å‡ºPicGOé…ç½®","setting.conf.import.syp.tip":"è¯·é€‰æ‹©æœ‰æ•ˆçš„åŽ†å²å¤‡ä»½jsonæ–‡ä»¶è¿›è¡Œå¯¼å…¥ã€‚æ³¨æ„ï¼šæŒ‚ä»¶é…ç½®ä¼šè¿›è¡Œé…ç½®æ›¿æ¢ã€‚","setting.conf.import.picgo.tip":"è¯·é€‰æ‹©æœ‰æ•ˆçš„åŽ†å²å¤‡ä»½jsonæ–‡ä»¶è¿›è¡Œå¯¼å…¥ã€‚æ³¨æ„ï¼šPicGOæ’ä»¶çš„æ³¨å†Œä¿¡æ¯ä¸å¯¼å…¥ã€‚ä¸ºäº†é…ç½®çš„å…¼å®¹æ€§ï¼Œè¯·å¸è½½æ‰€æœ‰æ’ä»¶ä¹‹åŽï¼Œè¿›è¡ŒPicGOé…ç½®å¯¼å‡ºæ“ä½œã€‚å¸è½½PicGOæ’ä»¶ä¸ä¼šåˆ é™¤æ’ä»¶é…ç½®ï¼Œåªä¼šåˆ é™¤æ’ä»¶æ–‡ä»¶ä»¥åŠæ’ä»¶æ³¨å†Œè®°å½•ã€‚è¯·æ”¾å¿ƒå¸è½½ã€‚","setting.conf.export.syp.tip":"å°†å¯¼å‡ºå¯¹åº”çš„jsoné…ç½®æ–‡ä»¶ï¼Œå¼ºçƒˆå»ºè®®å®šæœŸè¿›è¡Œé…ç½®å¤‡ä»½ã€‚åŽŸåˆ™ä¸Šæ”¯æŒå‘åŽå…¼å®¹ã€‚å¦‚æœ‰ä¸å…¼å®¹é—®é¢˜ï¼Œä¼šç‰¹åˆ«è¯´æ˜Žã€‚","setting.conf.export.picgo.tip":"å°†å¯¼å‡ºå¯¹åº”çš„jsoné…ç½®æ–‡ä»¶ï¼Œå¼ºçƒˆå»ºè®®å®šæœŸè¿›è¡Œé…ç½®å¤‡ä»½ã€‚åŽŸåˆ™ä¸Šæ”¯æŒå‘åŽå…¼å®¹ã€‚å¦‚æœ‰ä¸å…¼å®¹é—®é¢˜ï¼Œä¼šç‰¹åˆ«è¯´æ˜Žã€‚","setting.conf.clear.syp":"æ¸…ç©ºæŒ‚ä»¶é…ç½®","setting.conf.clear.picgo":"æ¸…ç©ºPicGOé…ç½®","setting.conf.clear.tip":"æ¸…ç©ºé…ç½®ä¸å¯æ¢å¤ï¼Œè¯·è°¨æ…Žæ“ä½œã€‚å¼ºçƒˆå»ºè®®å…ˆå¤‡ä»½é…ç½®ã€‚","setting.conf.clear.picgo.tip":"æ¸…ç©ºé…ç½®ä¸å¯æ¢å¤ï¼Œè¯·è°¨æ…Žæ“ä½œã€‚å¼ºçƒˆå»ºè®®å…ˆå¤‡ä»½é…ç½®ã€‚æ­¤æ“ä½œä¼šåˆ é™¤PicGOç›¸å…³é…ç½®æ–‡ä»¶å¤¹ï¼ŒåŒ…æ‹¬é…ç½®ã€æ’ä»¶ã€ç¼“å­˜ç­‰ï¼Œä»…åœ¨PicGOåŠ è½½å‘ç”Ÿå¼‚å¸¸ï¼Œå¹¶ä¸”å®Œå…¨æ— æ³•ä½¿ç”¨çš„æ—¶å€™ä½¿ç”¨ï¼Œå¦åˆ™ä¸¢å¤±é…ç½®åŽæžœè‡ªè´Ÿï¼","setting.main.background":"æŒ‚ä»¶èƒŒæ™¯","setting.main.background.tip":"æ”¯æŒ16è¿›åˆ¶å’Œrgbï¼Œä¾‹å¦‚ï¼š#000000ï¼Œæœªè®¾ç½®æˆ–è€…ç•™ç©ºä¸å˜ã€‚å¦‚æžœæ–°çª—å£è®¾ç½®ï¼Œè¯·é‡æ–°åˆ·æ–°æ–‡æ¡£ã€‚","setting.picgo.manage":"å›¾åºŠç®¡ç†","setting.platform.import":"å¹³å°å¯¼å…¥","setting.platform.store":"æ’ä»¶å•†åº—","setting.platform.add":"æ–°å¢žå¹³å°","setting.platform.add.this":"æ–°å¢žæ­¤å¹³å°","setting.platform.universal":"é€šç”¨å¹³å°","setting.platform.universal.desc":"ç›®å‰æ”¯æŒçš„é€šç”¨å¹³å°æœ‰ï¼šè¯­é›€ã€Notionç­‰ï¼Œé‡‡ç”¨APIæŽˆæƒã€‚è¿™äº›å¹³å°é€šå¸¸æä¾›äº†çŽ°ä»£åŒ–çš„REST APIï¼Œå¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œé›†æˆã€‚","setting.platform.wordpress":"WordPress","setting.platform.wordpress.desc":"Wordpress é€šè¿‡Xmlrpc APIæ”¯æŒï¼Œé‡‡ç”¨ API æŽˆæƒã€‚WordPressæ˜¯ä¸€ä¸ªè‡ªç”±å¼€æºçš„åšå®¢è½¯ä»¶å’Œå†…å®¹ç®¡ç†ç³»ç»Ÿï¼Œå…·æœ‰æ•°é‡ä¼—å¤šçš„ä¼˜è´¨æ’ä»¶å’Œä¸»é¢˜ã€‚","setting.platform.github":"Github","setting.platform.github.desc":"ç›®å‰æ”¯æŒGithubå‘å¸ƒçš„çš„å¹³å°æœ‰ï¼šHexoã€Hugoã€Jekyllã€Vitepressç­‰ï¼Œé‡‡ç”¨ API æŽˆæƒã€‚GitHub æ˜¯ä¸€ä¸ªä½¿ç”¨ Git è¿›è¡Œè½¯ä»¶å¼€å‘å’Œç‰ˆæœ¬æŽ§åˆ¶çš„ä»£ç å¹³å°ã€‚","setting.platform.gitlab":"Gitlab","setting.platform.gitlab.desc":"GitlabåŸºæœ¬ä¸Šä¸ŽGithubçš„ä½¿ç”¨æ–¹å¼ç±»ä¼¼ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯Gitlabæ”¯æŒè‡ªå·±æœ¬åœ°éƒ¨ç½²æˆ–è€…äº‘æœåŠ¡å™¨éƒ¨ç½²ã€‚","setting.platform.metaweblog":"Metaweblog","setting.platform.metaweblog.desc":"ç›®å‰æ”¯æŒMetaweblogçš„å¹³å°æœ‰ï¼šåšå®¢å›­ã€Typechoç­‰ï¼Œé‡‡ç”¨ API æŽˆæƒã€‚MetaWeblog API ä½œä¸ºXML-RPC Web æœåŠ¡å®žçŽ°ï¼Œæ˜¯ç›®å‰å…¬è®¤çš„å¼€æ”¾åšå®¢æ ‡å‡†ã€‚","setting.platform.custom":"è‡ªå®šä¹‰ HTTP åè®®","setting.platform.custom.desc":"ç›®å‰æ”¯æŒè‡ªå®šä¹‰HTTPåè®®çš„å¹³å°æœ‰ï¼šçŸ¥ä¹Žç­‰ï¼Œé‡‡ç”¨ç½‘é¡µæŽˆæƒã€‚è‡ªå®šä¹‰HTTPåè®®é€šè¿‡ç±»ä¼¼ WeChatSync çš„æ–¹å¼å®žçŽ°ã€‚","setting.platform.fs":"æ–‡ä»¶ç³»ç»Ÿ","setting.platform.fs.desc":"æ–‡ä»¶ç³»ç»Ÿï¼Œç›´æŽ¥è°ƒç”¨æ–‡ä»¶ç³»ç»Ÿã€‚","setting.platform.right.tips0":"ç‰¹åˆ«æç¤ºï¼š","setting.platform.right.tips1":"1ã€åœ¨è¿™é‡Œå¯ä»¥è¿›è¡Œå‘å¸ƒé…ç½®ï¼Œç›´æŽ¥ç‚¹å‡» [è®¾ç½®å›¾æ ‡] å³å¯è¿›è¡Œé…ç½®ã€‚","setting.platform.right.tips2":"2ã€å¦‚éœ€æ–°å¢žå¹³å°ï¼Œç›´æŽ¥ç‚¹å‡»ã€Œå¹³å°å¯¼å…¥ã€æˆ–è€…ã€Œæ’ä»¶å•†åº—ã€è¿›è¡Œæ·»åŠ ã€‚","setting.platform.right.tips3":"3ã€ç›®å‰æ”¯æŒ ç½‘é¡µæŽˆæƒ å’Œ API æŽˆæƒä¸¤ç§æ–¹å¼ï¼ŒAPIæŽˆæƒ å¤æ‚ç‚¹ä½†æ˜¯ç›¸å¯¹ç¨³å®šï¼Œç½‘é¡µæŽˆæƒç®€å•ä½†æ˜¯å¯èƒ½ä¼šå¤±æ•ˆã€‚ç½‘é¡µæŽˆæƒæ¨¡å¼å®žçŽ°æ€è·¯ç±»ä¼¼ wechatsync ã€‚","setting.platform.right.tips4":"4ã€å¦‚éœ€å…¼å®¹å…¶ä»–å¹³å°ï¼Œè¯·è”ç³»æˆ‘ï¼šyouweics@163.com æˆ–è€…å¡«å†™ä¸‹é¢çš„è¡¨å•ã€‚","setting.entry.title":"å¹³å°ç»Ÿä¸€è®¾ç½® - ","setting.entry.not.supported":"ä¸æ”¯æŒçš„å¹³å°","setting.upgrade.syp.tip1":"å‡†å¤‡å¼€å§‹è¿ç§»...","setting.upgrade.syp.tip2":"è¿ç§»æˆåŠŸ.","setting.upgrade.syp.tip3":"å·²ç»æ˜¯æœ€æ–°ï¼Œæ— éœ€è¿ç§».","setting.upgrade.syp.tip4":"è¿ç§»å¤±è´¥ï¼Œé”™è¯¯å¦‚ä¸‹","setting.upgrade.syp.tip5":"è¿ç§»æ“ä½œå®Œæˆ.","setting.upgrade.syp.doTip1":"æ£€æµ‹é…ç½®æ–‡ä»¶æ˜¯å¦ä¸ºæœ€æ–°ç‰ˆæœ¬","setting.upgrade.syp.doTip2":"æ£€æµ‹åˆ°æ—§é…ç½®ï¼Œå‡†å¤‡å‡çº§é…ç½®æ–‡ä»¶","setting.upgrade.syp.doTip3":"æ—§é…ç½®å‡çº§","setting.upgrade.syp.doTip4":"æ²¡æœ‰ç‰ˆæœ¬æ›´æ–°ï¼Œè·³è¿‡å‡çº§","main.publish.start":"å¼€å§‹åŒæ­¥","main.publish.remove":"æ‰¹é‡åˆ é™¤","setting.blog.knowledge.space":"çŸ¥è¯†ç©ºé—´/çŸ¥è¯†åº“","main.data.empty":"æš‚æ— æ•°æ®","knowledgeSpaceEnabled.Tips":"éªŒè¯é€šè¿‡ä¹‹åŽï¼Œå°†åˆ—å‡ºå¯ç”¨çš„ [[knowledge-space-title]] åˆ—è¡¨ï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹é»˜è®¤ [[knowledge-space-title]] å¹¶ä¿å­˜","post.bind.auto.tips":"æ­¤å¤„IDä¸ºå‘å¸ƒå·¥å…·è‡ªåŠ¨ä¿å­˜ï¼Œä»…ä½œä¸ºä¿®å¤æ•°æ®ä½¿ç”¨ï¼Œå¦‚æžœæ‚¨ä¸æ¸…æ¥šåŽŸç†ï¼Œè¯·å‹¿ä¿®æ”¹","siyuan.config.setting":"æ€æºè®¾ç½®","setting.blog.siyuan.apiurl":"æ€æºAPIåœ°å€","setting.blog.siyuan.apiurl.tip":"æ€æºç¬”è®°çš„APIåœ°å€ï¼ŒåŒ…æ‹¬ç«¯å£ï¼Œé»˜è®¤æ˜¯ï¼šhttp://127.0.0.1:6806","setting.blog.siyuan.password":"æ€æºToken","setting.blog.siyuan.password.tip":"æ€æºç¬”è®°é‰´æƒTokenï¼Œè¯·ä»Žã€è®¾ç½®->å…³äºŽã€‘å¤åˆ¶ï¼Œå¦‚æžœæ˜¯æœ¬åœ°ç¬”è®°ç•™ç©ºå³å¯","slogan.make.written.fun":"è®©åˆ›ä½œå›žå½’ä¹è¶£","category.batch.not.supported":"æ³¨æ„ï¼šæ‰¹é‡åˆ†å‘æ¨¡å¼éƒ¨åˆ†å¹³å°ä¸æ”¯æŒå…¬å…±åˆ†ç±»ï¼Œä¾‹å¦‚è¯­é›€ã€çŸ¥ä¹Žç­‰","yuque.edit.cate.no.change":"ç”±äºŽè¯­é›€å¹³å°çš„é™åˆ¶ï¼Œæš‚æ—¶ä¸æ”¯æŒç¼–è¾‘æ‰€å±žçŸ¥è¯†åº“ã€‚å¦‚æžœæ‚¨æƒ³ç§»åŠ¨æ–‡æ¡£ï¼Œè¯·å…ˆç‚¹å‡»å–æ¶ˆåˆ é™¤è¯¥æ–‡æ¡£ï¼Œç„¶åŽé‡æ–°é€‰æ‹©æ–°çš„çŸ¥è¯†åº“å‘å¸ƒ","main.commonn.cate.title":"å…¬å…±åˆ†ç±»","main.cate.new":"æ–°åˆ†ç±»","pref.setting.aicode":"ChatGPTè¯·æ±‚key","pref.setting.aicode.tip":"ChatGPTè¯·æ±‚keyæˆ–è€…ç¬¬ä¸‰æ–¹ä»£ç†keyï¼Œå¦‚æžœæ˜¯ä»£ç†keyï¼Œè¯·è®¾ç½®è¯·æ±‚åœ°å€","pref.setting.ai.baseurl":"ChatGPTè¯·æ±‚åœ°å€","pref.setting.ai.baseurl.tip":"ChatGPTè¯·æ±‚åœ°å€ï¼Œå¦‚æžœæ˜¯ChatGPTå®˜æ–¹ï¼Œå¯ç•™ç©º","preference.setting.removeWidgetTag":"åŽ»é™¤æŒ‚ä»¶HTML","pref.setting.ai.proxy.url":"ChatGPTä»£ç†åœ°å€","pref.setting.ai.proxy.url.tip":"å¯ç•™ç©ºï¼Œæ³¨æ„ï¼šå¡«å†™äº†ä»£ç†ä¼šå¿½ç•¥ChatGPTè¯·æ±‚åœ°å€","main.auto.fetch.title":"è‡ªåŠ¨æå–æ ‡é¢˜","main.auto.fetch.cate":"è‡ªåŠ¨æå–åˆ†ç±»","category.ai.hand":"ç”±äºŽå„å¹³å°åˆ†ç±»ä½“ç³»ä¸ä¸€è‡´ï¼Œåˆ†ç±»éœ€è¦æ‰‹åŠ¨è¿›è¡Œæ ¡å‡†ï¼Œä¸ä¼šè‡ªåŠ¨ä¿å­˜","category.ai.enabled":"æ£€æµ‹åˆ°æ‚¨å·²ç»é…ç½®AIï¼Œå¯è¯·å‰å¾€è¯¦ç»†æ¨¡å¼è¿›è¡Œæ“ä½œã€‚å°è´´å£«ï¼šç”±äºŽç½‘ç»œæˆ–è€…å…¶ä»–é—®é¢˜ï¼Œå¦‚æžœç¬¬ä¸€æ¬¡å¤±è´¥ç”Ÿæˆï¼Œå¤šè¯•å‡ æ¬¡æˆ–è®¸å°±èƒ½å‡ºç»“æžœå“Ÿ~ðŸ˜„","sys.config.ai":"AI è®¾ç½®","config.ai.use.siyuan":"æ€æºç¬”è®°å†…éƒ¨ï¼Œç›´æŽ¥ä½¿ç”¨æ€æºç¬”è®°é…ç½®ï¼Œæ— éœ€é…ç½®","setting.blog.yamlLinkEnabled":"YAMLæ°¸ä¹…é“¾æŽ¥","distri.type.overide.warn":"æ³¨æ„ï¼šè¦†ç›–æ¨¡å¼ä¸‹ä¼šç”¨å½“å‰æ•°æ®è¦†ç›–æ‰€æœ‰é€‰æ‹©çš„å¹³å°ï¼Œè¯·è°¨æ…Žæ“ä½œã€‚","distri.type.merge.warn":"æ³¨æ„ï¼šä¸ºäº†ä¿ç•™å¹³å°æ•°æ®ï¼Œåˆå¹¶æ¨¡å¼ä¸‹ï¼Œæ ‡é¢˜å’Œæ‘˜è¦çš„ä¿®æ”¹æ— æ•ˆï¼Œæ‚¨å¯åœ¨åœ¨å¸¸è§„å‘å¸ƒå•ç‹¬ä¿®æ”¹å¯¹åº”å¹³å°çš„æ ‡é¢˜å’Œæ‘˜è¦ï¼Œæ ‡ç­¾å’Œåˆ†ç±»ä¼šä¸Žæ‰€é€‰æ‹©çš„å¹³å°æ•°æ®åˆå¹¶ã€‚","preference.setting.keepTitle":"ä¸æ›´æ–°åŽŸå§‹æ ‡é¢˜","setting.blog.gitlab.url.tip":"Gitlabé¦–é¡µï¼Œä¾‹å¦‚ï¼šhttp://localhost:8002","setting.blog.type.gitlab.user.tip":"Gitlabçš„ç”¨æˆ·å","setting.blog.type.gitlab.token.tip":"Gitlabçš„tokenï¼Œè¯·å‚è€ƒä¸‹é¢é“¾æŽ¥è®¾ç½®ï¼Œå¹¶ä¿è¯æœ‰apiæƒé™","setting.blog.gitlab.apiurl.tip":"Gitlabçš„APIåœ°å€ï¼Œä¸€èˆ¬ä¸Žé¦–é¡µç›¸åŒ","setting.blog.gitlab.previewUrl.tip":"æ–‡ç« é¢„è§ˆåœ°å€ï¼Œä¸€èˆ¬é»˜è®¤å³å¯","main.force.cancel":"å¼ºåˆ¶åˆ é™¤","loading.cost":"æ“ä½œè€—æ—¶","preference.setting.showDocQuickMenu":"æ˜¾ç¤ºæ–‡æ¡£èœå•","preference.setting.showQuickMenu":"æ˜¾ç¤ºæžé€Ÿå‘å¸ƒ","preference.setting.showSingleMenu":"æ˜¾ç¤ºå¸¸è§„å‘å¸ƒ","preference.setting.showBatchMenu":"æ˜¾ç¤ºæ‰¹é‡åˆ†å‘","preference.setting.showAIMenu":"æ˜¾ç¤ºAIèœå•","preference.setting.showExtendMenu":"æ˜¾ç¤ºæ‰©å±•èœå•","preference.setting.showArticleManageMenu":"æ˜¾ç¤ºæ–‡ç« ç®¡ç†èœå•","preference.setting.ignoreBlockRef":"å¿½ç•¥å—å¼•ç”¨","preference.setting.allowChangeSlug":"å…è®¸ä¿®æ”¹åˆ«å","preference.setting.allowChangeSlug.tips":"è­¦å‘Šï¼Œåˆ«åæ˜¯æ–‡ç« çš„å”¯ä¸€æ ‡è®°ï¼Œå¦‚æžœå…è®¸ä¿®æ”¹ï¼Œè¯·è‡ªè¡Œä¿è¯å”¯ä¸€æ€§ï¼Œå¦åˆ™æ–‡ç« ä¼šå‘å¸ƒå¤±è´¥ã€‚å¦‚æžœä½ ä¸æ¸…æ¥šæ­¤åŠŸèƒ½ï¼Œè¯·ä½¿ç”¨é»˜è®¤çš„è‡ªåŠ¨ç”Ÿæˆçš„åˆ«å","message.publish.notShared":"æ–‡ç« å°šæœªåˆ†äº«ï¼Œæ— æ³•åœ¨å¤–éƒ¨æŸ¥çœ‹ã€‚è¯·åˆ†äº«æ–‡ç« æˆ–è€…åœ¨PC å®¢æˆ·ç«¯å†…éƒ¨é€šè¿‡æ’ä»¶èœå•è¿›è¡Œé¢„è§ˆã€‚","setting.telegraph.username.label":"ä½œè€…","setting.telegraph.password.label":"Uuid","setting.telegraph.home.tip":"telegra.phå¹³å°é¦–é¡µï¼Œé€šå¸¸å›ºå®šæ˜¯ï¼šhttps://telegra.ph/","setting.telegraph.username.tip":"ä½œè€…ï¼Œä¼šæ˜¾ç¤ºåœ¨æ–‡ç« è¯¦æƒ…ï¼Œå¯è‡ªè¡Œè®¾ç½®ï¼Œé»˜è®¤ä¸ºç©º","setting.telegraph.password.tip":"åŒ¿åæ¨¡å¼æ— éœ€å¡«å†™ï¼Œç‚¹å‡»éªŒè¯ä¹‹åŽå¯è‡ªåŠ¨èŽ·å–ï¼Œç™»å½•æ¨¡å¼è¯·ä»Žè¯·ä»Ž TG å®¢æˆ·ç«¯æŽˆæƒä¹‹åŽè·³è½¬çš„æµè§ˆå™¨é‡Œé¢æ‰¾åˆ° Cookie tph_uuid å¡«åˆ°è¿™é‡Œ","setting.telegraph.apiurl.tip":"telegra.phçš„APIåœ°å€ï¼Œé€šå¸¸å›ºå®šæ˜¯ï¼šhttps://telegra.ph/","setting.telegraph.previewUrl.tip":"telegra.phçš„æ–‡ç« é¢„è§ˆè§„åˆ™ï¼Œé€šå¸¸æ˜¯ï¼š/[notebook]/[postid]","setting.telegraph.accessToken.tip":"åŒ¿åæ¨¡å¼æ— éœ€å¡«å†™ï¼Œç™»å½•æ¨¡å¼è¯·ä»Žè¯·ä»Ž TG å®¢æˆ·ç«¯æŽˆæƒä¹‹åŽè·³è½¬çš„æµè§ˆå™¨æ‰¾åˆ° Cookie tph_token å¡«åˆ°è¿™é‡Œ","setting.telegraph.saveHash.tip":"åŒ¿åæ¨¡å¼æ— éœ€å¡«å†™ï¼Œç‚¹å‡»éªŒè¯ä¹‹åŽå¯è‡ªåŠ¨èŽ·å–ï¼Œç™»å½•æ¨¡å¼è¯·ä»Ž TG å®¢æˆ·ç«¯æŽˆæƒä¹‹åŽè·³è½¬çš„æµè§ˆå™¨é‡Œé¢æ‰¾åˆ° https://edit.telegra.ph/check è¿”å›žçš„ save_hash å¡«åˆ°è¿™é‡Œ","setting.telegraph.forceReAuth.tip":"æŽˆæƒä¿¡æ¯ç”Ÿæ•ˆä¹‹åŽå¯å‹¾é€‰æ­¤é¡¹ï¼Œç„¶åŽä¼šé‡æ–°æŽˆæƒ","setting.telegraph.login.anonymous":"åŒ¿åå‘å¸ƒ","setting.telegraph.login.user":"ç™»å½•å‘å¸ƒ","page.loading":"é¡µé¢åŠ è½½ä¸­...","setting.blog.middlewareUrl.new":"æ–°ä»£ç†(æŽ¨è)","setting.blog.corsAnywhereUrl.tip":"1.20.0+ å…¨æ–°CORSå…¨å±€ä»£ç†ï¼Œä¼˜å…ˆçº§é«˜ï¼Œè®¾ç½®ä¹‹åŽä¼šå¿½ç•¥ä¸Šé¢æ—§çš„ä»£ç†åœ°å€ã€‚è®¾ç½®ä¹‹åŽå¯å½»åº•è§£å†³æµè§ˆå™¨è·¨åŸŸã€ç§‘å­¦ä¸Šç½‘é—®é¢˜","setting.blog.middlewareUrl.my.new.tip":"1.20.0+ æ–°ç‰ˆCORSä»£ç†ï¼Œå½»åº•è§£å†³ã€Œç§‘å­¦ä¸Šç½‘ã€ã€ã€ŒCORS è·¨åŸŸã€ä¸¤å¤§é—®é¢˜ï¼Œæ”¯æŒå…¨å±€è·¨åŸŸè¯·æ±‚ï¼ˆæ”¯æŒç»•è¿‡ headerã€è¯·æ±‚ä½“æ”¯æŒ FormDataï¼‰ã€‚å—é™äºŽ CORS ç­–ç•¥ï¼Œã€ŒDocker ç‰ˆæœ¬ã€å¿…é¡»è®¾ç½® CORS ä»£ç†ï¼Œå¦åˆ™å¤§éƒ¨åˆ†åœºæ™¯å°†æ— æ³•ä½¿ç”¨ã€‚æŠ€æœ¯ç»†èŠ‚å¯å‚è€ƒ MDNï¼šhttps://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS ä»¥åŠ https://developer.mozilla.org/zh-CN/docs/Glossary/CORSã€‚å¯ç§å‘é‚®ä»¶åˆ° youweics@163.com ä»˜è´¹å’¨è¯¢ðŸ¤ã€‚","setting.blog.middlewareUrl.my.warn.tip":"âš ï¸ç‰¹åˆ«æé†’ï¼šè¯·æ±‚é™åˆ¶ä¸º ã€Œ10ä¸‡æ¬¡/å¤©ã€ã€ã€Œ1000æ¬¡/10åˆ†é’Ÿã€ï¼Œé¢‘æ¬¡ä¸ºã€Œæ‰€æœ‰äººå…±äº«ã€ï¼Œå› æ­¤èµ„æºååˆ†çè´µã€‚ä¸ºäº†å¤§å®¶çš„åˆ©ç›Šï¼Œè¯·å‹¿æ¶æ„è¯·æ±‚ï¼Œå¦åˆ™ï¼Œæˆ‘ä»¬ä¼šå…³é—­æ­¤å…±äº«ä»£ç†ã€‚","platform.new.platform":"æ£€æµ‹åˆ°è¿˜æœ‰ [count] ä¸ªå†…ç½®å¹³å° [platform] å°šæœªå¯¼å…¥ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å¹³å°å¯¼å…¥æ‰¹é‡å¯¼å…¥ï¼Œæˆ–è€…åŽ»æ’ä»¶å•†åº—è‡ªè¡Œæ·»åŠ ã€‚","import.v081.warn":"è€ƒè™‘åˆ° v0.8.1 å·²ç»æ˜¯å¾ˆæ—©çš„ç‰ˆæœ¬äº†ï¼Œæ­¤åŠŸèƒ½å¯èƒ½ä¸å†éœ€è¦ã€‚å¦‚æžœæ‚¨éœ€è¦æ­¤åŠŸèƒ½ï¼Œå¯åé¦ˆè‡³ youweics@163.com ï¼Œæˆ‘ä»¬ä¼šæ ¹æ®éœ€æ±‚å†³å®šæ˜¯å¦å®žçŽ°æ­¤åŠŸèƒ½ã€‚","publisher.picbed.service":"å›¾åºŠæœåŠ¡","publisher.picbed.none":"ä¸ä½¿ç”¨","publisher.picbed.picgo":"PicGo æ’ä»¶","publisher.picbed.picgo.not.install":"æ­¤åŠŸèƒ½éœ€è¦ã€ŒPicGo å›¾åºŠã€æ’ä»¶ 1.9.0+ æ”¯æŒï¼Œè¯·å…ˆä»Žé›†å¸‚å®‰è£…","publisher.picbed.bundled":"å½“å‰å¹³å°","publisher.picbed.recom1":"å¼ºçƒˆæŽ¨è","publisher.picbed.recom2":"æŽ¨è","publisher.post.status":"æ–‡ç« çŠ¶æ€","publisher.post.status.pubish":"å‘å¸ƒ","publisher.post.status.draft":"è‰ç¨¿","publisher.post.status.private":"ç§å¯†","publisher.post.status.future":"å®šæ—¶","publisher.post.password":"å¯†ç ä¿æŠ¤","publisher.post.password.tip":"è¯·è¾“å…¥æ–‡ç« å¯†ç ï¼Œç•™ç©ºåˆ™ä¸è®¾ç½®","publisher.post.future":"å®šæ—¶å‘å¸ƒ","setting.platform.halo.v29.only":"æ³¨æ„ï¼šç”±äºŽ Halo 2.20+ ä¿®æ”¹äº† API ç­–ç•¥ï¼ŒV2.20+ æ­¤å¹³å°å·²ç»æ— æ³•ä½¿ç”¨ï¼Œè¯·å¯¼å…¥å¹¶ä½¿ç”¨æ–°å¹³å° ã€ŒHaloç½‘é¡µç‰ˆã€ã€‚å¦‚ä»éœ€ä½¿ç”¨æ­¤å¹³å°ï¼Œè¯·é™çº§åˆ° Halo 2.9ã€‚","setting.haloweb.home.tip":"æ‚¨çš„Halo2.20+åšå®¢é¦–é¡µåœ°å€","setting.haloweb.password.tip":"Haloçš„Cookieï¼Œè¯·å‹¿ä¿®æ”¹","setting.haloweb.apiUrl.tip":"é€šå¸¸å’Œæ‚¨çš„Halo2.20+åšå®¢é¦–é¡µåœ°å€ç›¸åŒ","setting.haloweb.previewUrl.tip":"Haloç½‘é¡µç‰ˆå¹³å°æ–‡ç« é¢„è§ˆè§„åˆ™","common.help":"æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£","setting.blog.type.fs.store.path":"å­˜å‚¨è·¯å¾„","setting.blog.type.fs.store.path.tip":"æ–‡æ¡£å‘å¸ƒä¹‹åŽçš„å­˜å‚¨ä½ç½®ï¼Œç³»ç»Ÿç»å¯¹è·¯å¾„ï¼Œé»˜è®¤ä¸ºï¼šä¸‹è½½ç›®å½•/syp","setting.blog.type.fs.media.path":"åª’ä½“å­˜å‚¨è·¯å¾„","setting.blog.type.fs.media.path.tip":"å›¾ç‰‡ã€é™„ä»¶ç­‰çš„å­˜å‚¨ä½ç½®ï¼Œç›¸å¯¹äºŽå­˜å‚¨ä½ç½®ï¼Œé»˜è®¤ä¸ºï¼šassets","setting.blog.type.fs.yaml.type":"YAMLç±»åž‹","setting.blog.type.fs.yaml.type.tip":"é€‰æ‹©æœ¬åœ°ç³»ç»Ÿå­˜å‚¨æ—¶ä½¿ç”¨çš„YAMLæ ¼å¼","setting.blog.type.fs.yaml.type.default":"é»˜è®¤","setting.blog.type.fs.yaml.type.hexo":"Hexo","setting.blog.type.fs.yaml.type.hugo":"Hugo","setting.blog.type.fs.yaml.type.jekyll":"Jekyll","setting.blog.type.fs.yaml.type.vuepress":"Vuepress","setting.blog.type.fs.yaml.type.vuepress2":"Vuepress2","setting.blog.type.fs.yaml.type.vitepress":"Vitepress","setting.blog.type.fs.yaml.type.quartz":"Quartz"},ay={"lang.choose":"Language","lang.choose.placeholder":"Please select language","theme.mode.choose":"Mode","theme.mode.dark":"Dark mode","theme.mode.light":"Light mode","service.tab.manage":"Post manage","service.tab.publish.service":"Publish service","service.tab.publish.setting":"Publish setting","service.tab.platform.setting":"Platform setting","service.tab.post.bind":"Post bind","service.tab.service.switch":"Service switch","service.tab.change.local":"Change language","main.publish.editmode":"Edit mode","main.publish.editmode.simple":"Simple","main.publish.editmode.complex":"Complex","main.publish.editmode.source":"Source","main.publish.vuepress.tip":"Recommends use it with vuepress-theme-vdoing , and the subsequent bug will only update this theme","main.publish.github.error.tip":"Configure error or API is not available, please check. If you modify the configuration, please refresh the page","main.publish.github":"Send Github","main.publish.github.tip":"Checking the Markdown text of the article to the GitHub warehouse corresponding to Vuepress (need to perform related configuration first, unsatisfactory or configuration error will be ignored)","main.publish.github.choose.path":"Choose path","main.publish.github.published.path":"Published path","main.publish.github.choose.path.use.default":"Default path","main.publish.github.choose.path.use.default.tip":"Using the default directory, all articles are published in the configuration default directory, no need to select the directory every time it is published","main.publish.github.no.tip":"You have not opened github release, please copy the right text on your own","main.publish.github.choose.title":"File name","main.publish.github.choose.title.tip":"Vuepress-theme-VDoing support file name plus serial number to identify. If you donâ€™t know this usage, please do not modify the file name","main.publish.see.preview":"Click here see new post","main.publish.see.md.preview":"Click here see new md file","main.publish.see.real.preview":"Click here see new post","main.publish.to.wordpress":"Send to WP","main.title":"Post title","main.slug":"Post slug","main.auto.fetch.slug":"Auto fetch slug","main.use.google.translate":"Use Google translate API","main.use.hash":"Use hash","main.use.hash.tip":"Do not use HASH to show more meaningful URLs, but it may cause the only path of the article to repeat (the consequence is that Vuepress will build a failure unless manual solution to the other problem), please know","main.force.refresh":"Force refresh","main.force.refresh.tip":"In order to prevent the wrongdoing aliases by mistake, the attribute will not be updated by default. If you need to update, please check for compulsory refresh.","main.desc":"Post desc","main.auto.fetch.desc":"Auto fetch desc","main.create.time":"Pub time","main.update.time":"Update time","main.create.time.placeholder":"Please select time","main.update.time.placeholder":"Please select time","main.tag":"Post tag","main.tag.new":"New tag","main.tag.close":"Close tag","main.tag.select":"Select tag","main.auto.fetch.tag":"Auto fetch tag","main.tag.empty":"No tags","main.tag.auto.switch":"Tag switch","main.tag.auto.switch.no.tip":"Auto tag is closed","main.cat":"Category","main.cat.empty":"No Category","main.cat.select":"Please select category","main.yaml.formatter":"YAML Formatter","main.siyuan.to.yaml":"Siyuan attr to YAML","main.yaml.to.siyuan":"YAML to Siyuan attr","main.save.attr.to.siyuan":"Save attr to Siyuan","main.copy":"Copy","main.publish":"Publish","main.publish.loading":"Publishing...","main.loading":"Loading...","main.update":"Update","main.cancel":"Cancel","main.publish.oneclick.attr":"Click to attr","main.publish.oneclick.attr.finish":"Make attr finished","main.publish.status.unpublish":"Unpublish","main.publish.status.published":"Published","main.publish.to.vuepress":"Send to Vuepress","main.publish.to.hugo":"Send to Hugo","main.publish.to.hexo":"Send to Hexo","main.publish.to.jekyll":"Send to Jekyll","main.publish.to.jvue":"Send to JVue","main.publish.to.conf":"Send to Confluence","main.publish.to.cnblogs":"Send to Cnblogs","main.publish.to.liandi":"Send to Liandi","main.publish.to.yuque":"Send to Yuque","main.publish.to.kms":"Send to KMS","main.opt.success":"Success","main.opt.failure":"Error","main.copy.success":"Copy Success","main.copy.failure":"Copy Error","main.opt.quick":"Quick","main.opt.status.publish":"Post published success","main.opt.status.cancel":"Post publishing has been canceled","main.opt.loading":"Loading...","main.opt.warning":"Warning","main.opt.ok":"Confirm","main.opt.cancel":"Cancel","main.opt.select":"Select","main.opt.warning.tip":"The operation will delete the data, whether to continue?","main.opt.tip":"Tips","setting.noneed":"No need setting","setting.blog.setting":" Setting","setting.blog.index":"System setting","setting.blog.type":"Blog type","setting.blog.type.placeholder":"Please select type","setting.blog.type.wordpress.value":"Wordpress","setting.blog.type.wordpress.label":"Wordpress","setting.blog.type.metaweblog.value":"MetaweblogApi","setting.blog.type.metaweblog.label":"Metaweblog API","setting.blog.type.github.value":"Github","setting.blog.type.github.label":"Github","setting.blog.type.github.user":"Github user","setting.blog.type.github.user.tip":"Github user, eg:terwer","setting.blog.type.github.repo":"Github repo","setting.blog.type.github.repo.tip":"Github repo, eg:hexo-blog","setting.blog.type.github.token":"Github token","setting.blog.type.github.token.tip":"Github token, eg:ghp_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX","setting.blog.type.github.token.gen":"Generate Github Personal Token","setting.blog.type.github.default.path":"Doc path","setting.blog.type.github.default.path.tip":"Doc path, eg:docs/_posts","setting.blog.type.github.images.path":"Image store path","setting.blog.type.github.images.path.tip":"Image store path, eg:images","setting.blog.type.github.image.link.path":"Image URL path","setting.blog.type.github.mage.link.path.tip":"Image URL path (platform-dependent, please refer to the platform's documentation)","setting.blog.type.github.msg":"Commit msg","setting.blog.type.github.msg.tip":"Commit msg, eg:auto published by sy-post-publisher","setting.blog.type.github.author":"Author","setting.blog.type.github.author.tip":"Author, eg:terwer","setting.blog.type.github.email":"Email","setting.blog.type.github.email.tip":"Email","setting.blog.type.github.site":"Author's Page","setting.blog.type.github.site.tip":"Author's page, defaults to: [GitHub URL]/[Username] if left empty. Please do not change the key, translate the value to English.","setting.blog.type.github.dyn.yaml":"YAML Preset Configuration","setting.blog.type.github.dyn.yaml.tip":'YAML Preset Configuration, if you do not understand what it is for, please do not configure. JSON format, for example: {"sidebar": false}',"setting.blog.url":"Blog addr","setting.blog.github.url.tip":"Github homepage address","setting.blog.github.apiurl.tip":"Github's REST API address, typically: https://api.github.com","setting.blog.previewPostUrl":"Preview rule","setting.blog.previewPostUrl.tip":"Preview Rules (place occupied: [yyyy] [mm] [dd] [postid]), for example:/post/[postid].html or /[cats]/[yyyy]/[mm]/[dd]/[[dd]/[postid].html","setting.blog.previewUrl":"MD preview rule","setting.blog.previewUrl.tip":"MD file preview rules (place occupied: [user] [repo] [Branch] [docpath]), for example:/[user]/[repo]/blob/[branch]/[docpath]","setting.blog.mdFilenameRule":"File rule","setting.blog.mdFilenameRule.tip":"Markdown File Name Rules (Plasma: [yyyy] [MM] [mm] [dd] [category] [cats] [tag] [tags] [slug] [filename]), for example: [filename].md or [slug].md or [yyyy]-[MM]-[dd]-[slug].md","setting.blog.username":"Username","setting.blog.password":"Password","setting.blog.apiurl":"API Url","setting.blog.pageType":"Page Type","setting.blog.validate":"Validate","setting.blog.save":"Save","setting.blog.vali":"Validate","setting.blog.vali.tip":"Please verify the configuration to ensure the availability of the API, and it will not be used without verification.","setting.blog.vali.tip.metaweblog":"Please verify the configuration to ensure the availability of the API, and it will not be used without verification.","setting.blog.vali.ing":"Validating...","setting.blog.vali.ok":"Available","setting.blog.vali.ok.metaweblog":"The configuration has been saved and verified","setting.blog.vali.error":"Validate error","setting.blog.platform.support.github":"Current github supported platform:","setting.blog.platform.support.metaweblog":"Current metaweblog supported platform:","setting.blog.cancel":"Cancel","setting.vuepress":"Vuepress","setting.hugo":"Hugo","setting.hexo":"Hexo","setting.jekyll":"Jekyll","setting.jvue":"JVue","setting.conf":"Confluence","setting.conf.tip":"Published to Confluence needs to cooperate with my other adapter project (strong recommendation), please refer to:https://github.com/terwer/node-metaweblog-api-adaptor","setting.cnblogs":"Cnblogs","setting.wordpress":"Wordpress","setting.liandi":"Liandi","setting.yuque":"Yuque","setting.kms":"KMS","setting.other1":"Other1","service.switch.vuepress":"Vuepress","service.switch.hugo":"Hugo","service.switch.hexo":"Hexo","service.switch.jekyll":"Jekyll","service.switch.jvue":"JVue","service.switch.conf":"Confluence","service.switch.cnblogs":"Cnblogs","service.switch.wordpress":"Wordpress","service.switch.yuque":"Yuque","service.switch.liandi":"Liandi","service.switch.wechat":"WeChat","service.switch.wemp":"WeMedia","service.switch.zhihu":"Zhihu","service.switch.kms":"LandrayKms","service.switch.must.select.one":"You must add at least one platform","post.bind.vuepress.slug":"Vuepress slug","post.bind.hugo.slug":"Hugo slug","post.bind.hexo.slug":"Hexo slug","post.bind.jekyll.slug":"Jekyll slug","post.bind.cnblogs.postid":"Cnblogs ID","post.bind.jvue.postid":"JVue ID","post.bind.conf.postid":"Conf ID","post.bind.wordpress.postid":"WP ID","post.bind.liandi.postid":"Liandi ID","post.bind.yuque.postid":"Yuque ID","post.bind.kms.postid":"KMS ID","post.bind.conf.save":"Save","post.bind.conf.v081":"Examine the v0.8.1 metadata and import it","post.bind.auto.error":"No ID detected, kindly input the document root ID manually, before proceeding with the repair.","post.bind.auto.empty":"This document has never been published, hence no repair is necessary","post.bind.conf.cancel":"Cancel","form.validate.name.required":"Please input name","form.validate.name.length":"Length should be 0 to 1","form.validate.github.auto.delete":"Auto delete","dynamic.platform.new":"New platform","dynamic.platform.tip":"If the built -in release service cannot be satisfied or multiple instances need to be added, you can add supporting platforms here. Currently supporting Metaweblog API and WordPress API","dynamic.platform.type":"Platform type","dynamic.platform.subtype":"Platform subtype","dynamic.platform.type.metaweblog":"metaweblog API","dynamic.platform.type.wordpress":"Wordpress","dynamic.platform.type.common":"Common","dynamic.platform.type.custom":"Custom","dynamic.platform.key":"Platform key","dynamic.platform.key.tip":"The unique logo of the platform, cannot be repeated, for example: myblog","dynamic.platform.type.github":"Github","dynamic.platform.name":"Platform name","dynamic.platform.name.tip":"Platform name, for example: my blog","dynamic.platform.opt.add":"Submit","dynamic.platform.opt.noselect":"Please select platform type","dynamic.platform.opt.key.exist":"Platform key exists","dynamic.platform.opt.del.select":"Delete","dynamic.platform.opt.del.confirm":"Deleting this platform will completely remove the relevant configuration information of this platform. Do you continue?","dynamic.platform.opt.item.select":"Item no select","dynamic.platform.opt.item.select.tip":"The current selection is:","dynamic.platform.opt.item.no.select.tip":"Please select the line to be deleted","setting.common.home":"Home","setting.common.tip":"The platform homepage is used to preview articles, for example: https://terwork.space","setting.common.apiurl":"API","setting.common.token":"Token","setting.common.token.gen":"Token addr","setting.common.username":"Username","setting.common.username.gen":"Username setting","setting.common.password":"Password","setting.blog.platform.support.common":"Current platformï¼š","platform.must.select.one":"You must enable at least one platform","blog.list.toptip":"Reminder: Click the table line to enter the article details page. The details page has the release button! (ã€ƒ'â–½'ã€ƒ)","config.error.msg":"Network or config error, no data fetched","config.platform.none":"No available platform, please go to switch","post.delete.by.platform":"The article has been deleted by the platform by itself, please click to cancel the compulsory lifting connection","blog.top-data-tip":"Reminder: Please ensure that the Siyuan notes are started and opened the servo. The default servo address: http://127.0.0.0.1: 6806.0.0. Note: The modification will cover the value of the startup setting.","blog.top-data-tip.siyuan":"It is currently in the pendant mode. Starting from version 0.1.0, there is no need to reference the pendant on all pages. You only need to reference a pendant on the parent page. The specific rules are as follows: 1. If there are no subsidiaries, it will be compatible with the previous method of version 0.0.3 to display the release page of the current document. 2. If a subsidiary document is detected, all the subsidiaries will be displayed in a list and paging. You can choose a sub -document separately for release operations.","blog.newwin.open":"Open in a new window","blog.change.siyuan.api":"Modify Siyuan API address","setting.blog.siyuan.current.apiurl":"Current apiUrl=>","setting.blog.middlewareUrl.tip":"In certain scenarios, a necessity might arise (as seen in self-hosting environments, Nginx server setups, Vite development environments, etc.), while other situations could warrant overlooking this requirement.","setting.blog.middlewareUrl.my.tip":"In most cases, it is unnecessary, yet in specific contexts within 'browser environments,' 'docker environments,' 'Nginx server' setups, and the like, it might become essential. If a proxy deployment is absent, one can utilize my shared address: https://api.terwer.space/api/middleware. For performance considerations, I recommend self-deployment; kindly employ https://github.com/terwer/node-metaweblog-api-adaptor for deployment.","setting.blog.middlewareUrl.my.fee.tip":"ðŸ¤Due to substantial costs associated with shared proxies or potential unforeseeable circumstances that may lead to its discontinuation, for the sake of service continuity, deploying one's instance is advised. Alternatively, consider inviting the author for a coffee to support ongoing sharing endeavorsðŸŒ¹.","setting.blog.middlewareUrl.my.coffee":"Sponsor a coffeeâ˜•ï¸","setting.conf.export":"Export config","setting.conf.import":"Import config","setting.conf.transport":"Transport","setting.conf.clear":"Clear config","page.no.id":"pageId fetch error","main.read.mode":"Readonly","main.edit.mode":"Editable","main.read.mode.tip1":"Tips: The multi-platform distribution mode will display the built-in public YAML, and the general release can display the platform's custom YAML.","main.read.mode.tip2":"To identify the uniqueness of the article, slug modifications are ignored and other attributes can be synchronized.","main.read.mode.tip3":"ï¼ï¼ï¼ This feature is advanced, if you are unclear about the YAML syntax and purpose, do not modify it!!","main.opt.onclick.confirm.tip":"This operation will re -generate all attributes other than alias. If you just want to modify individual attributes, please click the individual function button to operate in the detailed mode. Do you continue?","main.cat.list.error":"Category list get error","main.yaml.no.save":"Have you edited YAML, do you synchronize to attributes, and cancel the loss of YAML modification?","setting.github.baseUrl":"Git repo index","setting.github.baseUrl.tip":"Git platform address is used for md file preview, the default is: https://github.com","preference.setting.fixTitle":"Fix title","preference.setting.removeH1":"Remove h1","preference.setting.removeH1.tip":"Delete H1 may accidentally delete the beginning of the beginning of Markdown. If you need to open it, please use more than 2 ones.","preference.setting.newWin":"New win","siyuan.browser.show.close.btn":"Show close btn","siyuan.browser.menu.quick.btn":"Quick publish","siyuan.browser.menu.publish.btn":"Publish","siyuan.browser.menu.preview.btn":"Preview","siyuan.browser.menu.manage.btn":"Manage","siyuan.browser.menu.anki.btn":"Anki","siyuan.browser.menu.picture.btn":"PicGo","siyuan.browser.menu.setting.btn":"Setting","anki.siyuan.deck":"Deck","anki.siyuan.deck.new":"New deck","anki.siyuan.tag":"Tag","anki.siyuan.tag.new":"New tag","picgo.chrome.tip":"If you are using a browser plug -in, you need to download the configuration Picgo client from here: https://github.com/Molunerfinn/PicGo/releases","picgo.siyuan.tip":"If you are using Siyuan notes pendants, you need to configure your own integration of PICGO. The pendant version of the PICGO configuration file is:`[Siyuan Workspace]/data/widgets/sy-post-publisher/lib/picgo/picgo.cfg.json`ï¼ŒPlease refer to the official picgo document for configurationï¼šhttps://picgo.github.io/PicGo-Core-Doc/zh/guide/config.html#%E6%89%8B%E5%8A%A8%E7%94%9F%E6%88%90","post.detail.button.copy.id":"Copy post ID","post.detail.button.share.link":"Copy share link","post.detail.button.browser.open":"Open with default browser","post.detail.button.pic.manage":"Picture manage","post.detail.button.anki.mark":"Anki mark","post.detail.index.send.to.publish":"Send to other platform","post.detail.index.export.to.pdf":"Export to PDF","picgo.upload.status":"Upload status","picgo.upload.select.pic":"Select picture","picgo.upload.clipboard":"Clipboard picture","picgo.upload.onclick":"One click upload","picgo.download.onclick":"One click download","picgo.download.local.to.bed":"Upload picture to bed","picgo.download.bed.to.local":"Upload picture from bed","picgo.pic.preview":"Picture preview","picgo.pic.setting":"Picture setting","picgo.pic.setting.no.tip":"You are currently using the browser plug -in and cannot inherit PicGo. You can only call the local Picgo client on the local Picgo client through HTTP","github.use.permalink":"Use permalink","github.use.permalink.no.warn":"You have closed the permanent link, and Formatter will not generate a mark, which may be useful in some scenarios","github.menu.title":"Menu title","github.menu.title.placeholder":"The menu column title (HUGO platform is dedicated, but the empty is not displayed in the menu)","github.weight":"Weight","github.weight.placeholder":"Weight (decide to display the order, the smaller the display, the more upward)","github.use.date":"Show date","github.use.date.no.warn":"You have closed the date show that it will not generate the date field in Formatter","github.post.picgo.use":"Use picbed","github.post.picgo.use.tip":"To enable this option, the local picture will be uploaded to the custom diagram bed (the remote picture is not uploaded), please make sure that the PICGO diagram bed configuration is correct","github.post.picgo.start.upload":"The picture bed has been opened, and the picture bed is about to upload the picture bed to the bed","github.post.picgo.picbed.error":"The picture uploaded to the picture bed failed, it may be an error in the configuration of the graph, please check the picture bed configuration","setting.yuque.home.tip":"The homepage of the language bird platform is usually fixed: https://www.yuque.com/","setting.yuque.username.tip":"The user name of the spark platform, note that the user name is fixed in [account settings], not the user nickname (*^â–½^*)","setting.yuque.password.tip":"For the token of the spark platform, please follow the link to get it. You only need to grant the document to read and modify the two permissions.","setting.yuque.apiurl.tip":"The API address of the language bird platform is usually fixed: https://www.yuque.com/api/v2","setting.yuque.previewUrl.tip":"Article preview rules for the Yuque platform, Usually: /[notebook]/[postid]","setting.notion.home.tip":"The homepage of the Notion platform is usually fixed: https://www.notion.so/","setting.notion.password.tip":"For the token of the Notion platform, please click the link to get it, you need to check the three permissions of [Read content], [Update content], and [Insert content].","setting.notion.apiurl.tip":"The API address of the Notion platform is usually fixed: https://api.notion.com/v1","setting.notion.previewUrl.tip":"Article preview rules for the Notion platform, usually:/[postid]","setting.confluence.home.tip":"The homepage of the Confluence platform, for example: https://confluence.ocean-zhc.com.cn/wiki","setting.confluence.password.tip":"Personal Access Token for the Confluence platform, please create it in personal settings with read and write permissions for spaces","setting.confluence.apiurl.tip":"The API address of the Confluence platform, usually same as the homepage","setting.confluence.previewUrl.tip":"Article preview rules for the Confluence platform, usually: /spaces/[spaceKey]/pages/[postid]","setting.confluence.parentPageId.label":"Parent page ID","setting.confluence.parentPageId.tip":"Optional. When filled, new pages will be created under the specified parent page (e.g. 327683)","setting.liandi.home.tip":"The homepage of the chain drop platform is usually fixed: https://ld246.com/","setting.liandi.username.tip":"The user name of the chain drop platform, note that after clicking [Personal Homepage], the user name displayed behind the MEMBER on the URL is not a user nickname (*^â–½^*)","setting.liandi.password.tip":"Token on the chain drop platform, please click on the link to get","setting.liandi.apiurl.tip":"The API address of the chain drop platform is usually fixed: https://ld246.com/api/v2","setting.kms.home.tip":"KMS platform homepage, for example: http:// localhost: 9564/kms16_release/kms/multidoc","setting.kms.username.tip":"KMS platform REST account user name, please create according to the link instruction","setting.kms.password.tip":"KMS platform REST account password, please create according to the link instruction","setting.kms.apiurl.tip":"The API address of the KMS platform, for example: http:// localhost: 9564/kms16_release/API/KMS-Multidoc/KMSMultidOWRESTSERVICE","siyuan.local.share.tip":"Reminder: If you find that the sharing link or the browser can be displayed or the network connection is rejected, please check according to the following operation. 1: Siyuan Note-> Settings-> About-> Open the network servo; 2: After the browser is opened, click the bottom Siyuan address at the bottom to modify the corresponding address to the local area network IP address.","setting.cnblogs.home.tip":"The homepage of your blog park is usually: https://www.cnblogs.com/ <your username>","setting.cnblogs.username.tip":"Your blog garden MetaWeblog login name, you can go to your blog garden background-> Settings, note: login name, not a user nickname (*^â–½^*)","setting.cnblogs.password.tip":"Your blog garden Metaweblog access token, you can go to your blog garden backstage-> Settings","setting.cnblogs.apiUrl.tip":"Your blog garden Metaweblog access address, you can go to your blog park background-> settings, usually: https://rpc.cnblogs.com/metaweblog/ <Your username>","setting.cnblogs.previewUrl.tip":"Preview rules for your blog garden article","setting.wordpress.home.tip":"Wordpress homepage","setting.wordpress.username.tip":"WordPress login name, note: it is login name, not a user nickname (*^â–½^*)","setting.wordpress.password.tip":"Wordpress login password","setting.wordpress.apiUrl.tip":"WordPress's XMLRPC remote release address, usually: https:// <WordPress blog address> /xmlrpc.php","setting.wordpress.previewUrl.tip":"The preview rules of the WordPress platform are usually :? P = [Postid]","setting.wordpressdotcom.home.tip":"Wordpress homepage","setting.wordpressdotcom.username.tip":"WordPress login name, note: it is login name, not a user nickname (*^â–½^*)","setting.wordpressdotcom.password.tip":"Wordpress login password","setting.wordpressdotcom.apiUrl.tip":"WordPress's XMLRPC remote release address, usually: https:// <WordPress login name>.wordpress.com/xmlrpc.php","setting.wordpressdotcom.previewUrl.tip":"The preview rules of the WordPress platform are usually :? P = [Postid]","setting.oschina.home.tip":"Homepage of open source China, usually: https://my.oschina.net/ <Your username>","setting.oschina.username.tip":"Open source China login name, you can enter the login mailbox","setting.oschina.password.tip":"Open source China login password","setting.oschina.apiUrl.tip":"Open source China XMLRPC remote publishing address, usually fixed: https://www.oschina.net/ACTION/xmlrpc","setting.oschina.previewUrl.tip":"The preview rules of the open source China platform are usually:/blog/[postid]","setting.typecho.home.tip":"Homepage of the Typecho platform","setting.typecho.username.tip":"Typecho platform login name","setting.typecho.password.tip":"Typecho platform password","setting.typecho.apiUrl.tip":"The XMLRPC remote publishing address of the Typecho platform is usually fixed: https: // <platform address> /index.php/xmlrpc","setting.typecho.previewUrl.tip":"The preview rules of the Typecho platform are usually: /index.php/archives/ [Postid]","setting.metaweblog.home.tip":"The homepage of the Metaweblog platform","setting.metaweblog.username.tip":"Metaweblog platform login","setting.metaweblog.password.tip":"Metaweblog platform password","setting.metaweblog.apiUrl.tip":"The xmlrpc remote publishing address for the Metaweblog platform","setting.metaweblog.previewUrl.tip":"Article preview rules for the Metaweblog platform, [postid] can be composed article ID placeholder","setting.jvue.home.tip":"Homepage of the Jvue platform","setting.jvue.username.tip":"Jvue platform login name","setting.jvue.password.tip":"Jvue platform password","setting.jvue.apiUrl.tip":"The XMLRPC remote release address of the Jvue platform is usually fixed: https: // <platform address>/xmlrpc","setting.jvue.previewUrl.tip":"The preview rules of the Jvue platform are usually:/post/[postid] .html","setting.zhihu.home.tip":"The address of the front page of the column, usually fixed","setting.zhihu.username.tip":"Zhihu username, must be set correctly, otherwise you cannot get the column","setting.zhihu.password.tip":"Know cookies, please do not modify them","setting.zhihu.apiUrl.tip":"Usually fixed, do not modify","setting.zhihu.previewUrl.tip":"Zhihu platform article preview rules, usually: //[postid]","setting.csdn.home.tip":"CSDN blog homepage address, usually fixed","setting.csdn.password.tip":"CSDN cookies, do not modify","setting.csdn.apiUrl.tip":"Usually fixed, do not modify","setting.csdn.previewUrl.tip":"CSDN Platform Article Preview Rules","setting.wechat.home.tip":"The address of the home page of the WeChat public account is usually fixed","setting.wechat.password.tip":"Please do not modify the cookies of WeChat official account","setting.wechat.apiUrl.tip":"Usually fixed, do not modify","setting.wechat.previewUrl.tip":"WeChat official account platform article preview rules","setting.jianshu.home.tip":"Jianshu homepage address, usually fixed","setting.jianshu.password.tip":"Jianshu's Cookie, do not modify","setting.jianshu.apiUrl.tip":"Usually fixed, do not modify","setting.jianshu.previewUrl.tip":"Jianshu platform article preview rules","setting.juejin.home.tip":"Juejin homepage address, usually fixed","setting.juejin.password.tip":"Juejin's Cookie, do not modify","setting.juejin.apiUrl.tip":"Usually fixed, do not modify","setting.juejin.previewUrl.tip":"Juejin platform article preview rules","setting.halo.home.tip":"Halo homepage address, should include the domain and port, for example: http://localhost:8090","setting.halo.username.tip":"Halo blog login name","setting.halo.password.tip":"Halo blog login password","setting.halo.apiUrl.tip":"Halo blog API address, typically the same as the Halo homepage","setting.halo.previewUrl.tip":"Halo blog article preview rule, default /archives/{slug}, with placeholders {slug} {name} {year} {month} {day}, can be set in [halo-home-url]/console/settings?tab=routeRules","setting.flowus.home.tip":"Flowus homepage address, usually fixed","setting.flowus.password.tip":"Flowus cookie, do not modify","setting.flowus.apiUrl.tip":"Usually fixed, do not modify","setting.flowus.previewUrl.tip":"Flowus platform article preview rules","setting.bilibili.home.tip":"Bilibili column address, usually fixed","setting.bilibili.password.tip":"Bilibili Cookie, do not modify","setting.bilibili.apiUrl.tip":"Usually fixed, do not modify","setting.bilibili.previewUrl.tip":"Bilibili column article preview rules","setting.picgo.refer.to":"For details, please refer to:","setting.picgo.refer.to.online.doc":"Picgo configuration online documentation","setting.picgo.picbed":"Picbed setting","setting.picgo.picgo":"PicGo setting","main.opt.edit":"Edit","main.opt.delete":"Delete","setting.picgo.picgo.open.config.file":"Open config file","setting.picgo.picgo.click.to.open":"Click open","setting.picgo.picgo.choose.showed.picbed":"Please select showed picbed","setting.picgo.picbed.selected.tip":"Selected","setting.picgo.picbed.unselected.tip":"Unselected","setting.picgo.picbed.set.default":"Set as default picbed","setting.picgo.picbed.current.selected.tip":"Current selected picbed is:","setting.picgo.picbed.current.tip":"Current picbed is:","setting.picgo.picbed.uploader.config.name":"Picbed config name","setting.picgo.picbed.uploader.config.name.placeholder":"Please input config name","setting.picgo.config.name":"Config name","setting.picgo.config.name.placeholder":"Please input config name","setting.picgo.index.tip":"Note: The image uploaded here will not be automatically inserted into the document. Please manually click the copy button to copy the link, and then Ctrl+V to paste it into the document. This picture list only shows the pictures contained in this document.","setting.picgo.index.copy.link":"Copy link","setting.picgo.setting.timestamp.rename":"Timestamp rename","setting.picgo.setting.close":"Close","setting.picgo.setting.open":"Open","setting.picgo.setting.log.file":"Log file","setting.picgo.plugin":"Plugin setting","setting.picgo.plugin.list":"Plugin list","setting.picgo.plugin.import.local":"Import local plugin","setting.picgo.plugin.install":"Install","setting.picgo.plugin.installing":"Installing","setting.picgo.plugin.installed":"Installed","setting.picgo.plugin.doing.something":"Loading","setting.picgo.plugin.search.placeholder":"Search the picgo plug -in on NPM, or click the button above to view the excellent plug -in list","setting.picgo.plugin.gui.not.implemented":"This plug -in does not optimize the visual interface, is it continued to be installed?","setting.picgo.setting.node.path":"Node install path","setting.picgo.setting.node.path.tip":"Please enter Node to install the full path, for example: /opt/node-v16.14.0-darwin-x64/bin, node version> = 16","setting.picgo.setting.node.registry":"NPM registry","setting.picgo.setting.node.registry.tip":"Mainland recommendï¼šhttps://registry.npmmirror.com","setting.picgo.setting.node.proxy":"NPM proxy","setting.picgo.setting.node.proxy.tip":"Generally, you can leave empty. If you have special needs, you can set a custom agent","setting.picgo.setting.config.tip":"Note: The attributes above the horizontal line will change the behavior of uploading pictures, and the configuration can be stored automatically. The attribute below the horizontal line is only used when installing the plug -in, and you need to click the [Confirm] button to save.","setting.picgo.plugin.install.success":"The plug -in has been successfully installed, please clear the search keyword refresh list. Click the plug -in corresponding [Settings] icon to view the plug -in details and customize the plug -in","syp.about":"About me","setting.picgo.plugin.uninstall":"Uninstall plugin","setting.picgo.plugin.uninstall.success":"Plugin is uninstalled successfully","setting.picgo.plugin.enable":"Enable plugin","setting.picgo.plugin.disable":"Disable plugin","setting.picgo.plugin.update":"Update plugin","setting.picgo.plugin.config.setting":"Plugin setting","setting.picgo.plugin.work":"Work","setting.picgo.plugin.nowork":"Nowork","setting.picgo.plugin.nouse":"Nouse","setting.picgo.plugin.update.success":"Update success","setting.conf.import.syp":"Import pendant configuration","setting.conf.import.picgo":"Import picgo configuration","setting.conf.export.syp":"Export pendant configuration","setting.conf.export.picgo":"Export picgo configuration","setting.conf.import.syp.tip":"Please select effective historical backup JSON files for import. Note: The pendant configuration will be replaced.","setting.conf.import.picgo.tip":"Please select effective historical backup JSON files for import. Note: PICGO configuration will be replaced directly. For the compatibility of configuration, please uninstall all plug -in and perform the picgo configuration export operation. Uninstall the PICGO plugin will not delete the plug -in configuration, only the plug -in file and the plug -in registration record will be deleted. Please rest assured.","setting.conf.export.syp.tip":"The corresponding JSON configuration file will be exported, and configuration backups are strongly recommended. In principle, support is compatible. If there is any compatibility problem, it will be specifically explained.","setting.conf.export.picgo.tip":"The corresponding JSON configuration file will be exported, and configuration backups are strongly recommended. In principle, support is compatible. If there is any compatibility problem, it will be specifically explained.","setting.conf.clear.syp":"Clear pendant configuration","setting.conf.clear.picgo":"Clear picgo configuration","setting.conf.clear.tip":"Clear configuration cannot be restored, please do it carefully. It is strongly recommended to backup configuration first.","setting.conf.clear.picgo.tip":"Clear configuration cannot be restored, please do it carefully. It is strongly recommended to backup configuration first. This operation will delete PicGo -related configuration folders, including configuration, plug -in, cache, etc. It is used only when picgo is completely unavailable, otherwise the consequences of the loss of configuration will be at your own risk!","setting.main.background":"Widget background","setting.main.background.tip":"Support hexadecimal and RGB, for example: #000000, no settings or staying empty unchanged","setting.platform.gitlab":"Gitlab","setting.platform.gitlab.desc":"Gitlab is basically similar to Github, except that Gitlab supports its own on-premises or cloud server deployment","setting.picgo.manage":"Picture manage","setting.platform.import":"Platform import","setting.platform.store":"Plugin store","setting.platform.add":"Add platform","setting.platform.add.this":"Add this platform","setting.platform.universal":"Universal platform","setting.platform.universal.desc":"Currently supported general platforms include Zhihu, Yuque, CSDN, etc. Click the icon to quickly add, or click the button below to customize and add","setting.platform.wordpress":"WordPress","setting.platform.wordpress.desc":"WordPress is a free and open source blog software and Content management system based on PHP and MySQL. WordPress has a plugin architecture and template system. As of April 2018, over 30.6% of the top 10 million websites used WordPress. WordPress is the most popular website Content management system. Approximately 40% of global websites (7500 million) are built using WordPress. WordPress is currently the most popular blog system on the Internet. WordPress stands out in the most famous stage of online publishing. Today, it is used on over 70 million sites.","setting.platform.github":"Github","setting.platform.github.desc":"At present, the platforms that support Github release are: Hexo, Hugo, Jekyll, Vitepress, etc., using API authorization. GitHub is a platform and cloud-based service that uses Git for software development and version control, allowing developers to store and manage their code.","setting.platform.metaweblog":"Metaweblog","setting.platform.metaweblog.desc":"At present, the platforms that support Metaweblog are: Blog Park, Typecho, etc., using API authorization. The MetaWeblog API is an application programming interface created by software developer Dave Winer that allows writing, editing, and deletion using Web services. The API is implemented as an XML-RPC Web service with three methods whose names describe its functionality: metaweblog.newPost(), metaweblog.getPost(), and metaweblog.editPost(). These methods take parameters that specify the username and password of the blogger and information related to a single blog entry.","setting.platform.custom":"Customization","setting.platform.custom.desc":"Customize the HTTP protocol, stay tuned","setting.platform.fs":"File system","setting.platform.fs.desc":"At present, the platforms that support File system are: Local, etc., using API authorization. File system is a platform and cloud-based service","setting.platform.right.tips0":"Special Notes:","setting.platform.right.tips1":"1. You can publish the configuration here, and you can directly click the menu or the following icons to configure it.","setting.platform.right.tips2":"2. If you need to add a new platform, click the left button directly.","setting.platform.right.tips3":"3. At present, we support webpage authorization and API authorization. The complex points of API authorization are relatively stable. The webpage authorization is simple but may fail. Surprise: Webpage authorization mode 100 compatible","setting.platform.right.tips4":"4. If you need to be compatible with other platforms, please contact me","setting.entry.title":"Platform Unified Settings - ","setting.entry.not.supported":"Unsupported platforms","setting.upgrade.syp.tip1":"Ready to start migration ...","setting.upgrade.syp.tip2":"Migration successfully.","setting.upgrade.syp.tip3":"It is already the latest, no need to migrate.","setting.upgrade.syp.tip4":"Migration failed, the error is as follows","setting.upgrade.syp.tip5":"The migration operation is completed.","setting.upgrade.syp.doTip1":"Detect whether the configuration file is the latest version","setting.upgrade.syp.doTip2":"Detected old configuration, preparation to upgrade the configuration file","setting.upgrade.syp.doTip3":"Old configuration upgraded","setting.upgrade.syp.doTip4":"No update for version, skip upgrade","main.publish.start":"Start syncing","main.publish.remove":"Remove","setting.blog.knowledge.space":"Knowledge space/Knowledge base","main.data.empty":"No data","knowledgeSpaceEnabled.Tips":"After validation, a list of available knowledge spaces is listed, and you can modify the default knowledge spaces as needed and save them","post.bind.auto.tips":"The ID here is automatically saved by the publishing tool, if you are not clear about the principle, please do not modify it","siyuan.config.setting":"Source settings","setting.blog.siyuan.apiurl":"Siyuan API","setting.blog.siyuan.apiurl.tip":"The API address of Siyuan Note, including ports, The default address of Siyuan API is: http://127.0.0.1;6806","setting.blog.siyuan.password":"Siyuan Token","setting.blog.siyuan.password.tip":"Siyuan Token, which is empty by default","slogan.make.written.fun":"Let creation return to fun","category.batch.not.supported":"Note: Some platforms in the bulk distribution mode do not support public classification, such as Yuque and Zhihu","yuque.edit.cate.no.change":"Due to the limitations of the Yuque platform, editing the knowledge base is not supported at the moment. If you want to move a document, click Undelete and then select the new knowledge base publication again","main.commonn.cate.title":"Public category","main.cate.new":"New category","pref.setting.aicode":"ChatGPT request key","pref.setting.aicode.tip":"ChatGPT request key or third-party proxy key, if it is a proxy key, please set the request address","pref.setting.ai.baseurl":"ChatGPT request address","pref.setting.ai.baseurl.tip":"The ChatGPT request address, if it is official ChatGPT, can be left blank","preference.setting.removeWidgetTag":"Remove the widget HTML","pref.setting.ai.proxy.url":"ChatGPT proxy address","pref.setting.ai.proxy.url.tip":"Can be left blank, note: Filling in the proxy will ignore the ChatGPT request address","main.auto.fetch.title":"Auto fetch title","main.auto.fetch.cate":"Auto fetch category","category.ai.hand":"Due to inconsistent classification systems across platforms, classifications need to be calibrated manually and are not automatically saved","category.ai.enabled":"AI is available, please go to the detailed mode to operate","sys.config.ai":"AI configuration","config.ai.use.siyuan":"Inside Siyuan notes, you can directly use Siyuan notes to configure, no configuration is required","setting.blog.yamlLinkEnabled":"YAML permalink","distri.type.overide.warn":"Note: Please use caution when overwriting the selected platform with the current data.","distri.type.merge.warn":"Note: In merge mode, the title and abstract changes are not valid, and the labels and categories are merged with the selected platform data.","preference.setting.keepTitle":"Do not update the original title","preference.setting.ignoreBlockRef":"Ignore block ref","preference.setting.allowChangeSlug":"Allow changing slug","preference.setting.allowChangeSlug.tips":"Warning, the slug is the unique identifier for publishing articles across platforms. If you allow changes, please ensure its uniqueness to avoid publication failure. If you are unsure about this feature, use the default auto-generated slug","setting.blog.gitlab.url.tip":"GitLab homepage, e.g., http://localhost:8002","setting.blog.type.gitlab.user.tip":"Username for GitLab","setting.blog.type.gitlab.token.tip":"Token for GitLab, please refer to the link below for setup and ensure API permissions are granted","setting.blog.gitlab.apiurl.tip":"GitLab API address, usually the same as the homepage","setting.blog.gitlab.previewUrl.tip":"Article preview address, usually the default","main.force.cancel":"Force delete","loading.cost":"Loading cost","preference.setting.showDocQuickMenu":"Show doc menu","preference.setting.showQuickMenu":"Show quick publish","preference.setting.showSingleMenu":"Show normal publish","preference.setting.showBatchMenu":"Show batch publish","preference.setting.showAIMenu":"Show AI menu","preference.setting.showExtendMenu":"Show extend menu","preference.setting.showArticleManageMenu":"Show artile manage menu","message.publish.notShared":"The article has not been shared and therefore cannot be viewed externally. Kindly share the article or preview it within the PC client through the plugin menu.","setting.telegraph.username.label":"Author","setting.telegraph.password.label":"Uuid","setting.telegraph.home.tip":"The primary landing page of the telegra.ph platform typically remains constant at: https://telegra.ph/","setting.telegraph.username.tip":"The individual credited as the author, a detail showcased in the article's specifics, is customizable at will, with the default setting being empty.","setting.telegraph.password.tip":"The uuid pertinent to the current environment. Please note: 1. Anonymous mode automatically retrieves this detail, requiring no manual input; 2. Logging in as a user necessitates the entry of the Cookie's thp_uuid.","setting.telegraph.apiurl.tip":"The designated API endpoint for telegra.ph, routinely established as: https://telegra.ph/","setting.telegraph.previewUrl.tip":"The prescribed pattern for previewing telegra.ph articles commonly follows this structure: /[notebook]/[postid]","setting.telegraph.accessToken.tip":"This item is unnecessary in anonymous mode. For authenticated sessions, please procure the tph_token from the browser post authorization via the TG client. To ensure the sanctity of your privacy, exercise caution against sharing this token with any third party.","setting.telegraph.saveHash.tip":"No need to fill out; automatic retrieval after clicking validation.","setting.telegraph.forceReAuth.tip":"After the authorization information takes effect, uncheck this option, and then reauthorize. Note: Old articles may become uneditable as a result.","setting.telegraph.login.anonymous":"Anonymous","setting.telegraph.login.user":"User","page.loading":"Page is loading...","setting.blog.middlewareUrl.new":"Fresh Proxy (Recommended)","setting.blog.corsAnywhereUrl.tip":"CORS Global Proxy, once configured, helps alleviate browser common-origin issues.","setting.blog.middlewareUrl.my.new.tip":"Enhanced CORS proxy, enabling comprehensive common-origin requests. It is advisable to deploy independently. For deployment guidance, kindly refer to https://github.com/Zibri/cloudflare-cors-anywhere.","reminder.blog.middlewareUrl.my.warning":"A special note: Request limits are set at '100,000 times/day' and '1,000 times/10 minutes'. For the benefit of all, kindly refrain from malicious requests; otherwise, we reserve the right to terminate this proxy service.","platform.new.platform":"It has been observed that there are still [count] internal platforms [platform] awaiting importation. You may utilize the platform importation tool for a bulk import, or alternatively, manually add them from the plugin store.","import.v081.warn":"Given that v0.8.1 is considered a significantly antiquated iteration, this feature may no longer be pertinent. Should you find yourself in need of this functionality, please direct your feedback to youweics@qq.com, and we shall deliberate on its implementation based on demand.","publisher.picbed.service":"Image Hosting Service","publisher.picbed.none":"Not in use","publisher.picbed.picgo":"PicGo Plugin","publisher.picbed.picgo.not.install":"PicGo plugin not detected. You may proceed to the plugin store for installation before enabling it.","publisher.picbed.bundled":"Current Platform","publisher.picbed.recom1":"Strongly Recommended","publisher.picbed.recom2":"Recommended","publisher.post.status":"Article Status","publisher.post.status.publish":"Published","publisher.post.status.draft":"Draft","publisher.post.status.private":"Private","publisher.post.status.future":"Scheduled","publisher.post.password":"Password Protection","publisher.post.password.tip":"Please enter the password for the article; leave blank if not setting one","publisher.post.future":"Scheduled Publishing","setting.platform.halo.v29.only":"Note: Due to changes in the API policy in Halo 2.20+, the original method for this platform is no longer usable. Please import and use the new platform 'Halo web'. If you still need to use this platform, please downgrade your server to Halo 2.9.","setting.haloweb.home.tip":"The URL of your Halo 2.20+ blog homepage","setting.haloweb.password.tip":"Halo's Cookie, do not modify","setting.haloweb.apiUrl.tip":"Usually the same as the URL of your Halo 2.20+ blog homepage","setting.haloweb.previewUrl.tip":"Article preview rule for the Halo web platform","common.help":"View help document","setting.blog.type.fs.store.path":"Storage Path","setting.blog.type.fs.store.path.tip":"Absolute system path where published documents will be stored. Default: Downloads/syp","setting.blog.type.fs.media.path":"Media Storage Path","setting.blog.type.fs.media.path.tip":"Relative path (under Storage Path) for storing assets like images and attachments. Default: assets","setting.blog.type.fs.yaml.type":"YAML Type","setting.blog.type.fs.yaml.type.tip":"Select the YAML format for the local system storage","setting.blog.type.fs.yaml.type.default":"Default","setting.blog.type.fs.yaml.type.hexo":"Hexo","setting.blog.type.fs.yaml.type.hugo":"Hugo","setting.blog.type.fs.yaml.type.jekyll":"Jekyll","setting.blog.type.fs.yaml.type.vuepress":"Vuepress","setting.blog.type.fs.yaml.type.vuepress2":"Vuepress2","setting.blog.type.fs.yaml.type.vitepress":"Vitepress","setting.blog.type.fs.yaml.type.quartz":"Quartz"},yn=zl({legacy:!1,locale:"zh_CN",fallbackLocale:"en_US",messages:{zh_CN:oy,en_US:ay}}),iy={mounted(p,e){const t=br.service({lock:!0,text:e.value.loadText}),o={log:e.value.log||Vt,checkOrigin:e.value.checkOrigin||!1,iframeResizerEnable:e.value.iframeResizerEnable||!0,direction:e.value.direction||"vertical",warningTimeout:e.value.warningTimeout||3e4,license:"GPLv3"};p.addEventListener("load",()=>{Hi(()=>{const s=_r([document.body.offsetWidth,document.body.scrollWidth,document.documentElement.offsetWidth,document.documentElement.scrollWidth]);p.style.height=s+"px",Cr(o,p)})}),p.onload=function(){t.close()}},unmounted(p){const e=p;e.iFrameResizer&&e.iFrameResizer.removeListeners()}},ny=async p=>{const e=jl(zr);e.use(yn);const t=ar();e.use(t);const o=sy();return e.use(o),e.directive("resize",iy),{i18n:yn,router:o,app:e}};(async()=>(await ny()).app.mount("#app"))();
